[{"categories":["PHP","Laravel"],"content":" åŸæ–‡ ","date":"2024å¹´08æœˆ30æ—¥","objectID":"/2024/08/context/:0:0","tags":["PHP","Laravel"],"title":"Laravel 11.x Context","uri":"/2024/08/context/"},{"categories":["PHP","Laravel"],"content":"ä»‹ç» Laravel çš„â€™ä¸Šä¸‹æ–‡â€™åŠŸèƒ½ä½¿ä½ èƒ½å¤Ÿåœ¨åº”ç”¨ç¨‹åºå†…æ•è·ã€æ£€ç´¢å’Œå…±äº«ä¿¡æ¯ï¼Œè¿™äº›ä¿¡æ¯å¯ä»¥è´¯ç©¿äºè¯·æ±‚ã€ä½œä¸šå’Œå‘½ä»¤çš„æ‰§è¡Œè¿‡ç¨‹ä¸­ã€‚è¿™äº›æ•è·çš„ä¿¡æ¯ä¹Ÿä¼šåŒ…å«åœ¨åº”ç”¨ç¨‹åºå†™å…¥çš„æ—¥å¿—ä¸­ï¼Œä½¿ä½ èƒ½å¤Ÿæ›´æ·±å…¥åœ°äº†è§£åœ¨æ—¥å¿—æ¡ç›®å†™å…¥ä¹‹å‰å‘ç”Ÿçš„ä»£ç æ‰§è¡Œå†å²ï¼Œå¹¶å…è®¸ä½ åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­è·Ÿè¸ªæ‰§è¡Œæµç¨‹ã€‚ ","date":"2024å¹´08æœˆ30æ—¥","objectID":"/2024/08/context/:1:0","tags":["PHP","Laravel"],"title":"Laravel 11.x Context","uri":"/2024/08/context/"},{"categories":["PHP","Laravel"],"content":"å®ƒæ˜¯å¦‚ä½•è¿ä½œçš„ äº†è§£Laravelä¸Šä¸‹æ–‡åŠŸèƒ½æœ€ä½³æ–¹æ³•æ˜¯ä½¿ç”¨å†…ç½®æ—¥å¿—è®°å½•åŠŸèƒ½æ¥æŸ¥çœ‹å®ƒçš„å®é™…æƒ…å†µã€‚ é¦–å…ˆï¼Œä½¿ç”¨ContextFacadeå°†ä¿¡æ¯æ·»åŠ åˆ°ä¸Šä¸‹æ–‡ä¸­ï¼›ä¾‹å¦‚ï¼šåœ¨ä¸­é—´ä»¶ä¸­å°†è¯·æ±‚urlå’Œå”¯ä¸€traceIDæ·»åŠ åˆ°æ¯ä¸ªè¯·æ±‚ä¸Šä¸‹æ–‡ä¸­ï¼š \u003c?php namespace App\\Http\\Middleware; use Closure; use Illuminate\\Http\\Request; use Illuminate\\Support\\Facades\\Context; use Illuminate\\Support\\Str; use Symfony\\Component\\HttpFoundation\\Response; class AddContext { /** * Handle an incoming request. */ public function handle(Request $request, Closure $next): Response { Context::add('url', $request-\u003eurl()); Context::add('trace_id', Str::uuid()-\u003etoString()); return $next($request); } } æ·»åŠ åˆ°ä¸Šä¸‹æ–‡ä¸­çš„ä¿¡æ¯ä¼šè‡ªåŠ¨ä½œä¸ºå…ƒæ•°æ®é™„åŠ åˆ°æ•´ä¸ªè¯·æ±‚æœŸé—´å†™å…¥çš„ä»»ä½•æ—¥å¿—æ¡ç›®ä¸­ã€‚å°†ä¸Šä¸‹æ–‡ä½œä¸ºå…ƒæ•°æ®é™„åŠ å…è®¸å°†ä¼ é€’ç»™å•ä¸ªæ—¥å¿—æ¡ç›®çš„ä¿¡æ¯ä¸é€šè¿‡ä¸Šä¸‹æ–‡å…±äº«çš„ä¿¡æ¯åŒºåˆ†å¼€æ¥ã€‚ä¾‹å¦‚ï¼Œå‡è®¾æˆ‘ä»¬å†™å…¥ä»¥ä¸‹æ—¥å¿—æ¡ç›®ï¼š Log::info('User authenticated.', ['auth_id' =\u003e Auth::id()]); å†™å…¥çš„æ—¥å¿—å°†åŒ…å«ä¼ é€’ç»™æ—¥å¿—æ¡ç›®çš„ auth_idï¼Œä½†å®ƒè¿˜ä¼šåŒ…å«ä¸Šä¸‹æ–‡çš„ url å’Œ trace_id ä½œä¸ºå…ƒæ•°æ®ï¼š User authenticated. {\"auth_id\":27} {\"url\":\"https://example.com/login\",\"trace_id\":\"e04e1a11-e75c-4db3-b5b5-cfef4ef56697\"} æ·»åŠ åˆ°ä¸Šä¸‹æ–‡ä¸­çš„ä¿¡æ¯ä¹Ÿä¼šæä¾›ç»™è¢«æ´¾å‘åˆ°é˜Ÿåˆ—ä¸­çš„ä½œä¸šã€‚ä¾‹å¦‚ï¼Œå‡è®¾æˆ‘ä»¬åœ¨æ·»åŠ ä¸€äº›ä¿¡æ¯åˆ°ä¸Šä¸‹æ–‡åæ´¾å‘ä¸€ä¸ª ProcessPodcast ä½œä¸šåˆ°é˜Ÿåˆ—ï¼š // In our middleware... Context::add('url', $request-\u003eurl()); Context::add('trace_id', Str::uuid()-\u003etoString()); // In our controller... ProcessPodcast::dispatch($podcast); å½“ä½œä¸šè¢«æ´¾å‘æ—¶ï¼Œå½“å‰å­˜å‚¨åœ¨ä¸Šä¸‹æ–‡ä¸­çš„æ‰€æœ‰ä¿¡æ¯éƒ½ä¼šè¢«æ•è·å¹¶ä¸ä½œä¸šå…±äº«ã€‚è¿™äº›æ•è·çš„ä¿¡æ¯åœ¨ä½œä¸šæ‰§è¡ŒæœŸé—´ä¼šé‡æ–°æ³¨å…¥åˆ°å½“å‰ä¸Šä¸‹æ–‡ä¸­ã€‚å› æ­¤ï¼Œå¦‚æœæˆ‘ä»¬çš„ä½œä¸šçš„ handle æ–¹æ³•å†™å…¥æ—¥å¿—ï¼š class ProcessPodcast implements ShouldQueue { use Queueable; // ... /** * Execute the job. */ public function handle(): void { Log::info('Processing podcast.', [ 'podcast_id' =\u003e $this-\u003epodcast-\u003eid, ]); // ... } } ç”Ÿæˆçš„æ—¥å¿—æ¡ç›®å°†åŒ…å«åœ¨æœ€åˆæ´¾å‘ä½œä¸šçš„è¯·æ±‚æœŸé—´æ·»åŠ åˆ°ä¸Šä¸‹æ–‡ä¸­çš„ä¿¡æ¯ï¼š Processing podcast. {\"podcast_id\":95} {\"url\":\"https://example.com/login\",\"trace_id\":\"e04e1a11-e75c-4db3-b5b5-cfef4ef56697\"} ","date":"2024å¹´08æœˆ30æ—¥","objectID":"/2024/08/context/:1:1","tags":["PHP","Laravel"],"title":"Laravel 11.x Context","uri":"/2024/08/context/"},{"categories":["PHP","Laravel"],"content":"æ•æ‰ä¸Šä¸‹æ–‡ å¯ä»¥ä½¿ç”¨ContextFacadeçš„addæ–¹æ³•åœ¨å½“å‰ä¸Šä¸‹æ–‡ä¸­å­˜å‚¨ä¿¡æ¯ï¼š use Illuminate\\Support\\Facades\\Context; Context::add('key', 'value'); ä¹Ÿå¯ä»¥å°†å…³è”æ•°ç»„ä¼ é€’ç»™addæ–¹æ³•ï¼Œä»¥ä¾¿ä¸€æ¬¡æ€§æ·»åŠ å¤šä¸ªé¡¹ç›®ï¼š Context::add([ 'first_key' =\u003e 'value', 'second_key' =\u003e 'value', ]); addæ–¹æ³•å°†è¦†ç›–ç›¸åŒé”®çš„å€¼ã€‚å¦‚æœæŒ‡å‘åœ¨é”®ä¸å­˜åœ¨çš„æƒ…å†µä¸‹æ–°å¢ï¼Œåˆ™å¯ä»¥ä½¿ç”¨addIfæ–¹æ³•ï¼š Context::add('key', 'first'); Context::get('key'); // \"first\" Context::addIf('key', 'second'); Context::get('key'); // \"first\" ","date":"2024å¹´08æœˆ30æ—¥","objectID":"/2024/08/context/:2:0","tags":["PHP","Laravel"],"title":"Laravel 11.x Context","uri":"/2024/08/context/"},{"categories":["PHP","Laravel"],"content":"æ¡ä»¶ä¸Šä¸‹æ–‡ whenæ–¹æ³•å¯ç”¨äºæ ¹æ®ç»™å®šæ¡ä»¶å°†æ•°æ®æ·»åŠ åˆ°ä¸Šä¸‹æ–‡ã€‚å¦‚æœç»™å®šçš„æ¡ä»¶ç»“æœä¸ºtrueï¼Œåˆ™å°†è°ƒç”¨æä¾›ç»™whenæ–¹æ³•çš„ç¬¬ä¸€ä¸ªé—­åŒ…ï¼Œè€Œå¦‚æœæ¡ä»¶è®¡ç®—ç»“æœä¸ºfalseï¼Œåˆ™å°†è°ƒç”¨ç¬¬äºŒä¸ªé—­åŒ…ï¼š use Illuminate\\Support\\Facades\\Auth; use Illuminate\\Support\\Facades\\Context; Context::when( Auth::user()-\u003eisAdmin(), fn ($context) =\u003e $context-\u003eadd('permissions', Auth::user()-\u003epermissions), fn ($context) =\u003e $context-\u003eadd('permissions', []), ); ","date":"2024å¹´08æœˆ30æ—¥","objectID":"/2024/08/context/:2:1","tags":["PHP","Laravel"],"title":"Laravel 11.x Context","uri":"/2024/08/context/"},{"categories":["PHP","Laravel"],"content":"å †æ ˆ Contextæä¾›äº†åˆ›å»ºâ€œå †æ ˆâ€çš„èƒ½åŠ›ï¼Œâ€œå †æ ˆâ€æ˜¯æŒ‰æ·»åŠ é¡ºåºå­˜å‚¨çš„æ•°æ®åˆ—è¡¨ã€‚å¯ä»¥é€šè¿‡è°ƒç”¨pushæ–¹æ³•å‘å †æ ˆæ·»åŠ ä¿¡æ¯ï¼š use Illuminate\\Support\\Facades\\Context; Context::push('breadcrumbs', 'first_value'); Context::push('breadcrumbs', 'second_value', 'third_value'); Context::get('breadcrumbs'); // [ // 'first_value', // 'second_value', // 'third_value', // ] å †æ ˆå¯¹äºæ•è·è¯·æ±‚çš„å†å²ä¿¡æ¯éå¸¸æœ‰ç”¨ï¼Œä¾‹å¦‚åº”ç”¨ç¨‹åºä¸­å‘ç”Ÿçš„äº‹ä»¶ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥åˆ›å»ºä¸€ä¸ªäº‹ä»¶ç›‘å¬å™¨ï¼Œåœ¨æ¯æ¬¡æ‰§è¡ŒæŸ¥è¯¢æ—¶å°†ä¿¡æ¯å‹å…¥å †æ ˆï¼Œæ•è·æŸ¥è¯¢çš„ SQL å’Œæ‰§è¡Œçš„æ—¶é—´ä½œä¸ºä¸€ä¸ªå…ƒç»„ï¼š use Illuminate\\Support\\Facades\\Context; use Illuminate\\Support\\Facades\\DB; DB::listen(function ($event) { Context::push('queries', [$event-\u003etime, $event-\u003esql]); }); å¯ä»¥ä½¿ç”¨stackContainså’ŒhiddenStackContainsæ–¹æ³•ç¡®å®šæŸä¸ªå€¼æ˜¯å¦åœ¨å †æ ˆä¸­ï¼š if (Context::stackContains('breadcrumbs', 'first_value')) { // } if (Context::hiddenStackContains('secrets', 'first_value')) { // } stackContainså’ŒhiddenStackContainsæ–¹æ³•è¿˜æ¥å—é—­åŒ…ä½œä¸ºå…¶ç¬¬äºŒä¸ªå‚æ•°ï¼Œä»è€Œå…è®¸å¯¹å€¼æ¯”è¾ƒæ“ä½œè¿›è¡Œæ›´å¤šæ§åˆ¶ï¼š use Illuminate\\Support\\Facades\\Context; use Illuminate\\Support\\Str; return Context::stackContains('breadcrumbs', function ($value) { return Str::startsWith($value, 'query_'); }); ","date":"2024å¹´08æœˆ30æ—¥","objectID":"/2024/08/context/:2:2","tags":["PHP","Laravel"],"title":"Laravel 11.x Context","uri":"/2024/08/context/"},{"categories":["PHP","Laravel"],"content":"æ£€ç´¢ä¸Šä¸‹æ–‡ ä½¿ç”¨Contextçš„getæ–¹æ³•ä»ä¸Šä¸‹æ–‡ä¸­æ£€ç´¢ä¿¡æ¯ï¼š use Illuminate\\Support\\Facades\\Context; $value = Context::get('key'); onlyæ–¹æ³•å¯ç”¨äºæ£€ç´¢ä¸Šä¸‹æ–‡ä¸­çš„ä¿¡æ¯å­é›†ï¼š $data = Context::only(['first_key', 'second_key']); pullæ–¹æ³•å¯ç”¨äºä»ä¸Šä¸‹æ–‡ä¸­æ£€ç´¢ä¿¡æ¯å¹¶ç«‹å³å°†å…¶ä»ä¸Šä¸‹æ–‡ä¸­åˆ é™¤ï¼š $value = Context::pull('key'); allæ£€ç´¢å­˜å‚¨åœ¨ä¸Šä¸‹æ–‡ä¸­çš„æ‰€æœ‰ä¿¡æ¯ï¼š $data = Context::all(); ","date":"2024å¹´08æœˆ30æ—¥","objectID":"/2024/08/context/:3:0","tags":["PHP","Laravel"],"title":"Laravel 11.x Context","uri":"/2024/08/context/"},{"categories":["PHP","Laravel"],"content":"ç¡®å®šé¡¹ç›®æ˜¯å¦å­˜åœ¨ hasæ–¹æ³•ç”¨æ¥ç¡®å®šä¸Šä¸‹æ–‡æ˜¯å¦å­˜åœ¨ç»™å®šé”®ï¼š use Illuminate\\Support\\Facades\\Context; if (Context::has('key')) { // ... } æ— è®ºå€¼æ˜¯ä»€ä¹ˆï¼Œhaséƒ½ä¼šè¿”å›trueã€‚å› æ­¤ï¼Œnullå€¼ä¹Ÿå°†è¢«è§†ä¸ºå­˜åœ¨ ","date":"2024å¹´08æœˆ30æ—¥","objectID":"/2024/08/context/:3:1","tags":["PHP","Laravel"],"title":"Laravel 11.x Context","uri":"/2024/08/context/"},{"categories":["PHP","Laravel"],"content":"åˆ é™¤ä¸Šä¸‹æ–‡ forgetæ–¹æ³•ç”¨äºä»å½“å‰ä¸Šä¸‹æ–‡ä¸­åˆ é™¤é”®å€¼ï¼š use Illuminate\\Support\\Facades\\Context; Context::add(['first_key' =\u003e 1, 'second_key' =\u003e 2]); Context::forget('first_key'); Context::all(); // ['second_key' =\u003e 2] ä¹Ÿå¯ä»¥å‘forgetæ–¹æ³•æä¾›ä¸€ä¸ªæ•°ç»„ï¼Œä¸€æ¬¡æ€§åˆ é™¤å¤šä¸ªé”®å€¼ï¼š Context::forget(['first_key', 'second_key']); ","date":"2024å¹´08æœˆ30æ—¥","objectID":"/2024/08/context/:4:0","tags":["PHP","Laravel"],"title":"Laravel 11.x Context","uri":"/2024/08/context/"},{"categories":["PHP","Laravel"],"content":"éšè—ä¸Šä¸‹æ–‡ Contextæä¾›äº†å­˜å‚¨â€œéšè—â€æ•°æ®çš„Englishã€‚æ¬¡éšè—ä¿¡æ¯ä¸å›é™„åŠ åˆ°æ—¥å¿—ä¸­ï¼Œå¹¶ä¸”æ— æ³•é€šè¿‡ä¸Šé¢è®°å½•çš„æ•°æ®æ£€ç´¢æ–¹æ³•è®¿é—®ã€‚Contextæä¾›äº†ä¸€ç»„ä¸åŒçš„æ–¹æ³•æ¥ä¸éšè—çš„ä¸Šä¸‹æ–‡ä¿¡æ¯è¿›è¡Œäº¤äº’ï¼š use Illuminate\\Support\\Facades\\Context; Context::addHidden('key', 'value'); Context::getHidden('key'); // 'value' Context::get('key'); // null â€˜éšè—â€™æ–¹æ³•çš„åŠŸèƒ½ä¸ä¸Šé¢æ–‡æ¡£ä¸­è®°å½•çš„ééšè—æ–¹æ³•ç›¸åŒï¼š Context::addHidden(/* ... */); Context::addHiddenIf(/* ... */); Context::pushHidden(/* ... */); Context::getHidden(/* ... */); Context::pullHidden(/* ... */); Context::onlyHidden(/* ... */); Context::allHidden(/* ... */); Context::hasHidden(/* ... */); Context::forgetHidden(/* ... */); ","date":"2024å¹´08æœˆ30æ—¥","objectID":"/2024/08/context/:5:0","tags":["PHP","Laravel"],"title":"Laravel 11.x Context","uri":"/2024/08/context/"},{"categories":["PHP","Laravel"],"content":"Events ä¸Šä¸‹æ–‡æ´¾å‘äº†ä¸¤ä¸ªäº‹ä»¶ï¼Œè¿™äº›äº‹ä»¶å…è®¸ä½ é’©å…¥ä¸Šä¸‹æ–‡çš„æ³¨å…¥å’Œé‡Šæ”¾è¿‡ç¨‹ã€‚ ä¸ºäº†è¯´æ˜å¦‚ä½•ä½¿ç”¨è¿™äº›äº‹ä»¶ï¼Œå‡è®¾åœ¨åº”ç”¨ç¨‹åºçš„ä¸€ä¸ªä¸­é—´ä»¶ä¸­ï¼Œä½ æ ¹æ®ä¼ å…¥ HTTP è¯·æ±‚çš„ Accept-Language å¤´è®¾ç½® app.locale é…ç½®å€¼ã€‚ä¸Šä¸‹æ–‡çš„äº‹ä»¶å…è®¸ä½ åœ¨è¯·æ±‚æœŸé—´æ•è·è¿™ä¸ªå€¼å¹¶åœ¨é˜Ÿåˆ—ä¸Šæ¢å¤å®ƒï¼Œä»è€Œç¡®ä¿åœ¨é˜Ÿåˆ—ä¸Šå‘é€çš„é€šçŸ¥å…·æœ‰æ­£ç¡®çš„ app.locale å€¼ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸Šä¸‹æ–‡çš„äº‹ä»¶å’Œéšè—æ•°æ®æ¥å®ç°è¿™ä¸€ç‚¹ï¼Œä¸‹é¢çš„æ–‡æ¡£å°†å¯¹æ­¤è¿›è¡Œè¯´æ˜ã€‚ ","date":"2024å¹´08æœˆ30æ—¥","objectID":"/2024/08/context/:6:0","tags":["PHP","Laravel"],"title":"Laravel 11.x Context","uri":"/2024/08/context/"},{"categories":["PHP","Laravel"],"content":"é‡Šæ”¾ æ¯å½“ä¸€ä¸ªä½œä¸šè¢«æ´¾å‘åˆ°é˜Ÿåˆ—æ—¶ï¼Œä¸Šä¸‹æ–‡ä¸­çš„æ•°æ®ä¼šè¢«â€™é‡Šæ”¾â€™å¹¶ä¸ä½œä¸šçš„æœ‰æ•ˆè´Ÿè½½ä¸€èµ·æ•è·ã€‚Context::dehydrating æ–¹æ³•å…è®¸ä½ æ³¨å†Œä¸€ä¸ªé—­åŒ…ï¼Œè¯¥é—­åŒ…å°†åœ¨é‡Šæ”¾è¿‡ç¨‹ä¸­è¢«è°ƒç”¨ã€‚åœ¨è¿™ä¸ªé—­åŒ…ä¸­ï¼Œä½ å¯ä»¥å¯¹å°†ä¸é˜Ÿåˆ—ä½œä¸šå…±äº«çš„æ•°æ®è¿›è¡Œä¿®æ”¹ã€‚ é€šå¸¸ï¼Œä½ åº”è¯¥åœ¨åº”ç”¨ç¨‹åºçš„ AppServiceProvider ç±»çš„ boot æ–¹æ³•ä¸­æ³¨å†Œ dehydrating å›è°ƒï¼š use Illuminate\\Log\\Context\\Repository; use Illuminate\\Support\\Facades\\Config; use Illuminate\\Support\\Facades\\Context; /** * Bootstrap any application services. */ public function boot(): void { Context::dehydrating(function (Repository $context) { $context-\u003eaddHidden('locale', Config::get('app.locale')); }); } psï¼šä½ ä¸åº”è¯¥åœ¨ dehydrating å›è°ƒä¸­ä½¿ç”¨ Context facadeï¼Œå› ä¸ºé‚£ä¼šæ”¹å˜å½“å‰è¿›ç¨‹çš„ä¸Šä¸‹æ–‡ã€‚ç¡®ä¿ä½ åªå¯¹ä¼ é€’ç»™å›è°ƒçš„ä»“åº“è¿›è¡Œæ›´æ”¹ã€‚ ","date":"2024å¹´08æœˆ30æ—¥","objectID":"/2024/08/context/:6:1","tags":["PHP","Laravel"],"title":"Laravel 11.x Context","uri":"/2024/08/context/"},{"categories":["PHP","Laravel"],"content":"æ³¨å…¥ æ¯å½“ä¸€ä¸ªé˜Ÿåˆ—ä½œä¸šå¼€å§‹åœ¨é˜Ÿåˆ—ä¸Šæ‰§è¡Œæ—¶ï¼Œæ‰€æœ‰ä¸ä½œä¸šå…±äº«çš„ä¸Šä¸‹æ–‡å°†è¢«é‡æ–°â€˜æ³¨å…¥â€™åˆ°å½“å‰ä¸Šä¸‹æ–‡ä¸­ã€‚Context::hydrated æ–¹æ³•å…è®¸ä½ æ³¨å†Œä¸€ä¸ªé—­åŒ…ï¼Œè¯¥é—­åŒ…å°†åœ¨æ³¨å…¥è¿‡ç¨‹ä¸­è¢«è°ƒç”¨ã€‚ é€šå¸¸ï¼Œä½ åº”è¯¥åœ¨åº”ç”¨ç¨‹åºçš„ AppServiceProvider ç±»çš„ boot æ–¹æ³•ä¸­æ³¨å†Œ hydrated å›è°ƒï¼š use Illuminate\\Log\\Context\\Repository; use Illuminate\\Support\\Facades\\Config; use Illuminate\\Support\\Facades\\Context; /** * Bootstrap any application services. */ public function boot(): void { Context::hydrated(function (Repository $context) { if ($context-\u003ehasHidden('locale')) { Config::set('app.locale', $context-\u003egetHidden('locale')); } }); } psï¼šä½ ä¸åº”è¯¥åœ¨ hydrated å›è°ƒä¸­ä½¿ç”¨ Context facadeï¼Œè€Œåº”ç¡®ä¿åªå¯¹ä¼ é€’ç»™å›è°ƒçš„ä»“åº“è¿›è¡Œæ›´æ”¹ã€‚ ","date":"2024å¹´08æœˆ30æ—¥","objectID":"/2024/08/context/:6:2","tags":["PHP","Laravel"],"title":"Laravel 11.x Context","uri":"/2024/08/context/"},{"categories":["PHP","Laravel"],"content":" åŸæ–‡ ","date":"2024å¹´08æœˆ29æ—¥","objectID":"/2024/08/collections/:0:0","tags":["PHP","Laravel"],"title":"Laravel 11.x Collections","uri":"/2024/08/collections/"},{"categories":["PHP","Laravel"],"content":"ä»‹ç» Illuminate\\Support\\Collectionç±»ä¸ºå¤„ç†æ•°æ®æ•°ç»„æä¾›äº†ä¸€ä¸ªæµç•…ã€æ–¹ä¾¿çš„åŒ…è£…ã€‚ ä¾‹å¦‚ï¼Œä»¥ä¸‹ä»£ç å°†ä½¿ç”¨collectè¾…åŠ©å‡½æ•°ä»æ•°ç»„åˆ›å»ºä¸€ä¸ªæ–°çš„é›†åˆå®ä¾‹ï¼Œå¯¹æ¯ä¸ªå…ƒç´ è¿è¡Œstrtoupperå‡½æ•°ï¼Œç„¶åç§»é™¤æ‰€æœ‰ç©ºå…ƒç´ ï¼š $collection = collect(['taylor', 'abigail', null])-\u003emap(function (?string $name) { return strtoupper($name); })-\u003ereject(function (string $name) { return empty($name); }); å¦‚ä¸Šæ‰€è§ï¼ŒCollectionç±»å…è®¸ä½ é“¾å¼è°ƒç”¨å…¶æ–¹æ³•ï¼Œä»¥å¯¹åº•å±‚æ•°ç»„è¿›è¡Œæµç•…çš„æ˜ å°„å’Œç®€åŒ–ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œé›†åˆæ˜¯ä¸å¯å˜çš„ï¼Œè¿™æ„å‘³ç€æ¯ä¸ªCollectionæ–¹æ³•éƒ½ä¼šè¿”å›ä¸€ä¸ªå…¨æ–°çš„Collectionå®ä¾‹ã€‚ ","date":"2024å¹´08æœˆ29æ—¥","objectID":"/2024/08/collections/:1:0","tags":["PHP","Laravel"],"title":"Laravel 11.x Collections","uri":"/2024/08/collections/"},{"categories":["PHP","Laravel"],"content":"åˆ›å»ºé›†åˆ collectè¾…åŠ©å‡½æ•°ä¸ºç»™å®šæ•°ç»„è¿”å›ä¸€ä¸ªæ–°çš„Illuminate\\Support\\Collectionå®ä¾‹ã€‚ $collection = collect([1, 2, 3]); ps: Eloquent æŸ¥è¯¢çš„ç»“æœå§‹ç»ˆä½œä¸º Collection å®ä¾‹è¿”å›ã€‚ ","date":"2024å¹´08æœˆ29æ—¥","objectID":"/2024/08/collections/:1:1","tags":["PHP","Laravel"],"title":"Laravel 11.x Collections","uri":"/2024/08/collections/"},{"categories":["PHP","Laravel"],"content":"æ‰©å±•é›†åˆ é›†åˆæ˜¯ â€˜å¯å®åŒ–çš„â€™ï¼Œè¿™å…è®¸ä½ åœ¨è¿è¡Œæ—¶ä¸º Collection ç±»æ·»åŠ å…¶ä»–æ–¹æ³•ã€‚Illuminate\\Support\\Collection ç±»çš„ macro æ–¹æ³•æ¥å—ä¸€ä¸ªé—­åŒ…ï¼Œè¯¥é—­åŒ…å°†åœ¨ä½ çš„å®è¢«è°ƒç”¨æ—¶æ‰§è¡Œã€‚å®é—­åŒ…å¯ä»¥é€šè¿‡ $this è®¿é—®é›†åˆçš„å…¶ä»–æ–¹æ³•ï¼Œå°±åƒå®ƒæ˜¯çœŸæ­£çš„é›†åˆç±»æ–¹æ³•ä¸€æ ·ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹ä»£ç ä¸º Collection ç±»æ·»åŠ äº†ä¸€ä¸ª toUpper æ–¹æ³•ï¼š use Illuminate\\Support\\Collection; use Illuminate\\Support\\Str; Collection::macro('toUpper', function () { return $this-\u003emap(function (string $value) { return Str::upper($value); }); }); $collection = collect(['first', 'second']); $upper = $collection-\u003etoUpper(); // ['FIRST', 'SECOND'] é€šå¸¸ï¼Œåº”è¯¥åœ¨æœåŠ¡æä¾›å•†çš„ boot æ–¹æ³•ä¸­å£°æ˜é›†åˆå®ã€‚ Macro å‚æ•° å¯ä»¥å®šä¹‰æ¥å—å…¶ä»–å‚æ•°çš„å®ï¼š use Illuminate\\Support\\Collection; use Illuminate\\Support\\Facades\\Lang; Collection::macro('toLocale', function (string $locale) { return $this-\u003emap(function (string $value) use ($locale) { return Lang::get($value, [], $locale); }); }); $collection = collect(['first', 'second']); $translated = $collection-\u003etoLocale('es'); ","date":"2024å¹´08æœˆ29æ—¥","objectID":"/2024/08/collections/:1:2","tags":["PHP","Laravel"],"title":"Laravel 11.x Collections","uri":"/2024/08/collections/"},{"categories":["PHP","Laravel"],"content":"å¯ç”¨æ–¹æ³• æ–¹æ³• è¯´æ˜ after() è¿”å›ç»™å®šé¡¹ä¹‹åçš„é¡¹ã€‚å¦‚æœç»™å®šé¡¹æœªæ‰¾åˆ°æˆ–è€…å®ƒæ˜¯æœ€åä¸€é¡¹ï¼Œåˆ™è¿”å› null $collection = collect([1, 2, 3, 4, 5]); $collection-\u003eafter(3); // 4 $collection-\u003eafter(5); // null æ­¤æ–¹æ³•ä½¿ç”¨â€™å®½æ¾â€™æ¯”è¾ƒæ¥æœç´¢ç»™å®šé¡¹ï¼Œè¿™æ„å‘³ç€åŒ…å«æ•´æ•°å€¼çš„å­—ç¬¦ä¸²å°†è¢«è§†ä¸ºä¸ç›¸åŒå€¼çš„æ•´æ•°ç›¸ç­‰ã€‚è¦ä½¿ç”¨â€™ä¸¥æ ¼â€™æ¯”è¾ƒï¼Œä½ å¯ä»¥å‘æ–¹æ³•æä¾› strict å‚æ•°ï¼š collect([2, 4, 6, 8])-\u003eafter('4', strict: true); // null æˆ–è€…ï¼Œä½ å¯ä»¥æä¾›è‡ªå·±çš„é—­åŒ…æ¥æœç´¢é€šè¿‡ç»™å®šçœŸå€¼æµ‹è¯•çš„ç¬¬ä¸€ä¸ªé¡¹ï¼š collect([2, 4, 6, 8])-\u003eafter(function (int $item, int $key) { return $item \u003e 5; }); // 8 all() è¿”å›é›†åˆè¡¨ç¤ºçš„åŸºç¡€æ•°ç»„ collect([1, 2, 3])-\u003eall(); // [1, 2, 3] average() avgæ–¹æ³•çš„åˆ«å avg() è¿”å›ç»™å®šé”®çš„å¹³å‡å€¼ $average = collect([ ['foo' =\u003e 10], ['foo' =\u003e 10], ['foo' =\u003e 20], ['foo' =\u003e 40] ])-\u003eavg('foo'); // 20 $average = collect([1, 1, 2, 4])-\u003eavg(); // 2 before() è¿”å›ç»™å®šé¡¹ç›®ä¹‹å‰çš„é¡¹ç›®ã€‚å¦‚æœæœªæ‰¾åˆ°ç»™å®šçš„é¡¹è´§ä½ç¬¬ä¸€é¡¹ï¼Œåˆ™è¿”å›null $collection = collect([1, 2, 3, 4, 5]); $collection-\u003ebefore(3); // 2 $collection-\u003ebefore(1); // null collect([2, 4, 6, 8])-\u003ebefore('4', strict: true); // null collect([2, 4, 6, 8])-\u003ebefore(function (int $item, int $key) { return $item \u003e 5; }); // 4 chunk() å°†é›†åˆåˆ†è§£ä¸ºå¤šä¸ªç»™å®šå¤§å°çš„è¾ƒå°é›†åˆ $collection = collect([1, 2, 3, 4, 5, 6, 7]); $chunks = $collection-\u003echunk(4); $chunks-\u003eall(); // [[1, 2, 3, 4], [5, 6, 7]] chunkWhile() åŸºäºç»™å®šå›è°ƒçš„è¯„ä¼°å°†é›†åˆåˆ†è§£ä¸ºå¤šä¸ªè¾ƒå°çš„é›†åˆã€‚ä¼ é€’ç»™é—­åŒ…çš„ $chunk å˜é‡å¯ä»¥ç”¨äºæ£€æŸ¥å‰ä¸€ä¸ªå…ƒç´  $collection = collect(str_split('AABBCCCD')); $chunks = $collection-\u003echunkWhile(function (string $value, int $key, Collection $chunk) { return $value === $chunk-\u003elast(); }); $chunks-\u003eall(); // [['A', 'A'], ['B', 'B'], ['C', 'C', 'C'], ['D']] collapse() å°†æ•°ç»„çš„é›†åˆæŠ˜å æˆä¸€ä¸ªå•ä¸€çš„ã€æ‰å¹³çš„é›†åˆ $collection = collect([ [1, 2, 3], [4, 5, 6], [7, 8, 9], ]); $collapsed = $collection-\u003ecollapse(); $collapsed-\u003eall(); // [1, 2, 3, 4, 5, 6, 7, 8, 9] collect() è¿”å›ä¸€ä¸ªæ–°çš„ Collection å®ä¾‹ï¼Œå…¶ä¸­åŒ…å«å½“å‰åœ¨é›†åˆä¸­çš„é¡¹ç›® $collectionA = collect([1, 2, 3]); $collectionB = $collectionA-\u003ecollect(); $collectionB-\u003eall(); // [1, 2, 3] collectæ–¹æ³•ä¸»è¦ç”¨äºå°†æƒ°æ€§é›†åˆè½¬åŒ–ä¸ºæ ‡å‡†Collectionå®ä¾‹ï¼š $lazyCollection = LazyCollection::make(function () { yield 1; yield 2; yield 3; }); $collection = $lazyCollection-\u003ecollect(); $collection::class; // 'Illuminate\\Support\\Collection' $collection-\u003eall(); // [1, 2, 3] psï¼šå½“ä½ æœ‰ä¸€ä¸ª Enumerable å®ä¾‹å¹¶ä¸”éœ€è¦ä¸€ä¸ªéæƒ°æ€§é›†åˆå®ä¾‹æ—¶ï¼Œcollect æ–¹æ³•ç‰¹åˆ«æœ‰ç”¨ã€‚ç”±äº collect() æ˜¯ Enumerable åˆçº¦çš„ä¸€éƒ¨åˆ†ï¼Œå› æ­¤æ‚¨å¯ä»¥å®‰å…¨åœ°ä½¿ç”¨å®ƒæ¥è·å– Collection å®ä¾‹ã€‚ combine() å°†é›†åˆçš„å€¼ä½œä¸ºé”®ä¸å¦ä¸€ä¸ªæ•°ç»„æˆ–é›†åˆå€¼ç»„åˆåœ¨ä¸€èµ· $collection = collect(['name', 'age']); $combined = $collection-\u003ecombine(['George', 29]); $combined-\u003eall(); // ['name' =\u003e 'George', 'age' =\u003e 29] concat() å°†ç»™å®šæ•°ç»„æˆ–é›†åˆçš„å€¼é™„åŠ åˆ°å¦ä¸€ä¸ªé›†åˆçš„æœ«å°¾ $collection = collect(['John Doe']); $concatenated = $collection-\u003econcat(['Jane Doe'])-\u003econcat(['name' =\u003e 'Johnny Doe']); $concatenated-\u003eall(); // ['John Doe', 'Jane Doe', 'Johnny Doe'] contains() ç¡®å®šé›†åˆä¸­æ˜¯å¦åŒ…å«ç»™å®šçš„é¡¹ç›®ã€‚å¯ä»¥å°†ä¸€ä¸ªé—­åŒ…ä¼ é€’ç»™containsæ–¹æ³•ï¼Œä»¥ç¡®å®šé›†åˆä¸­æ˜¯å¦å­˜åœ¨ä¸ç»™å®šçœŸå€¼æµ‹è¯•åŒ¹é…çš„å…ƒç´  $collection = collect([1, 2, 3, 4, 5]); $collection-\u003econtains(function (int $value, int $key) { return $value \u003e 5; }); // false å¯ä»¥å°†å­—ç¬¦ä¸²ä¼ é€’ç»™ contains æ–¹æ³•ï¼Œä»¥ç¡®å®šé›†åˆæ˜¯å¦åŒ…å«ç»™å®šçš„ item å€¼ï¼š $collection = collect(['name' =\u003e 'Desk', 'price' =\u003e 100]); $collection-\u003econtains('Desk'); // true $collection-\u003econtains('New York'); // false ä¹Ÿå¯ä»¥å°†ä¸€ä¸ªé”®/å€¼å¯¹ä¼ é€’ç»™ contains æ–¹æ³•ï¼Œè¯¥æ–¹æ³•å°†ç¡®å®šç»™å®šçš„å¯¹æ˜¯å¦å­˜åœ¨äºé›†åˆä¸­ï¼š $collection = collect([ ['product' =\u003e 'Desk', 'price' =\u003e 200], ['product' =\u003e 'Chair', 'price' =\u003e 100], ]); $collection-\u003econtains('product', 'Bookcase'); // false contains æ–¹æ³•åœ¨æ£€æŸ¥é¡¹å€¼æ—¶ä½¿ç”¨â€™å®½æ¾â€™æ¯”è¾ƒï¼Œè¿™æ„å‘³ç€åŒ…å«æ•´æ•°å€¼çš„å­—ç¬¦ä¸²å°†è¢«è§†ä¸ºä¸ç›¸åŒå€¼çš„æ•´æ•°ç›¸ç­‰ã€‚ä½¿ç”¨ containsStrict æ–¹æ³•å¯ä»¥ä½¿ç”¨â€™ä¸¥æ ¼â€™æ¯”è¾ƒè¿›è¡Œç­›é€‰ã€‚ containsOneItem() ç¡®å®šé›†åˆæ˜¯å¦åŒ…å«å•ä¸ªé¡¹ç›® collect([])-\u003econtainsOneItem(); // false collect(['1'])-\u003econtainsOneItem(); // true collect(['1', '2'])-\u003econtainsOneItem(); // false containsStrict() æ­¤æ–¹æ³•ä¸ contains æ–¹æ³•å…·æœ‰ç›¸åŒçš„ç­¾åï¼›ç„¶è€Œï¼Œæ‰€æœ‰å€¼éƒ½ä½¿ç”¨â€™ä¸¥æ ¼â€™æ¯”è¾ƒè¿›è¡Œæ¯”è¾ƒã€‚ count() è¿”å›é›†åˆä¸­çš„é¡¹ç›®æ€»æ•° $collection = collect([1, 2, 3, 4]); $collection-\u003ecount(); // 4 countBy() è®¡ç®—é›†åˆä¸­å€¼çš„å‡ºç°æ¬¡æ•° $collection = collect([1, 2, 2, 2, 3]); $counted = $collection-\u003ecountBy(); $counted-\u003eall(); // [1 =\u003e 1, 2 =\u003e 3, 3 =\u003e 1] // å°†ä¸€ä¸ªé—­åŒ…ä¼ é€’ç»™countByæ–¹æ³•ï¼Œä»¥æŒ‰è‡ªå®šä¹‰å€¼å¯¹æ‰€æœ‰é¡¹ç›®è¿›è¡Œè®¡æ•° $collection = collect(['alice@gmail.com', 'bob@yahoo.com', 'carlos@gmail.com']); $counted = $collection-\u003ecountBy(function (string $email) { return substr(strrchr($email, \"@\"), 1); }); $counted-\u003eall(); // ['gmail.com' =\u003e 2, 'yahoo.com' =\u003e 1] crossJoin() åœ¨ç»™å®šæ•°ç»„æˆ–é›†åˆä¹‹é—´äº¤å‰è¿æ¥é›†åˆçš„å€¼ï¼Œè¿”å›å…·æœ‰æ‰€æœ‰å¯èƒ½æ’åˆ—çš„ç¬›å¡å°”ç§¯\u003c $collection = collect([1, 2]); $matrix = $collecti","date":"2024å¹´08æœˆ29æ—¥","objectID":"/2024/08/collections/:2:0","tags":["PHP","Laravel"],"title":"Laravel 11.x Collections","uri":"/2024/08/collections/"},{"categories":["PHP","Laravel"],"content":"é«˜é˜¶æ¶ˆæ¯ï¼ˆhigher order messagesï¼‰ é›†åˆè¿˜æ”¯æŒâ€™é«˜çº§æ¶ˆæ¯ï¼ˆhigher order messagesï¼‰â€™ï¼Œè¿™äº›æ˜¯ç”¨äºå¯¹é›†åˆæ‰§è¡Œå¸¸è§æ“ä½œçš„å¿«æ·æ–¹å¼ã€‚æä¾›é«˜çº§æ¶ˆæ¯çš„é›†åˆæ–¹æ³•æœ‰ï¼šaverage, avg, contains, each, every, filter, first, flatMap, groupBy, keyBy, map, max, min, partition, reject, skipUntil, skipWhile, some, sortBy, sortByDesc, sum, takeUntil, takeWhile, å’Œ uniqueã€‚ æ¯ä¸ªé«˜çº§æ¶ˆæ¯éƒ½å¯ä»¥ä½œä¸ºé›†åˆå®ä¾‹ä¸Šçš„åŠ¨æ€å±æ€§è¿›è¡Œè®¿é—®ã€‚ä¾‹å¦‚ï¼Œè®©æˆ‘ä»¬ä½¿ç”¨ each é«˜çº§æ¶ˆæ¯æ¥å¯¹é›†åˆä¸­çš„æ¯ä¸ªå¯¹è±¡è°ƒç”¨ä¸€ä¸ªæ–¹æ³•ï¼š use App\\Models\\User; $users = User::where('votes', '\u003e', 500)-\u003eget(); $users-\u003eeach-\u003emarkAsVip(); åŒæ ·ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨é«˜é˜¶æ¶ˆæ¯sumæ¥æ”¶é›†ç”¨æˆ·é›†åˆçš„â€œæŠ•ç¥¨â€æ€»æ•°ï¼š $users = User::where('group', 'Development')-\u003eget(); return $users-\u003esum-\u003evotes; ","date":"2024å¹´08æœˆ29æ—¥","objectID":"/2024/08/collections/:3:0","tags":["PHP","Laravel"],"title":"Laravel 11.x Collections","uri":"/2024/08/collections/"},{"categories":["PHP","Laravel"],"content":"Lazyé›†åˆ ","date":"2024å¹´08æœˆ29æ—¥","objectID":"/2024/08/collections/:4:0","tags":["PHP","Laravel"],"title":"Laravel 11.x Collections","uri":"/2024/08/collections/"},{"categories":["PHP","Laravel"],"content":"ä»‹ç» ä¸ºäº†è¡¥å……å·²ç»å¾ˆå¼ºå¤§çš„Collectionç±»ï¼Œ LazyCollectionç±»åˆ©ç”¨ PHP çš„ç”Ÿæˆå™¨æ¥å…è®¸å¤„ç†éå¸¸å¤§çš„æ•°æ®é›†ï¼ŒåŒæ—¶ä¿æŒè¾ƒä½çš„å†…å­˜ä½¿ç”¨ç‡ã€‚ ä¾‹å¦‚ï¼Œå‡è®¾æ‚¨çš„åº”ç”¨ç¨‹åºéœ€è¦å¤„ç†ä¸€ä¸ªå¤š GB çš„æ—¥å¿—æ–‡ä»¶ï¼ŒåŒæ—¶åˆ©ç”¨ Laravel çš„æ”¶é›†æ–¹æ³•æ¥è§£ææ—¥å¿—ã€‚æƒ°æ€§é›†åˆå¯ä»¥ç”¨äºåœ¨ç»™å®šæ—¶é—´ä»…å°†æ–‡ä»¶çš„ä¸€å°éƒ¨åˆ†ä¿ç•™åœ¨å†…å­˜ä¸­ï¼Œè€Œä¸æ˜¯ç«‹å³å°†æ•´ä¸ªæ–‡ä»¶è¯»å…¥å†…å­˜ï¼š use App\\Models\\LogEntry; use Illuminate\\Support\\LazyCollection; LazyCollection::make(function () { $handle = fopen('log.txt', 'r'); while (($line = fgets($handle)) !== false) { yield $line; } })-\u003echunk(4)-\u003emap(function (array $lines) { return LogEntry::fromLines($lines); })-\u003eeach(function (LogEntry $logEntry) { // Process the log entry... }); æˆ–è€…ï¼Œå‡è®¾æ‚¨éœ€è¦è¿­ä»£ 10,000 ä¸ª Eloquent æ¨¡å‹ã€‚å½“ä½¿ç”¨ä¼ ç»Ÿçš„ Laravel é›†åˆæ—¶ï¼Œæ‰€æœ‰ 10,000 ä¸ª Eloquent æ¨¡å‹å¿…é¡»åŒæ—¶åŠ è½½åˆ°å†…å­˜ä¸­ï¼š use App\\Models\\User; $users = User::all()-\u003efilter(function (User $user) { return $user-\u003eid \u003e 500; }); ä½†æ˜¯ï¼ŒæŸ¥è¯¢æ„å»ºå™¨çš„cursoræ–¹æ³•è¿”å›ä¸€ä¸ªLazyCollectionå®ä¾‹ã€‚è¿™å…è®¸æ‚¨ä»ç„¶åªå¯¹æ•°æ®åº“è¿è¡Œä¸€ä¸ªæŸ¥è¯¢ï¼Œè€Œä¸”ä¸€æ¬¡åªå°†ä¸€ä¸ª Eloquent æ¨¡å‹åŠ è½½åˆ°å†…å­˜ä¸­ã€‚åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œç›´åˆ°æˆ‘ä»¬å®é™…å•ç‹¬è¿­ä»£æ¯ä¸ªç”¨æˆ·æ—¶æ‰ä¼šæ‰§è¡Œfilterå›è°ƒï¼Œä»è€Œå¤§å¹…å‡å°‘å†…å­˜ä½¿ç”¨é‡ï¼š use App\\Models\\User; $users = User::cursor()-\u003efilter(function (User $user) { return $user-\u003eid \u003e 500; }); foreach ($users as $user) { echo $user-\u003eid; } ","date":"2024å¹´08æœˆ29æ—¥","objectID":"/2024/08/collections/:4:1","tags":["PHP","Laravel"],"title":"Laravel 11.x Collections","uri":"/2024/08/collections/"},{"categories":["PHP","Laravel"],"content":"åˆ›å»ºæƒ°æ€§é›†åˆ è¦åˆ›å»ºæƒ°æ€§é›†åˆå®ä¾‹ï¼Œåº”è¯¥å°† PHP ç”Ÿæˆå™¨å‡½æ•°ä¼ é€’ç»™é›†åˆçš„makeæ–¹æ³•ï¼š use Illuminate\\Support\\LazyCollection; LazyCollection::make(function () { $handle = fopen('log.txt', 'r'); while (($line = fgets($handle)) !== false) { yield $line; } }); ","date":"2024å¹´08æœˆ29æ—¥","objectID":"/2024/08/collections/:4:2","tags":["PHP","Laravel"],"title":"Laravel 11.x Collections","uri":"/2024/08/collections/"},{"categories":["PHP","Laravel"],"content":"å¯æšä¸¾åˆçº¦ å‡ ä¹Collectionç±»ä¸Šå¯ç”¨çš„æ‰€æœ‰æ–¹æ³•ä¹Ÿå¯åœ¨LazyCollectionç±»ä¸Šä½¿ç”¨ã€‚è¿™ä¸¤ä¸ªç±»éƒ½å®ç°äº†Illuminate\\Support\\Enumerableå¥‘çº¦ï¼Œå®ƒå®šä¹‰äº†ä»¥ä¸‹æ–¹æ³•ï¼š è¯¦ç»†è§é“¾æ¥ğŸ”— ","date":"2024å¹´08æœˆ29æ—¥","objectID":"/2024/08/collections/:4:3","tags":["PHP","Laravel"],"title":"Laravel 11.x Collections","uri":"/2024/08/collections/"},{"categories":["PHP","Laravel"],"content":"æƒ°æ€§é›†åˆæ–¹æ³• é™¤äº†Enumerableåˆçº¦ä¸­å®šä¹‰çš„æ–¹æ³•ä¹‹å¤–ï¼Œ LazyCollectionç±»è¿˜åŒ…å«ä»¥ä¸‹æ–¹æ³•ï¼š takeUntilTimeout() è¿”å›ä¸€ä¸ªæ–°çš„æƒ°æ€§é›†åˆï¼Œå®ƒå°†æšä¸¾æŒ‡å®šæ—¶é—´ä¹‹å‰çš„å€¼ã€‚ä¹‹åï¼Œé›†åˆå°†åœæ­¢æšä¸¾ï¼š $lazyCollection = LazyCollection::times(INF) -\u003etakeUntilTimeout(now()-\u003eaddMinute()); $lazyCollection-\u003eeach(function (int $number) { dump($number); sleep(1); }); // 1 // 2 // ... // 58 // 59 tapEach() è™½ç„¶eachæ–¹æ³•ç«‹å³ä¸ºé›†åˆä¸­çš„æ¯ä¸ªé¡¹ç›®è°ƒç”¨ç»™å®šçš„å›è°ƒï¼Œä½†tapEachæ–¹æ³•ä»…åœ¨é¡¹ç›®è¢«é€ä¸€ä»åˆ—è¡¨ä¸­æ‹‰å‡ºæ—¶è°ƒç”¨ç»™å®šçš„å›è°ƒï¼š // Nothing has been dumped so far... $lazyCollection = LazyCollection::times(INF)-\u003etapEach(function (int $value) { dump($value); }); // Three items are dumped... $array = $lazyCollection-\u003etake(3)-\u003eall(); // 1 // 2 // 3 throttle() å°†é™åˆ¶æƒ°æ€§é›†åˆï¼Œä»¥ä¾¿åœ¨æŒ‡å®šçš„ç§’æ•°åè¿”å›æ¯ä¸ªå€¼ã€‚æ­¤æ–¹æ³•å¯¹äºå¯èƒ½ä¸é™åˆ¶ä¼ å…¥è¯·æ±‚é€Ÿç‡çš„å¤–éƒ¨ API äº¤äº’çš„æƒ…å†µç‰¹åˆ«æœ‰ç”¨ï¼š use App\\Models\\User; User::where('vip', true) -\u003ecursor() -\u003ethrottle(seconds: 1) -\u003eeach(function (User $user) { // Call external API... }); remember() è¿”å›ä¸€ä¸ªæ–°çš„æƒ°æ€§é›†åˆï¼Œå®ƒå°†è®°ä½å·²æšä¸¾çš„ä»»ä½•å€¼ï¼Œå¹¶ä¸”ä¸ä¼šåœ¨åç»­é›†åˆæšä¸¾ä¸­å†æ¬¡æ£€ç´¢å®ƒä»¬ï¼š // No query has been executed yet... $users = User::cursor()-\u003eremember(); // The query is executed... // The first 5 users are hydrated from the database... $users-\u003etake(5)-\u003eall(); // First 5 users come from the collection's cache... // The rest are hydrated from the database... $users-\u003etake(20)-\u003eall(); ","date":"2024å¹´08æœˆ29æ—¥","objectID":"/2024/08/collections/:4:4","tags":["PHP","Laravel"],"title":"Laravel 11.x Collections","uri":"/2024/08/collections/"},{"categories":["PHP","Laravel"],"content":" åŸæ–‡ ","date":"2024å¹´08æœˆ29æ—¥","objectID":"/2024/08/cache/:0:0","tags":["PHP","Laravel"],"title":"Laravel 11.x ç¼“å­˜","uri":"/2024/08/cache/"},{"categories":["PHP","Laravel"],"content":"ä»‹ç» Laravel ä¸ºå„ç§ç¼“å­˜åç«¯æä¾›äº†ä¸€ä¸ªå¯Œæœ‰è¡¨ç°åŠ›çš„ç»Ÿä¸€APIï¼Œå¯ä»¥åˆ©ç”¨å®ƒä»¬æå¿«çš„æ•°æ®æ£€ç´¢å¹¶åŠ å¿«Webåº”ç”¨ç¨‹åºã€‚ ","date":"2024å¹´08æœˆ29æ—¥","objectID":"/2024/08/cache/:1:0","tags":["PHP","Laravel"],"title":"Laravel 11.x ç¼“å­˜","uri":"/2024/08/cache/"},{"categories":["PHP","Laravel"],"content":"é…ç½® ç¼“å­˜é…ç½®æ–‡ä»¶ä½äºconfig/cache.phpã€‚åœ¨æ­¤æ–‡ä»¶ä¸­ï¼Œå¯ä»¥æŒ‡å®šæ•´ä¸ªåº”ç”¨ç¨‹åºé»˜è®¤ä½¿ç”¨çš„ç¼“å­˜å­˜å‚¨ã€‚ Laravelæ”¯æŒå¼€ç®±å³ç”¨çš„Memcachedã€Redisã€DynamoDBå’Œå…³ç³»æ•°æ®åº“ç­‰æµè¡Œçš„ç¼“å­˜åç«¯ã€‚ æ­¤å¤–è¿˜æä¾›åŸºäºæ–‡ä»¶çš„ç¼“å­˜é©±åŠ¨ç¨‹åºï¼Œè€Œarrayå’Œâ€nullâ€œç¼“å­˜é©±åŠ¨ç¨‹åºä¸ºè‡ªåŠ¨åŒ–æµ‹è¯•æä¾›äº†æ–¹ä¾¿çš„ç¼“å­˜åç«¯ã€‚ ç¼“å­˜æ–‡ä»¶è¿˜åŒ…å«äº†å…¶ä»–å„ç§é€‰é¡¹ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒLaravelé…ç½®ä¸ºä½¿ç”¨databaseç¼“å­˜é©±åŠ¨ç¨‹åºï¼Œè¯¥é©±åŠ¨ç¨‹åºå°†åºåˆ—åŒ–çš„ç¼“å­˜å¯¹è±¡å­˜å‚¨åœ¨åº”ç”¨ç¨‹åºçš„æ•°æ®åº“ä¸­ã€‚ ","date":"2024å¹´08æœˆ29æ—¥","objectID":"/2024/08/cache/:2:0","tags":["PHP","Laravel"],"title":"Laravel 11.x ç¼“å­˜","uri":"/2024/08/cache/"},{"categories":["PHP","Laravel"],"content":"é©±åŠ¨ç¨‹åºå…ˆå†³æ¡ä»¶ Database ä½¿ç”¨databaseé«˜é€Ÿç¼“å­˜é©±åŠ¨ç¨‹åºæ—¶ï¼Œéœ€è¦ä¸€ä¸ªæ•°æ®åº“è¡¨æ¥åŒ…å«é«˜é€Ÿç¼“å­˜æ•°æ®ã€‚ é€šå¸¸ï¼Œé»˜è®¤åŒ…å«åœ¨0001_01_01_000001_create_cache_table.phpæ•°æ®åº“è¿ç§»ä¸­ï¼› ä¹Ÿå¯ä»¥ä½¿ç”¨make:cache-tableArtisanå‘½ä»¤æ¥åˆ›å»ºï¼š php artisan make:cache-table php artisan migrate Memcached ä½¿ç”¨Memcachedé©±åŠ¨ç¨‹åºéœ€è¦å®‰è£…Memcached PECL è½¯ä»¶åŒ…ã€‚ å¯ä»¥åœ¨config/cache.phpé…ç½®æ–‡ä»¶ä¸­åˆ—å‡ºæ‰€æœ‰MemcachedæœåŠ¡å™¨ã€‚æ­¤æ–‡ä»¶å·²åŒ…å«ä¸€ä¸ªmemcached.serversæ¡ç›®ï¼š 'memcached' =\u003e [ // ... 'servers' =\u003e [ [ 'host' =\u003e env('MEMCACHED_HOST', '127.0.0.1'), 'port' =\u003e env('MEMCACHED_PORT', 11211), 'weight' =\u003e 100, ], ], ], å¦‚æœéœ€è¦ï¼Œä¹Ÿå¯ä»¥å°†hosté€‰é¡¹è®¾ç½®ä¸ºUNIXå¥—æ¥å­—è·¯å¾„ã€‚å¦‚æœæ‰§è¡Œæ­¤æ“ä½œï¼Œåˆ™portåˆ™åº”è¯¥è®¾ç½®ä¸º0ï¼š 'memcached' =\u003e [ // ... 'servers' =\u003e [ [ 'host' =\u003e '/var/run/memcached/memcached.sock', 'port' =\u003e 0, 'weight' =\u003e 100 ], ], ], Redis ä½¿ç”¨Redisç¼“å­˜æ—¶ï¼Œéœ€è¦é€šè¿‡PECLå®‰è£…PhpRedis PHPæ‰©å±•æˆ–è€…é€šè¿‡Composerå®‰è£…predis/predisåŒ…ï¼ˆ~2.0ï¼‰ DynamoDB åœ¨ä½¿ç”¨DynamoDBç¼“å­˜ä¹‹å‰ï¼Œå¿…é¡»åˆ›å»ºä¸€ä¸ªDynamoDBè¡¨æ¥å­˜å‚¨æ‰€æœ‰ç¼“å­˜çš„æ•°æ®ã€‚ é€šè¿‡ï¼Œè¡¨åº”è¯¥å‘½åä¸ºcacheã€‚ä½†æ˜¯ï¼Œæ ¹æ®ç¼“å­˜é…ç½®æ–‡ä»¶ä¸­stores.dynamodb.tableå€¼æ¥å‘½åæå®¢ï¼Œè¿˜å¯ä»¥é€šè¿‡DYNAMODB_CACHE_TABLEç¯å¢ƒå˜é‡è®¾ç½®è¡¨åã€‚ æ­¤è¡¨è¿˜åº”å…·æœ‰ä¸€ä¸ªå­—ç¬¦ä¸²åˆ†åŒºé”®ï¼Œå…¶åç§°ä¸åº”ç”¨ç¨‹åºçš„ç¼“å­˜é…ç½®æ–‡ä»¶ä¸­çš„stores.dynamodb.attributes.keyé…ç½®é¡¹çš„å€¼ç›¸å¯¹åº”ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œåˆ†åŒºé”®åº”å‘½åä¸ºkeyã€‚ æ¥ä¸‹æ¥ï¼Œéœ€è¦å®‰è£…AWSå¼€å‘å·¥å…·åŒ…ï¼Œä»¥ä¾¿Laravelåº”ç”¨ç¨‹åºä¸DynamoDBé€šä¿¡ï¼š composer require aws/aws-sdk-php æ­¤å¤–ï¼Œåº”ç¡®ä¿ä¸ºDynamoDBç¼“å­˜å­˜å‚¨é…ç½®é€‰æ‹©æä¾›å€¼ã€‚é€šå¸¸ï¼Œè¿™äº›é€‰é¡¹åº”åœ¨åº”ç”¨ç¨‹åºçš„.envé…ç½®æ–‡ä»¶ä¸­å®šä¹‰ï¼š 'dynamodb' =\u003e [ 'driver' =\u003e 'dynamodb', 'key' =\u003e env('AWS_ACCESS_KEY_ID'), 'secret' =\u003e env('AWS_SECRET_ACCESS_KEY'), 'region' =\u003e env('AWS_DEFAULT_REGION', 'us-east-1'), 'table' =\u003e env('DYNAMODB_CACHE_TABLE', 'cache'), 'endpoint' =\u003e env('DYNAMODB_ENDPOINT'), ], ","date":"2024å¹´08æœˆ29æ—¥","objectID":"/2024/08/cache/:2:1","tags":["PHP","Laravel"],"title":"Laravel 11.x ç¼“å­˜","uri":"/2024/08/cache/"},{"categories":["PHP","Laravel"],"content":"ç¼“å­˜ä½¿ç”¨æƒ…å†µ ","date":"2024å¹´08æœˆ29æ—¥","objectID":"/2024/08/cache/:3:0","tags":["PHP","Laravel"],"title":"Laravel 11.x ç¼“å­˜","uri":"/2024/08/cache/"},{"categories":["PHP","Laravel"],"content":"è·å– Cache å®ä¾‹ è¦è·å–ç¼“å­˜å­˜å‚¨å®ä¾‹ï¼Œå¯ä»¥ä½¿ç”¨CacheFacadeï¼Œå®ƒæä¾›äº†å¯¹Laravelç¼“å­˜åˆçº¦çš„åº•å±‚å®ç°çš„æ–¹ä¾¿ã€ç®€æ´çš„è®¿é—®ï¼š \u003c?php namespace App\\Http\\Controllers; use Illuminate\\Support\\Facades\\Cache; class UserController extends Controller { /** * Show a list of all users of the application. */ public function index(): array { $value = Cache::get('key'); return [ // ... ]; } } è®¿é—®å¤šä¸ªç¼“å­˜å‚¨å­˜ å¯ä»¥é€šè¿‡storeæ–¹æ³•è®¿é—®å„ç§ç¼“å­˜å­˜å‚¨ã€‚ä¼ é€’ç»™storeæ–¹æ³•çš„keyåº”è¯¥å¯¹åº”äºç¼“å­˜é…ç½®æ–‡ä»¶ä¸­storesé…ç½®æ•°ç»„ä¸­åˆ—å‡ºçš„å…¶ä¸­ä¹‹ä¸€ï¼š $value = Cache::store('file')-\u003eget('foo'); Cache::store('redis')-\u003eput('bar', 'baz', 600); // 10 Minutes ","date":"2024å¹´08æœˆ29æ—¥","objectID":"/2024/08/cache/:3:1","tags":["PHP","Laravel"],"title":"Laravel 11.x ç¼“å­˜","uri":"/2024/08/cache/"},{"categories":["PHP","Laravel"],"content":"ä»ç¼“å­˜ä¸­æ£€ç´¢é¡¹ç›® getæ–¹æ³•ç”¨äºä»ç¼“å­˜ä¸­æ£€ç´¢é¡¹ç›®ã€‚å¦‚æœç¼“å­˜ä¸­ä¸å­˜åœ¨è¯¥é¡¹ç›®ï¼Œåˆ™è¿”å›nullã€‚ä¹Ÿå¯ä»¥ä¼ é€’ç¬¬äºŒä¸ªå‚æ•°ï¼ŒæŒ‡å®šé»˜è®¤å€¼ï¼š $value = Cache::get('key', function() { return DB::table(/*...*/)-\u003eget(); }); keyæ˜¯å¦å­˜åœ¨ hasæ–¹æ³•å¯ç”¨äºç¡®å®šç¼“å­˜ä¸­æ˜¯å¦å­˜åœ¨keyã€‚å¦‚æœå­˜åœ¨ä½†å€¼ä¸ºnull,åˆ™ä¹Ÿè¿”å›false: if (Cache::has('key')) { // ... } é€’å¢/é€’å‡å€¼ incrementå’Œdecrementæ–¹æ³•å¯ç”¨äºè°ƒæ•´ç¼“å­˜ä¸­æ•´æ•°é¡¹çš„å€¼ã€‚éƒ½å¯æŒ‡å®šç¬¬äºŒä¸ªå‚æ•°ï¼ŒæŒ‡å®šå¢åŠ æˆ–å‡å°‘é¡¹ç›®å€¼çš„æ•°é‡ï¼š // ä¸å­˜åœ¨åˆ™ä½¿ç”¨é»˜è®¤å€¼ Cache::add('key', 0, now()-\u003eaddHours(4)); // é€’å¢/é€’å‡ Cache::increment('key'); Cache::increment('key', $amount); Cache::decrement('key'); Cache::decrement('key', $amount); æ£€ç´¢å’Œå­˜å‚¨ æœ‰æ—¶å¸Œæœ›æ£€ç´¢keyæ—¶ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œåˆ™ä¹Ÿå­˜å‚¨ä¸€ä¸ªé»˜è®¤çš„å€¼ã€‚å¯ä»¥ä½¿ç”¨Cache::rememberæ–¹æ³•æ¥å¤„ç†ï¼š $value = Cache::remember('users', $seconds, function () { return DB::table('users')-\u003eget(); }); å¦‚æœç¼“å­˜ä¸­ä¸å­˜åœ¨è¯¥keyï¼Œåˆ™å°†æ‰§è¡Œä¼ é€’ç»™rememberæ–¹æ³•çš„é—­åŒ…ï¼Œå…¶ç»“æœå°†æ”¾ç½®åœ¨ç¼“å­˜ä¸­ã€‚ ä¹Ÿå¯ä»¥ä½¿ç”¨rememberForeveræ–¹æ³•ä»ç¼“å­˜ä¸­æ£€ç´¢é¡¹ç›®ï¼Œæˆ–è€…å¦‚æœå®ƒä¸å­˜åœ¨ï¼Œåˆ™æ°¸ä¹…å­˜å‚¨ï¼š $value = Cache::rememberForever('users', function () { return DB::table('users')-\u003eget(); }); æ£€ç´¢å’Œåˆ é™¤ å¦‚æœéœ€è¦ä»ç¼“å­˜ä¸­æ£€ç´¢keyï¼Œç„¶ååˆ é™¤è¯¥keyï¼Œåˆ™å¯ä»¥ä½¿ç”¨pullæ–¹æ³•ã€‚ä¸getæ–¹æ³•ä¸€æ ·ï¼Œå¦‚æœç¼“å­˜ä¸å­˜åœ¨è¯¥keyï¼Œåˆ™è¿”å›nullï¼š $value = Cache::pull('key'); $value = Cache::pull('key', 'default'); ","date":"2024å¹´08æœˆ29æ—¥","objectID":"/2024/08/cache/:3:2","tags":["PHP","Laravel"],"title":"Laravel 11.x ç¼“å­˜","uri":"/2024/08/cache/"},{"categories":["PHP","Laravel"],"content":"åœ¨ç¼“å­˜ä¸­å­˜å‚¨é¡¹ç›® putæ–¹æ³•ç”¨æ¥å­˜å‚¨ç¼“å­˜ä¸­çš„keyï¼š Cache::put('key', 'value', $seconds = 10); å¦‚æœå­˜å‚¨æ—¶é—´æ²¡æœ‰ä¼ é€’ï¼Œåˆ™è¯¥keyå°†è¢«æ— æœŸé™å­˜å‚¨ï¼š Cache::put('key', 'value'); ä¹Ÿå¯ä»¥ä¼ é€’ä¸€ä¸ªDateTimeå®ä¾‹ï¼Œè¯¥å®ä¾‹è¡¨ç¤ºkeyçš„è¿‡æœŸæ—¶é—´ï¼š Cache::put('key', 'value', now()-\u003eaddMinutes(10)); ä¸å­˜åœ¨æ‰å­˜å‚¨ addæ–¹æ³•åªä¼šåœ¨ç¼“å­˜å­˜å‚¨ä¸­ä¸å­˜åœ¨keyæ—¶æ‰å°†å…¶æ·»åŠ åˆ°ç¼“å­˜ä¸­ã€‚å¦‚æœkeyå®é™…æ·»åŠ åˆ°ç¼“å­˜ä¸­ï¼Œè¯¥æ–¹æ³•å°†è¿”å›trueã€‚å¦åˆ™ï¼Œè¯¥æ–¹æ³•å°†è¿”å›falseã€‚addæ–¹æ³•æ˜¯ä¸€ä¸ªåŸå­æ“ä½œï¼š Cache::add('key', 'value', $seconds); æ°¸ä¹…å­˜å‚¨key foreveræ–¹æ³•å¯ç”¨äºå°†keyæ°¸ä¹…å­˜å‚¨åœ¨ç¼“å­˜ä¸­ã€‚ç”±äºè¿™äº›keyä¸ä¼šè¿‡æœŸï¼Œå› æ­¤å¿…é¡»ä½¿ç”¨forgetæ–¹æ³•ä»ç¼“å­˜ä¸­æ‰‹åŠ¨åˆ é™¤ï¼š Cache::forever('key', 'value'); ps: å½“ä½¿ç”¨çš„æ˜¯Memcachedé©±åŠ¨æ—¶ï¼Œå½“ç¼“å­˜è¾¾åˆ°å…¶å¤§å°é™åˆ¶æ—¶ï¼Œå¯èƒ½ä¼šåˆ é™¤æ°¸ä¹…å­˜å‚¨çš„key ","date":"2024å¹´08æœˆ29æ—¥","objectID":"/2024/08/cache/:3:3","tags":["PHP","Laravel"],"title":"Laravel 11.x ç¼“å­˜","uri":"/2024/08/cache/"},{"categories":["PHP","Laravel"],"content":"ä»ç¼“å­˜ä¸­åˆ é™¤é¡¹ç›® forgetæ–¹æ³•ä»ç¼“å­˜ä¸­åˆ é™¤keyï¼š Cache::forget('key'); è¿˜å¯ä»¥é€šè¿‡æä¾›é›¶æˆ–è€…è´Ÿæ•°çš„è¿‡æœŸç§’æ•°æ¥åˆ é™¤keyï¼š Cache::put('key', 'value', 0); Cache::put('key', 'value', -5); ä¹Ÿå¯ä»¥ä½¿ç”¨flushæ–¹æ³•æ¸…æ¥šæ•´ä¸ªç¼“å­˜ï¼š Cache::flush(); ps: flushä¼šä»ç¼“å­˜ä¸­åˆ é™¤æ‰€æœ‰çš„keyï¼Œè°¨æ…ä½¿ç”¨ ","date":"2024å¹´08æœˆ29æ—¥","objectID":"/2024/08/cache/:3:4","tags":["PHP","Laravel"],"title":"Laravel 11.x ç¼“å­˜","uri":"/2024/08/cache/"},{"categories":["PHP","Laravel"],"content":"ç¼“å­˜å¸®åŠ©ç¨‹åº é™¤äº†ä½¿ç”¨Cacheé—¨é¢å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨å…¨å±€cacheåŠŸèƒ½é€šè¿‡ç¼“å­˜æ¥æ£€ç´¢å’Œå­˜å‚¨æ•°æ®ã€‚ å½“ä½¿ç”¨å•ä¸ªå­—ç¬¦ä¸²å‚æ•°è°ƒç”¨cacheå‡½æ•°æ—¶ï¼Œå®ƒå°†è¿”å›ç»™å®šé”®çš„å€¼ï¼š $value = cache('key'); cache(['key' =\u003e 'value'], $seconds); cache(['key' =\u003e 'value'], now()-\u003eaddMinutes(10)); å½“è°ƒç”¨ä¸å¸¦ä»»ä½•å‚æ•°æ—¶ï¼Œåˆ™ä¼šè¿”å›Illuminate\\Contracts\\Cache\\Factoryå®ç°çš„å®ä¾‹ï¼Œå…è®¸è°ƒç”¨å…¶ä»–ç¼“å­˜æ–¹æ³•ï¼š cache()-\u003eremember('users', $seconds, function () { return DB::table('users')-\u003eget(); }); ","date":"2024å¹´08æœˆ29æ—¥","objectID":"/2024/08/cache/:3:5","tags":["PHP","Laravel"],"title":"Laravel 11.x ç¼“å­˜","uri":"/2024/08/cache/"},{"categories":["PHP","Laravel"],"content":"åŸå­é” ","date":"2024å¹´08æœˆ29æ—¥","objectID":"/2024/08/cache/:4:0","tags":["PHP","Laravel"],"title":"Laravel 11.x ç¼“å­˜","uri":"/2024/08/cache/"},{"categories":["PHP","Laravel"],"content":"ç®¡ç†é” åŸå­é”å…è®¸æ“ä½œåˆ†å¸ƒå¼é”ï¼Œè€Œæ— éœ€æ‹…å¿ƒäº‰ç”¨æ¡ä»¶ã€‚å¯ä»¥ä½¿ç”¨Cache::lockæ–¹æ³•åˆ›å»ºå’Œç®¡ç†é”ï¼š use Illuminate\\Support\\Facades\\Cache; $lock = Cache::lock('foo', 10); if ($lock-\u003eget()) { // è·å¾—é” $lock-\u003erelease(); } getæ–¹æ³•ä¹Ÿæ¥å—ä¸€ä¸ªé—­åŒ…ã€‚æ‰§è¡Œclosureåï¼ŒLaravelä¼šè‡ªåŠ¨é‡Šæ”¾é”ï¼š Cache::lock('foo', 10)-\u003eget(function () { // è·å–é”ï¼Œå¤„ç†å®Œæ¯•åè‡ªåŠ¨é‡Šæ”¾ }); å¦‚æœåœ¨è¯·æ±‚é”æ—¶é”ä¸å¯ç”¨ï¼Œåˆ™å¯ä»¥æŒ‡å®šç­‰å¾…ç§’æ•°ã€‚å¦‚æœåœ¨æŒ‡å®šçš„æ—¶é™å†…æ— æ³•è·å–é”ï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸Illuminate\\Contracts\\Cache\\LockTimeoutExceptionï¼š use Illuminate\\Contracts\\Cache\\LockTimeoutException; $lock = Cache::lock('foo', 10); try { $lock-\u003eblock(5); // æœ€å¤šç­‰å¾… 5 ç§’åè·å–é”å®š... } catch (LockTimeoutException $e) { // æ— æ³•è·å–é”... } finally { $lock-\u003erelease(); } ä¹Ÿå¯ä»¥é€šè¿‡å°†é—­åŒ…ä¼ é€’ç»™blockæ–¹æ³•æ¥ç®€åŒ–ã€‚å½“å°†é—­åŒ…ä¼ é€’ç»™æ­¤æ–¹æ³•æ—¶ï¼ŒLaravelå°†å°è¯•åœ¨æŒ‡å®šçš„ç§’æ•°å†…è·å–é”ï¼Œå¹¶åœ¨æ‰§è¡Œé—­åŒ…åè‡ªåŠ¨é‡Šæ”¾é”ï¼š Cache::lock('foo', 10)-\u003eblock(5, function () { // æœ€å¤šç­‰å¾… 5 ç§’åè·å–é”å®š... }); ","date":"2024å¹´08æœˆ29æ—¥","objectID":"/2024/08/cache/:4:1","tags":["PHP","Laravel"],"title":"Laravel 11.x ç¼“å­˜","uri":"/2024/08/cache/"},{"categories":["PHP","Laravel"],"content":"è·¨è¿›ç¨‹ç®¡ç†é” æœ‰æ—¶ï¼Œå¸Œæœ›åœ¨ä¸€ä¸ªè¿›ç¨‹ä¸­è·å–é”ï¼Œå¹¶åœ¨å¦ä¸€ä¸ªè¿›ç¨‹ä¸­é‡Šæ”¾å®ƒã€‚ä¾‹å¦‚ï¼Œåœ¨Webè¯·æ±‚æœŸé—´è·å–ä¸€ä¸ªé”ï¼Œå¹¶å¸Œæœ›åœ¨è¯¥è¯·æ±‚è§¦å‘çš„æ’é˜Ÿä½œä¸šç»“æŸçš„æ—¶å€™é‡Šæ”¾è¯¥é”ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œåº”è¯¥è’‹æ‰€çš„èŒƒå›´æ‰€æœ‰è€…ä»¤ç‰Œä¼ é€’ç»™æ’é˜Ÿçš„ä½œä¸šï¼Œä»¥ä¾¿ä½œä¸šå¯ä»¥ä½¿ç”¨ç»™å®šçš„ä»¤ç‰Œé‡æ–°å®ä¾‹åŒ–é”ã€‚ åœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼Œå¦‚æœæˆåŠŸè·å–äº†é”ï¼Œå°†åˆ†æ´¾æ’é˜Ÿçš„ä½œä¸šã€‚æ­¤å¤–ï¼Œå°†é€šè¿‡é”çš„owneræ–¹æ³•å°†é”çš„owner token ä¼ é€’ç»™æ’é˜Ÿçš„ä½œä¸šï¼š $podcast = Podcast::find($id); $lock = Cache::lock('processing', 120); if ($lock-\u003eget()) { ProcessPodcast::dispatch($podcast, $lock-\u003eowner()); } åœ¨åº”ç”¨ç¨‹åºçš„ProcessPodcastä½œä¸šä¸­ï¼Œå¯ä»¥ä½¿ç”¨ownerä»¤ç‰Œæ¢å¤å’Œé‡Šæ”¾é”ï¼š Cache::restoreLock('processing', $this-\u003eowner)-\u003erelease(); å¦‚æœæƒ³åœ¨ä¸è€ƒè™‘å½“å‰æŒæœ‰è€…çš„æƒ…å†µä¸‹é‡Šæ”¾é”ï¼Œå¯ä»¥ä½¿ç”¨forceReleaseæ–¹æ³•ã€‚ Cache::lock('processing')-\u003eforceRelease(); è¿™ä¸ªæ–¹æ³•é€šå¸¸ç”¨äºä¸€äº›ç‰¹æ®Šåœºæ™¯ï¼Œæ¯”å¦‚è¿«ä¸å¾—å·²éœ€è¦ç«‹å³é‡Šæ”¾ä¸€ä¸ªé”ï¼Œæ— è®ºå½“å‰é”çš„æŒæœ‰è€…æ˜¯è°ã€‚è¯·è°¨æ…ä½¿ç”¨ forceRelease æ–¹æ³•ï¼Œå› ä¸ºå®ƒä¼šç»•è¿‡æ‰€æœ‰çš„æŒæœ‰è€…æ£€æŸ¥ï¼Œå¯èƒ½ä¼šå¯¼è‡´æ•°æ®ä¸€è‡´æ€§é—®é¢˜æˆ–å…¶ä»–æ„å¤–æƒ…å†µã€‚ ","date":"2024å¹´08æœˆ29æ—¥","objectID":"/2024/08/cache/:4:2","tags":["PHP","Laravel"],"title":"Laravel 11.x ç¼“å­˜","uri":"/2024/08/cache/"},{"categories":["PHP","Laravel"],"content":"æ·»åŠ è‡ªå®šä¹‰ç¼“å­˜ç¨‹åº ","date":"2024å¹´08æœˆ29æ—¥","objectID":"/2024/08/cache/:5:0","tags":["PHP","Laravel"],"title":"Laravel 11.x ç¼“å­˜","uri":"/2024/08/cache/"},{"categories":["PHP","Laravel"],"content":"ç¼–å†™é©±åŠ¨ç¨‹åº è¦åˆ›å»ºè‡ªå®šä¹‰ç¼“å­˜é©±åŠ¨ç¨‹åºï¼Œé¦–å…ˆéœ€è¦å…ˆå®ç°Illuminate\\Contracts\\Cache\\Store Contractï¼š \u003c?php namespace App\\Extensions; use Illuminate\\Contracts\\Cache\\Store; class MongoStore implements Store { public function get($key) {} public function many(array $keys) {} public function put($key, $value, $seconds) {} public function putMany(array $values, $seconds) {} public function increment($key, $value = 1) {} public function decrement($key, $value = 1) {} public function forever($key, $value) {} public function forget($key) {} public function flush() {} public function getPrefix() {} } ä¸€æ—¦å®ç°å®Œæˆï¼Œå°±å¯ä»¥é€šè¿‡è°ƒç”¨cacheFacadeçš„extendæ–¹æ³•æ¥å®Œæˆè‡ªå®šä¹‰é©±åŠ¨ç¨‹åºæ³¨å†Œï¼š Cache::extend('mongo', function (Application $app) { return Cache::repository(new MongoStore); }); ","date":"2024å¹´08æœˆ29æ—¥","objectID":"/2024/08/cache/:5:1","tags":["PHP","Laravel"],"title":"Laravel 11.x ç¼“å­˜","uri":"/2024/08/cache/"},{"categories":["PHP","Laravel"],"content":"æ³¨å†Œé©±åŠ¨ç¨‹åº åœ¨cacheFacadeçš„extendä¸Šä½¿ç”¨extendè¿›è¡Œæ³¨å†Œè‡ªå®šä¹‰ç¼“å­˜é©±åŠ¨ã€‚ å› ä¸ºå…¶ä»–æœåŠ¡æä¾›è€…å¯èƒ½ä¼šåœ¨å®ƒä»¬çš„bootæ–¹æ³•ä¸­å°è¯•è¯»å–ç¼“å­˜å€¼ï¼Œæ‰€ä»¥æˆ‘ä»¬å°†ä¼šåœ¨ä¸€ä¸ªbootingå›è°ƒä¸­æ³¨å†Œæˆ‘ä»¬çš„è‡ªå®šä¹‰é©±åŠ¨ã€‚é€šè¿‡ä½¿ç”¨bootingå›è°ƒï¼Œæˆ‘ä»¬å¯ä»¥ç¡®ä¿è‡ªå®šä¹‰é©±åŠ¨åœ¨åº”ç”¨ç¨‹åºçš„æœåŠ¡æä¾›è€…çš„bootæ–¹æ³•è¢«è°ƒç”¨ä¹‹å‰æ³¨å†Œï¼Œä½†åœ¨æ‰€æœ‰æœåŠ¡æä¾›è€…çš„registeræ–¹æ³•è¢«è°ƒç”¨ä¹‹åã€‚æˆ‘ä»¬å°†åœ¨åº”ç”¨ç¨‹åºçš„App\\Providers\\AppServiceProviderç±»çš„registeræ–¹æ³•ä¸­æ³¨å†Œæˆ‘ä»¬çš„bootingå›è°ƒï¼š \u003c?php namespace App\\Providers; use App\\Extensions\\MongoStore; use Illuminate\\Contracts\\Foundation\\Application; use Illuminate\\Support\\Facades\\Cache; use Illuminate\\Support\\ServiceProvider; class AppServiceProvider extends ServiceProvider { /** * Register any application services. */ public function register(): void { $this-\u003eapp-\u003ebooting(function () { Cache::extend('mongo', function (Application $app) { return Cache::repository(new MongoStore); }); }); } /** * Bootstrap any application services. */ public function boot(): void { // ... } } ä¼ é€’ç»™ extend æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯é©±åŠ¨çš„åç§°ã€‚è¿™å°†å¯¹åº”äº config/cache.php é…ç½®æ–‡ä»¶ä¸­çš„ driver é€‰é¡¹ã€‚ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªé—­åŒ…ï¼Œè¯¥é—­åŒ…åº”è¯¥è¿”å›ä¸€ä¸ª Illuminate\\Cache\\Repository å®ä¾‹ã€‚è¿™ä¸ªé—­åŒ…å°†ä¼šæ¥æ”¶ä¸€ä¸ª $app å‚æ•°ï¼Œè¿™æ˜¯æœåŠ¡å®¹å™¨çš„ä¸€ä¸ªå®ä¾‹ã€‚ ä¸€æ—¦ä½ çš„æ‰©å±•æ³¨å†Œå®Œæˆï¼Œæ›´æ–°åº”ç”¨ç¨‹åºçš„ config/cache.php é…ç½®æ–‡ä»¶ä¸­çš„ CACHE_STORE ç¯å¢ƒå˜é‡æˆ–é»˜è®¤é€‰é¡¹ä¸ºä½ çš„æ‰©å±•åç§°ã€‚ ","date":"2024å¹´08æœˆ29æ—¥","objectID":"/2024/08/cache/:5:2","tags":["PHP","Laravel"],"title":"Laravel 11.x ç¼“å­˜","uri":"/2024/08/cache/"},{"categories":["PHP","Laravel"],"content":"äº‹ä»¶ è¦åœ¨æ¯ä¸ªç¼“å­˜æ“ä½œä¸Šæ‰§è¡Œä»£ç ï¼Œå¯ä»¥ç›‘å¬ç¼“å­˜è°ƒåº¦çš„å„ç§äº‹ä»¶ï¼š Event Name äº‹ä»¶åç§° Illuminate\\Cache\\Events\\CacheHit ç¼“å­˜å‘½ä¸­ Illuminate\\Cache\\Events\\CacheMissed ç¼“å­˜æœªå‘½ä¸­ Illuminate\\Cache\\Events\\KeyForgotten é”®è¢«å¿˜è®° Illuminate\\Cache\\Events\\KeyWritten é”®å·²å†™å…¥ ä¸ºäº†æé«˜æ€§èƒ½ï¼Œä½ å¯ä»¥é€šè¿‡åœ¨åº”ç”¨ç¨‹åºçš„ config/cache.php é…ç½®æ–‡ä»¶ä¸­å°†æŸä¸ªç¼“å­˜å­˜å‚¨çš„ events é…ç½®é€‰é¡¹è®¾ç½®ä¸º false æ¥ç¦ç”¨ç¼“å­˜äº‹ä»¶ã€‚ 'database' =\u003e [ 'driver' =\u003e 'database', // ... 'events' =\u003e false, ], ","date":"2024å¹´08æœˆ29æ—¥","objectID":"/2024/08/cache/:6:0","tags":["PHP","Laravel"],"title":"Laravel 11.x ç¼“å­˜","uri":"/2024/08/cache/"},{"categories":["PHP","Hyperf"],"content":"AOPï¼šé¢å‘åˆ‡é¢ç¼–ç¨‹ ç›®çš„ï¼šå°†æ¨ªåˆ‡å…³æ³¨ç‚¹ä¸ä¸šåŠ¡ä»£ç åˆ†ç¦»ï¼Œæä¾›æ¨¡å—åŒ–ç¨‹åº¦ ","date":"2024å¹´06æœˆ21æ—¥","objectID":"/2024/06/aop/:0:0","tags":["PHP","Hyperf"],"title":"Hyperf AOP","uri":"/2024/06/aop/"},{"categories":["PHP","Hyperf"],"content":"ä»‹ç» ","date":"2024å¹´06æœˆ21æ—¥","objectID":"/2024/06/aop/:1:0","tags":["PHP","Hyperf"],"title":"Hyperf AOP","uri":"/2024/06/aop/"},{"categories":["PHP","Hyperf"],"content":"ä»€ä¹ˆæ˜¯Hyperf AOP Hyperf AOP æ˜¯Hyperfæ¡†æ¶æä¾›çš„ä¸€ç§é¢å‘åˆ‡é¢ç¼–ç¨‹çš„æŠ€æœ¯ã€‚å®ƒé€šè¿‡å°†æ¨ªåˆ‡å…³æ³¨ç‚¹ï¼ˆä¾‹å¦‚æ—¥å¿—è®°å½•ã€äº‹åŠ¡ç®¡ç†ã€å®‰å…¨æ€§æ£€æŸ¥ç­‰ï¼‰ä»ä¸»ä¸šåŠ¡é€»è¾‘ä»£ç ä¸­åˆ†ç¦»å‡ºæ¥ï¼Œä»¥æ¨¡å—åŒ–çš„æ–¹å¼å®ç°å¯¹è¿™äº›å…³æ³¨ç‚¹çš„ç®¡ç†å’Œé‡ç”¨ã€‚ åœ¨ Hyperf AOPä¸­ï¼Œåˆ‡é¢ï¼ˆAspectï¼‰æ˜¯ä¸€ä¸ªæ¨¡å—åŒ–çš„å…³æ³¨ç‚¹ï¼Œå®ƒå¯ä»¥è·¨è¶Šå¤šä¸ªå¯¹è±¡ï¼Œä¾‹å¦‚æ—¥å¿—è®°å½•ã€äº‹åŠ¡ç®¡ç†ç­‰ã€‚ åˆ‡é¢é€šè¿‡å®šä¹‰åˆ‡ç‚¹ï¼ˆPointcutï¼‰å’Œå¢å¼ºï¼ˆAdviceï¼‰æ¥ä»‹å…¥ç›®æ ‡å¯¹è±¡çš„æ–¹æ³•æ‰§è¡Œè¿‡ç¨‹ï¼š åˆ‡ç‚¹æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œç”¨äºåŒ¹é…ç›®æ ‡å¯¹è±¡çš„ä¸€ç»„æ–¹æ³•ï¼Œåœ¨è¿™äº›æ–¹æ³•æ‰§è¡Œæ—¶åˆ‡é¢ä¼šè¢«è§¦å‘ã€‚ å¢å¼ºåˆ™å®šä¹‰äº†åˆ‡é¢åœ¨ç›®æ ‡å¯¹è±¡æ–¹æ³•æ‰§è¡Œå‰ã€æ‰§è¡Œåæˆ–æŠ›å‡ºå¼‚å¸¸æ—¶æ‰€è¦æ‰§è¡Œçš„é€»è¾‘ã€‚ Hyperf AOP åœ¨é¡¹ç›®å¯åŠ¨å‰ï¼Œæ¯ä¸ªè¢«ä»‹å…¥çš„ç›®æ ‡ç±»æœ€ç»ˆéƒ½ä¼šç”Ÿæˆä¸€ä¸ªä»£ç†ç±»ï¼ˆProxyClassï¼‰ï¼Œæ¥è¾¾åˆ°æ‰§è¡Œåˆ‡é¢æ–¹æ³•çš„ç›®çš„ã€‚ ","date":"2024å¹´06æœˆ21æ—¥","objectID":"/2024/06/aop/:1:1","tags":["PHP","Hyperf"],"title":"Hyperf AOP","uri":"/2024/06/aop/"},{"categories":["PHP","Hyperf"],"content":"ä¸ºä»€ä¹ˆè¦ç”¨Hyperf AOP ä½¿ç”¨Hyperf AOPçš„ä¸»è¦åŸå› æ˜¯å®ƒå¯ä»¥å¸®åŠ©æˆ‘ä»¬æ›´å¥½åœ°ç®¡ç†å„ç§æ¨ªåˆ‡å…³æ³¨ç‚¹ï¼Œä¾‹å¦‚æ—¥å¿—è®°å½•ã€äº‹åŠ¡ç®¡ç†ã€å®‰å…¨æ€§æ£€æŸ¥ç­‰ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›ä½¿ç”¨Hyperf AOPçš„ä¼˜ç‚¹ï¼š æ¨¡å—åŒ–ï¼š Hyperf AOP å°†æ¨ªåˆ‡å…³æ³¨ç‚¹ä»ä¸»ä¸šåŠ¡é€»è¾‘ä»£ç ä¸­åˆ†ç¦»å‡ºæ¥ï¼Œä»¥æ¨¡å—åŒ–çš„æ–¹å¼å®ç°å¯¹è¿™äº›å…³æ³¨ç‚¹çš„ç®¡ç†å’Œé‡ç”¨ã€‚è¿™æ ·å¯ä»¥æ›´å®¹æ˜“åœ°ç»´æŠ¤ä»£ç ï¼Œå¹¶ä¸”å¯ä»¥å°†åŒä¸€ä¸ªå…³æ³¨ç‚¹çš„é€»è¾‘åº”ç”¨åˆ°å¤šä¸ªæ–¹æ³•æˆ–ç±»ä¸­ã€‚ éä¾µå…¥å¼ï¼š ä½¿ç”¨ Hyperf AOP æ˜¯ï¼Œæˆ‘ä»¬ä¸éœ€è¦ä¿®æ”¹åŸå§‹ä¸šåŠ¡é€»è¾‘ä»£ç ï¼Œåªéœ€è¦åœ¨åˆ‡ç‚¹å’Œå¢å¼ºä¸­å®šä¹‰æˆ‘ä»¬æ‰€éœ€è¦çš„é€»è¾‘å³å¯ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å°±èƒ½ä¿æŒåŸå§‹ä»£ç çš„ç®€æ´æ€§å’Œå¯è¯»æ€§ã€‚ å¯é‡ç”¨æ€§ï¼š å¯ä»¥å°†åŒä¸€åˆ‡é¢åº”ç”¨äºå¤šä¸ªç›®æ ‡å¯¹è±¡è¿›è¡Œæ¨ªåˆ‡å¤„ç†ã€‚è¿™æ ·å¯ä»¥æé«˜ä»£ç çš„é‡ç”¨æ€§ï¼Œå¹¶ä¸”å¯ä»¥æ›´åŠ æ–¹ä¾¿åœ°ç»´æŠ¤å’Œæ›´æ–°åˆ‡é¢é€»è¾‘ã€‚ æ¾è€¦åˆï¼š AOP å¯ä»¥å‡å°‘å„ä¸ªä¸šåŠ¡æ¨¡å—ä¹‹é—´çš„è€¦åˆåº¦ï¼Œè¿™æ˜¯å› ä¸ºæˆ‘ä»¬å¯ä»¥å°†æŸäº›é€šç”¨çš„é€»è¾‘ä½œä¸ºåˆ‡é¢æ¥å®ç°ï¼Œè€Œä¸æ˜¯ç›´æ¥åœ¨å„ä¸ªä¸šåŠ¡æ¨¡å—ä¸­å®ç°ã€‚è¿™æ ·å¯ä»¥ä½¿å¾—å„ä¸ªä¸šåŠ¡æ¨¡å—ä¹‹é—´æ›´åŠ ç‹¬ç«‹ï¼Œä»è€Œæé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§ã€‚ æ€»ä¹‹ï¼Œä½¿ç”¨ Hyperf AOP å¯ä»¥å¸®åŠ©æˆ‘ä»¬æ›´å¥½åœ°ç®¡ç†å’Œé‡ç”¨æ¨ªåˆ‡å…³æ³¨ç‚¹é€»è¾‘ï¼Œä½¿å¾—ä»£ç æ›´æ˜“äºç»´æŠ¤å’Œç†è§£ï¼Œå¹¶ä¸”å¯ä»¥æé«˜ä»£ç çš„å¯é‡ç”¨æ€§å’Œçµæ´»æ€§ã€‚ ","date":"2024å¹´06æœˆ21æ—¥","objectID":"/2024/06/aop/:1:2","tags":["PHP","Hyperf"],"title":"Hyperf AOP","uri":"/2024/06/aop/"},{"categories":["PHP","Hyperf"],"content":"æ ¸å¿ƒæ¦‚å¿µ åˆ‡é¢ï¼ˆAspectï¼‰ï¼š åˆ‡é¢æ˜¯ä¸€ä¸ªæ¨¡å—åŒ–çš„æ¨ªåˆ‡å…³æ³¨ç‚¹å®ç°ï¼Œå®ƒåŒ…æ‹¬äº†è¿æ¥ç‚¹å’Œå¢å¼ºã€‚å¯ä»¥é€šè¿‡é…ç½®æ–‡ä»¶ã€æ³¨è§£æ–¹å¼å®šä¹‰åˆ‡é¢ã€‚ è¿æ¥ç‚¹ï¼ˆJoinpointï¼‰ï¼š ç¨‹åºä¸­èƒ½å¤Ÿè¢«åˆ‡é¢æ’å…¥çš„ç‚¹ï¼Œå…¸å‹çš„è¿æ¥ç‚¹åŒ…æ‹¬æ–¹æ³•è°ƒç”¨ã€æ–¹æ³•æ‰§è¡Œè¿‡ç¨‹ä¸­çš„æŸä¸ªæ—¶ç‚¹ç­‰ç­‰ã€‚ å¢å¼ºï¼ˆAdviceï¼‰ï¼š åœ¨è¿æ¥ç‚¹å¤„æ‰§è¡Œçš„ä»£ç ã€‚åˆ†ä¸ºå„ç§ç±»å‹ï¼Œå¦‚å‰ç½®å¢å¼ºã€åç½®å¢å¼ºã€ç¯ç»•å¢å¼ºç­‰ï¼ˆåœ¨Hyperf AOPä¸­å¯¹æ­¤ç®€åŒ–äº†è¯¥åŠŸèƒ½çš„ä½¿ç”¨ä¸åšè¿‡ç»†çš„åˆ’åˆ†ï¼Œä»…ä¿ç•™ç¯ç»•ä¸€ç§å½¢å¼ï¼‰ã€‚ åˆ‡ç‚¹ï¼ˆPointcutï¼‰ï¼š ç”¨äºå®šä¹‰é‚£äº›è¿æ¥ç‚¹ä¸Šåº”è¯¥åº”ç”¨å¢å¼ºã€‚åˆ‡ç‚¹é€šè¿‡è¡¨è¾¾å¼è¿›è¡Œå®šä¹‰ï¼Œå¦‚åŒ¹é…æ‰€æœ‰publicæ–¹æ³•æˆ–åŒ¹é…æŸä¸ªåŒ…ä¸‹çš„æ‰€æœ‰æ–¹æ³•ç­‰ ç»‡å…¥ï¼ˆWeavingï¼‰ï¼š æŒ‡å°†åˆ‡é¢åº”ç”¨åˆ°ç›®æ ‡å¯¹è±¡å¹¶åˆ›å»ºæ–°çš„ä»£ç†å¯¹è±¡çš„è¿‡ç¨‹ã€‚Hyperf AOP åœ¨é¡¹ç›®å¯åŠ¨å‰ï¼Œæ¯ä¸ªè¢«ä»‹å…¥çš„ç›®æ ‡ç±»æœ€ç»ˆéƒ½ä¼šç”Ÿæˆä¸€ä¸ªä»£ç†ç±»ï¼Œæ¥è¾¾åˆ°æ‰§è¡Œåˆ‡é¢æ–¹æ³•çš„ç›®çš„ã€‚ ","date":"2024å¹´06æœˆ21æ—¥","objectID":"/2024/06/aop/:1:3","tags":["PHP","Hyperf"],"title":"Hyperf AOP","uri":"/2024/06/aop/"},{"categories":["PHP","Hyperf"],"content":"AOP è®¾è®¡åŸåˆ™ å•ä¸€èŒè´£åŸåˆ™ï¼š åˆ‡é¢åªå…³æ³¨ä¸€ä¸ªæ¨ªåˆ‡å…³æ³¨ç‚¹ å¼€é—­åŸåˆ™ï¼š åˆ‡é¢ä»£ç ä¸åº”å½±å“ä¸šåŠ¡ä»£ç  ä¾èµ–å€’ç½®åŸåˆ™ï¼š ä¸šåŠ¡ä»£ç ä¸åº”è¯¥ä¾èµ–åˆ‡é¢ä»£ç  æ¥å£éš”ç¦»åŸåˆ™ï¼š åˆ‡é¢æ¥å£åº”å°½å¯èƒ½ç»†åŒ– æœ€å°çŸ¥è¯†åŸåˆ™ï¼š åˆ‡é¢ä»£ç åº”çŸ¥é“æœ€å°‘çš„ä¿¡æ¯ ","date":"2024å¹´06æœˆ21æ—¥","objectID":"/2024/06/aop/:1:4","tags":["PHP","Hyperf"],"title":"Hyperf AOP","uri":"/2024/06/aop/"},{"categories":["PHP","Hyperf"],"content":"AOP å’Œ OOP çš„åŒºåˆ« AOP (Aspect-Oriented Programming) å’Œ OOP (Object-Oriented Programming) éƒ½æ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹çš„èŒƒå¼ï¼š æŠ€æœ¯è§†è§’ï¼š OOP æ˜¯ä¸€ç§ä»£ç ç»„ç»‡æŠ€æœ¯ï¼Œå®ƒé€šè¿‡å°†æ•°æ®å’Œæ“ä½œå°è£…åœ¨å¯¹è±¡ä¸­æ¥å®ç°æ¨¡å—åŒ–å’Œå¤ç”¨ã€‚AOP æ˜¯ä¸€ç§ç¼–ç¨‹èŒƒå¼ï¼Œå®ƒå…è®¸å¼€å‘è€…åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼ˆè€Œéç¼–è¯‘æœŸï¼‰åŠ¨æ€åœ°æ·»åŠ ã€åˆ é™¤æˆ–ä¿®æ”¹ä»£ç çš„åŠŸèƒ½ã€‚ å…³æ³¨ç‚¹ï¼š OOP å…³æ³¨å¯¹è±¡çš„å†…éƒ¨ç»“æ„å’Œè¡Œä¸ºï¼Œå…¶ç›®æ ‡æ˜¯æ›´å¥½åœ°æè¿°å’Œè®¾è®¡ä¸€ä¸ªç³»ç»Ÿçš„çœŸå®ä¸–ç•Œæ¦‚å¿µã€‚AOP å…³æ³¨æ¨ªåˆ‡å…³æ³¨ç‚¹ï¼ˆCross-cutting Concernsï¼‰ï¼Œå³å­˜åœ¨äºåº”ç”¨ç¨‹åºå„ä¸ªå±‚é¢çš„ç›¸åŒé—®é¢˜ï¼Œå¦‚æ—¥å¿—ã€äº‹åŠ¡ã€å®‰å…¨ç­‰ã€‚ å®ç°æ–¹å¼ï¼š OOP æ˜¯é€šè¿‡ç±»å’Œæ¥å£æ¥å®ç°å°è£…ã€ç»§æ‰¿å’Œå¤šæ€ç­‰ç‰¹æ€§ï¼Œä½¿å¾—ç±»èƒ½å¤Ÿæ›´å¥½åœ°è¡¨è¾¾é—®é¢˜é¢†åŸŸå†…çš„æ¦‚å¿µã€‚AOP æ˜¯é€šè¿‡å°†é€šç”¨åŠŸèƒ½æŠ½å–ä¸ºåˆ‡é¢ï¼ˆAspectï¼‰ï¼Œå¹¶ä¸æ ¸å¿ƒä¸šåŠ¡é€»è¾‘æ··åˆä½¿ç”¨ï¼Œæ¥å®ç°è¿™äº›æ¨ªåˆ‡å…³æ³¨ç‚¹ã€‚ å…³æ³¨ç‚¹åˆ†ç¦»ï¼š OOP é¢å¯¹å¤æ‚ç³»ç»Ÿå¯èƒ½å¯¼è‡´ä»£ç é‡å¤æˆ–ç´§å¯†è€¦åˆçš„é—®é¢˜ï¼Œè€Œ AOP é‡‡ç”¨æ¨ªåˆ‡å…³æ³¨ç‚¹çš„æ–¹å¼æ¥è§£å†³è¿™äº›é—®é¢˜ï¼Œä½¿å¾—ç³»ç»ŸåŠŸèƒ½æ›´åŠ ç»„åˆå’Œé‡ç”¨ã€‚ æ€»ç»“å°±æ˜¯ï¼šAOP æ˜¯å¯¹ OOP çš„è¡¥å……ï¼Œç”¨äºè§£å†³ OOPéš¾ä»¥è§£å†³çš„é—®é¢˜ï¼›AOP ä¸ OOP ç›¸è¾…ç›¸æˆï¼Œå…±åŒæ„å»ºæ¨¡å—åŒ–ã€å¯ç»´æŠ¤çš„ä»£ç ã€‚ ","date":"2024å¹´06æœˆ21æ—¥","objectID":"/2024/06/aop/:1:5","tags":["PHP","Hyperf"],"title":"Hyperf AOP","uri":"/2024/06/aop/"},{"categories":["PHP","Hyperf"],"content":"åŸºæœ¬ä½¿ç”¨ ","date":"2024å¹´06æœˆ21æ—¥","objectID":"/2024/06/aop/:2:0","tags":["PHP","Hyperf"],"title":"Hyperf AOP","uri":"/2024/06/aop/"},{"categories":["PHP","Hyperf"],"content":"å®šä¹‰åˆ‡é¢ï¼ˆAspectï¼‰ æ¯ä¸ªåˆ‡é¢ï¼ˆAspectï¼‰å¿…é¡»å®ç°Hyperf\\Di\\Aop\\AroundInterfaceæ¥å£ï¼Œå¹¶æä¾› public çš„ $classes å’Œ $annotations å±æ€§ï¼Œä¸ºäº†æ–¹ä¾¿ä½¿ç”¨ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç»§æ‰¿ Hyperf\\Di\\Aop\\AbstractAspect æ¥ç®€åŒ–å®šä¹‰è¿‡ç¨‹ã€‚ æ¯ä¸ª åˆ‡é¢(Aspect) å¿…é¡»å®šä¹‰ #[Aspect] æ³¨è§£æˆ–åœ¨ config/autoload/aspects.php å†…é…ç½®å‡å¯å‘æŒ¥ä½œç”¨ã€‚ \u003c?php namespace App\\Aspect; use App\\Service\\SomeClass; use App\\Annotation\\SomeAnnotation; use Hyperf\\Di\\Annotation\\Aspect; use Hyperf\\Di\\Aop\\AbstractAspect; use Hyperf\\Di\\Aop\\ProceedingJoinPoint; #[Aspect] class FooAspect extends AbstractAspect { // è¦åˆ‡å…¥çš„ç±»æˆ– Traitï¼Œå¯ä»¥å¤šä¸ªï¼Œäº¦å¯é€šè¿‡ :: æ ‡è¯†åˆ°å…·ä½“çš„æŸä¸ªæ–¹æ³•ï¼Œé€šè¿‡ * å¯ä»¥æ¨¡ç³ŠåŒ¹é… public array $classes = [ SomeClass::class, 'App\\Service\\SomeClass::someMethod', 'App\\Service\\SomeClass::*Method', ]; // è¦åˆ‡å…¥çš„æ³¨è§£ï¼Œå…·ä½“åˆ‡å…¥çš„è¿˜æ˜¯ä½¿ç”¨äº†è¿™äº›æ³¨è§£çš„ç±»ï¼Œä»…å¯åˆ‡å…¥ç±»æ³¨è§£å’Œç±»æ–¹æ³•æ³¨è§£ public array $annotations = [ SomeAnnotation::class, ]; public function process(ProceedingJoinPoint $proceedingJoinPoint) { ... } } åˆ‡ç‚¹ï¼ˆPointcutï¼‰ä¹Ÿå¯ä»¥é€šè¿‡#[Aspect]æ³¨è§£æœ¬èº«çš„å±æ€§è¿›è¡Œé…ç½®ï¼š #[ Aspect( classes: [ SomeClass::class, \"App\\Service\\SomeClass::someMethod\", \"App\\Service\\SomeClass::*Method\" ], annotations: [ SomeAnnotation::class ] ) ] class FooAspect extends AbstractAspect { ... } ","date":"2024å¹´06æœˆ21æ—¥","objectID":"/2024/06/aop/:2:1","tags":["PHP","Hyperf"],"title":"Hyperf AOP","uri":"/2024/06/aop/"},{"categories":["PHP","Hyperf"],"content":"å¢å¼ºï¼ˆAdviceï¼‰ åœ¨Hyperf AOPä¸­å¯¹æ­¤ç®€åŒ–äº†è¯¥åŠŸèƒ½çš„ä½¿ç”¨ä¸åšè¿‡ç»†çš„åˆ’åˆ†ï¼Œä»…ä¿ç•™ç¯ç»•ï¼ˆAroundï¼‰ä¸€ç§å½¢å¼ public function process(ProceedingJoinPoint $proceedingJoinPoint) { // åˆ‡é¢åˆ‡å…¥åï¼Œæ‰§è¡Œå¯¹åº”çš„æ–¹æ³•ä¼šç”±æ­¤æ¥è´Ÿè´£ // $proceedingJoinPoint ä¸ºè¿æ¥ç‚¹ï¼Œé€šè¿‡è¯¥ç±»çš„ process() æ–¹æ³•è°ƒç”¨åŸæ–¹æ³•å¹¶è·å¾—ç»“æœ // åœ¨è°ƒç”¨å‰è¿›è¡ŒæŸäº›å¤„ç† $result = $proceedingJoinPoint-\u003eprocess(); // åœ¨è°ƒç”¨åè¿›è¡ŒæŸäº›å¤„ç† return $result; } è¿˜å¯ä»¥é€šè¿‡è·å–åŸå®ä¾‹ã€æ–¹æ³•åå°„ã€æäº¤å‚æ•°ã€è·å–æ³¨è§£ç­‰æ–¹å¼å®ç°ä¸šåŠ¡éœ€æ±‚ public function process(ProceedingJoinPoint $proceedingJoinPoint) { // è·å–å½“å‰æ–¹æ³•åå°„åŸå‹ /** @var \\ReflectionMethod **/ $reflect = $proceedingJoinPoint-\u003egetReflectMethod(); // è·å–è°ƒç”¨æ–¹æ³•æ—¶æäº¤çš„å‚æ•° $arguments = $proceedingJoinPoint-\u003egetArguments(); // array // è·å–åŸç±»çš„å®ä¾‹å¹¶è°ƒç”¨åŸç±»çš„å…¶ä»–æ–¹æ³• $originalInstance = $proceedingJoinPoint-\u003egetInstance(); $originalInstance-\u003eyourFunction(); // è·å–æ³¨è§£å…ƒæ•°æ® /** @var \\Hyperf\\Di\\Aop\\AnnotationMetadata **/ $metadata = $proceedingJoinPoint-\u003egetAnnotationMetadata(); // è°ƒç”¨ä¸å—ä»£ç†ç±»å½±å“çš„åŸæ–¹æ³• $proceedingJoinPoint-\u003eprocessOriginalMethod(); // ä¸æ‰§è¡ŒåŸæ–¹æ³•ï¼Œåšå…¶ä»–æ“ä½œ $result = date('YmdHis', time() - 86400); return $result; } æ³¨æ„ï¼šgetInstanceè·å–åˆ°çš„ç±»ä¸ºä»£ç†ç±»ï¼Œé‡Œé¢çš„æ–¹æ³•ä»ä¼šè¢«å…¶ä»–åˆ‡é¢å½±å“ï¼Œç›¸äº’åµŒå¥—è°ƒç”¨ä¼šæ­»å¾ªç¯è€—å°½å†…å­˜ã€‚ ","date":"2024å¹´06æœˆ21æ—¥","objectID":"/2024/06/aop/:2:2","tags":["PHP","Hyperf"],"title":"Hyperf AOP","uri":"/2024/06/aop/"},{"categories":["PHP","Hyperf"],"content":"åº”ç”¨åœºæ™¯ ","date":"2024å¹´06æœˆ21æ—¥","objectID":"/2024/06/aop/:3:0","tags":["PHP","Hyperf"],"title":"Hyperf AOP","uri":"/2024/06/aop/"},{"categories":["PHP","Hyperf"],"content":"æ—¥å¿—è®°å½• \u003c?php namespace App\\Aspect; use Hyperf\\Di\\Annotation\\Aspect; use Hyperf\\Di\\Annotation\\Inject; use Hyperf\\Di\\Aop\\AbstractAspect; use Hyperf\\Di\\Aop\\ProceedingJoinPoint; use Hyperf\\HttpServer\\Annotation\\AutoController; use Hyperf\\HttpServer\\Annotation\\Controller; use Psr\\Log\\LoggerInterface; #[ Aspect( classes: [ ], annotations: [ Controller::class, AutoController::class ] ) ] class LogAspect extends AbstractAspect { #[Inject] private LoggerInterface $logger; public function process(ProceedingJoinPoint $proceedingJoinPoint) { $this-\u003elogger-\u003einfo('start execute method: ' . $proceedingJoinPoint-\u003eclassName . '::' . $proceedingJoinPoint-\u003emethodName); $result = $proceedingJoinPoint-\u003eprocess(); $this-\u003elogger-\u003einfo('end execute method: ' . $proceedingJoinPoint-\u003eclassName . '::' . $proceedingJoinPoint-\u003emethodName); return $result; } } ","date":"2024å¹´06æœˆ21æ—¥","objectID":"/2024/06/aop/:3:1","tags":["PHP","Hyperf"],"title":"Hyperf AOP","uri":"/2024/06/aop/"},{"categories":["PHP","Hyperf"],"content":"æ€§èƒ½ç›‘æ§ \u003c?php namespace App\\Aspect; use Hyperf\\Di\\Annotation\\Aspect; use Hyperf\\Di\\Annotation\\Inject; use Hyperf\\Di\\Aop\\AbstractAspect; use Hyperf\\Di\\Aop\\ProceedingJoinPoint; use Hyperf\\HttpServer\\Annotation\\DeleteMapping; use Hyperf\\HttpServer\\Annotation\\GetMapping; use Hyperf\\HttpServer\\Annotation\\PostMapping; use Hyperf\\HttpServer\\Annotation\\PutMapping; use Hyperf\\HttpServer\\Annotation\\RequestMapping; use Psr\\Log\\LoggerInterface; #[ Aspect( classes: [ ], annotations: [ RequestMapping::class, GetMapping::class, PostMapping::class, PutMapping::class, DeleteMapping::class, ] ) ] class PerformanceAspect extends AbstractAspect { #[Inject] private LoggerInterface $logger; /** * @inheritDoc */ public function process(ProceedingJoinPoint $proceedingJoinPoint) { $className = $proceedingJoinPoint-\u003eclassName; $methodName = $proceedingJoinPoint-\u003emethodName; $t = time(); $result = $proceedingJoinPoint-\u003eprocess(); $t2 = time(); $this-\u003elogger-\u003eInfo('ã€PerformanceAspectã€‘' . $className . ' ' . $methodName . ' ' . ' æ‰§è¡Œè€—æ—¶ ' . ($t2 - $t)); return $result; } } ","date":"2024å¹´06æœˆ21æ—¥","objectID":"/2024/06/aop/:3:2","tags":["PHP","Hyperf"],"title":"Hyperf AOP","uri":"/2024/06/aop/"},{"categories":["PHP","Hyperf"],"content":"å‚æ•°æ ¡éªŒ 1ã€å®šä¹‰å‚æ•°æ ¡éªŒæ³¨è§£ #[Attribute(Attribute::TARGET_PROPERTY)] class Max { public function __construct(public int $value) { } } -- Min.php #[Attribute(Attribute::TARGET_PROPERTY)] class Min { public function __construct(public int $value) { } } -- NotNull.php #[Attribute(Attribute::TARGET_PROPERTY)] class NotNull { public function __construct() { } } 2ã€å®šä¹‰å‚æ•°æ ¡éªŒAOPåˆ‡é¢ æ­¤demoåº”ç”¨äºæ‰€æœ‰Serviceç±»æ–¹æ³•ä¸Š \u003c?php namespace App\\Aspect; use App\\Annotation\\NotNull; use App\\Annotation\\Max; use App\\Annotation\\Min; use Hyperf\\Di\\Aop\\AbstractAspect; use Hyperf\\Di\\Annotation\\Aspect; use Hyperf\\Di\\Aop\\ProceedingJoinPoint; use ReflectionClass; use ReflectionProperty; #[ Aspect( classes: [ 'App\\Service\\*Service::*' ], annotations: [ Max::class, Min::class, NotNull::class, ] ) ] class ValidationAspect extends AbstractAspect { public function process(ProceedingJoinPoint $proceedingJoinPoint) { $params = $proceedingJoinPoint-\u003earguments['keys']; foreach ($params as $param) { $reflection = new ReflectionClass($param); $properties = $reflection-\u003egetProperties(); foreach ($properties as $property) { try { $this-\u003evalidateProperty($param, $property); } catch (\\InvalidArgumentException $e) { return array('code' =\u003e 500, 'msg' =\u003e $e-\u003egetMessage()); } } } return $proceedingJoinPoint-\u003eprocess(); } private function validateProperty($object, ReflectionProperty $property) { $attributes = $property-\u003egetAttributes(); $property-\u003esetAccessible(true); $value = $property-\u003egetValue($object); foreach ($attributes as $attribute) { $instance = $attribute-\u003enewInstance(); if ($instance instanceof NotNull \u0026\u0026 $value === null) { throw new \\InvalidArgumentException(\"The property {$property-\u003egetName()} cannot be null.\"); } if ($instance instanceof Max \u0026\u0026 $value \u003e $instance-\u003evalue) { throw new \\InvalidArgumentException(\"The property {$property-\u003egetName()} cannot be greater than {$instance-\u003evalue}.\"); } if ($instance instanceof Min \u0026\u0026 $value \u003c $instance-\u003evalue) { throw new \\InvalidArgumentException(\"The property {$property-\u003egetName()} cannot be less than {$instance-\u003evalue}.\"); } } } } 3ã€ä½¿ç”¨ 3.1 Modelä¸­ä½¿ç”¨è‡ªå®šä¹‰å‚æ•°æ ¡éªŒæ³¨è§£ \u003c?php namespace App\\Model; use App\\Annotation\\Max; use App\\Annotation\\Min; use App\\Annotation\\NotNull; class User { #[NotNull] public $name; #[NotNull] #[Min(1)] #[Max(120)] public int $age; } 3.2 åœ¨Serviceå±‚å°† Model ä½œä¸ºå‚æ•°ç»§ç»­ä¼ é€’ class UserService extends AbstractService { public function getUserList(User $user) { return [ $user ]; } } 3.3 åœ¨ Controller å±‚è°ƒç”¨serviceæ–¹æ³•ï¼Œå¹¶åˆå§‹åŒ– Model è¿›è¡Œä¼ é€’ \u003c?php declare(strict_types=1); namespace App\\Controller; use App\\Model\\User; use App\\Service\\UserService; use Hyperf\\Di\\Annotation\\Inject; use Hyperf\\HttpServer\\Annotation\\AutoController; #[AutoController] class UserController extends AbstractController { #[Inject] private UserService $userService; public function list() { $user = new User(); $user-\u003ename = null; // ä¿®æ”¹æ­¤å¤„è¿›è¡ŒéªŒè¯åˆ‡é¢ $user-\u003eage = 130; // ä¿®æ”¹æ­¤å¤„è¿›è¡ŒéªŒè¯åˆ‡é¢ $users = $this-\u003euserService-\u003egetUserList($user); return $users; } } ","date":"2024å¹´06æœˆ21æ—¥","objectID":"/2024/06/aop/:3:3","tags":["PHP","Hyperf"],"title":"Hyperf AOP","uri":"/2024/06/aop/"},{"categories":["PHP","Laravel"],"content":" åŸæ–‡ ","date":"2024å¹´06æœˆ18æ—¥","objectID":"/2024/06/console/:0:0","tags":["PHP","Laravel"],"title":"Laravel 11.x æ§åˆ¶å°","uri":"/2024/06/console/"},{"categories":["PHP","Laravel"],"content":"ä»‹ç» Artisan æ˜¯ Laravel é™„å¸¦çš„å‘½ä»¤è¡Œç•Œé¢ã€‚ Artisan ä½œä¸º artisan è„šæœ¬å­˜åœ¨äºåº”ç”¨ç¨‹åºçš„æ ¹ç›®å½•ä¸­ï¼Œæä¾›äº†è®¸å¤šæœ‰ç”¨çš„å‘½ä»¤ï¼Œå¯ä»¥åœ¨æ„å»ºåº”ç”¨ç¨‹åºæ—¶ä½¿ç”¨ã€‚ è¦æŸ¥çœ‹æ‰€æœ‰å¯ç”¨ Artisan å‘½ä»¤çš„åˆ—è¡¨ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹ list å‘½ä»¤ï¼š php artisan list ","date":"2024å¹´06æœˆ18æ—¥","objectID":"/2024/06/console/:1:0","tags":["PHP","Laravel"],"title":"Laravel 11.x æ§åˆ¶å°","uri":"/2024/06/console/"},{"categories":["PHP","Laravel"],"content":"Tinkerï¼ˆPEPLï¼‰ Laravel Tinker æ˜¯ Laravel æ¡†æ¶çš„å¼ºå¤§ REPLï¼Œç”± PsySH è½¯ä»¶åŒ…æä¾›æ”¯æŒã€‚ å®‰è£… é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰çš„Laravelåº”ç”¨ç¨‹åºéƒ½åŒ…å«Tinkerã€‚ä¹Ÿå¯ä»¥æ‰‹åŠ¨è¿›è¡Œå®‰è£…ï¼Œä½¿ç”¨Composerè¿›è¡Œå®‰è£…ï¼š composer require laravel/tinker ç”¨æ³• Tinker å…è®¸åœ¨å‘½ä»¤è¡Œä¸Šäºæ•´ä¸ªLaravelåº”ç”¨ç¨‹åºè¿›è¡Œäº¤äº’ï¼ŒåŒ…æ‹¬Eloquentæ¨¡å‹ã€ä½œä¸šã€äº‹ä»¶ç­‰ã€‚ # è¿›å…¥tinkerç¯å¢ƒ php artisan tinker ä½¿ç”¨ä»¥ä¸‹ vendor:publish å‘½ä»¤å‘å¸ƒ Tinker çš„é…ç½®æ–‡ä»¶ï¼š php artisan vendor:publish --provider=\"Laravel\\Tinker\\TinkerServiceProvider\" å‘½ä»¤å…è®¸åˆ—è¡¨ Tinkerä½¿ç”¨å…è®¸åˆ—è¡¨æ¥ç¡®å®šå…è®¸åœ¨å…¶shellä¸­è¿è¡Œé‚£äº›Artisanå‘½ä»¤ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œå¯ä»¥è¿è¡Œclear-compiled, down, env, inspire, migrate, optimizeå’Œ upå‘½ä»¤ã€‚ å¦‚æœè¦å…è®¸æ›´å¤šå‘½ä»¤ï¼Œå¯ä»¥å°†å®ƒä»¬æ·»åŠ åˆ°tinker.phpé…ç½®æ–‡ä»¶ä¸­çš„commandsæ•°ç»„ä¸­ï¼š 'commands' =\u003e [ // App\\Console\\Commands\\ExampleCommand::class, ], ç¦æ­¢ä½¿ç”¨åˆ«åçš„ç±» é€šå¸¸æƒ…å†µä¸‹Tinkeräº¤äº’æ—¶ï¼Œä¼šè‡ªåŠ¨ä¸ºç±»æ·»åŠ åˆ«åã€‚ä½†æ˜¯å¯ä»¥è®¾ç½®ç¦æ­¢æŸäº›ç±»ä¸æ·»åŠ åˆ«åã€‚ å¯ä»¥é€šè¿‡åˆ—å‡ºtinker.phpé…ç½®æ–‡ä»¶dont_aliasæ•°ç»„ä¸­çš„ç±»æ¥å®ç°æ­¤ç›®çš„ï¼š 'dont_alias' =\u003e [ App\\Models\\User::class, ], ","date":"2024å¹´06æœˆ18æ—¥","objectID":"/2024/06/console/:1:1","tags":["PHP","Laravel"],"title":"Laravel 11.x æ§åˆ¶å°","uri":"/2024/06/console/"},{"categories":["PHP","Laravel"],"content":"ç¼–å†™å‘½ä»¤ é™¤äº† Artisan æä¾›çš„å‘½ä»¤å¤–ï¼Œè¿˜å¯ä»¥æ„å»ºè‡ªå·±çš„è‡ªå®šä¹‰å‘½ä»¤ã€‚ å‘½ä»¤é€šå¸¸å­˜å‚¨åœ¨ app/Console/Commands ç›®å½•ä¸­; ä½†æ˜¯ï¼Œä¹Ÿå¯ä»¥è‡ªç”±é€‰æ‹©è‡ªå·±çš„å­˜å‚¨ä½ç½®ï¼Œåªè¦å‘½ä»¤å¯ä»¥ç”± Composer åŠ è½½å³å¯ã€‚ ","date":"2024å¹´06æœˆ18æ—¥","objectID":"/2024/06/console/:2:0","tags":["PHP","Laravel"],"title":"Laravel 11.x æ§åˆ¶å°","uri":"/2024/06/console/"},{"categories":["PHP","Laravel"],"content":"ç”Ÿæˆå‘½ä»¤ make:commandå‘½ä»¤ç”¨äºåˆ›å»ºæ–°å‘½ä»¤ã€‚ å‘½ä»¤å°†åœ¨ app/Console/Commands ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„å‘½ä»¤ç±» php artisan make:command SendEmails ","date":"2024å¹´06æœˆ18æ—¥","objectID":"/2024/06/console/:2:1","tags":["PHP","Laravel"],"title":"Laravel 11.x æ§åˆ¶å°","uri":"/2024/06/console/"},{"categories":["PHP","Laravel"],"content":"å‘½ä»¤ç»“æ„ ç”Ÿæˆå‘½ä»¤åï¼Œåº”ä¸ºç±»çš„ signature å’Œ description å±æ€§å®šä¹‰é€‚å½“çš„å€¼ã€‚ åœ¨ list å±å¹•ä¸Šæ˜¾ç¤ºå‘½ä»¤æ—¶ï¼Œå°†ä½¿ç”¨è¿™äº›å±æ€§ã€‚ è¯¥ signature å±æ€§è¿˜å…è®¸å®šä¹‰å‘½ä»¤çš„è¾“å…¥æœŸæœ›å€¼ã€‚ æ‰§è¡Œå‘½ä»¤æ—¶å°†è°ƒç”¨è¯¥ handle æ–¹æ³•ï¼Œå¯ä»¥å°†å‘½ä»¤é€»è¾‘æ”¾åœ¨æ­¤æ–¹æ³•ä¸­ã€‚ \u003c?php namespace App\\Console\\Commands; use Illuminate\\Console\\Command; class SendEmails extends Command { /** * The name and signature of the console command. * * @var string */ protected $signature = 'mail:send {user}'; /** * The console command description. * * @var string */ protected $description = 'Send a marketing email to a user'; /** * Execute the console command. */ public function handle() { $this-\u003einfo('Sending email to ' . $this-\u003eargument('user')); } } é€€å‡ºä»£ç  å¦‚æœ handle è¯¥æ–¹æ³•æœªè¿”å›ä»»ä½•å†…å®¹ï¼Œå¹¶ä¸”å‘½ä»¤æ‰§è¡ŒæˆåŠŸï¼Œåˆ™è¯¥å‘½ä»¤å°†é€€å‡ºå¹¶æ˜¾ç¤º 0 é€€å‡ºä»£ç ï¼ŒæŒ‡ç¤ºæˆåŠŸã€‚ ä½†æ˜¯ï¼Œè¯¥ handle æ–¹æ³•å¯ä»¥é€‰æ‹©è¿”å›ä¸€ä¸ªæ•´æ•°æ¥æ‰‹åŠ¨æŒ‡å®šå‘½ä»¤çš„é€€å‡ºä»£ç ï¼š $this-\u003eerror('Something went wrong.'); return 1; å¦‚æœæƒ³ä»å‘½ä»¤ä¸­çš„ä»»ä½•æ–¹æ³•â€œå¤±è´¥â€å‘½ä»¤ï¼Œå¯ä»¥ä½¿ç”¨è¯¥ fail æ–¹æ³•ã€‚ è¯¥ fail æ–¹æ³•å°†ç«‹å³ç»ˆæ­¢å‘½ä»¤çš„æ‰§è¡Œï¼Œå¹¶è¿”å›ä»¥ä¸‹é€€å‡º 1 ä»£ç ï¼š $this-\u003efail('Something went wrong.'); ","date":"2024å¹´06æœˆ18æ—¥","objectID":"/2024/06/console/:2:2","tags":["PHP","Laravel"],"title":"Laravel 11.x æ§åˆ¶å°","uri":"/2024/06/console/"},{"categories":["PHP","Laravel"],"content":"é—­åŒ…å‘½ä»¤ åŸºäºé—­åŒ…çš„å‘½ä»¤æä¾›äº†å°†æ§åˆ¶å°å‘½ä»¤å®šä¹‰ä¸ºç±»çš„æ›¿ä»£æ–¹æ³•ã€‚ å°±åƒè·¯ç”±é—­åŒ…æ˜¯æ§åˆ¶å™¨çš„æ›¿ä»£æ–¹æ³•ä¸€æ ·ï¼Œå°†å‘½ä»¤é—­åŒ…è§†ä¸ºå‘½ä»¤ç±»çš„æ›¿ä»£æ–¹æ³•ã€‚ å°½ç®¡è¯¥ routes/console.php æ–‡ä»¶æœªå®šä¹‰ HTTP è·¯ç”±ï¼Œä½†å®ƒå®šä¹‰äº†åº”ç”¨ç¨‹åºä¸­åŸºäºæ§åˆ¶å°çš„å…¥å£ç‚¹ï¼ˆè·¯ç”±ï¼‰ã€‚ åœ¨æ­¤æ–‡ä»¶ä¸­ï¼Œå¯ä»¥ä½¿ç”¨è¯¥ Artisan::command æ–¹æ³•å®šä¹‰æ‰€æœ‰åŸºäºé—­åŒ…çš„æ§åˆ¶å°å‘½ä»¤ã€‚ è¯¥ command æ–¹æ³•æ¥å—ä¸¤ä¸ªå‚æ•°ï¼šå‘½ä»¤ç­¾åå’Œæ¥æ”¶å‘½ä»¤å‚æ•°å’Œé€‰é¡¹çš„é—­åŒ… Artisan::command('mail:send {user}', function (string $user) { $this-\u003einfo(\"Sending email to: {$user}!\"); }); ç±»å‹æç¤ºä¾èµ–é¡¹ é™¤äº†æ¥æ”¶å‘½ä»¤çš„å‚æ•°å’Œé€‰é¡¹å¤–ï¼Œå‘½ä»¤é—­åŒ…è¿˜å¯èƒ½ç±»å‹æç¤ºè¦ä»æœåŠ¡å®¹å™¨ä¸­è§£æçš„å…¶ä»–ä¾èµ–é¡¹ï¼š use App\\Models\\User; use App\\Support\\DripEmailer; Artisan::command('mail:send {user}', function (DripEmailer $drip, string $user) { $drip-\u003esend(User::find($user)); }); é—­åŒ…å‘½ä»¤è¯´æ˜ å®šä¹‰åŸºäºé—­åŒ…çš„å‘½ä»¤æ—¶ï¼Œå¯ä»¥ä½¿ç”¨è¯¥ purpose æ–¹æ³•å‘å‘½ä»¤æ·»åŠ è¯´æ˜ã€‚ å½“è¿è¡Œ php artisan list or php artisan help å‘½ä»¤æ—¶ï¼Œå°†æ˜¾ç¤ºæ­¤è¯´æ˜ï¼š Artisan::command('mail:send {user}', function (string $user) { // ... })-\u003epurpose('Send a marketing email to a user'); ","date":"2024å¹´06æœˆ18æ—¥","objectID":"/2024/06/console/:2:3","tags":["PHP","Laravel"],"title":"Laravel 11.x æ§åˆ¶å°","uri":"/2024/06/console/"},{"categories":["PHP","Laravel"],"content":"å¯åˆ†ç¦»çš„å‘½ä»¤ è‹¥è¦ä½¿ç”¨æ­¤åŠŸèƒ½ï¼Œåº”ç”¨ç¨‹åºå¿…é¡»ä½¿ç”¨ memcached ã€ redis ã€ dynamodbã€ database ã€ file æˆ– array ç¼“å­˜é©±åŠ¨ç¨‹åºä½œä¸ºåº”ç”¨ç¨‹åºçš„é»˜è®¤ç¼“å­˜é©±åŠ¨ç¨‹åºã€‚æ­¤å¤–ï¼Œæ‰€æœ‰æœåŠ¡å™¨å¿…é¡»ä¸åŒä¸€ä¸­å¤®ç¼“å­˜æœåŠ¡å™¨é€šä¿¡ã€‚ æœ‰æ—¶ï¼Œå¯èƒ½å¸Œæœ›ç¡®ä¿ä¸€æ¬¡åªèƒ½è¿è¡Œä¸€ä¸ªå‘½ä»¤å®ä¾‹ã€‚ ä¸ºæ­¤ï¼Œå¯ä»¥åœ¨å‘½ä»¤ç±»ä¸Šå®ç°è¯¥ Illuminate\\Contracts\\Console\\Isolatable æ¥å£ï¼š \u003c?php namespace App\\Console\\Commands; use Illuminate\\Console\\Command; use Illuminate\\Contracts\\Console\\Isolatable; class SendEmails extends Command implements Isolatable { // ... } å½“å‘½ä»¤æ ‡è®°ä¸º Isolatable æ—¶ï¼ŒLaravel å°†è‡ªåŠ¨å‘è¯¥å‘½ä»¤æ·»åŠ ä¸€ä¸ª --isolated é€‰é¡¹ã€‚ å½“ä½¿ç”¨è¯¥é€‰é¡¹è°ƒç”¨å‘½ä»¤æ—¶ï¼ŒLaravel å°†ç¡®ä¿è¯¥å‘½ä»¤çš„å…¶ä»–å®ä¾‹å°šæœªè¿è¡Œã€‚ Laravel é€šè¿‡å°è¯•ä½¿ç”¨åº”ç”¨ç¨‹åºçš„é»˜è®¤ç¼“å­˜é©±åŠ¨ç¨‹åºè·å–åŸå­é”æ¥å®ç°æ­¤ç›®çš„ã€‚ å¦‚æœè¯¥å‘½ä»¤çš„å…¶ä»–å®ä¾‹æ­£åœ¨è¿è¡Œï¼Œåˆ™ä¸ä¼šæ‰§è¡Œè¯¥å‘½ä»¤;ä½†æ˜¯ï¼Œè¯¥å‘½ä»¤ä»å°†é€€å‡ºï¼Œå¹¶æ˜¾ç¤ºæˆåŠŸé€€å‡ºçŠ¶æ€ä»£ç ï¼š php artisan mail:send 1 --isolated å¦‚æœè¦æŒ‡å®šå‘½ä»¤åœ¨æ— æ³•æ‰§è¡Œæ—¶åº”è¿”å›çš„é€€å‡ºçŠ¶æ€ä»£ç ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹ isolated é€‰é¡¹æä¾›æ‰€éœ€çš„çŠ¶æ€ä»£ç ï¼š php artisan mail:send 1 --isolated=12 Lock ID é»˜è®¤æƒ…å†µä¸‹ï¼ŒLaravel å°†ä½¿ç”¨å‘½ä»¤çš„åç§°ç”Ÿæˆå­—ç¬¦ä¸²é”®ï¼Œè¯¥å­—ç¬¦ä¸²é”®ç”¨äºè·å–åº”ç”¨ç¨‹åºç¼“å­˜ä¸­çš„åŸå­é”ã€‚ ä½†æ˜¯ï¼Œä¹Ÿå¯ä»¥é€šè¿‡åœ¨ Artisan å‘½ä»¤ç±»ä¸Šå®šä¹‰ isolatableId æ–¹æ³•æ¥è‡ªå®šä¹‰æ­¤é”®ï¼Œä»è€Œå…è®¸å°†å‘½ä»¤çš„å‚æ•°æˆ–é€‰é¡¹é›†æˆåˆ°é”®ä¸­ï¼š /** * Get the isolatable ID for the command. */ public function isolatableId(): string { return $this-\u003eargument('user'); } Lock è¿‡æœŸæ—¶é—´ é»˜è®¤æƒ…å†µä¸‹ï¼Œéš”ç¦»é”åœ¨å‘½ä»¤å®Œæˆåè¿‡æœŸã€‚æˆ–è€…ï¼Œå¦‚æœå‘½ä»¤ä¸­æ–­ä¸”æ— æ³•å®Œæˆï¼Œåˆ™é”å°†åœ¨ä¸€å°æ—¶åè¿‡æœŸã€‚ ä½†æ˜¯ï¼Œå¯ä»¥é€šè¿‡åœ¨å‘½ä»¤ä¸Šå®šä¹‰ isolationLockExpiresAt æ–¹æ³•æ¥è°ƒæ•´é”å®šè¿‡æœŸæ—¶é—´ï¼š use DateTimeInterface; use DateInterval; /** * Determine when an isolation lock expires for the command. */ public function isolationLockExpiresAt(): DateTimeInterface|DateInterval { return now()-\u003eaddMinutes(5); } ","date":"2024å¹´06æœˆ18æ—¥","objectID":"/2024/06/console/:2:4","tags":["PHP","Laravel"],"title":"Laravel 11.x æ§åˆ¶å°","uri":"/2024/06/console/"},{"categories":["PHP","Laravel"],"content":"å®šä¹‰è¾“å…¥æœŸæœ› ç¼–å†™æ§åˆ¶å°å‘½ä»¤æ—¶ï¼Œé€šå¸¸é€šè¿‡å‚æ•°æˆ–é€‰é¡¹ä»ç”¨æˆ·é‚£é‡Œæ”¶é›†è¾“å…¥ã€‚ Laravel å¯ä»¥éå¸¸æ–¹ä¾¿åœ°ä½¿ç”¨å‘½ä»¤ä¸Šçš„ signature å±æ€§æ¥å®šä¹‰ç”¨æˆ·æœŸæœ›çš„è¾“å…¥ã€‚ è¯¥ signature å±æ€§å…è®¸ä»¥å•ä¸ªå¯Œæœ‰è¡¨ç°åŠ›çš„ç±»ä¼¼è·¯ç”±çš„è¯­æ³•å®šä¹‰å‘½ä»¤çš„åç§°ã€å‚æ•°å’Œé€‰é¡¹ã€‚ ","date":"2024å¹´06æœˆ18æ—¥","objectID":"/2024/06/console/:3:0","tags":["PHP","Laravel"],"title":"Laravel 11.x æ§åˆ¶å°","uri":"/2024/06/console/"},{"categories":["PHP","Laravel"],"content":"å‚æ•° ç”¨æˆ·æä¾›çš„æ‰€æœ‰å‚æ•°å’Œé€‰é¡¹éƒ½ç”¨å¤§æ‹¬å·æ‹¬èµ·æ¥ã€‚ /** * The name and signature of the console command. * * @var string */ protected $signature = 'mail:send {user}'; è¿˜å¯ä»¥å°†å‚æ•°è®¾ç½®ä¸ºå¯é€‰å‚æ•°æˆ–å®šä¹‰å‚æ•°çš„é»˜è®¤å€¼ï¼š // Optional argument... 'mail:send {user?}' // Optional argument with default value... 'mail:send {user=foo}' ","date":"2024å¹´06æœˆ18æ—¥","objectID":"/2024/06/console/:3:1","tags":["PHP","Laravel"],"title":"Laravel 11.x æ§åˆ¶å°","uri":"/2024/06/console/"},{"categories":["PHP","Laravel"],"content":"é€‰é¡¹ å½“é€šè¿‡å‘½ä»¤è¡Œæä¾›é€‰é¡¹æ—¶ï¼Œé€‰é¡¹ä»¥ä¸¤ä¸ªè¿å­—ç¬¦ ï¼ˆ -- ï¼‰ ä¸ºå‰ç¼€ã€‚ æœ‰ä¸¤ç§ç±»å‹çš„é€‰é¡¹ï¼šæ¥æ”¶å€¼çš„é€‰é¡¹å’Œä¸æ¥æ”¶å€¼çš„é€‰é¡¹ã€‚ æœªæ”¶åˆ°å€¼çš„é€‰é¡¹å……å½“å¸ƒå°”â€œå¼€å…³â€ã€‚ /** * The name and signature of the console command. * * @var string */ protected $signature = 'mail:send {user} {--queue}'; åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œå¯ä»¥åœ¨è°ƒç”¨ Artisan å‘½ä»¤æ—¶æŒ‡å®š --queue å¼€å…³ã€‚ å¦‚æœä¼ é€’äº† --queue å¼€å…³ï¼Œåˆ™è¯¥é€‰é¡¹çš„å€¼å°†ä¸º true ã€‚å¦åˆ™ï¼Œè¯¥å€¼å°†ä¸º false ï¼š php artisan mail:send 1 --queue å¸¦å€¼çš„é€‰é¡¹ åœ¨é€‰é¡¹åç§°ååŠ ä¸Šç¬¦å· = å®šä¹‰å¸¦å€¼çš„é€‰é¡¹ï¼š /** * The name and signature of the console command. * * @var string */ protected $signature = 'mail:send {user} {--queue=}'; åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œç”¨æˆ·å¯ä»¥åƒè¿™æ ·ä¼ é€’é€‰é¡¹çš„å€¼ã€‚ å¦‚æœåœ¨è°ƒç”¨å‘½ä»¤æ—¶æœªæŒ‡å®šè¯¥é€‰é¡¹ï¼Œåˆ™å…¶å€¼å°†ä¸º null ï¼š php artisan mail:send 1 --queue=default å¯ä»¥é€šè¿‡åœ¨é€‰é¡¹åç§°åæŒ‡å®šé»˜è®¤å€¼æ¥ä¸ºé€‰é¡¹åˆ†é…é»˜è®¤å€¼ã€‚ å¦‚æœç”¨æˆ·æœªä¼ é€’ä»»ä½•é€‰é¡¹å€¼ï¼Œåˆ™å°†ä½¿ç”¨é»˜è®¤å€¼ï¼š 'mail:send {user} {--queue=default}' é€‰é¡¹å¿«æ·æ–¹å¼ è¦åœ¨å®šä¹‰é€‰é¡¹æ—¶æŒ‡å®šå¿«æ·æ–¹å¼ï¼Œå¯ä»¥åœ¨é€‰é¡¹åç§°ä¹‹å‰æŒ‡å®šå¿«æ·æ–¹å¼ï¼Œå¹¶ä½¿ç”¨å­—ç¬¦ | ä½œä¸ºåˆ†éš”ç¬¦å°†å¿«æ·æ–¹å¼ä¸å®Œæ•´é€‰é¡¹åç§°åˆ†å¼€ï¼š 'mail:send {user} {--Q|queue}' åœ¨ç»ˆç«¯ä¸Šè°ƒç”¨å‘½ä»¤æ—¶ï¼Œé€‰é¡¹å¿«æ·æ–¹å¼åº”ä»¥å•ä¸ªè¿å­—ç¬¦ä¸ºå‰ç¼€ï¼Œå¹¶ä¸”åœ¨æŒ‡å®šé€‰é¡¹å€¼æ—¶ä¸åº”åŒ…å« = ä»»ä½•å­—ç¬¦ï¼š php artisan mail:send 1 -Qdefault ","date":"2024å¹´06æœˆ18æ—¥","objectID":"/2024/06/console/:3:2","tags":["PHP","Laravel"],"title":"Laravel 11.x æ§åˆ¶å°","uri":"/2024/06/console/"},{"categories":["PHP","Laravel"],"content":"è¾“å…¥æ•°ç»„ å¦‚æœè¦å®šä¹‰å‚æ•°æˆ–é€‰é¡¹ä»¥éœ€è¦å¤šä¸ªè¾“å…¥å€¼ï¼Œåˆ™å¯ä»¥ä½¿ç”¨å­—ç¬¦ * 'mail:send {user*}' è°ƒç”¨æ­¤æ–¹æ³•æ—¶ï¼Œå¯ä»¥å°† user å‚æ•°æŒ‰é¡ºåºä¼ é€’åˆ°å‘½ä»¤è¡Œã€‚ ä¾‹å¦‚ï¼Œä»¥ä¸‹å‘½ä»¤å°† çš„ user å€¼è®¾ç½®ä¸ºå…·æœ‰ 1 å’Œ 2 ä½œä¸ºå…¶å€¼çš„æ•°ç»„ï¼š php artisan mail:send 1 2 é€‰é¡¹æ•°ç»„ å®šä¹‰éœ€è¦å¤šä¸ªè¾“å…¥å€¼çš„é€‰é¡¹æ—¶ï¼Œä¼ é€’ç»™å‘½ä»¤çš„æ¯ä¸ªé€‰é¡¹å€¼éƒ½åº”ä»¥é€‰é¡¹åç§°ä¸ºå‰ç¼€ï¼š 'mail:send {--id=*}' å¯ä»¥é€šè¿‡ä¼ é€’å¤šä¸ª --id å‚æ•°æ¥è°ƒç”¨æ­¤ç±»å‘½ä»¤ï¼š php artisan mail:send --id=1 --id=2 ","date":"2024å¹´06æœˆ18æ—¥","objectID":"/2024/06/console/:3:3","tags":["PHP","Laravel"],"title":"Laravel 11.x æ§åˆ¶å°","uri":"/2024/06/console/"},{"categories":["PHP","Laravel"],"content":"è¾“å…¥è¯´æ˜ å¯ä»¥é€šè¿‡ä½¿ç”¨å†’å·å°†å‚æ•°åç§°ä¸æè¿°åˆ†å¼€æ¥ä¸ºè¾“å…¥å‚æ•°å’Œé€‰é¡¹åˆ†é…è¯´æ˜ã€‚ å¦‚æœéœ€è¦ä¸€ç‚¹é¢å¤–çš„ç©ºé—´æ¥å®šä¹‰å‘½ä»¤ï¼Œè¯·éšæ„å°†å®šä¹‰åˆ†æ•£åˆ°å¤šè¡Œï¼š /** * The name and signature of the console command. * * @var string */ protected $signature = 'mail:send {user : The ID of the user} {--queue : Whether the job should be queued}'; ","date":"2024å¹´06æœˆ18æ—¥","objectID":"/2024/06/console/:3:4","tags":["PHP","Laravel"],"title":"Laravel 11.x æ§åˆ¶å°","uri":"/2024/06/console/"},{"categories":["PHP","Laravel"],"content":"æç¤ºè¾“å…¥ç¼ºå¤± å¦‚æœå‘½ä»¤åŒ…å«å¿…éœ€çš„å‚æ•°ï¼Œåˆ™ç”¨æˆ·å°†åœ¨æœªæä¾›å‚æ•°æ—¶æ”¶åˆ°é”™è¯¯æ¶ˆæ¯ã€‚ æˆ–è€…ï¼Œä¹Ÿå¯ä»¥é€šè¿‡å®ç° PromptsForMissingInput æ¥å£å°†å‘½ä»¤é…ç½®ä¸ºåœ¨ç¼ºå°‘æ‰€éœ€å‚æ•°æ—¶è‡ªåŠ¨æç¤ºç”¨æˆ·ï¼š \u003c?php namespace App\\Console\\Commands; use Illuminate\\Console\\Command; use Illuminate\\Contracts\\Console\\PromptsForMissingInput; class SendEmails extends Command implements PromptsForMissingInput { /** * The name and signature of the console command. * * @var string */ protected $signature = 'mail:send {user}'; // ... } å¦‚æœ Laravel éœ€è¦ä»ç”¨æˆ·é‚£é‡Œæ”¶é›†æ‰€éœ€çš„å‚æ•°ï¼Œå®ƒå°†é€šè¿‡ä½¿ç”¨å‚æ•°åç§°æˆ–æè¿°æ™ºèƒ½åœ°è¡¨è¿°é—®é¢˜æ¥è‡ªåŠ¨å‘ç”¨æˆ·è¯¢é—®å‚æ•°ã€‚ å¦‚æœå¸Œæœ›è‡ªå®šä¹‰ç”¨äºæ”¶é›†æ‰€éœ€å‚æ•°çš„é—®é¢˜ï¼Œå¯ä»¥å®ç°è¯¥ promptForMissingArgumentsUsing æ–¹æ³•ï¼Œè¿”å›ç”±å‚æ•°åç§°é”®æ§çš„é—®é¢˜æ•°ç»„ï¼š /** * Prompt for missing input arguments using the returned questions. * * @return array\u003cstring, string\u003e */ protected function promptForMissingArgumentsUsing(): array { return [ 'user' =\u003e 'Which user ID should receive the mail?', ]; } è¿˜å¯ä»¥ä½¿ç”¨åŒ…å«é—®é¢˜å’Œå ä½ç¬¦çš„å…ƒç»„æ¥æä¾›å ä½ç¬¦æ–‡æœ¬ï¼š return [ 'user' =\u003e ['Which user ID should receive the mail?', 'E.g. 123'], ]; å¦‚æœè¦å®Œå…¨æ§åˆ¶æç¤ºï¼Œå¯ä»¥æä¾›ä¸€ä¸ªé—­åŒ…ï¼Œè¯¥é—­åŒ…åº”æç¤ºç”¨æˆ·å¹¶è¿”å›å…¶ç­”æ¡ˆï¼š use App\\Models\\User; use function Laravel\\Prompts\\search; // ... return [ 'user' =\u003e fn () =\u003e search( label: 'Search for a user:', placeholder: 'E.g. Taylor Otwell', options: fn ($value) =\u003e strlen($value) \u003e 0 ? User::where('name', 'like', \"%{$value}%\")-\u003epluck('name', 'id')-\u003eall() : [] ), ]; å¦‚æœå¸Œæœ›æç¤ºç”¨æˆ·é€‰æ‹©æˆ–è¾“å…¥é€‰é¡¹ï¼Œå¯ä»¥åœ¨å‘½ä»¤çš„ handle æ–¹æ³•ä¸­åŒ…å«æç¤ºã€‚ ç„¶è€Œï¼Œå¦‚æœåªå¸Œæœ›åœ¨ç”¨æˆ·å› ä¸ºç¼ºå°‘å‚æ•°è€Œè¢«è‡ªåŠ¨æç¤ºæ—¶æ‰è¿›è¡Œæç¤ºï¼Œé‚£ä¹ˆå¯ä»¥å®ç° afterPromptingForMissingArguments æ–¹æ³•ï¼š use Symfony\\Component\\Console\\Input\\InputInterface; use Symfony\\Component\\Console\\Output\\OutputInterface; use function Laravel\\Prompts\\confirm; // ... /** * Perform actions after the user was prompted for missing arguments. */ protected function afterPromptingForMissingArguments(InputInterface $input, OutputInterface $output): void { $input-\u003esetOption('queue', confirm( label: 'Would you like to queue the mail?', default: $this-\u003eoption('queue') )); } ","date":"2024å¹´06æœˆ18æ—¥","objectID":"/2024/06/console/:3:5","tags":["PHP","Laravel"],"title":"Laravel 11.x æ§åˆ¶å°","uri":"/2024/06/console/"},{"categories":["PHP","Laravel"],"content":"å‘½ä»¤I/O ","date":"2024å¹´06æœˆ18æ—¥","objectID":"/2024/06/console/:4:0","tags":["PHP","Laravel"],"title":"Laravel 11.x æ§åˆ¶å°","uri":"/2024/06/console/"},{"categories":["PHP","Laravel"],"content":"æ£€ç´¢è¾“å…¥ åœ¨æ‰§è¡Œå‘½ä»¤æ—¶ï¼Œå¯èƒ½éœ€è¦è®¿é—®å‘½ä»¤æ¥å—çš„å‚æ•°å’Œé€‰é¡¹çš„å€¼ã€‚ ä¸ºæ­¤ï¼Œå¯ä»¥ä½¿ç”¨ argument å’Œ option æ–¹æ³•ã€‚ å¦‚æœå‚æ•°æˆ–é€‰é¡¹ä¸å­˜åœ¨ï¼Œ null åˆ™è¿”å›ï¼š /** * Execute the console command. */ public function handle(): void { $userId = $this-\u003eargument('user'); } å¦‚æœéœ€è¦å°†æ‰€æœ‰å‚æ•°æ£€ç´¢ä¸º array ï¼Œè¯·è°ƒç”¨è¯¥ arguments æ–¹æ³•ï¼š $arguments = $this-\u003earguments(); ä½¿ç”¨è¯¥ option æ–¹æ³•å¯ä»¥åƒæ£€ç´¢å‚æ•°ä¸€æ ·è½»æ¾åœ°æ£€ç´¢é€‰é¡¹ã€‚ è‹¥è¦å°†æ‰€æœ‰é€‰é¡¹æ£€ç´¢ä¸ºæ•°ç»„ï¼Œè¯·è°ƒç”¨ä»¥ä¸‹ options æ–¹æ³•ï¼š // Retrieve a specific option... $queueName = $this-\u003eoption('queue'); // Retrieve all options as an array... $options = $this-\u003eoptions(); ","date":"2024å¹´06æœˆ18æ—¥","objectID":"/2024/06/console/:4:1","tags":["PHP","Laravel"],"title":"Laravel 11.x æ§åˆ¶å°","uri":"/2024/06/console/"},{"categories":["PHP","Laravel"],"content":"è¾“å…¥æç¤º é™¤äº†æ˜¾ç¤ºè¾“å‡ºä¹‹å¤–ï¼Œè¿˜å¯ä»¥è¦æ±‚ç”¨æˆ·åœ¨æ‰§è¡Œå‘½ä»¤æœŸé—´æä¾›è¾“å…¥ã€‚ è¯¥ ask æ–¹æ³•å°†æç¤ºç”¨æˆ·ç»™å®šçš„é—®é¢˜ï¼Œæ¥å—ä»–ä»¬çš„è¾“å…¥ï¼Œç„¶åå°†ç”¨æˆ·çš„è¾“å…¥è¿”å›åˆ°æ‚¨çš„å‘½ä»¤ï¼š /** * Execute the console command. */ public function handle(): void { $name = $this-\u003eask('What is your name?'); // ... } è¯¥ ask æ–¹æ³•è¿˜æ¥å—å¯é€‰çš„ç¬¬äºŒä¸ªå‚æ•°ï¼Œè¯¥å‚æ•°æŒ‡å®šåœ¨æœªæä¾›ç”¨æˆ·è¾“å…¥æ—¶åº”è¿”å›çš„é»˜è®¤å€¼ï¼š $name = $this-\u003eask('What is your name?', 'Taylor'); secret æ–¹æ³•ä¸ ask æ–¹æ³•ç±»ä¼¼ï¼Œä½†ç”¨æˆ·åœ¨æ§åˆ¶å°è¾“å…¥æ—¶è¾“å…¥å†…å®¹ä¸ä¼šæ˜¾ç¤ºç»™ä»–ä»¬ã€‚ æ­¤æ–¹æ³•åœ¨è¯¢é—®è¯¸å¦‚å¯†ç ç­‰æ•æ„Ÿä¿¡æ¯æ—¶éå¸¸æœ‰ç”¨ï¼š $password = $this-\u003esecret('What is the password?'); è¦æ±‚ç¡®è®¤ å¦‚æœéœ€è¦å‘ç”¨æˆ·è¯¢é—®ä¸€ä¸ªç®€å•çš„â€œæ˜¯æˆ–å¦â€ç¡®è®¤ï¼Œå¯ä»¥ä½¿ç”¨ confirm æ–¹æ³•ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œæ­¤æ–¹æ³•å°†è¿”å› falseã€‚ ç„¶è€Œï¼Œå¦‚æœç”¨æˆ·åœ¨æç¤ºä¸­è¾“å…¥ y æˆ– yesï¼Œè¯¥æ–¹æ³•å°†è¿”å› trueã€‚ if ($this-\u003econfirm('Do you wish to continue?')) { // ... } å¦‚æœéœ€è¦ï¼Œå¯ä»¥é€šè¿‡å°† true ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ä¼ é€’ç»™ confirm æ–¹æ³•ï¼Œä»è€ŒæŒ‡å®šç¡®è®¤æç¤ºé»˜è®¤åº”è¿”å› trueï¼š if ($this-\u003econfirm('Do you wish to continue?', true)) { // ... } è‡ªåŠ¨å®Œæˆ anticipate æ–¹æ³•å¯ç”¨äºä¸ºå¯èƒ½çš„é€‰é¡¹æä¾›è‡ªåŠ¨å®Œæˆã€‚ ç”¨æˆ·ä»ç„¶å¯ä»¥æä¾›ä»»ä½•ç­”æ¡ˆï¼Œè€Œä¸ç®¡è‡ªåŠ¨å®Œæˆæç¤ºå¦‚ä½•ï¼š $name = $this-\u003eanticipate('What is your name?', ['Taylor', 'Dayle']); æˆ–è€…ï¼Œä¹Ÿå¯ä»¥å°†ä¸€ä¸ªé—­åŒ…ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ä¼ é€’ç»™ anticipate æ–¹æ³•ã€‚ æ¯æ¬¡ç”¨æˆ·è¾“å…¥ä¸€ä¸ªå­—ç¬¦æ—¶ï¼Œéƒ½ä¼šè°ƒç”¨è¯¥é—­åŒ…ã€‚ é—­åŒ…åº”æ¥å—ä¸€ä¸ªåŒ…å«ç”¨æˆ·å½“å‰è¾“å…¥çš„å­—ç¬¦ä¸²å‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªç”¨äºè‡ªåŠ¨å®Œæˆçš„é€‰é¡¹æ•°ç»„ï¼š $name = $this-\u003eanticipate('What is your address?', function (string $input) { // Return auto-completion options... }); å¤šé¡¹é€‰æ‹© å¦‚æœéœ€è¦åœ¨è¯¢é—®é—®é¢˜æ—¶å‘ç”¨æˆ·æä¾›ä¸€ç»„é¢„å®šä¹‰çš„é€‰é¡¹ï¼Œå¯ä»¥ä½¿ç”¨ choice æ–¹æ³•ã€‚ å¦‚æœæœªé€‰æ‹©ä»»ä½•é€‰é¡¹ï¼Œå¯ä»¥é€šè¿‡å°†ç´¢å¼•ä½œä¸ºç¬¬ä¸‰ä¸ªå‚æ•°ä¼ é€’ç»™è¯¥æ–¹æ³•æ¥è®¾ç½®é»˜è®¤è¿”å›å€¼çš„æ•°ç»„ç´¢å¼•ï¼š $name = $this-\u003echoice( 'What is your name?', ['Taylor', 'Dayle'], $defaultIndex ); æ­¤å¤–ï¼Œchoice æ–¹æ³•è¿˜æ¥å—ç¬¬å››ä¸ªå’Œç¬¬äº”ä¸ªå¯é€‰å‚æ•°ï¼Œç”¨äºç¡®å®šé€‰æ‹©æœ‰æ•ˆå“åº”çš„æœ€å¤§å°è¯•æ¬¡æ•°ä»¥åŠæ˜¯å¦å…è®¸å¤šé‡é€‰æ‹©ï¼š $name = $this-\u003echoice( 'What is your name?', ['Taylor', 'Dayle'], $defaultIndex, $maxAttempts = null, $allowMultipleSelections = false ); ","date":"2024å¹´06æœˆ18æ—¥","objectID":"/2024/06/console/:4:2","tags":["PHP","Laravel"],"title":"Laravel 11.x æ§åˆ¶å°","uri":"/2024/06/console/"},{"categories":["PHP","Laravel"],"content":"å†™å…¥è¾“å‡º è‹¥è¦å°†è¾“å‡ºå‘é€åˆ°æ§åˆ¶å°ï¼Œå¯ä»¥ä½¿ç”¨line, info, comment, question, warnå’Œ erroræ–¹æ³•ã€‚ è¿™äº›æ–¹æ³•ä¸­çš„æ¯ä¸€ç§éƒ½å°†ä½¿ç”¨é€‚å½“çš„ ANSI é¢œè‰²æ¥å®ç°å…¶ç›®çš„ã€‚ info æ–¹æ³•å°†åœ¨æ§åˆ¶å°ä¸­æ˜¾ç¤ºä¸ºç»¿è‰²æ–‡æœ¬ï¼š /** * Execute the console command. */ public function handle(): void { // ... $this-\u003einfo('The command was successful!'); } error æ–¹æ³•å°†é”™è¯¯æ¶ˆæ¯æ–‡æœ¬æ˜¾ç¤ºä¸ºçº¢è‰²ï¼š $this-\u003eerror('Something went wrong!'); lineæ–¹æ³•æ˜¾ç¤ºçº¯æ–‡æœ¬ã€æ— è‰²æ–‡æœ¬ï¼š $this-\u003eline('Display this on the screen'); newLineæ–¹æ³•æ˜¾ç¤ºç©ºè¡Œï¼š // Write a single blank line... $this-\u003enewLine(); // Write three blank lines... $this-\u003enewLine(3); Tables table æ–¹æ³•ä½¿æ­£ç¡®æ ¼å¼åŒ–å¤šè¡Œ/å¤šåˆ—æ•°æ®å˜å¾—ç®€å•ã€‚ åªéœ€è¦æä¾›åˆ—åå’Œè¡¨æ ¼æ•°æ®ï¼ŒLaravel ä¼šè‡ªåŠ¨ä¸ºæ‚¨è®¡ç®—è¡¨æ ¼çš„é€‚å½“å®½åº¦å’Œé«˜åº¦ï¼š use App\\Models\\User; $this-\u003etable( ['Name', 'Email'], User::all(['name', 'email'])-\u003etoArray() ); è¿›åº¦æ¡ å¯¹äºé•¿æ—¶é—´è¿è¡Œçš„ä»»åŠ¡ï¼Œæ˜¾ç¤ºä¸€ä¸ªè¿›åº¦æ¡æ¥å‘ŠçŸ¥ç”¨æˆ·ä»»åŠ¡çš„å®Œæˆæƒ…å†µæ˜¯å¾ˆæœ‰å¸®åŠ©çš„ã€‚ é€šè¿‡ä½¿ç”¨ withProgressBar æ–¹æ³•ï¼ŒLaravel å°†æ˜¾ç¤ºä¸€ä¸ªè¿›åº¦æ¡ï¼Œå¹¶åœ¨éå†ç»™å®šçš„å¯è¿­ä»£å€¼çš„æ¯æ¬¡è¿­ä»£æ—¶æ¨è¿›å…¶è¿›åº¦ï¼š use App\\Models\\User; $users = $this-\u003ewithProgressBar(User::all(), function (User $user) { $this-\u003eperformTask($user); }); æœ‰æ—¶ï¼Œå¯èƒ½éœ€è¦å¯¹è¿›åº¦æ¡çš„æ¨è¿›è¿›è¡Œæ›´æ‰‹åŠ¨çš„æ§åˆ¶ã€‚ é¦–å…ˆï¼Œå®šä¹‰è¯¥è¿‡ç¨‹å°†è¿­ä»£çš„æ€»æ­¥æ•°ã€‚ ç„¶åï¼Œåœ¨å¤„ç†æ¯ä¸ªé¡¹ç›®åæ¨è¿›è¿›åº¦æ¡ï¼š $users = App\\Models\\User::all(); $bar = $this-\u003eoutput-\u003ecreateProgressBar(count($users)); $bar-\u003estart(); foreach ($users as $user) { $this-\u003eperformTask($user); $bar-\u003eadvance(); } $bar-\u003efinish(); ","date":"2024å¹´06æœˆ18æ—¥","objectID":"/2024/06/console/:4:3","tags":["PHP","Laravel"],"title":"Laravel 11.x æ§åˆ¶å°","uri":"/2024/06/console/"},{"categories":["PHP","Laravel"],"content":"æ³¨å†Œå‘½ä»¤ é»˜è®¤æƒ…å†µä¸‹ï¼ŒLaravel ä¼šè‡ªåŠ¨æ³¨å†Œ app/Console/Commands ç›®å½•ä¸­çš„æ‰€æœ‰å‘½ä»¤ã€‚ ä½†æ˜¯ï¼Œå¯ä»¥æŒ‡ç¤º Laravel ä½¿ç”¨åº”ç”¨ç¨‹åº bootstrap/app.php æ–‡ä»¶ä¸­çš„æ–¹æ³• withCommands æ‰«æå…¶ä»–ç›®å½•ä¸­çš„ Artisan å‘½ä»¤ï¼š -\u003ewithCommands([ __DIR__.'/../app/Domain/Orders/Commands', ]) è¿˜å¯ä»¥é€šè¿‡å‘ withCommands æ–¹æ³•æä¾›å‘½ä»¤çš„ç±»åæ¥æ‰‹åŠ¨æ³¨å†Œå‘½ä»¤ï¼š use App\\Domain\\Orders\\Commands\\SendEmails; -\u003ewithCommands([ SendEmails::class, ]) å½“ Artisan å¯åŠ¨æ—¶ï¼Œåº”ç”¨ç¨‹åºä¸­çš„æ‰€æœ‰å‘½ä»¤éƒ½å°†ç”±æœåŠ¡å®¹å™¨è§£æå¹¶å‘ Artisan æ³¨å†Œã€‚ ","date":"2024å¹´06æœˆ18æ—¥","objectID":"/2024/06/console/:5:0","tags":["PHP","Laravel"],"title":"Laravel 11.x æ§åˆ¶å°","uri":"/2024/06/console/"},{"categories":["PHP","Laravel"],"content":"ä»¥ç¼–ç¨‹æ–¹å¼æ‰§è¡Œå‘½ä»¤ å¯ä»¥ä½¿ç”¨ Artisan facade ä¸Šçš„ call æ–¹æ³•æ¥å®Œæˆä»è·¯ç”±æˆ–æ§åˆ¶å™¨ä¸­æ‰§è¡Œä¸€ä¸ªArtisanå‘½ä»¤ã€‚ call æ–¹æ³•æ¥å—å‘½ä»¤çš„ç­¾ååç§°æˆ–ç±»åç§°ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ï¼Œä»¥åŠä¸€ä¸ªå‘½ä»¤å‚æ•°æ•°ç»„ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ã€‚è¿”å›å€¼å°†æ˜¯å‘½ä»¤çš„é€€å‡ºç ï¼š use Illuminate\\Support\\Facades\\Artisan; Route::post('/user/{user}/mail', function (string $user) { $exitCode = Artisan::call('mail:send', [ 'user' =\u003e $user, '--queue' =\u003e 'default' ]); // ... }); ä¹Ÿå¯ä»¥å°†æ•´ä¸ª Artisan å‘½ä»¤ä½œä¸ºå­—ç¬¦ä¸²ä¼ é€’ call ç»™è¯¥æ–¹æ³•ï¼š Artisan::call('mail:send 1 --queue=default'); ä¼ é€’æ•°ç»„å€¼ å¦‚æœå‘½ä»¤å®šä¹‰äº†ä¸€ä¸ªæ¥å—æ•°ç»„çš„é€‰é¡¹ï¼Œåˆ™å¯ä»¥å°†å€¼æ•°ç»„ä¼ é€’ç»™è¯¥é€‰é¡¹ï¼š use Illuminate\\Support\\Facades\\Artisan; Route::post('/mail', function () { $exitCode = Artisan::call('mail:send', [ '--id' =\u003e [5, 13] ]); }); ä¼ é€’å¸ƒå°”å€¼ å¦‚æœéœ€è¦æŒ‡å®šä¸æ¥å—å­—ç¬¦ä¸²å€¼çš„é€‰é¡¹çš„å€¼ï¼ˆå¦‚å‘½ä»¤ä¸Š --force çš„æ ‡å¿—ï¼‰ï¼Œåˆ™åº”ä¼ é€’ true or false ä½œä¸ºé€‰é¡¹çš„ migrate:refresh å€¼ï¼š $exitCode = Artisan::call('migrate:refresh', [ '--force' =\u003e true, ]); æ’é˜ŸArtisanå‘½ä»¤ é€šè¿‡åœ¨ Artisan facade ä¸Šä½¿ç”¨ queue æ–¹æ³•ï¼Œç”šè‡³å¯ä»¥å°† Artisan å‘½ä»¤åŠ å…¥é˜Ÿåˆ—ï¼Œä»¥ä¾¿å®ƒä»¬åœ¨åå°ç”±é˜Ÿåˆ—å·¥ä½œè€…å¤„ç†ã€‚ åœ¨ä½¿ç”¨æ­¤æ–¹æ³•ä¹‹å‰ï¼Œè¯·ç¡®ä¿æ‚¨å·²é…ç½®å¥½é˜Ÿåˆ—å¹¶æ­£åœ¨è¿è¡Œé˜Ÿåˆ—ç›‘å¬å™¨ï¼š use Illuminate\\Support\\Facades\\Artisan; Route::post('/user/{user}/mail', function (string $user) { Artisan::queue('mail:send', [ 'user' =\u003e $user, '--queue' =\u003e 'default' ]); // ... }); é€šè¿‡ä½¿ç”¨ onConnection å’Œ onQueue æ–¹æ³•ï¼Œå¯ä»¥æŒ‡å®š Artisan å‘½ä»¤åº”è¢«æ´¾å‘åˆ°çš„è¿æ¥æˆ–é˜Ÿåˆ—ï¼š Artisan::queue('mail:send', [ 'user' =\u003e 1, '--queue' =\u003e 'default' ])-\u003eonConnection('redis')-\u003eonQueue('commands'); ","date":"2024å¹´06æœˆ18æ—¥","objectID":"/2024/06/console/:6:0","tags":["PHP","Laravel"],"title":"Laravel 11.x æ§åˆ¶å°","uri":"/2024/06/console/"},{"categories":["PHP","Laravel"],"content":"ä»å…¶ä»–å‘½ä»¤è°ƒç”¨å‘½ä»¤ æœ‰æ—¶ï¼Œå¯èƒ½å¸Œæœ›ä»ç°æœ‰çš„ Artisan å‘½ä»¤ä¸­è°ƒç”¨å…¶ä»–å‘½ä»¤ã€‚ å¯ä»¥ä½¿ç”¨ call æ–¹æ³•æ¥å®ç°ã€‚ è¿™ç§ call æ–¹æ³•æ¥å—å‘½ä»¤åç§°å’Œä¸€ä¸ªåŒ…å«å‘½ä»¤å‚æ•°/é€‰é¡¹çš„æ•°ç»„ï¼š /** * Execute the console command. */ public function handle(): void { $this-\u003ecall('mail:send', [ 'user' =\u003e 1, '--queue' =\u003e 'default' ]); // ... } å¦‚æœå¸Œæœ›è°ƒç”¨å¦ä¸€ä¸ªæ§åˆ¶å°å‘½ä»¤å¹¶æŠ‘åˆ¶å…¶æ‰€æœ‰è¾“å‡ºï¼Œå¯ä»¥ä½¿ç”¨ callSilently æ–¹æ³•ã€‚ callSilently æ–¹æ³•çš„ç­¾åä¸ call æ–¹æ³•ç›¸åŒï¼š $this-\u003ecallSilently('mail:send', [ 'user' =\u003e 1, '--queue' =\u003e 'default' ]); ","date":"2024å¹´06æœˆ18æ—¥","objectID":"/2024/06/console/:6:1","tags":["PHP","Laravel"],"title":"Laravel 11.x æ§åˆ¶å°","uri":"/2024/06/console/"},{"categories":["PHP","Laravel"],"content":"ä¿¡å·å¤„ç† æ“ä½œç³»ç»Ÿå…è®¸å°†ä¿¡å·å‘é€åˆ°æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹ã€‚ ä¾‹å¦‚ï¼ŒSIGTERM ä¿¡å·æ˜¯æ“ä½œç³»ç»Ÿè¯·æ±‚ç¨‹åºç»ˆæ­¢çš„æ–¹å¼ã€‚ å¦‚æœéœ€è¦åœ¨ Artisan æ§åˆ¶å°å‘½ä»¤ä¸­ç›‘å¬ä¿¡å·ï¼Œå¹¶åœ¨ä¿¡å·å‘ç”Ÿæ—¶æ‰§è¡Œä»£ç ï¼Œå¯ä»¥ä½¿ç”¨ trap æ–¹æ³•ï¼š /** * Execute the console command. */ public function handle(): void { $this-\u003etrap(SIGTERM, fn () =\u003e $this-\u003eshouldKeepRunning = false); while ($this-\u003eshouldKeepRunning) { // ... } } è‹¥è¦åŒæ—¶ä¾¦å¬å¤šä¸ªä¿¡å·ï¼Œå¯ä»¥å‘ trap è¯¥æ–¹æ³•æä¾›ä¿¡å·æ•°ç»„ï¼š $this-\u003etrap([SIGTERM, SIGQUIT], function (int $signal) { $this-\u003eshouldKeepRunning = false; dump($signal); // SIGTERM / SIGQUIT }); ","date":"2024å¹´06æœˆ18æ—¥","objectID":"/2024/06/console/:7:0","tags":["PHP","Laravel"],"title":"Laravel 11.x æ§åˆ¶å°","uri":"/2024/06/console/"},{"categories":["PHP","Laravel"],"content":"å­˜æ ¹å®šåˆ¶ Artisan æ§åˆ¶å°çš„ make å‘½ä»¤ç”¨äºåˆ›å»ºå„ç§ç±»ï¼Œä¾‹å¦‚æ§åˆ¶å™¨ã€ä»»åŠ¡ã€è¿ç§»å’Œæµ‹è¯•ã€‚ è¿™äº›ç±»æ˜¯ä½¿ç”¨ â€œstubâ€ æ–‡ä»¶ç”Ÿæˆçš„ï¼Œè¿™äº›æ–‡ä»¶æ ¹æ®æ‚¨çš„è¾“å…¥å¡«å……å€¼ã€‚ ç„¶è€Œï¼Œå¯èƒ½å¸Œæœ›å¯¹ Artisan ç”Ÿæˆçš„æ–‡ä»¶è¿›è¡Œä¸€äº›å°æ”¹åŠ¨ã€‚ ä¸ºæ­¤ï¼Œå¯ä»¥ä½¿ç”¨ stub:publish å‘½ä»¤å°†æœ€å¸¸ç”¨çš„ stubs å‘å¸ƒåˆ°åº”ç”¨ç¨‹åºä¸­ï¼Œä»¥ä¾¿å¯ä»¥å¯¹å®ƒä»¬è¿›è¡Œè‡ªå®šä¹‰ï¼š php artisan stub:publish ","date":"2024å¹´06æœˆ18æ—¥","objectID":"/2024/06/console/:8:0","tags":["PHP","Laravel"],"title":"Laravel 11.x æ§åˆ¶å°","uri":"/2024/06/console/"},{"categories":["PHP","Laravel"],"content":"äº‹ä»¶ Artisan åœ¨è¿è¡Œå‘½ä»¤æ—¶ä¼šè§¦å‘ä¸‰ä¸ªäº‹ä»¶ï¼šIlluminate\\Console\\Events\\ArtisanStartingã€Illuminate\\Console\\Events\\CommandStarting å’Œ Illuminate\\Console\\Events\\CommandFinishedã€‚ ArtisanStarting äº‹ä»¶åœ¨ Artisan å¼€å§‹è¿è¡Œæ—¶ç«‹å³è§¦å‘ã€‚ æ¥ä¸‹æ¥ï¼ŒCommandStarting äº‹ä»¶åœ¨å‘½ä»¤è¿è¡Œä¹‹å‰ç«‹å³è§¦å‘ã€‚ æœ€åï¼ŒCommandFinished äº‹ä»¶åœ¨å‘½ä»¤æ‰§è¡Œå®Œæˆåè§¦å‘ã€‚ ","date":"2024å¹´06æœˆ18æ—¥","objectID":"/2024/06/console/:9:0","tags":["PHP","Laravel"],"title":"Laravel 11.x æ§åˆ¶å°","uri":"/2024/06/console/"},{"categories":["PHP","Laravel"],"content":" åŸæ–‡ ","date":"2024å¹´06æœˆ17æ—¥","objectID":"/2024/06/laravel11%E6%97%A5%E5%BF%97/:0:0","tags":["PHP","Laravel"],"title":"Laravel 11.x æ—¥å¿—","uri":"/2024/06/laravel11%E6%97%A5%E5%BF%97/"},{"categories":["PHP","Laravel"],"content":"ä»‹ç» Laravel æ—¥å¿—è®°å½•åŸºäºâ€œé€šé“â€ã€‚ æ¯ä¸ªé€šé“ä»£è¡¨ä¸€ç§ç‰¹å®šçš„æ—¥å¿—å†™å…¥æ–¹å¼ã€‚ ä¾‹å¦‚ï¼Œsingle é€šé“å°†æ—¥å¿—å†™å…¥å•ä¸ªæ—¥å¿—æ–‡ä»¶ï¼Œè€Œ slack é€šé“åˆ™å°†æ—¥å¿—æ¶ˆæ¯å‘é€åˆ° Slackã€‚ æ—¥å¿—æ¶ˆæ¯å¯ä»¥æ ¹æ®å…¶ä¸¥é‡ç¨‹åº¦å†™å…¥å¤šä¸ªé€šé“ã€‚ åœ¨å†…éƒ¨ï¼ŒLaravel ä½¿ç”¨ Monolog åº“ï¼Œè¯¥åº“æ”¯æŒå¤šç§å¼ºå¤§çš„æ—¥å¿—å¤„ç†å™¨ã€‚ Laravel ä½¿å¾—é…ç½®è¿™äº›å¤„ç†å™¨å˜å¾—éå¸¸ç®€å•ï¼Œå…è®¸æ··åˆæ­é…å®ƒä»¬ä»¥è‡ªå®šä¹‰åº”ç”¨ç¨‹åºçš„æ—¥å¿—å¤„ç†ã€‚ ","date":"2024å¹´06æœˆ17æ—¥","objectID":"/2024/06/laravel11%E6%97%A5%E5%BF%97/:1:0","tags":["PHP","Laravel"],"title":"Laravel 11.x æ—¥å¿—","uri":"/2024/06/laravel11%E6%97%A5%E5%BF%97/"},{"categories":["PHP","Laravel"],"content":"é…ç½® æ§åˆ¶åº”ç”¨ç¨‹åºæ—¥å¿—è®°å½•è¡Œä¸ºçš„æ‰€æœ‰é…ç½®é€‰é¡¹éƒ½ä½äº config/logging.php é…ç½®æ–‡ä»¶ä¸­ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼ŒLaravel å°†åœ¨è®°å½•æ¶ˆæ¯æ—¶ä½¿ç”¨è¯¥ stack é€šé“ã€‚ é€šé“ stack ç”¨äºå°†å¤šä¸ªæ—¥å¿—é€šé“èšåˆåˆ°å•ä¸ªé€šé“ä¸­ã€‚ ","date":"2024å¹´06æœˆ17æ—¥","objectID":"/2024/06/laravel11%E6%97%A5%E5%BF%97/:2:0","tags":["PHP","Laravel"],"title":"Laravel 11.x æ—¥å¿—","uri":"/2024/06/laravel11%E6%97%A5%E5%BF%97/"},{"categories":["PHP","Laravel"],"content":"å¯ç”¨é€šé“é©±åŠ¨ Name Description custom è°ƒç”¨æŒ‡å®šå·¥å‚ä»¥åˆ›å»ºé€šé“çš„é©±åŠ¨ç¨‹åº daily RotatingFileHandler åŸºäº Monolog çš„é©±åŠ¨ç¨‹åºï¼Œæ¯å¤©è½®æ¢ errorlog ErrorLogHandler åŸºäº Monolog é©±åŠ¨ç¨‹åº monolog å¯ä»¥ä½¿ç”¨ä»»ä½•å—æ”¯æŒçš„ Monolog å¤„ç†ç¨‹åºçš„ Monolog å·¥å‚é©±åŠ¨ç¨‹åº papertrail SyslogUdpHandler åŸºäº Monolog é©±åŠ¨ç¨‹åº single åŸºäºå•ä¸ªæ–‡ä»¶æˆ–è·¯å¾„çš„è®°å½•å™¨é€šé“ ï¼ˆ StreamHandler ï¼‰ slack SlackWebhookHandler åŸºäº Monolog é©±åŠ¨ç¨‹åº stack ä¾¿äºåˆ›å»ºâ€œå¤šé€šé“â€é€šé“çš„åŒ…è£…å™¨ syslog SyslogHandler åŸºäº Monolog é©±åŠ¨ç¨‹åº é…ç½®é€šé“åç§° é»˜è®¤æƒ…å†µä¸‹ï¼ŒMonolog å®ä¾‹åŒ–æ—¶ä½¿ç”¨ä¸å½“å‰ç¯å¢ƒï¼ˆä¾‹å¦‚ production æˆ– localï¼‰åŒ¹é…çš„â€œé€šé“åç§°â€ã€‚ è¦æ›´æ”¹æ­¤å€¼ï¼Œå¯ä»¥åœ¨é€šé“çš„é…ç½®ä¸­æ·»åŠ ä¸€ä¸ª name é€‰é¡¹ï¼š 'stack' =\u003e [ 'driver' =\u003e 'stack', 'name' =\u003e 'channel-name', 'channels' =\u003e ['single', 'slack'], ], ","date":"2024å¹´06æœˆ17æ—¥","objectID":"/2024/06/laravel11%E6%97%A5%E5%BF%97/:2:1","tags":["PHP","Laravel"],"title":"Laravel 11.x æ—¥å¿—","uri":"/2024/06/laravel11%E6%97%A5%E5%BF%97/"},{"categories":["PHP","Laravel"],"content":"é€šé“å…ˆå†³æ¡ä»¶ é…ç½®å•é€šé“å’Œæ¯æ—¥é€šé“ single å’Œ daily é€šé“æœ‰ä¸‰ä¸ªå¯é€‰é…ç½®é€‰é¡¹ï¼š bubble ã€ permission å’Œ locking ã€‚ Name Description Default bubble æŒ‡ç¤ºæ¶ˆæ¯åœ¨å¤„ç†åæ˜¯å¦åº”å†’æ³¡åˆ°å…¶ä»–é€šé“ true locking å°è¯•åœ¨å†™å…¥æ—¥å¿—æ–‡ä»¶ä¹‹å‰é”å®šæ—¥å¿—æ–‡ä»¶ false permission æ—¥å¿—æ–‡ä»¶çš„æƒé™ 0644 æ­¤å¤–ï¼Œå¯ä»¥é€šè¿‡ LOG_DAILY_DAYS ç¯å¢ƒå˜é‡æˆ–è®¾ç½® days é…ç½®é€‰é¡¹æ¥é…ç½® daily é€šé“çš„ä¿ç•™ç­–ç•¥ã€‚ Name Description Default days åº”ä¿ç•™æ¯æ—¥æ—¥å¿—æ–‡ä»¶çš„å¤©æ•° 7 é…ç½®papertrailé€šé“ papertrail é€šé“éœ€è¦ host å’Œ port é…ç½®é€‰é¡¹ã€‚ è¿™äº›é€‰é¡¹å¯ä»¥é€šè¿‡ PAPERTRAIL_URL å’Œ PAPERTRAIL_PORT ç¯å¢ƒå˜é‡æ¥å®šä¹‰ã€‚ å¯ä»¥ä» Papertrail è·å–è¿™äº›å€¼ã€‚ é…ç½® Slack é¢‘é“ slack é€šé“éœ€è¦ä¸€ä¸ª url é…ç½®é€‰é¡¹ã€‚ è¿™ä¸ªå€¼å¯ä»¥é€šè¿‡ LOG_SLACK_WEBHOOK_URL ç¯å¢ƒå˜é‡æ¥å®šä¹‰ã€‚ è¿™ä¸ª URL åº”è¯¥åŒ¹é…ä¸º Slack å›¢é˜Ÿé…ç½®çš„ä¼ å…¥ webhook çš„ URLã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼ŒSlack åªä¼šæ¥æ”¶ç­‰çº§ä¸º critical åŠä»¥ä¸Šçš„æ—¥å¿—ï¼› ç„¶è€Œï¼Œå¯ä»¥é€šè¿‡ LOG_LEVEL ç¯å¢ƒå˜é‡æˆ–ä¿®æ”¹ Slack æ—¥å¿—é€šé“é…ç½®æ•°ç»„ä¸­çš„ level é…ç½®é€‰é¡¹æ¥è°ƒæ•´è¿™ä¸€è®¾ç½®ã€‚ ","date":"2024å¹´06æœˆ17æ—¥","objectID":"/2024/06/laravel11%E6%97%A5%E5%BF%97/:2:2","tags":["PHP","Laravel"],"title":"Laravel 11.x æ—¥å¿—","uri":"/2024/06/laravel11%E6%97%A5%E5%BF%97/"},{"categories":["PHP","Laravel"],"content":"æ—¥è®°è®°å½•å¼ƒç”¨è­¦å‘Š å¯ä»¥ä½¿ç”¨ LOG_DEPRECATIONS_CHANNEL ç¯å¢ƒå˜é‡æˆ–åœ¨åº”ç”¨ç¨‹åºçš„ config/logging.php é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šé¦–é€‰ deprecations æ—¥å¿—é€šé“æ¥è®°å½•ä¸€äº›å¼ƒç”¨è­¦å‘Šï¼š 'deprecations' =\u003e [ 'channel' =\u003e env('LOG_DEPRECATIONS_CHANNEL', 'null'), 'trace' =\u003e env('LOG_DEPRECATIONS_TRACE', false), ], 'channels' =\u003e [ // ... ] è¿˜å¯ä»¥å®šä¹‰ä¸€ä¸ªåä¸º deprecations çš„æ—¥å¿—é€šé“ã€‚ å¦‚æœå­˜åœ¨å…·æœ‰æ­¤åç§°çš„æ—¥å¿—é€šé“ï¼Œåˆ™å§‹ç»ˆä½¿ç”¨å®ƒæ¥è®°å½•å¼ƒç”¨ï¼š 'channels' =\u003e [ 'deprecations' =\u003e [ 'driver' =\u003e 'single', 'path' =\u003e storage_path('logs/php-deprecation-warnings.log'), ], ], ","date":"2024å¹´06æœˆ17æ—¥","objectID":"/2024/06/laravel11%E6%97%A5%E5%BF%97/:2:3","tags":["PHP","Laravel"],"title":"Laravel 11.x æ—¥å¿—","uri":"/2024/06/laravel11%E6%97%A5%E5%BF%97/"},{"categories":["PHP","Laravel"],"content":"æ„å»ºæ—¥å¿—å †æ ˆ ä¸ºäº†æ–¹ä¾¿èµ·è§ï¼Œè¯¥stacké©±åŠ¨ç¨‹åºå…è®¸å°†å¤šä¸ªé€šé“ç»„åˆæˆä¸€ä¸ªæ—¥å¿—é€šé“ã€‚ 'channels' =\u003e [ 'stack' =\u003e [ 'driver' =\u003e 'stack', 'channels' =\u003e ['syslog', 'slack'], 'ignore_exceptions' =\u003e false, ], 'syslog' =\u003e [ 'driver' =\u003e 'syslog', 'level' =\u003e env('LOG_LEVEL', 'debug'), 'facility' =\u003e env('LOG_SYSLOG_FACILITY', LOG_USER), 'replace_placeholders' =\u003e true, ], 'slack' =\u003e [ 'driver' =\u003e 'slack', 'url' =\u003e env('LOG_SLACK_WEBHOOK_URL'), 'username' =\u003e env('LOG_SLACK_USERNAME', 'Laravel Log'), 'emoji' =\u003e env('LOG_SLACK_EMOJI', ':boom:'), 'level' =\u003e env('LOG_LEVEL', 'critical'), 'replace_placeholders' =\u003e true, ], ], æ—¥å¿—çº§åˆ« ä¸Šé¢ç¤ºä¾‹ä¸­ syslog å’Œ slack é€šé“é…ç½®ä¸Šå­˜åœ¨çš„ level é…ç½®é€‰é¡¹ã€‚ æ­¤é€‰é¡¹ç¡®å®šé€šé“è®°å½•æ¶ˆæ¯å¿…é¡»è¾¾åˆ°çš„æœ€ä½â€œçº§åˆ«â€ã€‚ Monolog ä¸º Laravel çš„æ—¥å¿—è®°å½•æœåŠ¡æä¾›æ”¯æŒï¼Œæä¾› RFC 5424 è§„èŒƒä¸­å®šä¹‰çš„æ‰€æœ‰æ—¥å¿—çº§åˆ«ã€‚ æŒ‰ä¸¥é‡æ€§é™åºæ’åˆ—ï¼Œè¿™äº›æ—¥å¿—çº§åˆ«ä¸ºï¼šç´§æ€¥ï¼ˆemergencyï¼‰ã€è­¦æŠ¥ï¼ˆalertï¼‰ã€ä¸¥é‡ï¼ˆcriticalï¼‰ã€é”™è¯¯ï¼ˆerrorï¼‰ã€è­¦å‘Šï¼ˆwarningï¼‰ã€é€šçŸ¥ï¼ˆnoticeï¼‰ã€ä¿¡æ¯ï¼ˆinfoï¼‰å’Œè°ƒè¯•ï¼ˆdebugï¼‰ã€‚ ","date":"2024å¹´06æœˆ17æ—¥","objectID":"/2024/06/laravel11%E6%97%A5%E5%BF%97/:3:0","tags":["PHP","Laravel"],"title":"Laravel 11.x æ—¥å¿—","uri":"/2024/06/laravel11%E6%97%A5%E5%BF%97/"},{"categories":["PHP","Laravel"],"content":"å†™å…¥æ—¥å¿—æ¶ˆæ¯ use Illuminate\\Support\\Facades\\Log; Log::emergency($message); Log::alert($message); Log::critical($message); Log::error($message); Log::warning($message); Log::notice($message); Log::info($message); Log::debug($message); ","date":"2024å¹´06æœˆ17æ—¥","objectID":"/2024/06/laravel11%E6%97%A5%E5%BF%97/:4:0","tags":["PHP","Laravel"],"title":"Laravel 11.x æ—¥å¿—","uri":"/2024/06/laravel11%E6%97%A5%E5%BF%97/"},{"categories":["PHP","Laravel"],"content":"ä¸Šä¸‹æ–‡ä¿¡æ¯ ä¸Šä¸‹æ–‡æ•°æ®æ•°ç»„å¯ä»¥ä¼ é€’ç»™æ—¥å¿—æ–¹æ³•ã€‚æ­¤ä¸Šä¸‹æ–‡æ•°æ®å°†è¢«æ ¼å¼åŒ–ï¼Œå¹¶ä¸æ—¥å¿—æ¶ˆæ¯ä¸€èµ·æ˜¾ç¤ºï¼š use Illuminate\\Support\\Facades\\Log; Log::info('User {id} failed to login.', ['id' =\u003e $user-\u003eid]); æœ‰æ—¶ï¼Œå¯èƒ½å¸Œæœ›æŒ‡å®šä¸€äº›ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œè¿™äº›ä¿¡æ¯åº”åŒ…å«åœ¨ç‰¹å®šé€šé“ä¸­çš„æ‰€æœ‰åç»­æ—¥å¿—æ¡ç›®ä¸­ã€‚ ä¾‹å¦‚ï¼Œéœ€è¦å°†ä¸åº”ç”¨ç¨‹åºçš„æ¯ä¸ªä¼ å…¥è¯·æ±‚å…³è”çš„è¯·æ±‚ ID è®°å½•ä¸‹æ¥ã€‚ ä¸ºæ­¤ï¼Œå¯ä»¥è°ƒç”¨ Log Facade withContext çš„æ–¹æ³•ï¼š \u003c?php namespace App\\Http\\Middleware; use Closure; use Illuminate\\Http\\Request; use Illuminate\\Support\\Facades\\Log; use Illuminate\\Support\\Str; use Symfony\\Component\\HttpFoundation\\Response; class AssignRequestId { /** * Handle an incoming request. * * @param \\Closure(\\Illuminate\\Http\\Request): (\\Symfony\\Component\\HttpFoundation\\Response) $next */ public function handle(Request $request, Closure $next): Response { $requestId = (string) Str::uuid(); Log::withContext([ 'request-id' =\u003e $requestId ]); $response = $next($request); $response-\u003eheaders-\u003eset('Request-Id', $requestId); return $response; } } å¦‚æœè¦åœ¨æ‰€æœ‰æ—¥å¿—è®°å½•é€šé“ä¹‹é—´å…±äº«ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œå¯ä»¥è°ƒç”¨è¯¥ Log::shareContext() æ–¹æ³•ã€‚ æ­¤æ–¹æ³•å°†å‘æ‰€æœ‰åˆ›å»ºçš„é¢‘é“ä»¥åŠéšååˆ›å»ºçš„ä»»ä½•é¢‘é“æä¾›ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼š \u003c?php namespace App\\Http\\Middleware; use Closure; use Illuminate\\Http\\Request; use Illuminate\\Support\\Facades\\Log; use Illuminate\\Support\\Str; use Symfony\\Component\\HttpFoundation\\Response; class AssignRequestId { /** * Handle an incoming request. * * @param \\Closure(\\Illuminate\\Http\\Request): (\\Symfony\\Component\\HttpFoundation\\Response) $next */ public function handle(Request $request, Closure $next): Response { $requestId = (string) Str::uuid(); Log::shareContext([ 'request-id' =\u003e $requestId ]); // ... } } ","date":"2024å¹´06æœˆ17æ—¥","objectID":"/2024/06/laravel11%E6%97%A5%E5%BF%97/:4:1","tags":["PHP","Laravel"],"title":"Laravel 11.x æ—¥å¿—","uri":"/2024/06/laravel11%E6%97%A5%E5%BF%97/"},{"categories":["PHP","Laravel"],"content":"å†™å…¥ç‰¹å®šé€šé“ å¯ä»¥åœ¨ Log Facade ä¸Šä½¿ç”¨è¯¥ channel æ–¹æ³•æ£€ç´¢å¹¶è®°å½•åˆ°é…ç½®æ–‡ä»¶ä¸­å®šä¹‰çš„ä»»ä½•é€šé“ï¼š use Illuminate\\Support\\Facades\\Log; Log::channel('slack')-\u003einfo('Something happened!'); å¦‚æœè¦åˆ›å»ºç”±å¤šä¸ªé€šé“ç»„æˆçš„æŒ‰éœ€æ—¥å¿—è®°å½•å †æ ˆï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹ stack æ–¹æ³•ï¼š Log::stack(['single', 'slack'])-\u003einfo('Something happened!'); ç‚¹æ’­é€šé“ è¿˜å¯ä»¥é€šè¿‡åœ¨è¿è¡Œæ—¶æä¾›é…ç½®æ¥åˆ›å»ºæŒ‰éœ€é€šé“ï¼Œè€Œæ— éœ€åœ¨åº”ç”¨ç¨‹åºçš„ logging é…ç½®æ–‡ä»¶ä¸­æ˜¾ç¤ºè¯¥é…ç½®ã€‚ä¸ºæ­¤ï¼Œå¯ä»¥å°†é…ç½®æ•°ç»„ä¼ é€’ç»™ Log Facade build çš„æ–¹æ³•ï¼š use Illuminate\\Support\\Facades\\Log; Log::build([ 'driver' =\u003e 'single', 'path' =\u003e storage_path('logs/custom.log'), ])-\u003einfo('Something happened!'); è¿˜å¸Œæœ›åœ¨æŒ‰éœ€æ—¥å¿—è®°å½•å †æ ˆä¸­åŒ…å«æŒ‰éœ€é€šé“ã€‚ è¿™å¯ä»¥é€šè¿‡å°†ç‚¹æ’­é¢‘é“å®ä¾‹åŒ…å«åœ¨ä¼ é€’ç»™æ–¹æ³•çš„ stack æ•°ç»„ä¸­æ¥å®ç°ï¼š use Illuminate\\Support\\Facades\\Log; $channel = Log::build([ 'driver' =\u003e 'single', 'path' =\u003e storage_path('logs/custom.log'), ]); Log::stack(['slack', $channel])-\u003einfo('Something happened!'); ","date":"2024å¹´06æœˆ17æ—¥","objectID":"/2024/06/laravel11%E6%97%A5%E5%BF%97/:4:2","tags":["PHP","Laravel"],"title":"Laravel 11.x æ—¥å¿—","uri":"/2024/06/laravel11%E6%97%A5%E5%BF%97/"},{"categories":["PHP","Laravel"],"content":"Monologé€šé“å®šåˆ¶ ","date":"2024å¹´06æœˆ17æ—¥","objectID":"/2024/06/laravel11%E6%97%A5%E5%BF%97/:5:0","tags":["PHP","Laravel"],"title":"Laravel 11.x æ—¥å¿—","uri":"/2024/06/laravel11%E6%97%A5%E5%BF%97/"},{"categories":["PHP","Laravel"],"content":"è‡ªå®šä¹‰é€šé“çš„Monolog é¦–å…ˆï¼Œåœ¨é€šé“çš„é…ç½®ä¸Šå®šä¹‰ä¸€ä¸ª tap æ•°ç»„ã€‚ è¯¥ tap æ•°ç»„åº”åŒ…å«ä¸€ä¸ªç±»åˆ—è¡¨ï¼Œè¿™äº›ç±»åœ¨åˆ›å»º Monolog å®ä¾‹ååº”æœ‰æœºä¼šå¯¹å…¶è¿›è¡Œè‡ªå®šä¹‰ï¼ˆæˆ–â€œç‚¹å‡»â€ï¼‰ã€‚æ²¡æœ‰æ”¾ç½®è¿™äº›ç±»çš„å¸¸è§„ä½ç½®ï¼Œå› æ­¤å¯ä»¥åœ¨åº”ç”¨ç¨‹åºä¸­è‡ªç”±åˆ›å»ºä¸€ä¸ªç›®å½•æ¥åŒ…å«è¿™äº›ç±»ï¼š 'single' =\u003e [ 'driver' =\u003e 'single', 'tap' =\u003e [App\\Logging\\CustomizeFormatter::class], 'path' =\u003e storage_path('logs/laravel.log'), 'level' =\u003e env('LOG_LEVEL', 'debug'), 'replace_placeholders' =\u003e true, ], åœ¨é€šé“ä¸Šé…ç½®è¯¥ tap é€‰é¡¹åï¼Œå°±å¯ä»¥å®šä¹‰å°†è‡ªå®šä¹‰ Monolog å®ä¾‹çš„ç±»äº†ã€‚ æ­¤ç±»åªéœ€è¦ä¸€ä¸ªæ–¹æ³•ï¼š __invoke ï¼Œè¯¥æ–¹æ³•æ¥æ”¶ä¸€ä¸ª Illuminate\\Log\\Logger å®ä¾‹ã€‚ è¯¥ Illuminate\\Log\\Logger å®ä¾‹å°†æ‰€æœ‰æ–¹æ³•è°ƒç”¨ä»£ç†åˆ°åº•å±‚ Monolog å®ä¾‹ï¼š \u003c?php namespace App\\Logging; use Illuminate\\Log\\Logger; use Monolog\\Formatter\\LineFormatter; class CustomizeFormatter { /** * Customize the given logger instance. */ public function __invoke(Logger $logger): void { foreach ($logger-\u003egetHandlers() as $handler) { $handler-\u003esetFormatter(new LineFormatter( '[%datetime%] %channel%.%level_name%: %message% %context% %extra%' )); } } } ","date":"2024å¹´06æœˆ17æ—¥","objectID":"/2024/06/laravel11%E6%97%A5%E5%BF%97/:5:1","tags":["PHP","Laravel"],"title":"Laravel 11.x æ—¥å¿—","uri":"/2024/06/laravel11%E6%97%A5%E5%BF%97/"},{"categories":["PHP","Laravel"],"content":"åˆ›å»ºMonologå¤„ç†ç¨‹åºé€šé“ ä½¿ç”¨ monolog é©±åŠ¨ç¨‹åºæ—¶ï¼Œ handler é…ç½®é€‰é¡¹ç”¨äºæŒ‡å®šå°†å®ä¾‹åŒ–çš„å¤„ç†ç¨‹åºã€‚å¯ä»¥ä½¿ç”¨ with é…ç½®é€‰é¡¹æŒ‡å®šå¤„ç†ç¨‹åºæ‰€éœ€çš„ä»»ä½•æ„é€ å‡½æ•°å‚æ•°ï¼š 'logentries' =\u003e [ 'driver' =\u003e 'monolog', 'handler' =\u003e Monolog\\Handler\\SyslogUdpHandler::class, 'with' =\u003e [ 'host' =\u003e 'my.logentries.internal.datahubhost.company.com', 'port' =\u003e '10000', ], ], æ ¼å¼åŒ–ç¨‹åº ä½¿ç”¨ monolog é©±åŠ¨ç¨‹åºæ—¶ï¼ŒMonolog LineFormatter å°†ç”¨ä½œé»˜è®¤æ ¼å¼åŒ–ç¨‹åºã€‚ ä½†æ˜¯ï¼Œå¯ä»¥ä½¿ç”¨ formatter å’Œ formatter_with é…ç½®é€‰é¡¹è‡ªå®šä¹‰ä¼ é€’ç»™å¤„ç†ç¨‹åºçš„æ ¼å¼åŒ–ç¨‹åºçš„ç±»å‹ï¼š 'browser' =\u003e [ 'driver' =\u003e 'monolog', 'handler' =\u003e Monolog\\Handler\\BrowserConsoleHandler::class, 'formatter' =\u003e Monolog\\Formatter\\HtmlFormatter::class, 'formatter_with' =\u003e [ 'dateFormat' =\u003e 'Y-m-d', ], ], å¦‚æœä½¿ç”¨çš„æ˜¯èƒ½å¤Ÿæä¾›è‡ªå·±çš„æ ¼å¼åŒ–ç¨‹åºçš„ Monolog å¤„ç†ç¨‹åºï¼Œåˆ™å¯ä»¥å°† formatter é…ç½®é€‰é¡¹çš„å€¼è®¾ç½®ä¸º default ï¼š 'newrelic' =\u003e [ 'driver' =\u003e 'monolog', 'handler' =\u003e Monolog\\Handler\\NewRelicHandler::class, 'formatter' =\u003e 'default', ], å¤„ç†å™¨ å¦‚æœè¦è‡ªå®šä¹‰ monolog é©±åŠ¨ç¨‹åºçš„å¤„ç†å™¨ï¼Œè¯·å°† processors é…ç½®å€¼æ·»åŠ åˆ°é¢‘é“çš„é…ç½®ä¸­ï¼š 'memory' =\u003e [ 'driver' =\u003e 'monolog', 'handler' =\u003e Monolog\\Handler\\StreamHandler::class, 'with' =\u003e [ 'stream' =\u003e 'php://stderr', ], 'processors' =\u003e [ // Simple syntax... Monolog\\Processor\\MemoryUsageProcessor::class, // With options... [ 'processor' =\u003e Monolog\\Processor\\PsrLogMessageProcessor::class, 'with' =\u003e ['removeUsedContextFields' =\u003e true], ], ], ], ","date":"2024å¹´06æœˆ17æ—¥","objectID":"/2024/06/laravel11%E6%97%A5%E5%BF%97/:5:2","tags":["PHP","Laravel"],"title":"Laravel 11.x æ—¥å¿—","uri":"/2024/06/laravel11%E6%97%A5%E5%BF%97/"},{"categories":["PHP","Laravel"],"content":"é€šè¿‡å·¥å‚åˆ›å»ºè‡ªå®šä¹‰æ¸ é“ å¦‚æœè¦å®šä¹‰ä¸€ä¸ªå®Œå…¨è‡ªå®šä¹‰çš„é€šé“ï¼Œåœ¨å…¶ä¸­å¯ä»¥å®Œå…¨æ§åˆ¶ Monolog çš„å®ä¾‹åŒ–å’Œé…ç½®ï¼Œåˆ™å¯ä»¥åœ¨ config/logging.php é…ç½®æ–‡ä»¶ä¸­æŒ‡å®š custom é©±åŠ¨ç¨‹åºç±»å‹ã€‚ é…ç½®åº”åŒ…å«ä¸€ä¸ª via é€‰é¡¹ï¼Œè¯¥é€‰é¡¹åŒ…å«å·¥å‚ç±»çš„åç§°ï¼Œè¯¥åç§°å°†è¢«è°ƒç”¨ä»¥åˆ›å»º Monolog å®ä¾‹ï¼š 'channels' =\u003e [ 'example-custom-channel' =\u003e [ 'driver' =\u003e 'custom', 'via' =\u003e App\\Logging\\CreateCustomLogger::class, ], ], é…ç½® custom é©±åŠ¨ç¨‹åºé€šé“åï¼Œå³å¯å®šä¹‰å°†åˆ›å»º Monolog å®ä¾‹çš„ç±»ã€‚ æ­¤ç±»åªéœ€è¦ä¸€ä¸ª __invoke æ–¹æ³•ï¼Œè¯¥æ–¹æ³•åº”è¿”å› Monolog è®°å½•å™¨å®ä¾‹ã€‚ è¯¥æ–¹æ³•å°†æ¥æ”¶é€šé“é…ç½®æ•°ç»„ä½œä¸ºå…¶å”¯ä¸€å‚æ•°ï¼š \u003c?php namespace App\\Logging; use Monolog\\Logger; class CreateCustomLogger { /** * Create a custom Monolog instance. */ public function __invoke(array $config): Logger { return new Logger(/* ... */); } } ","date":"2024å¹´06æœˆ17æ—¥","objectID":"/2024/06/laravel11%E6%97%A5%E5%BF%97/:5:3","tags":["PHP","Laravel"],"title":"Laravel 11.x æ—¥å¿—","uri":"/2024/06/laravel11%E6%97%A5%E5%BF%97/"},{"categories":["PHP","Laravel"],"content":"ä½¿ç”¨Pailè·Ÿè¸ªæ—¥å¿—æ¶ˆæ¯ Laravel Pail æ˜¯ä¸€ä¸ªè½¯ä»¶åŒ…ï¼Œå¯è®©ç›´æ¥ä»å‘½ä»¤è¡Œè½»æ¾æ·±å…¥äº†è§£ Laravel åº”ç”¨ç¨‹åºçš„æ—¥å¿—æ–‡ä»¶ã€‚ ä¸æ ‡å‡† tail å‘½ä»¤ä¸åŒï¼ŒPail æ—¨åœ¨ä¸ä»»ä½•æ—¥å¿—é©±åŠ¨ç¨‹åºä¸€èµ·ä½¿ç”¨ï¼ŒåŒ…æ‹¬ Sentry æˆ– Flareã€‚ æ­¤å¤–ï¼ŒPail è¿˜æä¾›äº†ä¸€ç»„æœ‰ç”¨çš„è¿‡æ»¤å™¨ï¼Œå¯å¸®åŠ©æ‚¨å¿«é€Ÿæ‰¾åˆ°æ‰€éœ€çš„å†…å®¹ã€‚ ","date":"2024å¹´06æœˆ17æ—¥","objectID":"/2024/06/laravel11%E6%97%A5%E5%BF%97/:6:0","tags":["PHP","Laravel"],"title":"Laravel 11.x æ—¥å¿—","uri":"/2024/06/laravel11%E6%97%A5%E5%BF%97/"},{"categories":["PHP","Laravel"],"content":"å®‰è£… Laravel Pail éœ€è¦ PHP 8.2+ å’Œ PCNTL æ‰©å±•åã€‚ composer require laravel/pail ","date":"2024å¹´06æœˆ17æ—¥","objectID":"/2024/06/laravel11%E6%97%A5%E5%BF%97/:6:1","tags":["PHP","Laravel"],"title":"Laravel 11.x æ—¥å¿—","uri":"/2024/06/laravel11%E6%97%A5%E5%BF%97/"},{"categories":["PHP","Laravel"],"content":"ç”¨æ³• è‹¥è¦å¯åŠ¨å°¾éšæ—¥å¿—ï¼Œè¯·è¿è¡Œä»¥ä¸‹ pail å‘½ä»¤ï¼š php artisan pail è‹¥è¦å¢åŠ è¾“å‡ºçš„è¯¦ç»†ç¨‹åº¦å¹¶é¿å…æˆªæ–­ ï¼ˆâ€¦ï¼‰ï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹ -v é€‰é¡¹ï¼š php artisan pail -v è¦è·å¾—æœ€å¤§è¯¦ç»†ç¨‹åº¦å¹¶æ˜¾ç¤ºå¼‚å¸¸å †æ ˆè·Ÿè¸ªï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹ -vv é€‰é¡¹ï¼š php artisan pail -vv è¦åœæ­¢å°¾çŸ¿æ—¥å¿—ï¼Œè¯·éšæ—¶æŒ‰ Ctrl+C ã€‚ ","date":"2024å¹´06æœˆ17æ—¥","objectID":"/2024/06/laravel11%E6%97%A5%E5%BF%97/:6:2","tags":["PHP","Laravel"],"title":"Laravel 11.x æ—¥å¿—","uri":"/2024/06/laravel11%E6%97%A5%E5%BF%97/"},{"categories":["PHP","Laravel"],"content":"è¿‡æ»¤æ—¥å¿— --filterï¼šé€‰é¡¹æŒ‰æ—¥å¿—ç±»å‹ã€æ–‡ä»¶ã€æ¶ˆæ¯å’Œå †æ ˆè·Ÿè¸ªå†…å®¹ç­›é€‰æ—¥å¿— php artisan pail --filter=\"QueryException\" --messageï¼šä»…æŒ‰æ—¥å¿—æ¶ˆæ¯ç­›é€‰æ—¥å¿— php artisan pail --message=\"User created\" --levelï¼šé€‰é¡¹å¯ç”¨äºæŒ‰æ—¥å¿—çº§åˆ«ç­›é€‰æ—¥å¿— php artisan pail --level=error --userï¼šä»…æ˜¾ç¤ºåœ¨å¯¹ç»™å®šç”¨æˆ·è¿›è¡Œèº«ä»½éªŒè¯æ—¶å†™å…¥çš„æ—¥å¿— php artisan pail --user=1 ","date":"2024å¹´06æœˆ17æ—¥","objectID":"/2024/06/laravel11%E6%97%A5%E5%BF%97/:6:3","tags":["PHP","Laravel"],"title":"Laravel 11.x æ—¥å¿—","uri":"/2024/06/laravel11%E6%97%A5%E5%BF%97/"},{"categories":["PHP","Laravel"],"content":" åŸæ–‡ ","date":"2024å¹´06æœˆ17æ—¥","objectID":"/2024/06/laravel11%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/:0:0","tags":["PHP","Laravel"],"title":"Laravel 11.x é”™è¯¯å¤„ç†","uri":"/2024/06/laravel11%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/"},{"categories":["PHP","Laravel"],"content":"ä»‹ç» å½“å¯åŠ¨ä¸€ä¸ªæ–°çš„ Laravel é¡¹ç›®æ—¶ï¼Œé”™è¯¯å’Œå¼‚å¸¸å¤„ç†å·²ç»é…ç½®å¥½äº†ï¼› ç„¶è€Œï¼Œåœ¨ä»»ä½•æ—¶å€™ï¼Œéƒ½å¯ä»¥åœ¨åº”ç”¨ç¨‹åºçš„ bootstrap/app.php æ–‡ä»¶ä¸­ä½¿ç”¨ withExceptions æ–¹æ³•æ¥ç®¡ç†å¼‚å¸¸çš„æŠ¥å‘Šå’Œæ¸²æŸ“æ–¹å¼ã€‚ ä¼ é€’ç»™ withExceptions é—­åŒ…çš„ $exceptions å¯¹è±¡æ˜¯ Illuminate\\Foundation\\Configuration\\Exceptions çš„ä¸€ä¸ªå®ä¾‹ï¼Œå®ƒè´Ÿè´£ç®¡ç†åº”ç”¨ç¨‹åºä¸­çš„å¼‚å¸¸å¤„ç†ã€‚ ","date":"2024å¹´06æœˆ17æ—¥","objectID":"/2024/06/laravel11%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/:1:0","tags":["PHP","Laravel"],"title":"Laravel 11.x é”™è¯¯å¤„ç†","uri":"/2024/06/laravel11%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/"},{"categories":["PHP","Laravel"],"content":"é…ç½® config/app.php é…ç½®æ–‡ä»¶ä¸­çš„ debug é€‰é¡¹å†³å®šäº†å®é™…å‘ç”¨æˆ·æ˜¾ç¤ºå¤šå°‘é”™è¯¯ä¿¡æ¯ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œæ­¤é€‰é¡¹è®¾ç½®ä¸ºéµå¾ªå­˜å‚¨åœ¨ .env æ–‡ä»¶ä¸­çš„ APP_DEBUG ç¯å¢ƒå˜é‡çš„å€¼ã€‚ ","date":"2024å¹´06æœˆ17æ—¥","objectID":"/2024/06/laravel11%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/:2:0","tags":["PHP","Laravel"],"title":"Laravel 11.x é”™è¯¯å¤„ç†","uri":"/2024/06/laravel11%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/"},{"categories":["PHP","Laravel"],"content":"å¤„ç†å¼‚å¸¸ ","date":"2024å¹´06æœˆ17æ—¥","objectID":"/2024/06/laravel11%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/:3:0","tags":["PHP","Laravel"],"title":"Laravel 11.x é”™è¯¯å¤„ç†","uri":"/2024/06/laravel11%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/"},{"categories":["PHP","Laravel"],"content":"æŠ¥å‘Šå¼‚å¸¸ å¯ä»¥åœ¨åº”ç”¨ç¨‹åº bootstrap/app.php ä¸­ä½¿ç”¨ report å¼‚å¸¸æ–¹æ³•æ¥æ³¨å†Œä¸€ä¸ªé—­åŒ…ï¼Œå½“éœ€è¦æŠ¥å‘Šç»™å®šç±»å‹çš„å¼‚å¸¸æ—¶ï¼Œåº”æ‰§è¡Œè¯¥é—­åŒ…ã€‚Laravel å°†é€šè¿‡æ£€æŸ¥é—­åŒ…çš„ç±»å‹æç¤ºæ¥ç¡®å®šé—­åŒ…æŠ¥å‘Šçš„å¼‚å¸¸ç±»å‹ï¼š -\u003ewithExceptions(function (Exceptions $exceptions) { $exceptions-\u003ereport(function (InvalidOrderException $e) { // ... }); }) å½“ä½¿ç”¨ report æ–¹æ³•æ³¨å†Œè‡ªå®šä¹‰å¼‚å¸¸æŠ¥å‘Šå›è°ƒæ—¶ï¼ŒLaravel ä»ç„¶ä¼šä½¿ç”¨åº”ç”¨ç¨‹åºçš„é»˜è®¤æ—¥å¿—é…ç½®è®°å½•è¯¥å¼‚å¸¸ã€‚ å¦‚æœå¸Œæœ›é˜»æ­¢å¼‚å¸¸ä¼ æ’­åˆ°é»˜è®¤çš„æ—¥å¿—ï¼Œåˆ™å¯ä»¥åœ¨å®šä¹‰æŠ¥å‘Šå›è°ƒæ—¶ä½¿ç”¨ stop æ–¹æ³•ï¼Œæˆ–è€…ä»å›è°ƒä¸­è¿”å› falseï¼š -\u003ewithExceptions(function (Exceptions $exceptions) { $exceptions-\u003ereport(function (InvalidOrderException $e) { // ... })-\u003estop(); $exceptions-\u003ereport(function (InvalidOrderException $e) { return false; }); }) å…¨å±€æ—¥å¿—ä¸Šä¸‹æ–‡ å¦‚æœå¯ç”¨ï¼ŒLaravel ä¼šè‡ªåŠ¨å°†å½“å‰ç”¨æˆ·çš„ ID ä½œä¸ºä¸Šä¸‹æ–‡æ•°æ®æ·»åŠ åˆ°æ¯ä¸ªå¼‚å¸¸çš„æ—¥å¿—æ¶ˆæ¯ä¸­ã€‚ å¯ä»¥åœ¨åº”ç”¨ç¨‹åºçš„ bootstrap/app.php æ–‡ä»¶ä¸­ä½¿ç”¨ context å¼‚å¸¸æ–¹æ³•å®šä¹‰å…¨å±€ä¸Šä¸‹æ–‡æ•°æ®ã€‚ è¿™äº›ä¿¡æ¯å°†è¢«åŒ…å«åœ¨åº”ç”¨ç¨‹åºå†™å…¥çš„æ¯æ¡å¼‚å¸¸æ—¥å¿—æ¶ˆæ¯ä¸­ï¼š -\u003ewithExceptions(function (Exceptions $exceptions) { $exceptions-\u003econtext(fn () =\u003e [ 'foo' =\u003e 'bar', ]); }) å¼‚å¸¸æ—¥å¿—ä¸Šä¸‹æ–‡ è™½ç„¶åœ¨æ¯æ¡æ—¥å¿—æ¶ˆæ¯ä¸­æ·»åŠ ä¸Šä¸‹æ–‡ä¿¡æ¯æ˜¯æœ‰ç”¨çš„ï¼Œä½†æœ‰æ—¶ç‰¹å®šçš„å¼‚å¸¸å¯èƒ½éœ€è¦åŒ…å«åœ¨æ—¥å¿—ä¸­çš„ç‹¬ç‰¹ä¸Šä¸‹æ–‡ã€‚ é€šè¿‡åœ¨åº”ç”¨ç¨‹åºçš„æŸä¸ªå¼‚å¸¸ä¸Šå®šä¹‰ä¸€ä¸ª context æ–¹æ³•ï¼Œå¯ä»¥æŒ‡å®šä»»ä½•ä¸è¯¥å¼‚å¸¸ç›¸å…³çš„æ•°æ®ï¼Œè¯¥æ•°æ®å°†è¢«æ·»åŠ åˆ°è¯¥å¼‚å¸¸çš„æ—¥å¿—æ¡ç›®ä¸­ï¼š \u003c?php namespace App\\Exceptions; use Exception; class InvalidOrderException extends Exception { // ... /** * Get the exception's context information. * * @return array\u003cstring, mixed\u003e */ public function context(): array { return ['order_id' =\u003e $this-\u003eorderId]; } } reportå¸®æ‰‹ æœ‰æ—¶å¯èƒ½éœ€è¦æŠ¥å‘Šä¸€ä¸ªå¼‚å¸¸ï¼Œä½†ç»§ç»­å¤„ç†å½“å‰è¯·æ±‚ã€‚ report è¾…åŠ©å‡½æ•°å…è®¸å¿«é€ŸæŠ¥å‘Šä¸€ä¸ªå¼‚å¸¸ï¼Œè€Œä¸å‘ç”¨æˆ·å‘ˆç°é”™è¯¯é¡µé¢ï¼š public function isValid(string $value): bool { try { // Validate the value... } catch (Throwable $e) { report($e); return false; } } åˆ é™¤é‡å¤æŠ¥å‘Šçš„å¼‚å¸¸ å¦‚æœåœ¨æ•´ä¸ªåº”ç”¨ç¨‹åºä¸­ä½¿ç”¨reportå‡½æ•°ï¼Œåˆ™æœ‰æ—¶å¯èƒ½ä¼šå¤šæ¬¡æŠ¥å‘Šç›¸åŒçš„å¼‚å¸¸ï¼Œä»è€Œåœ¨æ—¥å¿—ä¸­åˆ›å»ºé‡å¤æ¡ç›®ã€‚ å¦‚æœè¦ç¡®ä¿æŸä¸ªå¼‚å¸¸å®ä¾‹ä»…è¢«æŠ¥å‘Šä¸€æ¬¡ï¼Œåˆ™å¯ä»¥åœ¨åº”ç”¨ç¨‹åºçš„ bootstrap/app.php æ–‡ä»¶ä¸­è°ƒç”¨ dontReportDuplicates å¼‚å¸¸æ–¹æ³•ï¼š -\u003ewithExceptions(function (Exceptions $exceptions) { $exceptions-\u003edontReportDuplicates(); }) ç°åœ¨ï¼Œå½“ report è¾…åŠ©å‡½æ•°è¢«è°ƒç”¨åŒä¸€ä¸ªå¼‚å¸¸å®ä¾‹æ—¶ï¼Œåªæœ‰ç¬¬ä¸€æ¬¡è°ƒç”¨ä¼šè¢«æŠ¥å‘Šï¼š $original = new RuntimeException('Whoops!'); report($original); // reported try { throw $original; } catch (Throwable $caught) { report($caught); // ignored } report($original); // ignored report($caught); // ignored ","date":"2024å¹´06æœˆ17æ—¥","objectID":"/2024/06/laravel11%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/:3:1","tags":["PHP","Laravel"],"title":"Laravel 11.x é”™è¯¯å¤„ç†","uri":"/2024/06/laravel11%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/"},{"categories":["PHP","Laravel"],"content":"å¼‚å¸¸æ—¥å¿—çº§åˆ« å¯ä»¥åœ¨åº”ç”¨ç¨‹åº bootstrap/app.php æ–‡ä»¶ä¸­ä½¿ç”¨ level exception æ–¹æ³•ã€‚ æ­¤æ–¹æ³•æ¥æ”¶å¼‚å¸¸ç±»å‹ä½œä¸ºå…¶ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå¹¶å°†æ—¥å¿—çº§åˆ«ä½œä¸ºå…¶ç¬¬äºŒä¸ªå‚æ•°ï¼š use PDOException; use Psr\\Log\\LogLevel; -\u003ewithExceptions(function (Exceptions $exceptions) { $exceptions-\u003elevel(PDOException::class, LogLevel::CRITICAL); }) ","date":"2024å¹´06æœˆ17æ—¥","objectID":"/2024/06/laravel11%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/:3:2","tags":["PHP","Laravel"],"title":"Laravel 11.x é”™è¯¯å¤„ç†","uri":"/2024/06/laravel11%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/"},{"categories":["PHP","Laravel"],"content":"æŒ‰ç±»å‹å¿½ç•¥å¼‚å¸¸ å¯ä»¥åœ¨åº”ç”¨ç¨‹åº bootstrap/app.php æ–‡ä»¶ä¸­ä½¿ç”¨ dontReport exception æ–¹æ³•è¿›è¡Œå¿½ç•¥æŸäº›å¼‚å¸¸ã€‚ æä¾›ç»™æ­¤æ–¹æ³•çš„ä»»ä½•ç±»éƒ½ä¸ä¼šè¢«æŠ¥å‘Šï¼Œä½†æ˜¯å¯èƒ½ä»å…·æœ‰è‡ªå®šä¹‰æ¸²æŸ“é€»è¾‘ï¼š use App\\Exceptions\\InvalidOrderException; -\u003ewithExceptions(function (Exceptions $exceptions) { $exceptions-\u003edontReport([ InvalidOrderException::class, ]); }) åœ¨å†…éƒ¨ï¼ŒLaravel å·²ç»å¿½ç•¥äº†æŸäº›ç±»å‹çš„é”™è¯¯ï¼Œå¦‚ç”± 404 HTTP é”™è¯¯æˆ–æ— æ•ˆ CSRF ä»¤ç‰Œç”Ÿæˆçš„ 419 HTTP å“åº”æ‰€å¯¼è‡´çš„å¼‚å¸¸ã€‚ å¦‚æœæƒ³æŒ‡ç¤º Laravel åœæ­¢å¿½ç•¥æŸç§ç±»å‹çš„å¼‚å¸¸ï¼Œå¯ä»¥åœ¨åº”ç”¨ç¨‹åºçš„ bootstrap/app.php æ–‡ä»¶ä¸­ä½¿ç”¨ stopIgnoring å¼‚å¸¸æ–¹æ³•ï¼š use Symfony\\Component\\HttpKernel\\Exception\\HttpException; -\u003ewithExceptions(function (Exceptions $exceptions) { $exceptions-\u003estopIgnoring(HttpException::class); }) ","date":"2024å¹´06æœˆ17æ—¥","objectID":"/2024/06/laravel11%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/:3:3","tags":["PHP","Laravel"],"title":"Laravel 11.x é”™è¯¯å¤„ç†","uri":"/2024/06/laravel11%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/"},{"categories":["PHP","Laravel"],"content":"æ¸²æŸ“å¼‚å¸¸ é»˜è®¤æƒ…å†µä¸‹ï¼ŒLaravel çš„å¼‚å¸¸å¤„ç†å™¨ä¼šå°†å¼‚å¸¸è½¬æ¢ä¸º HTTP å“åº”ã€‚ ä½†æ˜¯ï¼Œå¯ä»¥è‡ªç”±ä¸ºç‰¹å®šç±»å‹çš„å¼‚å¸¸æ³¨å†Œè‡ªå®šä¹‰æ¸²æŸ“é—­åŒ…ã€‚ å¯ä»¥é€šè¿‡åœ¨åº”ç”¨ç¨‹åºçš„ bootstrap/app.php æ–‡ä»¶ä¸­ä½¿ç”¨ render å¼‚å¸¸æ–¹æ³•æ¥å®ç°è¿™ä¸€ç‚¹ã€‚ ä¼ é€’ç»™ render æ–¹æ³•çš„é—­åŒ…åº”è¯¥è¿”å›ä¸€ä¸ª Illuminate\\Http\\Response å®ä¾‹ï¼Œè¿™ä¸ªå®ä¾‹å¯ä»¥é€šè¿‡ response è¾…åŠ©å‡½æ•°ç”Ÿæˆã€‚ Laravel ä¼šé€šè¿‡æ£€æŸ¥é—­åŒ…çš„ç±»å‹æç¤ºæ¥ç¡®å®šè¯¥é—­åŒ…æ¸²æŸ“çš„å¼‚å¸¸ç±»å‹ï¼š use App\\Exceptions\\InvalidOrderException; use Illuminate\\Http\\Request; -\u003ewithExceptions(function (Exceptions $exceptions) { $exceptions-\u003erender(function (InvalidOrderException $e, Request $request) { return response()-\u003eview('errors.invalid-order', [], 500); }); }) ä¹Ÿå¯ä»¥ä½¿ç”¨ render æ–¹æ³•æ¥è¦†ç›–å†…ç½®çš„ Laravel æˆ– Symfony å¼‚å¸¸ï¼ˆä¾‹å¦‚ NotFoundHttpExceptionï¼‰çš„æ¸²æŸ“è¡Œä¸ºã€‚ å¦‚æœä¼ é€’ç»™ render æ–¹æ³•çš„é—­åŒ…æ²¡æœ‰è¿”å›å€¼ï¼ŒLaravel å°†ä½¿ç”¨é»˜è®¤çš„å¼‚å¸¸æ¸²æŸ“ï¼š use Illuminate\\Http\\Request; use Symfony\\Component\\HttpKernel\\Exception\\NotFoundHttpException; -\u003ewithExceptions(function (Exceptions $exceptions) { $exceptions-\u003erender(function (NotFoundHttpException $e, Request $request) { if ($request-\u003eis('api/*')) { return response()-\u003ejson([ 'message' =\u003e 'Record not found.' ], 404); } }); }) å°†å¼‚å¸¸å‘ˆç°ä¸ºJSON åœ¨æ¸²æŸ“å¼‚å¸¸æ—¶ï¼ŒLaravel ä¼šæ ¹æ®è¯·æ±‚çš„ Accept å¤´è‡ªåŠ¨ç¡®å®šæ˜¯å°†å¼‚å¸¸æ¸²æŸ“ä¸º HTML è¿˜æ˜¯ JSON å“åº”ã€‚ å¦‚æœè‡ªå®šä¹‰ Laravel å¦‚ä½•ç¡®å®šæ˜¯æ¸²æŸ“ HTML è¿˜æ˜¯ JSON å¼‚å¸¸å“åº”ï¼Œå¯ä»¥ä½¿ç”¨ shouldRenderJsonWhen æ–¹æ³•ï¼š use Illuminate\\Http\\Request; use Throwable; -\u003ewithExceptions(function (Exceptions $exceptions) { $exceptions-\u003eshouldRenderJsonWhen(function (Request $request, Throwable $e) { if ($request-\u003eis('admin/*')) { return true; } return $request-\u003eexpectsJson(); }); }) è‡ªå®šä¹‰å¼‚å¸¸å“åº” æå°‘æƒ…å†µä¸‹ï¼Œå¯èƒ½éœ€è¦è‡ªå®šä¹‰ Laravel å¼‚å¸¸å¤„ç†å™¨æ¸²æŸ“çš„æ•´ä¸ª HTTP å“åº”ã€‚ ä¸ºæ­¤ï¼Œå¯ä»¥ä½¿ç”¨ respond æ–¹æ³•æ³¨å†Œä¸€ä¸ªå“åº”è‡ªå®šä¹‰é—­åŒ…ï¼š use Symfony\\Component\\HttpFoundation\\Response; -\u003ewithExceptions(function (Exceptions $exceptions) { $exceptions-\u003erespond(function (Response $response) { if ($response-\u003egetStatusCode() === 419) { return back()-\u003ewith([ 'message' =\u003e 'The page expired, please try again.', ]); } return $response; }); }) ","date":"2024å¹´06æœˆ17æ—¥","objectID":"/2024/06/laravel11%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/:3:4","tags":["PHP","Laravel"],"title":"Laravel 11.x é”™è¯¯å¤„ç†","uri":"/2024/06/laravel11%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/"},{"categories":["PHP","Laravel"],"content":"å¯æŠ¥å‘Šå’Œå¯æ¸²æŸ“çš„å¼‚å¸¸ ä¸å…¶åœ¨åº”ç”¨ç¨‹åºçš„ bootstrap/app.php æ–‡ä»¶ä¸­å®šä¹‰è‡ªå®šä¹‰æŠ¥å‘Šå’Œæ¸²æŸ“è¡Œä¸ºï¼Œä¸å¦‚ç›´æ¥åœ¨åº”ç”¨ç¨‹åºçš„å¼‚å¸¸ç±»ä¸Šå®šä¹‰ report å’Œ render æ–¹æ³•ã€‚å½“è¿™äº›æ–¹æ³•å­˜åœ¨æ—¶ï¼Œæ¡†æ¶ä¼šè‡ªåŠ¨è°ƒç”¨å®ƒä»¬ï¼š \u003c?php namespace App\\Exceptions; use Exception; use Illuminate\\Http\\Request; use Illuminate\\Http\\Response; class InvalidOrderException extends Exception { /** * Report the exception. */ public function report(): void { // ... } /** * Render the exception into an HTTP response. */ public function render(Request $request): Response { return response(/* ... */); } } å¦‚æœå¼‚å¸¸ç»§æ‰¿è‡ªå·²å…·æœ‰æ¸²æŸ“åŠŸèƒ½çš„å¼‚å¸¸ï¼ˆå¦‚å†…ç½®çš„ Laravel æˆ– Symfony å¼‚å¸¸ï¼‰ï¼Œå¯ä»¥åœ¨å¼‚å¸¸çš„ render æ–¹æ³•ä¸­è¿”å› false ä»¥æ¸²æŸ“è¯¥å¼‚å¸¸çš„é»˜è®¤ HTTP å“åº”ï¼š /** * Render the exception into an HTTP response. */ public function render(Request $request): Response|bool { if (/** Determine if the exception needs custom rendering */) { return response(/* ... */); } return false; } å¦‚æœå¼‚å¸¸åŒ…å«ä»…åœ¨æŸäº›æ¡ä»¶æ»¡è¶³æ—¶æ‰éœ€è¦çš„è‡ªå®šä¹‰æŠ¥å‘Šé€»è¾‘ï¼Œé‚£ä¹ˆå¯èƒ½éœ€è¦æŒ‡ç¤º Laravel æœ‰æ—¶ä½¿ç”¨é»˜è®¤çš„å¼‚å¸¸å¤„ç†é…ç½®æ¥æŠ¥å‘Šè¯¥å¼‚å¸¸ã€‚ ä¸ºæ­¤ï¼Œå¯ä»¥åœ¨å¼‚å¸¸çš„ report æ–¹æ³•ä¸­è¿”å› falseï¼š /** * Report the exception. */ public function report(): bool { if (/** Determine if the exception needs custom reporting */) { // ... return true; } return false; } ","date":"2024å¹´06æœˆ17æ—¥","objectID":"/2024/06/laravel11%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/:3:5","tags":["PHP","Laravel"],"title":"Laravel 11.x é”™è¯¯å¤„ç†","uri":"/2024/06/laravel11%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/"},{"categories":["PHP","Laravel"],"content":"é™åˆ¶æŠ¥å‘Šçš„å¼‚å¸¸ å¦‚æœåº”ç”¨ç¨‹åºæŠ¥å‘Šçš„å¼‚å¸¸æ•°é‡éå¸¸å¤šï¼Œåˆ™å¯èƒ½éœ€è¦é™åˆ¶å®é™…è®°å½•æˆ–å‘é€åˆ°åº”ç”¨ç¨‹åºçš„å¤–éƒ¨é”™è¯¯è·Ÿè¸ªæœåŠ¡çš„å¼‚å¸¸æ•°é‡ã€‚ è¦å¯¹å¼‚å¸¸è¿›è¡ŒéšæœºæŠ½æ ·ç‡ï¼Œå¯ä»¥åœ¨åº”ç”¨ç¨‹åºçš„ bootstrap/app.php æ–‡ä»¶ä¸­ä½¿ç”¨ throttle å¼‚å¸¸æ–¹æ³•ã€‚ throttle æ–¹æ³•æ¥æ”¶ä¸€ä¸ªåº”è¿”å› Lottery å®ä¾‹çš„é—­åŒ…ï¼š use Illuminate\\Support\\Lottery; use Throwable; -\u003ewithExceptions(function (Exceptions $exceptions) { $exceptions-\u003ethrottle(function (Throwable $e) { return Lottery::odds(1, 1000); }); }) è¿˜å¯ä»¥æ ¹æ®å¼‚å¸¸ç±»å‹æœ‰æ¡ä»¶åœ°è¿›è¡Œé‡‡æ ·ã€‚å¦‚æœåªæƒ³é‡‡æ ·ç‰¹å®šå¼‚å¸¸ç±»çš„å®ä¾‹ï¼Œå¯ä»¥ä»…ä¸ºè¯¥ç±»è¿”å›ä¸€ä¸ª Lottery å®ä¾‹ï¼š use App\\Exceptions\\ApiMonitoringException; use Illuminate\\Support\\Lottery; use Throwable; -\u003ewithExceptions(function (Exceptions $exceptions) { $exceptions-\u003ethrottle(function (Throwable $e) { if ($e instanceof ApiMonitoringException) { return Lottery::odds(1, 1000); } }); }) ä¹Ÿå¯ä»¥é€šè¿‡è¿”å›ä¸€ä¸ª Limit å®ä¾‹è€Œä¸æ˜¯ Lottery å®ä¾‹æ¥å¯¹è®°å½•çš„å¼‚å¸¸æˆ–å‘é€åˆ°å¤–éƒ¨é”™è¯¯è·Ÿè¸ªæœåŠ¡çš„å¼‚å¸¸è¿›è¡Œé€Ÿç‡é™åˆ¶ã€‚ è¿™åœ¨æƒ³è¦é˜²æ­¢å¼‚å¸¸çªç„¶æ¿€å¢è€Œæ·¹æ²¡æ—¥å¿—æ—¶éå¸¸æœ‰ç”¨ï¼Œä¾‹å¦‚ï¼Œå½“åº”ç”¨ç¨‹åºä½¿ç”¨çš„ç¬¬ä¸‰æ–¹æœåŠ¡å®•æœºæ—¶ï¼š use Illuminate\\Broadcasting\\BroadcastException; use Illuminate\\Cache\\RateLimiting\\Limit; use Throwable; -\u003ewithExceptions(function (Exceptions $exceptions) { $exceptions-\u003ethrottle(function (Throwable $e) { if ($e instanceof BroadcastException) { return Limit::perMinute(300); } }); }) é»˜è®¤æƒ…å†µä¸‹ï¼Œé™æµä¼šä½¿ç”¨å¼‚å¸¸çš„ç±»åä½œä¸ºé™æµé”®ã€‚å¯ä»¥é€šè¿‡åœ¨ Limit ä¸Šä½¿ç”¨ by æ–¹æ³•æŒ‡å®šè‡ªå·±çš„é”®æ¥å®šåˆ¶è¿™ä¸€è¡Œä¸ºï¼š use Illuminate\\Broadcasting\\BroadcastException; use Illuminate\\Cache\\RateLimiting\\Limit; use Throwable; -\u003ewithExceptions(function (Exceptions $exceptions) { $exceptions-\u003ethrottle(function (Throwable $e) { if ($e instanceof BroadcastException) { return Limit::perMinute(300)-\u003eby($e-\u003egetMessage()); } }); }) å½“ç„¶ï¼Œå¯ä»¥ä¸ºä¸åŒçš„å¼‚å¸¸è¿”å› Lottery å’Œ Limit å®ä¾‹çš„ç»„åˆï¼š use App\\Exceptions\\ApiMonitoringException; use Illuminate\\Broadcasting\\BroadcastException; use Illuminate\\Cache\\RateLimiting\\Limit; use Illuminate\\Support\\Lottery; use Throwable; -\u003ewithExceptions(function (Exceptions $exceptions) { $exceptions-\u003ethrottle(function (Throwable $e) { return match (true) { $e instanceof BroadcastException =\u003e Limit::perMinute(300), $e instanceof ApiMonitoringException =\u003e Lottery::odds(1, 1000), default =\u003e Limit::none(), }; }); }) ","date":"2024å¹´06æœˆ17æ—¥","objectID":"/2024/06/laravel11%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/:4:0","tags":["PHP","Laravel"],"title":"Laravel 11.x é”™è¯¯å¤„ç†","uri":"/2024/06/laravel11%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/"},{"categories":["PHP","Laravel"],"content":"HTTPå¼‚å¸¸ æœ‰äº›å¼‚å¸¸æè¿°äº†æœåŠ¡å™¨çš„ HTTP é”™è¯¯ç ã€‚ ä¾‹å¦‚ï¼Œè¿™å¯èƒ½æ˜¯ä¸€ä¸ªâ€œé¡µé¢æœªæ‰¾åˆ°â€é”™è¯¯ï¼ˆ404ï¼‰ã€â€œæœªæˆæƒé”™è¯¯â€ï¼ˆ401ï¼‰æˆ–ç”šè‡³æ˜¯å¼€å‘äººå‘˜ç”Ÿæˆçš„ 500 é”™è¯¯ã€‚ä¸ºäº†åœ¨åº”ç”¨ç¨‹åºçš„ä»»ä½•åœ°æ–¹ç”Ÿæˆè¿™æ ·çš„å“åº”ï¼Œå¯ä»¥ä½¿ç”¨ abort è¾…åŠ©å‡½æ•°ï¼š abort(404); ","date":"2024å¹´06æœˆ17æ—¥","objectID":"/2024/06/laravel11%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/:5:0","tags":["PHP","Laravel"],"title":"Laravel 11.x é”™è¯¯å¤„ç†","uri":"/2024/06/laravel11%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/"},{"categories":["PHP","Laravel"],"content":"è‡ªå®šä¹‰HTTPé”™è¯¯é¡µé¢ Laravel ä½¿å¾—ä¸ºå„ç§ HTTP çŠ¶æ€ç æ˜¾ç¤ºè‡ªå®šä¹‰é”™è¯¯é¡µé¢å˜å¾—å¾ˆå®¹æ˜“ã€‚ ä¾‹å¦‚ï¼Œè¦è‡ªå®šä¹‰ 404 HTTP çŠ¶æ€ç çš„é”™è¯¯é¡µé¢ï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ª resources/views/errors/404.blade.php è§†å›¾æ¨¡æ¿ã€‚ è¯¥è§†å›¾å°†ä¸ºåº”ç”¨ç¨‹åºç”Ÿæˆçš„æ‰€æœ‰ 404 é”™è¯¯è¿›è¡Œæ¸²æŸ“ã€‚ æ­¤ç›®å½•å†…çš„è§†å›¾åº”å‘½åä¸ºä¸å…¶å¯¹åº”çš„ HTTP çŠ¶æ€ç ä¸€è‡´ã€‚ ç”± abort å‡½æ•°å¼•å‘çš„ Symfony\\Component\\HttpKernel\\Exception\\HttpException å®ä¾‹å°†ä½œä¸º $exception å˜é‡ä¼ é€’ç»™è§†å›¾ï¼š \u003ch2\u003e{{ $exception-\u003egetMessage() }}\u003c/h2\u003e å¯ä»¥ä½¿ç”¨ vendor:publish Artisan å‘½ä»¤å‘å¸ƒ Laravel çš„é»˜è®¤é”™è¯¯é¡µé¢æ¨¡æ¿ã€‚ æ¨¡æ¿å‘å¸ƒåï¼Œå¯ä»¥æ ¹æ®ä½ çš„å–œå¥½è‡ªå®šä¹‰å®ƒä»¬ï¼š php artisan vendor:publish --tag=laravel-errors å›é€€HTTPé”™è¯¯é¡µ è¿˜å¯ä»¥ä¸ºä¸€ç³»åˆ— HTTP çŠ¶æ€ç å®šä¹‰ä¸€ä¸ªâ€œåå¤‡â€é”™è¯¯é¡µé¢ã€‚ å¦‚æœæ²¡æœ‰å¯¹åº”ç‰¹å®š HTTP çŠ¶æ€ç çš„é¡µé¢å‘ç”Ÿï¼Œè¿™ä¸ªé¡µé¢å°†è¢«æ¸²æŸ“ã€‚ ä¸ºæ­¤ï¼Œåœ¨åº”ç”¨ç¨‹åºçš„ resources/views/errors ç›®å½•ä¸‹å®šä¹‰ä¸€ä¸ª 4xx.blade.php æ¨¡æ¿å’Œä¸€ä¸ª 5xx.blade.php æ¨¡æ¿ã€‚ åœ¨å®šä¹‰åå¤‡é”™è¯¯é¡µé¢æ—¶ï¼Œè¿™äº›åå¤‡é¡µé¢ä¸ä¼šå½±å“ 404ã€500 å’Œ 503 çš„é”™è¯¯å“åº”ï¼Œå› ä¸º Laravel ä¸ºè¿™äº›çŠ¶æ€ç æä¾›äº†å†…éƒ¨ä¸“ç”¨é¡µé¢ã€‚ è¦è‡ªå®šä¹‰è¿™äº›çŠ¶æ€ç çš„æ¸²æŸ“é¡µé¢ï¼Œåº”è¯¥åˆ†åˆ«ä¸ºæ¯ä¸ªçŠ¶æ€ç å®šä¹‰ä¸€ä¸ªè‡ªå®šä¹‰é”™è¯¯é¡µé¢ã€‚ ","date":"2024å¹´06æœˆ17æ—¥","objectID":"/2024/06/laravel11%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/:5:1","tags":["PHP","Laravel"],"title":"Laravel 11.x é”™è¯¯å¤„ç†","uri":"/2024/06/laravel11%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/"},{"categories":["PHP","Laravel"],"content":" åŸæ–‡ ","date":"2024å¹´06æœˆ17æ—¥","objectID":"/2024/06/laravel11%E9%AA%8C%E8%AF%81/:0:0","tags":["PHP","Laravel"],"title":"Laravel 11.x éªŒè¯","uri":"/2024/06/laravel11%E9%AA%8C%E8%AF%81/"},{"categories":["PHP","Laravel"],"content":"ä»‹ç» Laravelæä¾›äº†å¤šç§ä¸åŒçš„æ–¹æ³•æ¥éªŒè¯åº”ç”¨ç¨‹åºçš„ä¼ å…¥æ•°æ®ã€‚æœ€å¸¸ç”¨çš„æ–¹æ³•æ˜¯åœ¨æ‰€æœ‰ä¼ å…¥çš„HTTPè¯·æ±‚ä¸Šä½¿ç”¨validateæ–¹æ³•ã€‚ ","date":"2024å¹´06æœˆ17æ—¥","objectID":"/2024/06/laravel11%E9%AA%8C%E8%AF%81/:1:0","tags":["PHP","Laravel"],"title":"Laravel 11.x éªŒè¯","uri":"/2024/06/laravel11%E9%AA%8C%E8%AF%81/"},{"categories":["PHP","Laravel"],"content":"éªŒè¯å¿«é€Ÿå…¥é—¨ ","date":"2024å¹´06æœˆ17æ—¥","objectID":"/2024/06/laravel11%E9%AA%8C%E8%AF%81/:2:0","tags":["PHP","Laravel"],"title":"Laravel 11.x éªŒè¯","uri":"/2024/06/laravel11%E9%AA%8C%E8%AF%81/"},{"categories":["PHP","Laravel"],"content":"å®šä¹‰è·¯ç”± use App\\Http\\Controllers\\PostController; Route::get('/post/create', [PostController::class, 'create']); Route::post('/post', [PostController::class, 'store']); GET è·¯ç”±å°†æ˜¾ç¤ºä¸€ä¸ªè¡¨å•ï¼Œä¾›ç”¨æˆ·åˆ›å»ºæ–°çš„åšå®¢æ–‡ç« ï¼Œè€Œ POST è·¯ç”±å°†æ–°åšå®¢æ–‡ç« å­˜å‚¨åœ¨æ•°æ®åº“ä¸­ã€‚ ","date":"2024å¹´06æœˆ17æ—¥","objectID":"/2024/06/laravel11%E9%AA%8C%E8%AF%81/:2:1","tags":["PHP","Laravel"],"title":"Laravel 11.x éªŒè¯","uri":"/2024/06/laravel11%E9%AA%8C%E8%AF%81/"},{"categories":["PHP","Laravel"],"content":"åˆ›å»ºæ§åˆ¶å™¨ \u003c?php namespace App\\Http\\Controllers; use Illuminate\\Http\\RedirectResponse; use Illuminate\\Http\\Request; use Illuminate\\View\\View; class PostController extends Controller { /** * Show the form to create a new blog post. */ public function create(): View { return view('post.create'); } /** * Store a new blog post. */ public function store(Request $request): RedirectResponse { // Validate and store the blog post... $post = /** ... */ return to_route('post.show', ['post' =\u003e $post-\u003eid]); } } ","date":"2024å¹´06æœˆ17æ—¥","objectID":"/2024/06/laravel11%E9%AA%8C%E8%AF%81/:2:2","tags":["PHP","Laravel"],"title":"Laravel 11.x éªŒè¯","uri":"/2024/06/laravel11%E9%AA%8C%E8%AF%81/"},{"categories":["PHP","Laravel"],"content":"ç¼–å†™éªŒè¯é€»è¾‘ ä½¿ç”¨ Illuminate\\Http\\Request å¯¹è±¡æä¾› validate çš„æ–¹æ³•ã€‚ å¦‚æœéªŒè¯è§„åˆ™é€šè¿‡ï¼Œä»£ç å°†ç»§ç»­æ­£å¸¸æ‰§è¡Œ;ä½†æ˜¯ï¼Œå¦‚æœéªŒè¯å¤±è´¥ï¼Œå°†å¼•å‘å¼‚å¸¸ Illuminate\\Validation\\ValidationException ï¼Œå¹¶ä¸”å°†è‡ªåŠ¨å°†æ­£ç¡®çš„é”™è¯¯å“åº”å‘é€å›ç”¨æˆ·ã€‚ å¦‚æœåœ¨ä¼ ç»Ÿ HTTP è¯·æ±‚æœŸé—´éªŒè¯å¤±è´¥ï¼Œå°†ç”Ÿæˆå¯¹ä¸Šä¸€ä¸ª URL çš„é‡å®šå‘å“åº”ã€‚ å¦‚æœä¼ å…¥è¯·æ±‚æ˜¯ XHR è¯·æ±‚ï¼Œåˆ™å°†è¿”å›åŒ…å«éªŒè¯é”™è¯¯æ¶ˆæ¯çš„ JSON å“åº”ã€‚ /** * Store a new blog post. */ public function store(Request $request): RedirectResponse { $validated = $request-\u003evalidate([ 'title' =\u003e 'required|unique:posts|max:255', 'body' =\u003e 'required', ]); // The blog post is valid... return redirect('/posts'); } ä¹Ÿå¯ä»¥å°†éªŒè¯è§„åˆ™æŒ‡å®šä¸ºè§„åˆ™æ•°ç»„ï¼Œè€Œä¸æ˜¯å•ä¸ª | åˆ†éš”å­—ç¬¦ä¸²ï¼š $validatedData = $request-\u003evalidate([ 'title' =\u003e ['required', 'unique:posts', 'max:255'], 'body' =\u003e ['required'], ]); æ­¤å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨è¯¥ validateWithBag æ–¹æ³•éªŒè¯è¯·æ±‚å¹¶å°†ä»»ä½•é”™è¯¯æ¶ˆæ¯å­˜å‚¨åœ¨å‘½åçš„é”™è¯¯åŒ…ä¸­ï¼š $validatedData = $request-\u003evalidateWithBag('post', [ 'title' =\u003e ['required', 'unique:posts', 'max:255'], 'body' =\u003e ['required'], ]); é¦–æ¬¡éªŒè¯å¤±è´¥æ—¶åœæ­¢ bailè§„åˆ™åœ¨ç¬¬ä¸€æ¬¡éªŒè¯å¤±è´¥ååœæ­¢å¯¹å±æ€§è¿è¡ŒéªŒè¯å…¶ä½™è§„åˆ™ $request-\u003evalidate([ 'title' =\u003e 'bail|required|unique:posts|max:255', 'body' =\u003e 'required', ]); åœ¨ä¸Šé¢ç¤ºä¾‹ä¸­ï¼Œå¦‚æœå±æ€§uniqueä¸Šçš„è§„åˆ™å¤±è´¥ï¼Œåˆ™ä¸ä¼šè¿›è¡Œåç»­çš„maxè§„åˆ™æ£€æŸ¥äº†ã€‚ å…³äºåµŒå¥—å±æ€§çš„è¯´æ˜ å¦‚æœä¼ å…¥çš„HTTPè¯·æ±‚åŒ…å«åµŒå¥—å­—æ®µæ•°æ®ï¼Œåˆ™å¯ä»¥ä½¿ç”¨.è¯­æ³•åœ¨éªŒè¯è§„åˆ™ä¸­æŒ‡å®šè¿™äº›å­—æ®µï¼š $request-\u003evalidate([ 'title' =\u003e 'required|unique:posts|max:255', 'author.name' =\u003e 'required', 'author.description' =\u003e 'required', ]); å¦‚æœå­—æ®µåç§°åŒ…å«æ–‡å­—å¥å·ï¼Œåˆ™å¯ä»¥é€šè¿‡ä½¿ç”¨åæ–œæ è½¬ä¹‰æ¥æ˜ç¡®é˜²æ­¢.è¯­æ³•å¼‚å¸¸ï¼š $request-\u003evalidate([ 'title' =\u003e 'required|unique:posts|max:255', 'v1\\.0' =\u003e 'required', ]); ","date":"2024å¹´06æœˆ17æ—¥","objectID":"/2024/06/laravel11%E9%AA%8C%E8%AF%81/:2:3","tags":["PHP","Laravel"],"title":"Laravel 11.x éªŒè¯","uri":"/2024/06/laravel11%E9%AA%8C%E8%AF%81/"},{"categories":["PHP","Laravel"],"content":"æ˜¾ç¤ºéªŒè¯é”™è¯¯ ä¸€ä¸ª $errors å˜é‡é€šè¿‡ Illuminate\\View\\Middleware\\ShareErrorsFromSession ä¸­é—´ä»¶å…±äº«ç»™åº”ç”¨ç¨‹åºçš„æ‰€æœ‰è§†å›¾ï¼Œè¯¥ä¸­é—´ä»¶ç”± web ä¸­é—´ä»¶ç»„æä¾›ã€‚ å½“åº”ç”¨æ­¤ä¸­é—´ä»¶æ—¶ï¼Œä¸€ä¸ª $errors å˜é‡å°†å§‹ç»ˆåœ¨è§†å›¾ä¸­å¯ç”¨ï¼Œå…è®¸å‡è®¾ $errors å˜é‡æ€»æ˜¯å®šä¹‰çš„å¹¶ä¸”å¯ä»¥å®‰å…¨åœ°ä½¿ç”¨ã€‚ $errors å˜é‡å°†æ˜¯ Illuminate\\Support\\MessageBag çš„ä¸€ä¸ªå®ä¾‹ã€‚ åœ¨ä¸Šé¢ç¤ºä¾‹ä¸­ï¼Œå½“éªŒè¯å¤±è´¥æ—¶ï¼Œç”¨æˆ·å°†è¢«é‡å®šå‘åˆ°æ§åˆ¶å™¨createçš„æ–¹æ³•ï¼Œä»è€Œå…è®¸åœ¨è§†å›¾ä¸­æ˜¾ç¤ºé”™è¯¯æ¶ˆæ¯ï¼š \u003c!-- /resources/views/post/create.blade.php --\u003e \u003ch1\u003eCreate Post\u003c/h1\u003e @if ($errors-\u003eany()) \u003cdiv class=\"alert alert-danger\"\u003e \u003cul\u003e @foreach ($errors-\u003eall() as $error) \u003cli\u003e{{ $error }}\u003c/li\u003e @endforeach \u003c/ul\u003e \u003c/div\u003e @endif \u003c!-- Create Post Form --\u003e è‡ªå®šä¹‰é”™è¯¯æ¶ˆæ¯ Laravel çš„å†…ç½®éªŒè¯è§„åˆ™æ¯ä¸ªè§„åˆ™éƒ½æœ‰ä¸€ä¸ªé”™è¯¯æ¶ˆæ¯ï¼Œè¯¥é”™è¯¯æ¶ˆæ¯ä½äºåº”ç”¨ç¨‹åº lang/en/validation.php çš„æ–‡ä»¶ä¸­ã€‚ å¦‚æœåº”ç”¨ç¨‹åºæ²¡æœ‰ lang ç›®å½•ï¼Œåˆ™å¯ä»¥æŒ‡ç¤º Laravel ä½¿ç”¨ lang:publish Artisan å‘½ä»¤åˆ›å»ºå®ƒã€‚ php artisan lang:publish XHRè¯·æ±‚å’ŒéªŒè¯ åœ¨ XHR è¯·æ±‚æœŸé—´ä½¿ç”¨è¯¥ validate æ–¹æ³•æ—¶ï¼ŒLaravel ä¸ä¼šç”Ÿæˆé‡å®šå‘å“åº”ã€‚ ç›¸åï¼ŒLaravel ä¼šç”ŸæˆåŒ…å«æ‰€æœ‰éªŒè¯é”™è¯¯çš„ JSON å“åº”ã€‚ æ­¤ JSON å“åº”å°†ä½¿ç”¨ 422 HTTP çŠ¶æ€ä»£ç å‘é€ã€‚ @erroræŒ‡ä»¤ å¯ä»¥ä½¿ç”¨ @error Blade æŒ‡ä»¤å¿«é€Ÿç¡®å®šç»™å®šå±æ€§æ˜¯å¦å­˜åœ¨éªŒè¯é”™è¯¯æ¶ˆæ¯ã€‚ åœ¨ @error æŒ‡ä»¤ä¸­ï¼Œå¯ä»¥å›æ˜¾ $message å˜é‡ä»¥æ˜¾ç¤ºé”™è¯¯æ¶ˆæ¯ï¼š \u003c!-- /resources/views/post/create.blade.php --\u003e \u003clabel for=\"title\"\u003ePost Title\u003c/label\u003e \u003cinput id=\"title\" type=\"text\" name=\"title\" class=\"@error('title') is-invalid @enderror\"\u003e @error('title') \u003cdiv class=\"alert alert-danger\"\u003e{{ $message }}\u003c/div\u003e @enderror å¦‚æœä½¿ç”¨å‘½åçš„é”™è¯¯åŒ…ï¼Œå¯ä»¥å°†é”™è¯¯åŒ…çš„åç§°ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ä¼ é€’ç»™ @error æŒ‡ä»¤ï¼š \u003cinput ... class=\"@error('title', 'post') is-invalid @enderror\"\u003e ","date":"2024å¹´06æœˆ17æ—¥","objectID":"/2024/06/laravel11%E9%AA%8C%E8%AF%81/:2:4","tags":["PHP","Laravel"],"title":"Laravel 11.x éªŒè¯","uri":"/2024/06/laravel11%E9%AA%8C%E8%AF%81/"},{"categories":["PHP","Laravel"],"content":"é‡æ–°å¡«å……è¡¨å• å½“ Laravel ç”±äºéªŒè¯é”™è¯¯è€Œç”Ÿæˆé‡å®šå‘å“åº”æ—¶ï¼Œæ¡†æ¶ä¼šè‡ªåŠ¨å°†è¯·æ±‚çš„æ‰€æœ‰è¾“å…¥åˆ·æ–°åˆ°ä¼šè¯ä¸­ã€‚ è¿™æ ·åšæ˜¯ä¸ºäº†åœ¨ä¸‹ä¸€ä¸ªè¯·æ±‚æœŸé—´æ–¹ä¾¿åœ°è®¿é—®è¾“å…¥ï¼Œå¹¶é‡æ–°å¡«å……ç”¨æˆ·å°è¯•æäº¤çš„è¡¨å•ã€‚ è‹¥è¦ä»ä¸Šä¸€ä¸ªè¯·æ±‚ä¸­æ£€ç´¢åˆ·æ–°è¾“å…¥ï¼Œå¯ä»¥åœ¨ Illuminate\\Http\\Request å®ä¾‹ä¸Šè°ƒç”¨ old æ–¹æ³•ã€‚ è¯¥ old æ–¹æ³•å°†ä»ä¼šè¯ä¸­æå–å…ˆå‰åˆ·æ–°çš„è¾“å…¥æ•°æ®ï¼š $title = $request-\u003eold('title'); Laravel è¿˜æä¾›äº†ä¸€ä¸ªå…¨å±€ old ã€‚å¦‚æœè¦åœ¨ Blade æ¨¡æ¿ä¸­æ˜¾ç¤ºæ—§è¾“å…¥ï¼Œåˆ™ä½¿ç”¨ old å¸®åŠ©ç¨‹åºé‡æ–°å¡«å……è¡¨å•ä¼šæ›´æ–¹ä¾¿ã€‚ å¦‚æœç»™å®šå­—æ®µä¸å­˜åœ¨æ—§è¾“å…¥ï¼Œ null åˆ™å°†è¿”å›ï¼š \u003cinput type=\"text\" name=\"title\" value=\"{{ old('title') }}\"\u003e ","date":"2024å¹´06æœˆ17æ—¥","objectID":"/2024/06/laravel11%E9%AA%8C%E8%AF%81/:2:5","tags":["PHP","Laravel"],"title":"Laravel 11.x éªŒè¯","uri":"/2024/06/laravel11%E9%AA%8C%E8%AF%81/"},{"categories":["PHP","Laravel"],"content":"å¯é€‰å­—æ®µçš„è¯´æ˜ é»˜è®¤æƒ…å†µä¸‹ï¼ŒLaravelå°† TrimStrings and ConvertEmptyStringsToNull ä¸­é—´ä»¶åŒ…å«åœ¨åº”ç”¨ç¨‹åºçš„å…¨å±€ä¸­é—´ä»¶ä¸­ã€‚ å› æ­¤ï¼Œå¦‚æœä¸å¸Œæœ›éªŒè¯å™¨å°†ç©ºå€¼è§†ä¸ºæ— æ•ˆå€¼ï¼Œé€šå¸¸éœ€è¦å°†â€œå¯é€‰çš„â€è¯·æ±‚å­—æ®µæ ‡è®°ä¸ºå¯ç©ºã€‚æ¯”å¦‚ï¼š $request-\u003evalidate([ 'title' =\u003e 'required|unique:posts|max:255', 'body' =\u003e 'required', 'publish_at' =\u003e 'nullable|date', // å¯ä»¥æ˜¯æœ‰æ•ˆçš„æ—¥æœŸä¹Ÿå¯ä»¥æ˜¯null ]); ","date":"2024å¹´06æœˆ17æ—¥","objectID":"/2024/06/laravel11%E9%AA%8C%E8%AF%81/:2:6","tags":["PHP","Laravel"],"title":"Laravel 11.x éªŒè¯","uri":"/2024/06/laravel11%E9%AA%8C%E8%AF%81/"},{"categories":["PHP","Laravel"],"content":"éªŒè¯é”™è¯¯å“åº”æ ¼å¼ å½“åº”ç”¨ç¨‹åºæŠ›å‡ºä¸€ä¸ª Illuminate\\Validation\\ValidationException å¼‚å¸¸å¹¶ä¸”ä¼ å…¥çš„ HTTP è¯·æ±‚æœŸæœ›å¾—åˆ°ä¸€ä¸ª JSON å“åº”æ—¶ï¼ŒLaravel ä¼šè‡ªåŠ¨è¿›è¡Œæ ¼å¼åŒ–é”™è¯¯ä¿¡æ¯å¹¶è¿”å›ä¸€ä¸ª 422 Unprocessable Entityï¼ˆæ— æ³•å¤„ç†çš„å®ä½“ï¼‰HTTP å“åº”ã€‚ { \"message\": \"The team name must be a string. (and 4 more errors)\", \"errors\": { \"team_name\": [ \"The team name must be a string.\", \"The team name must be at least 1 characters.\" ], \"authorization.role\": [ \"The selected authorization.role is invalid.\" ], \"users.0.email\": [ \"The users.0.email field is required.\" ], \"users.2.email\": [ \"The users.2.email must be a valid email address.\" ] } } ","date":"2024å¹´06æœˆ17æ—¥","objectID":"/2024/06/laravel11%E9%AA%8C%E8%AF%81/:2:7","tags":["PHP","Laravel"],"title":"Laravel 11.x éªŒè¯","uri":"/2024/06/laravel11%E9%AA%8C%E8%AF%81/"},{"categories":["PHP","Laravel"],"content":"è¡¨å•è¯·æ±‚éªŒè¯ ","date":"2024å¹´06æœˆ17æ—¥","objectID":"/2024/06/laravel11%E9%AA%8C%E8%AF%81/:3:0","tags":["PHP","Laravel"],"title":"Laravel 11.x éªŒè¯","uri":"/2024/06/laravel11%E9%AA%8C%E8%AF%81/"},{"categories":["PHP","Laravel"],"content":"åˆ›å»ºè¡¨å•è¯·æ±‚ å¯¹äºæ›´å¤æ‚çš„éªŒè¯æ–¹æ³•ï¼Œéœ€è¦åˆ›å»ºä¸€ä¸ªè¡¨å•è¯·æ±‚ã€‚è¡¨å•è¯·æ±‚æ—¶å°è£…å…¶è‡ªå·±çš„éªŒè¯å’Œæˆæƒé€»è¾‘çš„è‡ªå®šä¹‰è¯·æ±‚ç±»ã€‚ å¯ä»¥ä½¿ç”¨make:requestå‘½ä»¤è¿›è¡Œåˆ›å»ºï¼š php artisan make:request StorePostRequest ç”Ÿæˆçš„è¡¨å•è¯·æ±‚åˆ—é˜²æ­¢åœ¨ç›®å½•app/Http/Requestsä¸­ã€‚åŒ…å«ä¸¤ä¸ªæ–¹æ³•ï¼šauthorizeå’Œrules \u003c?php namespace App\\Http\\Requests; use Illuminate\\Foundation\\Http\\FormRequest; class StorePostRequest extends FormRequest { /** * Determine if the user is authorized to make this request. */ public function authorize(): bool { return false; } /** * Get the validation rules that apply to the request. * * @return array\u003cstring, \\Illuminate\\Contracts\\Validation\\ValidationRule|array\u003cmixed\u003e|string\u003e */ public function rules(): array { return [ 'title' =\u003e 'required|unique:posts|max:255', 'body' =\u003e 'required', ]; } } éªŒè¯è§„åˆ™ï¼Œåªéœ€å¯¹æ§åˆ¶å™¨æ–¹æ³•ä¸­çš„è¯·æ±‚è¿›è¡Œç±»å‹æç¤ºå³å¯ï¼š /** * Store a new blog post. */ public function store(StorePostRequest $request): RedirectResponse { // The incoming request is valid... // Retrieve the validated input data... $validated = $request-\u003evalidated(); // Retrieve a portion of the validated input data... $validated = $request-\u003esafe()-\u003eonly(['name', 'email']); $validated = $request-\u003esafe()-\u003eexcept(['name', 'email']); // Store the blog post... return redirect('/posts'); } æ‰§è¡Œå…¶ä»–éªŒè¯ å¯ä»¥ä½¿ç”¨afteræ–¹æ³•åœ¨åˆå§‹åŒ–éªŒè¯å®Œæˆåæ‰§è¡Œå…¶ä»–éªŒè¯ã€‚ è¯¥ after æ–¹æ³•åº”è¿”å›ä¸€ä¸ªå¯è°ƒç”¨å¯¹è±¡æˆ–é—­åŒ…æ•°ç»„ï¼Œè¿™äº›æ•°ç»„å°†åœ¨éªŒè¯å®Œæˆåè°ƒç”¨ã€‚ ç»™å®šçš„å¯è°ƒç”¨å¯¹è±¡å°†æ”¶åˆ°ä¸€ä¸ª Illuminate\\Validation\\Validator å®ä¾‹ï¼Œå…è®¸å¼•å‘å…¶ä»–é”™è¯¯æ¶ˆæ¯ã€‚ use Illuminate\\Validation\\Validator; /** * Get the \"after\" validation callables for the request. */ public function after(): array { return [ function (Validator $validator) { if ($this-\u003esomethingElseIsInvalid()) { $validator-\u003eerrors()-\u003eadd( 'field', 'Something is wrong with this field!' ); } } ]; } after æ–¹æ³•è¿”å›çš„æ•°ç»„ä¹Ÿå¯èƒ½åŒ…å«å¯è°ƒç”¨çš„ç±»ã€‚ è¿™äº›ç±» __invoke çš„æ–¹æ³•å°†æ¥æ”¶ä¸€ä¸ª Illuminate\\Validation\\Validator å®ä¾‹ã€‚ use App\\Validation\\ValidateShippingTime; use App\\Validation\\ValidateUserStatus; use Illuminate\\Validation\\Validator; /** * Get the \"after\" validation callables for the request. */ public function after(): array { return [ new ValidateUserStatus, new ValidateShippingTime, function (Validator $validator) { // } ]; } åœ¨é¦–æ¬¡éªŒè¯å¤±è´¥æ—¶åœæ­¢ é€šè¿‡å°† stopOnFirstFailure å±æ€§æ·»åŠ åˆ°è¯·æ±‚ç±»ä¸­ï¼Œå¯ä»¥é€šçŸ¥éªŒè¯ç¨‹åºï¼Œä¸€æ—¦å‘ç”Ÿå•ä¸ªéªŒè¯å¤±è´¥ï¼Œå®ƒå°±åº”è¯¥åœæ­¢éªŒè¯æ‰€æœ‰å±æ€§ï¼š /** * Indicates if the validator should stop on the first rule failure. * * @var bool */ protected $stopOnFirstFailure = true; è‡ªå®šä¹‰é‡å®šå‘ä½ç½® é€šè¿‡$redirectå±æ€§ï¼Œå¯ä»¥è‡ªå®šä¹‰é‡å®šå‘ä½ç½®ï¼š /** * The URI that users should be redirected to if validation fails. * * @var string */ protected $redirect = '/dashboard'; å¦‚æœè¦å°†ç”¨æˆ·é‡å®šå‘åˆ°å‘½åè·¯ç”±ï¼Œå¯ä»¥æ”¹ä¸ºå®šä¹‰$redirectRouteå±æ€§ï¼š /** * The route that users should be redirected to if validation fails. * * @var string */ protected $redirectRoute = 'dashboard'; ","date":"2024å¹´06æœˆ17æ—¥","objectID":"/2024/06/laravel11%E9%AA%8C%E8%AF%81/:3:1","tags":["PHP","Laravel"],"title":"Laravel 11.x éªŒè¯","uri":"/2024/06/laravel11%E9%AA%8C%E8%AF%81/"},{"categories":["PHP","Laravel"],"content":"æˆæƒè¡¨å•è¯·æ±‚ è¡¨å•è¯·æ±‚ç±»è¿˜åŒ…å«ä¸€ä¸ªauthorizeæ–¹æ³•ã€‚åœ¨æ­¤æ–¹æ³•ä¸­ï¼Œå¯ä»¥ç¡®å®šç»è¿‡èº«ä»½éªŒè¯çš„ç”¨æˆ·æ˜¯å¦æœ‰æƒé™æ›´æ–°ç»™å®šçš„èµ„æºã€‚ use App\\Models\\Comment; /** * Determine if the user is authorized to make this request. */ public function authorize(): bool { $comment = Comment::find($this-\u003eroute('comment')); return $comment \u0026\u0026 $this-\u003euser()-\u003ecan('update', $comment); } ç”±äºæ‰€æœ‰è¡¨å•è¯·æ±‚éƒ½æ‰©å±•è‡ªåŸºæœ¬çš„ Laravel è¯·æ±‚ç±»ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ user æ–¹æ³•æ¥è®¿é—®å½“å‰å·²è®¤è¯çš„ç”¨æˆ·ã€‚ å¦å¤–ï¼Œè¯·æ³¨æ„ä¸Šé¢ç¤ºä¾‹ä¸­å¯¹ route æ–¹æ³•çš„è°ƒç”¨ã€‚è¿™ä¸ªæ–¹æ³•å…è®¸ä½ è®¿é—®è¢«è°ƒç”¨è·¯ç”±ä¸Šå®šä¹‰çš„ URI å‚æ•°ï¼Œä¾‹å¦‚ä¸‹é¢ç¤ºä¾‹ä¸­çš„ {comment} å‚æ•°ï¼š Route::post('/comment/{comment}'); å› æ­¤ï¼Œå¦‚æœåº”ç”¨ç¨‹åºåˆ©ç”¨äº†è·¯ç”±æ¨¡å‹ç»‘å®šï¼Œé€šè¿‡å°†è§£æåçš„æ¨¡å‹ä½œä¸ºè¯·æ±‚çš„ä¸€ä¸ªå±æ€§æ¥è®¿é—®ï¼Œå¯ä»¥ä½¿ä»£ç æ›´åŠ ç®€æ´ï¼š return $this-\u003euser()-\u003ecan('update', $this-\u003ecomment); å¦‚æœ authorize è¯¥æ–¹æ³•è¿”å› false ï¼Œåˆ™å°†è‡ªåŠ¨è¿”å›å…·æœ‰ 403 çŠ¶æ€ä»£ç çš„ HTTP å“åº”ï¼Œå¹¶ä¸”ä¸ä¼šæ‰§è¡Œæ§åˆ¶å™¨æ–¹æ³•ã€‚ å¦‚æœè®¡åˆ’åœ¨åº”ç”¨ç¨‹åºçš„å¦ä¸€éƒ¨åˆ†å¤„ç†è¯·æ±‚çš„æˆæƒé€»è¾‘ï¼Œåˆ™å¯ä»¥å®Œå…¨åˆ é™¤è¯¥ authorize æ–¹æ³•ï¼Œæˆ–è€…ç›´æ¥è¿”å› true ï¼š /** * Determine if the user is authorized to make this request. */ public function authorize(): bool { return true; } ","date":"2024å¹´06æœˆ17æ—¥","objectID":"/2024/06/laravel11%E9%AA%8C%E8%AF%81/:3:2","tags":["PHP","Laravel"],"title":"Laravel 11.x éªŒè¯","uri":"/2024/06/laravel11%E9%AA%8C%E8%AF%81/"},{"categories":["PHP","Laravel"],"content":"è‡ªå®šä¹‰é”™è¯¯æ¶ˆæ¯ å¯ä»¥é€šè¿‡é‡å†™messageæ–¹æ³•æ¥è‡ªå®šä¹‰è¡¨å•è¯·æ±‚ä½¿ç”¨çš„é”™è¯¯æ¶ˆæ¯ã€‚ /** * Get the error messages for the defined validation rules. * * @return array\u003cstring, string\u003e */ public function messages(): array { return [ 'title.required' =\u003e 'A title is required', 'body.required' =\u003e 'A message is required', ]; } è‡ªå®šä¹‰éªŒè¯å±æ€§ Laravel çš„è®¸å¤šå†…ç½®éªŒè¯è§„åˆ™é”™è¯¯æ¶ˆæ¯éƒ½åŒ…å«å  :attribute ä½ç¬¦ã€‚ å¦‚æœå¸Œæœ›å°†éªŒè¯æ¶ˆæ¯çš„ :attribute å ä½ç¬¦æ›¿æ¢ä¸ºè‡ªå®šä¹‰å±æ€§åç§°ï¼Œåˆ™å¯ä»¥é€šè¿‡é‡å†™ attributes æ–¹æ³•æŒ‡å®šè‡ªå®šä¹‰åç§°ã€‚ æ­¤æ–¹æ³•åº”è¿”å›å±æ€§/åç§°å¯¹çš„æ•°ç»„ï¼š /** * Get custom attributes for validator errors. * * @return array\u003cstring, string\u003e */ public function attributes(): array { return [ 'email' =\u003e 'email address', ]; } ","date":"2024å¹´06æœˆ17æ—¥","objectID":"/2024/06/laravel11%E9%AA%8C%E8%AF%81/:3:3","tags":["PHP","Laravel"],"title":"Laravel 11.x éªŒè¯","uri":"/2024/06/laravel11%E9%AA%8C%E8%AF%81/"},{"categories":["PHP","Laravel"],"content":"å‡†å¤‡ç”¨äºéªŒè¯çš„è¾“å…¥ å¦‚æœéœ€è¦åœ¨åº”ç”¨éªŒè¯è§„åˆ™ä¹‹å‰å‡†å¤‡æˆ–æ¸…ç†è¯·æ±‚ä¸­çš„ä»»ä½•æ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹ prepareForValidation æ–¹æ³•ï¼š use Illuminate\\Support\\Str; /** * Prepare the data for validation. */ protected function prepareForValidation(): void { $this-\u003emerge([ 'slug' =\u003e Str::slug($this-\u003eslug), ]); } åŒæ ·ï¼Œå¦‚æœéœ€è¦åœ¨éªŒè¯å®Œæˆåè§„èŒƒåŒ–ä»»ä½•è¯·æ±‚æ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹ passedValidation æ–¹æ³•ï¼š /** * Handle a passed validation attempt. */ protected function passedValidation(): void { $this-\u003ereplace(['name' =\u003e 'Taylor']); } ","date":"2024å¹´06æœˆ17æ—¥","objectID":"/2024/06/laravel11%E9%AA%8C%E8%AF%81/:3:4","tags":["PHP","Laravel"],"title":"Laravel 11.x éªŒè¯","uri":"/2024/06/laravel11%E9%AA%8C%E8%AF%81/"},{"categories":["PHP","Laravel"],"content":"æ‰‹åŠ¨åˆ›å»ºéªŒè¯ç¨‹åº å¦‚æœä¸æƒ³å†è¯·æ±‚ä¸Šä½¿ç”¨validateæ–¹æ³•ï¼Œåˆ™å¯ä»¥ä½¿ç”¨Validator Facade æ‰‹åŠ¨åˆ›å»ºéªŒè¯å™¨å®ä¾‹ã€‚ä½¿ç”¨makeæ–¹æ³•ç”Ÿæˆä¸€ä¸ªæ–°çš„éªŒè¯å™¨å®ä¾‹ã€‚ \u003c?php namespace App\\Http\\Controllers; use Illuminate\\Http\\RedirectResponse; use Illuminate\\Http\\Request; use Illuminate\\Support\\Facades\\Validator; class PostController extends Controller { /** * Store a new blog post. */ public function store(Request $request): RedirectResponse { $validator = Validator::make($request-\u003eall(), [ 'title' =\u003e 'required|unique:posts|max:255', 'body' =\u003e 'required', ]); if ($validator-\u003efails()) { return redirect('post/create') -\u003ewithErrors($validator) -\u003ewithInput(); } // Retrieve the validated input... $validated = $validator-\u003evalidated(); // Retrieve a portion of the validated input... $validated = $validator-\u003esafe()-\u003eonly(['name', 'email']); $validated = $validator-\u003esafe()-\u003eexcept(['name', 'email']); // Store the blog post... return redirect('/posts'); } } ä¼ é€’ç»™makeæ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ­£åœ¨éªŒè¯çš„æ•°æ®ã€‚ç¬¬äºŒä¸ªå‚æ•°æ˜¯åº”è¯¥åº”ç”¨äºæ•°æ®çš„éªŒè¯è§„åˆ™æ•°ç»„ã€‚ ç¡®å®šè¯·æ±‚éªŒè¯æ˜¯å¦å¤±è´¥åï¼Œå¯ä»¥ä½¿ç”¨è¯¥withErrorsæ–¹æ³•å°†é”™è¯¯æ¶ˆæ¯åˆ·æ–°åˆ°ä¼šè¯ã€‚ ä½¿ç”¨æ­¤æ–¹æ³•æ—¶ï¼Œ$errorså˜é‡å°†åœ¨é‡å®šå‘åè‡ªåŠ¨ä¸è§†å›¾å…±äº«ï¼Œä»è€Œæ˜¾ç¤ºç»™ç”¨æˆ·ã€‚ withErrorsæ–¹æ³•æ¥å—éªŒè¯å™¨ã€MessageBagæˆ–è€…PHP array é¦–æ¬¡éªŒè¯å¤±è´¥æ—¶åœæ­¢ stopOnFirstFailure æ–¹æ³•å°†é€šçŸ¥éªŒè¯å™¨ï¼Œä¸€æ—¦å‘ç”Ÿå•ä¸ªéªŒè¯å¤±è´¥ï¼Œå®ƒå°±åº”è¯¥åœæ­¢éªŒè¯æ‰€æœ‰å±æ€§ï¼š if ($validator-\u003estopOnFirstFailure()-\u003efails()) { // ... } ","date":"2024å¹´06æœˆ17æ—¥","objectID":"/2024/06/laravel11%E9%AA%8C%E8%AF%81/:4:0","tags":["PHP","Laravel"],"title":"Laravel 11.x éªŒè¯","uri":"/2024/06/laravel11%E9%AA%8C%E8%AF%81/"},{"categories":["PHP","Laravel"],"content":"è‡ªåŠ¨é‡å®šå‘ æ‰‹åŠ¨åˆ›å»ºéªŒè¯å™¨å®ä¾‹ï¼Œä»éœ€è¦åˆ©ç”¨HTTPè¯·æ±‚validateæ–¹æ³•æä¾›çš„è‡ªåŠ¨é‡å®šå‘ï¼Œåˆ™å¯ä»¥åœ¨ç°æœ‰éªŒè¯å™¨å®ä¾‹ä¸Šè°ƒç”¨è¯¥validateæ–¹æ³•ã€‚ å¦‚æœéªŒè¯å¤±è´¥ï¼Œç”¨æˆ·å°†è‡ªåŠ¨è¢«é‡å®šå‘ï¼Œå¦‚æœæ˜¯XHRè¯·æ±‚ï¼Œåˆ™å°†è¿”å›JSONå“åº”ï¼š Validator::make($request-\u003eall(), [ 'title' =\u003e 'required|unique:posts|max:255', 'body' =\u003e 'required', ])-\u003evalidate(); å¦‚æœéªŒè¯å¤±è´¥ï¼Œå¯ä»¥ä½¿ç”¨è¯¥ validateWithBag æ–¹æ³•å°†é”™è¯¯æ¶ˆæ¯å­˜å‚¨åœ¨å‘½åçš„é”™è¯¯åŒ…ä¸­ï¼š Validator::make($request-\u003eall(), [ 'title' =\u003e 'required|unique:posts|max:255', 'body' =\u003e 'required', ])-\u003evalidateWithBag('post'); ","date":"2024å¹´06æœˆ17æ—¥","objectID":"/2024/06/laravel11%E9%AA%8C%E8%AF%81/:4:1","tags":["PHP","Laravel"],"title":"Laravel 11.x éªŒè¯","uri":"/2024/06/laravel11%E9%AA%8C%E8%AF%81/"},{"categories":["PHP","Laravel"],"content":"å‘½åé”™è¯¯åŒ… å¦‚æœå•ä¸ªé¡µé¢ä¸Šæœ‰å¤šä¸ªè¡¨å•ï¼Œåˆ™å¯èƒ½å¸Œæœ›å‘½å MessageBag åŒ…å«éªŒè¯é”™è¯¯çš„åç§°ï¼Œä»¥ä¾¿æ£€ç´¢ç‰¹å®šè¡¨å•çš„é”™è¯¯æ¶ˆæ¯ã€‚ ä¸ºæ­¤ï¼Œè¯·å°†åç§°ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ä¼ é€’ç»™ withErrors ï¼š return redirect('register')-\u003ewithErrors($validator, 'login'); ç„¶åï¼Œå¯ä»¥ä» $errors å˜é‡è®¿é—®å‘½å MessageBag å®ä¾‹ï¼š {{ $errors-\u003elogin-\u003efirst('email') }} ","date":"2024å¹´06æœˆ17æ—¥","objectID":"/2024/06/laravel11%E9%AA%8C%E8%AF%81/:4:2","tags":["PHP","Laravel"],"title":"Laravel 11.x éªŒè¯","uri":"/2024/06/laravel11%E9%AA%8C%E8%AF%81/"},{"categories":["PHP","Laravel"],"content":"è‡ªå®šä¹‰é”™è¯¯æ¶ˆæ¯ å¯ä»¥å°†è‡ªå®šä¹‰æ¶ˆæ¯ä½œä¸ºç¬¬ä¸‰ä¸ªå‚æ•°ä¼ é€’ç»™Validator::makeæ–¹æ³•ï¼Œç”¨æ¥è‡ªå®šä¹‰é”™è¯¯æ¶ˆæ¯ $validator = Validator::make($input, $rules, $messages = [ 'required' =\u003e 'The :attribute field is required.', ]); åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œ :attribute å ä½ç¬¦å°†æ›¿æ¢ä¸ºæ­£åœ¨éªŒè¯çš„å­—æ®µçš„å®é™…åç§°ã€‚ è¿˜å¯ä»¥åœ¨éªŒè¯æ¶ˆæ¯ä¸­ä½¿ç”¨å…¶ä»–å ä½ç¬¦ã€‚ä¾‹å¦‚ï¼š $messages = [ 'same' =\u003e 'The :attribute and :other must match.', 'size' =\u003e 'The :attribute must be exactly :size.', 'between' =\u003e 'The :attribute value :input is not between :min - :max.', 'in' =\u003e 'The :attribute must be one of the following types: :values', ]; ä¸ºç»™å®šå±æ€§æŒ‡å®šè‡ªå®šä¹‰æ¶ˆæ¯ ä»…ä¸ºç‰¹å®šå±æ€§æŒ‡å®šè‡ªå®šä¹‰é”™è¯¯æ¶ˆæ¯ã€‚å¯ä»¥ä½¿ç”¨.è¡¨ç¤ºæ³•ï¼š $messages = [ 'email.required' =\u003e 'We need to know your email address!', ]; æŒ‡å®šè‡ªå®šä¹‰å±æ€§å€¼ Laravel çš„è®¸å¤šå†…ç½®é”™è¯¯æ¶ˆæ¯éƒ½åŒ…å«ä¸€ä¸ª :attribute å ä½ç¬¦ï¼Œè¯¥å ä½ç¬¦å°†æ›¿æ¢ä¸ºæ­£åœ¨éªŒè¯çš„å­—æ®µæˆ–å±æ€§çš„åç§°ã€‚ è‹¥è¦è‡ªå®šä¹‰ç”¨äºæ›¿æ¢ç‰¹å®šå­—æ®µçš„è¿™äº›å ä½ç¬¦çš„å€¼ï¼Œå¯ä»¥å°†è‡ªå®šä¹‰å±æ€§æ•°ç»„ä½œä¸ºç¬¬å››ä¸ªå‚æ•°ä¼ é€’ç»™ Validator::make è¯¥æ–¹æ³•ï¼š $validator = Validator::make($input, $rules, $messages, [ 'email' =\u003e 'email address', ]); ","date":"2024å¹´06æœˆ17æ—¥","objectID":"/2024/06/laravel11%E9%AA%8C%E8%AF%81/:4:3","tags":["PHP","Laravel"],"title":"Laravel 11.x éªŒè¯","uri":"/2024/06/laravel11%E9%AA%8C%E8%AF%81/"},{"categories":["PHP","Laravel"],"content":"æ‰§è¡Œå…¶ä»–éªŒè¯ åœ¨åˆå§‹éªŒè¯å®Œæˆåæ‰§è¡Œå…¶ä»–éªŒè¯ã€‚å¯ä»¥ä½¿ç”¨éªŒè¯å™¨afteræ–¹æ³•å®Œæˆè¯¥æ“ä½œã€‚ è¯¥æ–¹æ³•æ¥å—ä¸€ä¸ªé—­åŒ…æˆ–è€…ä¸€ä¸ªå¯è°ƒç”¨å¯¹è±¡æ•°ç»„ï¼Œè¿™äº›å¯è°ƒç”¨å¯¹è±¡å°†åœ¨éªŒè¯å®Œæˆåè°ƒç”¨ã€‚ ç»™å®šçš„å¯è°ƒç”¨å¯¹è±¡å°†æ”¶åˆ°ä¸€ä¸ª Illuminate\\Validation\\Validator å®ä¾‹ï¼Œå…è®¸å¼•å‘å…¶ä»–é”™è¯¯æ¶ˆæ¯ï¼š use Illuminate\\Support\\Facades\\Validator; $validator = Validator::make(/* ... */); $validator-\u003eafter(function ($validator) { if ($this-\u003esomethingElseIsInvalid()) { $validator-\u003eerrors()-\u003eadd( 'field', 'Something is wrong with this field!' ); } }); if ($validator-\u003efails()) { // ... } è¯¥afteræ–¹æ³•è¿˜æ¥å—å¯è°ƒç”¨å¯¹è±¡æ•°ç»„ï¼Œå¦‚æœéªŒè¯åé€»è¾‘å°è£…åœ¨å¯è°ƒç”¨ç±»ä¸­ï¼Œè¿™å°†ç‰¹åˆ«æ–¹ä¾¿ï¼Œè¿™äº›ç±»å°†é€šè¿‡å…¶__invokeæ–¹æ³•æ¥æ”¶å®ä¾‹Illuminate\\Validation\\Validatorï¼š use App\\Validation\\ValidateShippingTime; use App\\Validation\\ValidateUserStatus; $validator-\u003eafter([ new ValidateUserStatus, new ValidateShippingTime, function ($validator) { // ... }, ]); ","date":"2024å¹´06æœˆ17æ—¥","objectID":"/2024/06/laravel11%E9%AA%8C%E8%AF%81/:4:4","tags":["PHP","Laravel"],"title":"Laravel 11.x éªŒè¯","uri":"/2024/06/laravel11%E9%AA%8C%E8%AF%81/"},{"categories":["PHP","Laravel"],"content":"ä½¿ç”¨ç»è¿‡éªŒè¯çš„è¾“å…¥ åœ¨è¡¨å•è¯·æ±‚æˆ–éªŒè¯ç¨‹åºå®ä¾‹ä¸Šè°ƒç”¨è¯¥ validated æ–¹æ³•ã€‚è¿”å›å·²éªŒè¯çš„æ•°æ®æ•°ç»„ï¼š $validated = $request-\u003evalidated(); $validated = $validator-\u003evalidated(); è¿˜å¯ä»¥åœ¨è¡¨å•è¯·æ±‚æˆ–éªŒè¯ç¨‹åºå®ä¾‹ä¸Šè°ƒç”¨è¯¥ safe æ–¹æ³•ã€‚ æ­¤æ–¹æ³•è¿”å›çš„ Illuminate\\Support\\ValidatedInput å®ä¾‹ã€‚ æ­¤å¯¹è±¡å…¬å¼€ only ã€ except å’Œ all æ–¹æ³•ï¼Œç”¨äºæ£€ç´¢å·²éªŒè¯æ•°æ®çš„å­é›†æˆ–å·²éªŒè¯æ•°æ®çš„æ•´ä¸ªæ•°ç»„ï¼š $validated = $request-\u003esafe()-\u003eonly(['name', 'email']); $validated = $request-\u003esafe()-\u003eexcept(['name', 'email']); $validated = $request-\u003esafe()-\u003eall(); Illuminate\\Support\\ValidatedInput å®ä¾‹å¯ä»¥åƒæ•°ç»„ä¸€æ ·è¿›è¡Œè¿­ä»£å’Œè®¿é—®ï¼š // Validated data may be iterated... foreach ($request-\u003esafe() as $key =\u003e $value) { // ... } // Validated data may be accessed as an array... $validated = $request-\u003esafe(); $email = $validated['email']; å¦‚æœè¦å‘éªŒè¯çš„æ•°æ®æ·»åŠ å…¶ä»–å­—æ®µï¼Œå¯ä»¥è°ƒç”¨ä»¥ä¸‹ merge æ–¹æ³•ï¼š $validated = $request-\u003esafe()-\u003emerge(['name' =\u003e 'Taylor Otwell']); å¦‚æœè¦å°†å·²éªŒè¯çš„æ•°æ®ä½œä¸ºé›†åˆå®ä¾‹è¿›è¡Œæ£€ç´¢ï¼Œå¯ä»¥è°ƒç”¨ä»¥ä¸‹ collect æ–¹æ³•ï¼š $collection = $request-\u003esafe()-\u003ecollect(); ","date":"2024å¹´06æœˆ17æ—¥","objectID":"/2024/06/laravel11%E9%AA%8C%E8%AF%81/:5:0","tags":["PHP","Laravel"],"title":"Laravel 11.x éªŒè¯","uri":"/2024/06/laravel11%E9%AA%8C%E8%AF%81/"},{"categories":["PHP","Laravel"],"content":"ä½¿ç”¨é”™è¯¯æ¶ˆæ¯ åœ¨å®ä¾‹Validatorä¸Šè°ƒç”¨è¯¥errorsæ–¹æ³•åï¼Œå°†æ”¶åˆ°ä¸€ä¸ªIlluminate\\Support\\MessageBagå®ä¾‹ï¼Œè¯¥å®ä¾‹å…·æœ‰å¤šç§å¤„ç†é”™è¯¯æ¶ˆæ¯çš„ä¾¿æºæ–¹æ³•ã€‚ è‡ªåŠ¨æä¾›ç»™æ‰€æœ‰è§†å›¾çš„$errorså˜é‡ä¹Ÿæ˜¯è¯¥MessageBagç±»çš„å®ä¾‹ã€‚ æ£€ç´¢å­—æ®µçš„é¦–æ¬¡é”™è¯¯æ¶ˆæ¯ firstæ–¹æ³•å¯ä»¥æ£€ç´¢ç»™å®šå­—æ®µçš„ç¬¬ä¸€æ¡é”™è¯¯æ¶ˆæ¯ $errors = $validator-\u003eerrors(); echo $errors-\u003efirst('email'); æ£€ç´¢å­—æ®µçš„æ‰€æœ‰é”™è¯¯æ¶ˆæ¯ getæ–¹æ³•å¯ä»¥æ£€ç´¢ç»™å®šå­—æ®µçš„æ‰€æœ‰æ¶ˆæ¯çš„æ•°ç»„ foreach ($errors-\u003eget('email') as $message) { // ... } å¦‚æœè¦éªŒè¯æ•°ç»„è¡¨å•å­—æ®µï¼Œåˆ™å¯ä»¥ä½¿ç”¨ä»¥ä¸‹ * å­—ç¬¦æ£€ç´¢æ¯ä¸ªæ•°ç»„å…ƒç´ çš„æ‰€æœ‰æ¶ˆæ¯ï¼š foreach ($errors-\u003eget('attachments.*') as $message) { // ... } æ£€ç´¢æ‰€æœ‰å­—æ®µçš„æ‰€æœ‰é”™è¯¯æ¶ˆæ¯ allæ–¹æ³•å¯ä»¥æ£€ç´¢æ‰€æœ‰å­—æ®µçš„æ‰€æœ‰æ¶ˆæ¯çš„æ•°ç»„ foreach ($errors-\u003eall() as $message) { // ... } ç¡®å®šå­—æ®µæ˜¯å¦å­˜åœ¨æ¶ˆæ¯ hasæ–¹æ³•ç”¨äºç¡®å®šç»™å®šå­—æ®µæ˜¯å¦å­˜åœ¨ä»»ä½•é”™è¯¯æ¶ˆæ¯ if ($errors-\u003ehas('email')) { // ... } ","date":"2024å¹´06æœˆ17æ—¥","objectID":"/2024/06/laravel11%E9%AA%8C%E8%AF%81/:6:0","tags":["PHP","Laravel"],"title":"Laravel 11.x éªŒè¯","uri":"/2024/06/laravel11%E9%AA%8C%E8%AF%81/"},{"categories":["PHP","Laravel"],"content":"åœ¨è¯­è¨€æ–‡ä»¶ä¸­æŒ‡å®šè‡ªå®šä¹‰æ¶ˆæ¯ Laravel çš„å†…ç½®éªŒè¯è§„åˆ™æ¯ä¸ªè§„åˆ™éƒ½æœ‰ä¸€ä¸ªé”™è¯¯æ¶ˆæ¯ï¼Œè¯¥é”™è¯¯æ¶ˆæ¯ä½äºåº”ç”¨ç¨‹åº lang/en/validation.php çš„æ–‡ä»¶ä¸­ã€‚ å¦‚æœåº”ç”¨ç¨‹åºæ²¡æœ‰ lang ç›®å½•ï¼Œå¯ä»¥ä½¿ç”¨ lang:publish Artisan å‘½ä»¤åˆ›å»ºå®ƒã€‚ åœ¨lang/en/validation.php æ–‡ä»¶ä¸­ï¼Œå¯ä»¥æ ¹æ®åº”ç”¨ç¨‹åºçš„éœ€è¦è°ƒæ•´è¿™äº›æ¶ˆæ¯ã€‚ æ­¤å¤–ï¼Œä¹Ÿå¯ä»¥å°†æ­¤æ–‡ä»¶å¤åˆ¶åˆ°å…¶ä»–è¯­è¨€ç›®å½•ï¼Œä»¥ç¿»è¯‘åº”ç”¨ç¨‹åºè¯­è¨€çš„æ¶ˆæ¯ã€‚ ç‰¹å®šå±æ€§çš„è‡ªå®šä¹‰æ¶ˆæ¯ å¯ä»¥åœ¨åº”ç”¨ç¨‹åºçš„éªŒè¯è¯­è¨€æ–‡ä»¶ä¸­è‡ªå®šä¹‰ç”¨äºæŒ‡å®šå±æ€§å’Œè§„åˆ™ç»„åˆçš„é”™è¯¯æ¶ˆæ¯ã€‚ä¸ºæ­¤ï¼Œè¯·å°†æ¶ˆæ¯è‡ªå®šä¹‰é¡¹æ·»åŠ åˆ°åº”ç”¨ç¨‹åº lang/xx/validation.php è¯­è¨€æ–‡ä»¶çš„ custom æ•°ç»„ä¸­ï¼š 'custom' =\u003e [ 'email' =\u003e [ 'required' =\u003e 'We need to know your email address!', 'max' =\u003e 'Your email address is too long!' ], ], ","date":"2024å¹´06æœˆ17æ—¥","objectID":"/2024/06/laravel11%E9%AA%8C%E8%AF%81/:6:1","tags":["PHP","Laravel"],"title":"Laravel 11.x éªŒè¯","uri":"/2024/06/laravel11%E9%AA%8C%E8%AF%81/"},{"categories":["PHP","Laravel"],"content":"åœ¨è¯­è¨€æ–‡ä»¶ä¸­æŒ‡å®šå±æ€§ Laravel çš„è®¸å¤šå†…ç½®é”™è¯¯æ¶ˆæ¯éƒ½åŒ…å«ä¸€ä¸ª :attribute å ä½ç¬¦ï¼Œè¯¥å ä½ç¬¦å°†æ›¿æ¢ä¸ºæ­£åœ¨éªŒè¯çš„å­—æ®µæˆ–å±æ€§çš„åç§°ã€‚ å¦‚æœè¦å°†éªŒè¯æ¶ˆæ¯ :attribute çš„éƒ¨åˆ†æ›¿æ¢ä¸ºè‡ªå®šä¹‰å€¼ï¼Œå¯ä»¥åœ¨ lang/xx/validation.php è¯­è¨€æ–‡ä»¶çš„ attributes æ•°ç»„ä¸­æŒ‡å®šè‡ªå®šä¹‰å±æ€§åç§°ï¼š 'attributes' =\u003e [ 'email' =\u003e 'email address', ], ","date":"2024å¹´06æœˆ17æ—¥","objectID":"/2024/06/laravel11%E9%AA%8C%E8%AF%81/:6:2","tags":["PHP","Laravel"],"title":"Laravel 11.x éªŒè¯","uri":"/2024/06/laravel11%E9%AA%8C%E8%AF%81/"},{"categories":["PHP","Laravel"],"content":"åœ¨è¯­è¨€æ–‡ä»¶ä¸­æŒ‡å®šå€¼ Laravel ä¸€äº›å†…ç½®çš„éªŒè¯è§„åˆ™é”™è¯¯æ¶ˆæ¯åŒ…å«ä¸€ä¸ª :value å ä½ç¬¦ï¼Œè¯¥å ä½ç¬¦ä¼šè¢«è¯·æ±‚å±æ€§çš„å½“å‰å€¼æ›¿æ¢ã€‚ ç„¶è€Œï¼Œæœ‰æ—¶å¯èƒ½éœ€è¦å°†éªŒè¯æ¶ˆæ¯ä¸­çš„ :value éƒ¨åˆ†æ›¿æ¢ä¸ºè‡ªå®šä¹‰çš„å€¼è¡¨ç¤ºã€‚ ä¾‹å¦‚ï¼Œè€ƒè™‘å¦‚ä¸‹è§„åˆ™ï¼Œè¯¥è§„åˆ™è§„å®šå¦‚æœ payment_type çš„å€¼ä¸º ccï¼Œåˆ™è¦æ±‚æä¾›ä¿¡ç”¨å¡å·ç ï¼š Validator::make($request-\u003eall(), [ 'credit_card_number' =\u003e 'required_if:payment_type,cc' ]); å¦‚æœæ­¤éªŒè¯è§„åˆ™å¤±è´¥ï¼Œå®ƒå°†ç”Ÿæˆä»¥ä¸‹é”™è¯¯æ¶ˆæ¯ï¼š The credit card number field is required when payment type is cc. å¯ä»¥åœ¨ lang/xx/validation.php è¯­è¨€æ–‡ä»¶ä¸­å®šä¹‰ä¸€ä¸ª values æ•°ç»„ï¼Œä»¥æ›´ç”¨æˆ·å‹å¥½çš„å€¼è¡¨ç¤ºæ–¹å¼ï¼Œæ¥æ›¿æ¢æ˜¾ç¤º cc ä½œä¸ºæ”¯ä»˜ç±»å‹å€¼çš„æƒ…å†µï¼š 'values' =\u003e [ 'payment_type' =\u003e [ 'cc' =\u003e 'credit card' ], ], å®šä¹‰æ­¤å€¼åï¼ŒéªŒè¯è§„åˆ™å°†ç”Ÿæˆå¦‚ä¸‹é”™è¯¯æ¶ˆæ¯ï¼š The credit card number field is required when payment type is credit card. ","date":"2024å¹´06æœˆ17æ—¥","objectID":"/2024/06/laravel11%E9%AA%8C%E8%AF%81/:6:3","tags":["PHP","Laravel"],"title":"Laravel 11.x éªŒè¯","uri":"/2024/06/laravel11%E9%AA%8C%E8%AF%81/"},{"categories":["PHP","Laravel"],"content":"å¯ç”¨çš„éªŒè¯è§„åˆ™ è¯¦ç»†è§ï¼šå¯ç”¨çš„éªŒè¯è§„åˆ™ ","date":"2024å¹´06æœˆ17æ—¥","objectID":"/2024/06/laravel11%E9%AA%8C%E8%AF%81/:7:0","tags":["PHP","Laravel"],"title":"Laravel 11.x éªŒè¯","uri":"/2024/06/laravel11%E9%AA%8C%E8%AF%81/"},{"categories":["PHP","Laravel"],"content":"æœ‰æ¡ä»¶çš„æ·»åŠ è§„åˆ™ å½“å­—æ®µå…·æœ‰ç‰¹å®šå€¼æ—¶è·³è¿‡éªŒè¯ æœ‰æ—¶å¯èƒ½å¸Œæœ›åœ¨å¦ä¸€ä¸ªå­—æ®µå…·æœ‰ç‰¹å®šå€¼çš„æƒ…å†µä¸‹ä¸éªŒè¯æŸä¸ªå­—æ®µã€‚ å¯ä»¥ä½¿ç”¨ exclude_if éªŒè¯è§„åˆ™æ¥å®ç°è¿™ä¸€ç‚¹ã€‚ åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå¦‚æœ has_appointment å­—æ®µçš„å€¼ä¸º falseï¼Œåˆ™ appointment_date å’Œ doctor_name å­—æ®µå°†ä¸ä¼šè¢«éªŒè¯ï¼š use Illuminate\\Support\\Facades\\Validator; $validator = Validator::make($data, [ 'has_appointment' =\u003e 'required|boolean', 'appointment_date' =\u003e 'exclude_if:has_appointment,false|required|date', 'doctor_name' =\u003e 'exclude_if:has_appointment,false|required|string', ]); æˆ–è€…ï¼Œå¯ä»¥ä½¿ç”¨ exclude_unless è§„åˆ™ï¼Œä¸éªŒè¯æŸä¸ªå­—æ®µï¼Œé™¤éå¦ä¸€ä¸ªå­—æ®µå…·æœ‰ç‰¹å®šå€¼ï¼š $validator = Validator::make($data, [ 'has_appointment' =\u003e 'required|boolean', 'appointment_date' =\u003e 'exclude_unless:has_appointment,true|required|date', 'doctor_name' =\u003e 'exclude_unless:has_appointment,true|required|string', ]); å­˜åœ¨æ—¶éªŒè¯ åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå¯èƒ½å¸Œæœ›åªæœ‰åœ¨æŸä¸ªå­—æ®µå­˜åœ¨äºè¢«éªŒè¯çš„æ•°æ®ä¸­æ—¶æ‰å¯¹å…¶è¿›è¡ŒéªŒè¯æ£€æŸ¥ã€‚ è¦å¿«é€Ÿå®ç°è¿™ä¸€ç‚¹ï¼Œå¯ä»¥åœ¨è§„åˆ™åˆ—è¡¨ä¸­æ·»åŠ  sometimes è§„åˆ™ï¼š $v = Validator::make($data, [ 'email' =\u003e 'sometimes|required|email', // ä»…å½“ email è¯¥å­—æ®µå­˜åœ¨äº $data æ•°ç»„ä¸­æ—¶ï¼Œæ‰ä¼šå¯¹å…¶è¿›è¡ŒéªŒè¯ã€‚ ]); å¤æ‚æ¡ä»¶éªŒè¯ ä¾‹å¦‚ï¼šå¯èƒ½å¸Œæœ›ä»…åœ¨å¦ä¸€ä¸ªå­—æ®µçš„å€¼å¤§äºç­‰äº100æ—¶æ‰éœ€è¦ç»™å®šå­—æ®µã€‚æˆ–è€…ï¼Œä»…å½“å­˜åœ¨å¦ä¸€ä¸ªå­—æ®µæ—¶ï¼Œæ‰éœ€è¦ä¸¤ä¸ªå­—æ®µæ‰å…·æœ‰ç»™å®šå€¼ã€‚ é¦–å…ˆï¼Œä½¿ç”¨é™æ€è§„åˆ™åˆ›å»ºä¸€ä¸ªValidatorå®ä¾‹ï¼š use Illuminate\\Support\\Facades\\Validator; $validator = Validator::make($request-\u003eall(), [ 'email' =\u003e 'required|email', 'games' =\u003e 'required|numeric', ]); ç„¶åï¼Œå¯ä»¥å¯ä»¥åœ¨Validatorå®ä¾‹ä¸Šä½¿ç”¨sometimesæ–¹æ³• use Illuminate\\Support\\Fluent; $validator-\u003esometimes('reason', 'required|max:500', function (Fluent $input) { return $input-\u003egames \u003e= 100; }); ä¼ é€’ç»™sometimesæ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æœ‰æ¡ä»¶éªŒè¯çš„å­—æ®µçš„åç§°ã€‚ç¬¬äºŒä¸ªå‚æ•°æ˜¯è¦æ·»åŠ çš„è§„åˆ™åˆ—è¡¨ã€‚å¦‚æœç¬¬ä¸‰ä¸ªå‚æ•°ä¼ é€’çš„é—­åŒ…è¿”å›trueï¼Œåˆ™å°†æ·»åŠ è§„åˆ™ã€‚ åŒæ ·çš„ä¸€æ¬¡ä¹Ÿå¯ä»¥ä¸ºå¤šä¸ªå­—æ®µæ·»åŠ æ¡ä»¶éªŒè¯ï¼š $validator-\u003esometimes(['reason', 'cost'], 'required', function (Fluent $input) { return $input-\u003egames \u003e= 100; }); å¤æ‚æ¡ä»¶æ•°æ®éªŒè¯ æœ‰æ—¶å¯èƒ½å¸Œæœ›æ ¹æ®åŒæ„åµŒå¥—æ•°ç»„ä¸­çš„å¦ä¸€ä¸ªå­—æ®µæ¥éªŒè¯ä¸€ä¸ªå­—æ®µï¼Œè€Œä¸çŸ¥é“è¯¥å­—æ®µçš„ç´¢å¼•ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥å…è®¸é—­åŒ…æ¥æ”¶ç¬¬äºŒä¸ªå‚æ•°ï¼Œè¯¥å‚æ•°å°†æ˜¯æ­£åœ¨éªŒè¯çš„æ•°æ®ä¸­çš„å½“å‰å•ä¸ªé¡¹ï¼š $input = [ 'channels' =\u003e [ [ 'type' =\u003e 'email', 'address' =\u003e 'abigail@example.com', ], [ 'type' =\u003e 'url', 'address' =\u003e 'https://example.com', ], ], ]; $validator-\u003esometimes('channels.*.address', 'email', function (Fluent $input, Fluent $item) { return $item-\u003etype === 'email'; }); $validator-\u003esometimes('channels.*.address', 'url', function (Fluent $input, Fluent $item) { return $item-\u003etype !== 'email'; }); ä¸ä¼ é€’ç»™é—­åŒ…çš„$inputå‚æ•°ä¸€æ ·ï¼Œå½“å±æ€§æ•°æ®ä¸ºæ•°æ®æ—¶ï¼Œ$itemå‚æ•°æ˜¯Illuminate\\Support\\Fluentçš„å®ä¾‹ï¼›å¦åˆ™ï¼Œå®ƒæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚ ","date":"2024å¹´06æœˆ17æ—¥","objectID":"/2024/06/laravel11%E9%AA%8C%E8%AF%81/:8:0","tags":["PHP","Laravel"],"title":"Laravel 11.x éªŒè¯","uri":"/2024/06/laravel11%E9%AA%8C%E8%AF%81/"},{"categories":["PHP","Laravel"],"content":"éªŒè¯æ•°ç»„ arrayè§„åˆ™æ¥æ”¶å…è®¸çš„æ•°ç»„é”®åˆ—è¡¨ã€‚å¦‚æœæ•°ç»„ä¸­å­˜åœ¨ä»»ä½•å…¶ä»–é”®ï¼Œåˆ™éªŒè¯å°†å¤±è´¥ï¼š use Illuminate\\Support\\Facades\\Validator; $input = [ 'user' =\u003e [ 'name' =\u003e 'Taylor Otwell', 'username' =\u003e 'taylorotwell', 'admin' =\u003e true, ], ]; Validator::make($input, [ 'user' =\u003e 'array:name,username', ]); é€šå¸¸æƒ…å†µä¸‹ï¼Œåº”è¯¥å§‹ç»ˆå…è®¸å­˜åœ¨äºæ•°ç»„ä¸­çš„æ•°ç»„é”®ã€‚å¦åˆ™ï¼ŒéªŒè¯å™¨çš„validateå’Œvalidatedæ–¹æ³•å°†è¿”å›æ‰€æœ‰å·²éªŒè¯çš„æ•°æ®ï¼ŒåŒ…æ‹¬æ•°ç»„åŠå…¶æ‰€æœ‰é”®ï¼Œå³ä½¿è¿™äº›é”®æœªç”±å…¶ä»–åµŒå¥—æ•°æ®éªŒè¯è§„åˆ™éªŒè¯ã€‚ ","date":"2024å¹´06æœˆ17æ—¥","objectID":"/2024/06/laravel11%E9%AA%8C%E8%AF%81/:9:0","tags":["PHP","Laravel"],"title":"Laravel 11.x éªŒè¯","uri":"/2024/06/laravel11%E9%AA%8C%E8%AF%81/"},{"categories":["PHP","Laravel"],"content":"éªŒè¯åµŒå¥—æ•°æ®è¾“å…¥ ä½¿ç”¨ç‚¹è¡¨ç¤ºæ³•æ¥éªŒè¯æ•°ç»„ä¸­çš„å±æ€§ï¼š use Illuminate\\Support\\Facades\\Validator; $validator = Validator::make($request-\u003eall(), [ 'photos.profile' =\u003e 'required|image', ]); è¿˜å¯ä»¥éªŒè¯æ•°ç»„çš„æ¯ä¸ªå…ƒç´ ï¼š $validator = Validator::make($request-\u003eall(), [ 'person.*.email' =\u003e 'email|unique:users', 'person.*.first_name' =\u003e 'required_with:person.*.last_name', ]); åŒæ ·åœ¨è‡ªå®šä¹‰éªŒè¯æ¶ˆæ¯æ–‡ä»¶ä¸­ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨*å­—ç¬¦ï¼Œä»è€Œä¸ºåŸºäºæ•°ç»„çš„å­—æ®µä½¿ç”¨å•ä¸ªéªŒè¯æ¶ˆæ¯å˜çš„è½»è€Œæ˜“ä¸¾ï¼š 'custom' =\u003e [ 'person.*.email' =\u003e [ 'unique' =\u003e 'Each person must have a unique email address', ] ], ","date":"2024å¹´06æœˆ17æ—¥","objectID":"/2024/06/laravel11%E9%AA%8C%E8%AF%81/:9:1","tags":["PHP","Laravel"],"title":"Laravel 11.x éªŒè¯","uri":"/2024/06/laravel11%E9%AA%8C%E8%AF%81/"},{"categories":["PHP","Laravel"],"content":"è®¿é—®åµŒå¥—æ•°ç»„æ•°æ® æœ‰æ—¶ï¼Œåœ¨ä½å±æ€§åˆ†é…éªŒè¯è§„åˆ™æ—¶ï¼Œå¯èƒ½éœ€è¦è®¿é—®ç»™å®šåµŒå¥—æ•°ç»„å…ƒç´ çš„å€¼ï¼Œå¯ä»¥ä½¿ç”¨Rule::forEachæ–¹æ³•å®Œæˆæ­¤æ“ä½œã€‚ forEachæ–¹æ³•æ¥å—ä¸€ä¸ªé—­åŒ…ï¼Œè¯¥é—­åŒ…å°†åœ¨éªŒè¯ä¸­ä¸ºarrayå±æ€§çš„æ¯æ¬¡è¿­ä»£è°ƒç”¨ï¼Œå¹¶å°†æ¥æ”¶è¯¥å±æ€§çš„å€¼å’Œæ˜¾å¼çš„ã€å®Œå…¨æ‰©å±•çš„å±æ€§åç§°ã€‚é—­åŒ…åº”è¿”å›ä¸€ä¸ªè§„åˆ™æ•°ç»„ä»¥åˆ†é…ç»™æ•°ç»„å…ƒç´ ï¼š use App\\Rules\\HasPermission; use Illuminate\\Support\\Facades\\Validator; use Illuminate\\Validation\\Rule; $validator = Validator::make($request-\u003eall(), [ 'companies.*.id' =\u003e Rule::forEach(function (string|null $value, string $attribute) { return [ Rule::exists(Company::class, 'id'), new HasPermission('manage-company', $value), ]; }), ]); ","date":"2024å¹´06æœˆ17æ—¥","objectID":"/2024/06/laravel11%E9%AA%8C%E8%AF%81/:9:2","tags":["PHP","Laravel"],"title":"Laravel 11.x éªŒè¯","uri":"/2024/06/laravel11%E9%AA%8C%E8%AF%81/"},{"categories":["PHP","Laravel"],"content":"é”™è¯¯æ¶ˆæ¯ç´¢å¼•å’Œä½ç½® éªŒè¯æ•°ç»„æ—¶ï¼Œæ˜¾ç¤ºé”™è¯¯æ¶ˆæ¯ä¸­å¼•ç”¨éªŒè¯å¤±è´¥çš„ç‰¹å®šé¡¹ç›®çš„ç´¢å¼•æˆ–ä½ç½®ï¼Œå¯ä»¥åœ¨è‡ªå®šä¹‰éªŒè¯æ¶ˆæ¯ä¸­åŒ…å«:indexï¼ˆä»0å¼€å§‹ï¼‰å’Œ:positionï¼ˆä»1å¼€å§‹ï¼‰å ä½ç¬¦ï¼š use Illuminate\\Support\\Facades\\Validator; $input = [ 'photos' =\u003e [ [ 'name' =\u003e 'BeachVacation.jpg', 'description' =\u003e 'A photo of my beach vacation!', ], [ 'name' =\u003e 'GrandCanyon.jpg', 'description' =\u003e '', ], ], ]; Validator::validate($input, [ 'photos.*.description' =\u003e 'required', ], [ 'photos.*.description.required' =\u003e 'Please describe photo #:position.', ]); å¦‚æœæœ‰éœ€è¦ï¼Œå¯ä»¥é€šè¿‡second-indexã€second-positionã€third-indexã€third-positionç­‰æ–¹å¼å¼•ç”¨åµŒå¥—æ›´æ·±çš„ç´¢å¼•å’Œä½ç½®ï¼š 'photos.*.attributes.*.string' =\u003e 'Invalid attribute for photo #:second-position.', ","date":"2024å¹´06æœˆ17æ—¥","objectID":"/2024/06/laravel11%E9%AA%8C%E8%AF%81/:9:3","tags":["PHP","Laravel"],"title":"Laravel 11.x éªŒè¯","uri":"/2024/06/laravel11%E9%AA%8C%E8%AF%81/"},{"categories":["PHP","Laravel"],"content":"éªŒè¯æ–‡ä»¶ Laravelæä¾›äº†ä¸€ä¸ªFileéªŒè¯è§„åˆ™æ„å»ºå™¨ï¼š use Illuminate\\Support\\Facades\\Validator; use Illuminate\\Validation\\Rules\\File; Validator::validate($input, [ 'attachment' =\u003e [ 'required', File::types(['mp3', 'wav']) -\u003emin(1024) -\u003emax(12 * 1024), ], ]); ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨Fileè§„åˆ™çš„imageæ„é€ å‡½æ•°æ–¹æ³•æ¥æŒ‡å®šä¸Šä¼ çš„æ–‡ä»¶åº”ä¸ºå›¾åƒ use Illuminate\\Support\\Facades\\Validator; use Illuminate\\Validation\\Rule; use Illuminate\\Validation\\Rules\\File; Validator::validate($input, [ 'photo' =\u003e [ 'required', File::image() -\u003emin(1024) -\u003emax(12 * 1024) -\u003edimensions(Rule::dimensions()-\u003emaxWidth(1000)-\u003emaxHeight(500)), ], ]); Fileæ–‡ä»¶å¤§å°æ”¯æŒæŒ‡å®šä¸ºå­—ç¬¦ä¸²ï¼Œåç¼€è¡¨ç¤ºæ–‡ä»¶å¤§å°çš„å•ä½ã€‚ä»…æ”¯æŒkbã€mbã€gbå’Œtbåç¼€ï¼š File::image() -\u003emin('1kb') -\u003emax('10mb') ","date":"2024å¹´06æœˆ17æ—¥","objectID":"/2024/06/laravel11%E9%AA%8C%E8%AF%81/:10:0","tags":["PHP","Laravel"],"title":"Laravel 11.x éªŒè¯","uri":"/2024/06/laravel11%E9%AA%8C%E8%AF%81/"},{"categories":["PHP","Laravel"],"content":"éªŒè¯å¯†ç  ä¸ºäº†ç¡®ä¿å¯†ç å…·æœ‰è¶³å¤Ÿçš„å¤æ‚ç¨‹åº¦ï¼Œå¯ä»¥ä½¿ç”¨Passwordè§„åˆ™å¯¹è±¡ï¼š use Illuminate\\Support\\Facades\\Validator; use Illuminate\\Validation\\Rules\\Password; $validator = Validator::make($request-\u003eall(), [ 'password' =\u003e ['required', 'confirmed', Password::min(8)], ]); Passwordè§„åˆ™å¯¹è±¡å…è®¸è‡ªå®šä¹‰åº”ç”¨ç¨‹åºçš„å¯†ç å¤æ‚æ€§è¦æ±‚ï¼Œä¾‹å¦‚æŒ‡å®šå¯†ç è‡³å°‘éœ€è¦ä¸€ä¸ªå­—æ¯ã€æ•°å­—ã€ç¬¦å·æˆ–æ··åˆå¤§å°å†™çš„å­—ç¬¦ï¼š // éœ€è¦è‡³å°‘ 8 ä¸ªå­—ç¬¦... Password::min(8) // éœ€è¦è‡³å°‘ä¸€ä¸ªå­—æ¯... Password::min(8)-\u003eletters() // éœ€è¦è‡³å°‘ä¸€ä¸ªå¤§å†™å­—æ¯å’Œä¸€ä¸ªå°å†™å­—æ¯... Password::min(8)-\u003emixedCase() // éœ€è¦è‡³å°‘ä¸€ä¸ªæ•°å­—... Password::min(8)-\u003enumbers() // éœ€è¦è‡³å°‘ä¸€ä¸ªç¬¦å·... Password::min(8)-\u003esymbols() è¿˜å¯ä»¥ä½¿ç”¨uncompromisedæ–¹æ³•ç¡®ä¿å¯†ç æœªåœ¨å…¬å…±å¯†ç æ•°æ®æ³„éœ²ä¸­æ³„éœ²ï¼š Password::min(8)-\u003euncompromised() ä½¿ç”¨ uncompromised æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°è‡ªå®šä¹‰æ­¤é˜ˆå€¼ï¼š // ç¡®ä¿å¯†ç åœ¨åŒä¸€æ¬¡æ•°æ®æ³„éœ²ä¸­å‡ºç°çš„æ¬¡æ•°å°‘äº3æ¬¡... Password::min(8)-\u003euncompromised(3); æ”¯æŒé“¾æ¥çš„å†™æ³•ï¼š Password::min(8) -\u003eletters() -\u003emixedCase() -\u003enumbers() -\u003esymbols() -\u003euncompromised() ","date":"2024å¹´06æœˆ17æ—¥","objectID":"/2024/06/laravel11%E9%AA%8C%E8%AF%81/:11:0","tags":["PHP","Laravel"],"title":"Laravel 11.x éªŒè¯","uri":"/2024/06/laravel11%E9%AA%8C%E8%AF%81/"},{"categories":["PHP","Laravel"],"content":"å®šä¹‰é»˜è®¤å¯†ç è§„åˆ™ ä½¿ç”¨Password::defaultsæ–¹æ³•è½»æ¾æŒ‡å®šé»˜è®¤å¯†ç éªŒè¯è§„åˆ™ï¼Œæ”¹è§„åˆ™æ¥å—é—­åŒ…ã€‚ä¸ºdefaultsæ–¹æ³•æä¾›çš„é—­åŒ…åº”è¿”å›Passwordè§„åˆ™çš„é»˜è®¤é…ç½®ã€‚é€šå¸¸ï¼Œåº”åœ¨åº”ç”¨ç¨‹åºçš„æŸä¸ªæœåŠ¡æä¾›å•†çš„bootæ–¹æ³•ä¸­è°ƒç”¨defaultsè§„åˆ™ï¼š use Illuminate\\Validation\\Rules\\Password; /** * Bootstrap any application services. */ public function boot(): void { Password::defaults(function () { $rule = Password::min(8); return $this-\u003eapp-\u003eisProduction() ? $rule-\u003emixedCase()-\u003euncompromised() : $rule; }); } å¦‚æœå°†defaultè§„åˆ™åº”ç”¨äºæ­£åœ¨éªŒè¯çš„ç‰¹å®šå¯†ç æ—¶ï¼Œå¯ä»¥è°ƒç”¨ä¸å¸¦å‚æ•°çš„defaultsæ–¹æ³•ï¼š 'password' =\u003e ['required', Password::defaults()], ä¹Ÿå¯ä»¥ä½¿ç”¨rulesæ–¹æ³•å®Œæˆå°†å…¶ä»–éªŒè¯è§„åˆ™é™„åŠ åˆ°é»˜è®¤å¯†ç éªŒè¯è§„åˆ™ä¸­ï¼š use App\\Rules\\ZxcvbnRule; Password::defaults(function () { $rule = Password::min(8)-\u003erules([new ZxcvbnRule]); // ... }); ","date":"2024å¹´06æœˆ17æ—¥","objectID":"/2024/06/laravel11%E9%AA%8C%E8%AF%81/:11:1","tags":["PHP","Laravel"],"title":"Laravel 11.x éªŒè¯","uri":"/2024/06/laravel11%E9%AA%8C%E8%AF%81/"},{"categories":["PHP","Laravel"],"content":"è‡ªå®šä¹‰éªŒè¯è§„åˆ™ ","date":"2024å¹´06æœˆ17æ—¥","objectID":"/2024/06/laravel11%E9%AA%8C%E8%AF%81/:12:0","tags":["PHP","Laravel"],"title":"Laravel 11.x éªŒè¯","uri":"/2024/06/laravel11%E9%AA%8C%E8%AF%81/"},{"categories":["PHP","Laravel"],"content":"ä½¿ç”¨è§„åˆ™å¯¹è±¡ 1ã€åˆ›å»ºè§„åˆ™ php artisan make:rule Uppercase 2ã€å®šä¹‰å…¶è¡Œä¸º è§„åˆ™å¯¹è±¡åŒ…å«ä¸€ä¸ªæ–¹æ³•ï¼švalidateã€‚æ­¤æ–¹æ³•æ¥æ”¶å±æ€§åç§°ã€å…¶å€¼å’Œåº”åœ¨å¤±è´¥æ—¶è°ƒç”¨çš„å›è°ƒï¼Œå¹¶æ˜¾ç¤ºéªŒè¯é”™è¯¯æ¶ˆæ¯ã€‚ \u003c?php namespace App\\Rules; use Closure; use Illuminate\\Contracts\\Validation\\ValidationRule; class Uppercase implements ValidationRule { /** * Run the validation rule. */ public function validate(string $attribute, mixed $value, Closure $fail): void { if (strtoupper($value) !== $value) { $fail('The :attribute must be uppercase.'); } } } 3ã€é€šè¿‡å°†ruleå¯¹è±¡çš„å®ä¾‹ä¸å…¶ä»–éªŒè¯è§„åˆ™ä¸€èµ·ä¼ é€’ç»™éªŒè¯å™¨ï¼Œå°†å…¶é™„åŠ åˆ°éªŒè¯å™¨ï¼š use App\\Rules\\Uppercase; $request-\u003evalidate([ 'name' =\u003e ['required', 'string', new Uppercase], ]); ç¿»è¯‘éªŒè¯æ¶ˆæ¯ if (strtoupper($value) !== $value) { $fail('validation.uppercase')-\u003etranslate(); } ä¹Ÿå¯ä»¥æä¾›å ä½ç¬¦æ›¿æ¢å’Œé¦–é€‰è¯­è¨€ä½œä¸ºtranslateæ–¹æ³•çš„ç¬¬ä¸€ä¸ªå’Œç¬¬äºŒä¸ªå‚æ•°ï¼š $fail('validation.location')-\u003etranslate([ 'value' =\u003e $this-\u003evalue, ], 'fr') è®¿é—®å…¶ä»–æ•°æ® å¦‚æœå®šä¹‰çš„è‡ªå®šä¹‰éªŒè¯è§„åˆ™ç±»éœ€è¦è®¿é—®æ‰€æœ‰å…¶ä»–æ­£åœ¨éªŒè¯çš„æ•°æ®ï¼Œåˆ™å¯ä»¥å®ç°Illuminate\\Contracts\\Validation\\DataAwareRuleæ¥å£ï¼š \u003c?php namespace App\\Rules; use Illuminate\\Contracts\\Validation\\DataAwareRule; use Illuminate\\Contracts\\Validation\\ValidationRule; class Uppercase implements DataAwareRule, ValidationRule { /** * All of the data under validation. * * @var array\u003cstring, mixed\u003e */ protected $data = []; // ... /** * Set the data under validation. * * @param array\u003cstring, mixed\u003e $data */ public function setData(array $data): static { $this-\u003edata = $data; return $this; } } å¦‚æœéªŒè¯è§„åˆ™éœ€è¦è®¿é—®æ‰§è¡ŒéªŒè¯è€…å®ä¾‹ï¼Œåˆ™å¯ä»¥å®ç°ValidatorAwareRuleæ¥å£ï¼š \u003c?php namespace App\\Rules; use Illuminate\\Contracts\\Validation\\ValidationRule; use Illuminate\\Contracts\\Validation\\ValidatorAwareRule; use Illuminate\\Validation\\Validator; class Uppercase implements ValidationRule, ValidatorAwareRule { /** * The validator instance. * * @var \\Illuminate\\Validation\\Validator */ protected $validator; // ... /** * Set the current validator. */ public function setValidator(Validator $validator): static { $this-\u003evalidator = $validator; return $this; } } ","date":"2024å¹´06æœˆ17æ—¥","objectID":"/2024/06/laravel11%E9%AA%8C%E8%AF%81/:12:1","tags":["PHP","Laravel"],"title":"Laravel 11.x éªŒè¯","uri":"/2024/06/laravel11%E9%AA%8C%E8%AF%81/"},{"categories":["PHP","Laravel"],"content":"ä½¿ç”¨é—­åŒ… å¦‚æœåœ¨æ•´ä¸ªåº”ç”¨ç¨‹åºä¸­åªéœ€è¦ä¸€æ¬¡è‡ªå®šä¹‰çš„åŠŸèƒ½ï¼Œåˆ™å¯ä»¥ä½¿ç”¨é—­åŒ…è€Œä¸æ˜¯ruleå¯¹è±¡ã€‚ é—­åŒ…æ¥æ”¶å±æ€§çš„åç§°ã€å±æ€§çš„å€¼ä»¥åŠéªŒè¯å¤±è´¥æ—¶åº”è°ƒç”¨çš„$failå›è°ƒï¼š use Illuminate\\Support\\Facades\\Validator; use Closure; $validator = Validator::make($request-\u003eall(), [ 'title' =\u003e [ 'required', 'max:255', function (string $attribute, mixed $value, Closure $fail) { if ($value === 'foo') { $fail(\"The {$attribute} is invalid.\"); } }, ], ]); ","date":"2024å¹´06æœˆ17æ—¥","objectID":"/2024/06/laravel11%E9%AA%8C%E8%AF%81/:12:2","tags":["PHP","Laravel"],"title":"Laravel 11.x éªŒè¯","uri":"/2024/06/laravel11%E9%AA%8C%E8%AF%81/"},{"categories":["PHP","Laravel"],"content":"éšå¼è§„åˆ™ é»˜è®¤æƒ…å†µä¸‹ï¼Œå½“æ­£åœ¨éªŒè¯çš„å±æ€§ä¸å­˜åœ¨æˆ–åŒ…å«ç©ºå­—ç¬¦ä¸²æ—¶ï¼Œä¸ä¼šè¿è¡Œå¸¸è§„éªŒè¯è§„åˆ™ï¼ˆåŒ…æ‹¬è‡ªå®šä¹‰è§„åˆ™ï¼‰ã€‚ ä¾‹å¦‚ï¼Œuniqueè§„åˆ™ä¸ä¼šæ­£å¯¹ç©ºå­—ç¬¦ä¸²è¿è¡Œï¼š use Illuminate\\Support\\Facades\\Validator; $rules = ['name' =\u003e 'unique:users,name']; $input = ['name' =\u003e '']; Validator::make($input, $rules)-\u003epasses(); // true è¦ä½¿è‡ªå®šä¹‰è§„åˆ™å³ä½¿åœ¨å±æ€§ä¸ºç©ºæ—¶ä¹Ÿè¿è¡Œï¼Œæ”¹è§„åˆ™å¿…é¡»æš—ç¤ºè¯¥å±æ€§æ˜¯å¿…éœ€çš„ã€‚è¦å¿«é€Ÿç”Ÿæˆæ–°çš„éšå¼è§„åˆ™å¯¹è±¡ï¼Œå¯ä»¥ä½¿ç”¨å¸¦æœ‰--implicité€‰é¡¹çš„make:rule Artisanå‘½ä»¤ï¼š php artisan make:rule Uppercase --implicit ","date":"2024å¹´06æœˆ17æ—¥","objectID":"/2024/06/laravel11%E9%AA%8C%E8%AF%81/:12:3","tags":["PHP","Laravel"],"title":"Laravel 11.x éªŒè¯","uri":"/2024/06/laravel11%E9%AA%8C%E8%AF%81/"},{"categories":["PHP","Laravel"],"content":" åŸæ–‡ ","date":"2024å¹´06æœˆ16æ—¥","objectID":"/2024/06/laravel11%E4%BC%9A%E8%AF%9D/:0:0","tags":["PHP","Laravel"],"title":"Laravle 11.x ä¼šè¯","uri":"/2024/06/laravel11%E4%BC%9A%E8%AF%9D/"},{"categories":["PHP","Laravel"],"content":"ä»‹ç» ç”±äº HTTP é©±åŠ¨çš„åº”ç”¨ç¨‹åºæ˜¯æ— çŠ¶æ€çš„ï¼Œå› æ­¤ä¼šè¯æä¾›äº†ä¸€ç§è·¨å¤šä¸ªè¯·æ±‚å­˜å‚¨æœ‰å…³ç”¨æˆ·çš„ä¿¡æ¯çš„æ–¹æ³•ã€‚ è¯¥ç”¨æˆ·ä¿¡æ¯é€šå¸¸æ”¾ç½®åœ¨å¯ä»åç»­è¯·æ±‚è®¿é—®çš„æŒä¹…æ€§å­˜å‚¨/åç«¯ä¸­ã€‚ ","date":"2024å¹´06æœˆ16æ—¥","objectID":"/2024/06/laravel11%E4%BC%9A%E8%AF%9D/:1:0","tags":["PHP","Laravel"],"title":"Laravle 11.x ä¼šè¯","uri":"/2024/06/laravel11%E4%BC%9A%E8%AF%9D/"},{"categories":["PHP","Laravel"],"content":"é…ç½® åº”ç”¨ç¨‹åºçš„ä¼šè¯é…ç½®æ–‡ä»¶å­˜å‚¨åœ¨config/session.phpã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼ŒLaravelé…ç½®ä½¿ç”¨databaseä¼šè¯é©±åŠ¨ç¨‹åºã€‚ ä¼šè¯driveré…ç½®é€‰é¡¹å®šä¹‰æ¯ä¸ªè¯·æ±‚çš„ä¼šè¯æ•°æ®çš„å­˜å‚¨ä½ç½®ã€‚ LaravelåŒ…æ‹¬å¤šç§é©±åŠ¨ç¨‹åºï¼š fileï¼šä¼šè¯å­˜å‚¨åœ¨storage/framework/sessions cookieï¼šä¼šè¯å­˜å‚¨åœ¨å®‰å…¨ã€åŠ å¯†çš„Cookieä¸­ databaseï¼šä¼šè¯å­˜å‚¨åœ¨å…³ç³»å‹æ•°æ®åº“ä¸­ memcached/Redisï¼šä¼šè¯å­˜å‚¨åœ¨åŸºäºç¼“å­˜çš„å¿«é€Ÿå­˜å‚¨ä¹‹ä¸€ dynamodbï¼šä¼šè¯å­˜å‚¨åœ¨AWS DynamoDBä¸­ arrayï¼šä¼šè¯å­˜å‚¨åœ¨PHPæ•°æ®ä¸­ï¼Œä¸ä¼šè¢«æŒä¹…åŒ– ","date":"2024å¹´06æœˆ16æ—¥","objectID":"/2024/06/laravel11%E4%BC%9A%E8%AF%9D/:1:1","tags":["PHP","Laravel"],"title":"Laravle 11.x ä¼šè¯","uri":"/2024/06/laravel11%E4%BC%9A%E8%AF%9D/"},{"categories":["PHP","Laravel"],"content":"é©±åŠ¨ç¨‹åºå…ˆå†³æ¡ä»¶ Database éœ€è¦ç¡®ä¿æœ‰ä¸€ä¸ªæ•°æ®åº“è¡¨æ¥åŒ…å«ä¼šè¯æ•°æ®ã€‚ é€šå¸¸ï¼Œè¿™åŒ…å«åœ¨ Laravel çš„é»˜è®¤ 0001_01_01_000000_create_users_table.php æ•°æ®åº“è¿ç§»ä¸­; ä½†æ˜¯ï¼Œå¦‚æœæ²¡æœ‰ sessions è¡¨ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ make:session-table Artisan å‘½ä»¤ç”Ÿæˆæ­¤è¿ç§»ï¼š php artisan make:session-table php artisan migrate Redis éœ€è¦é€šè¿‡ PECL å®‰è£… PhpRedis PHP æ‰©å±•æˆ–é€šè¿‡ Composer å®‰è£… predis/predis è½¯ä»¶åŒ… ï¼ˆ~1.0ï¼‰ã€‚ ","date":"2024å¹´06æœˆ16æ—¥","objectID":"/2024/06/laravel11%E4%BC%9A%E8%AF%9D/:1:2","tags":["PHP","Laravel"],"title":"Laravle 11.x ä¼šè¯","uri":"/2024/06/laravel11%E4%BC%9A%E8%AF%9D/"},{"categories":["PHP","Laravel"],"content":"ä¼šè¯äº¤äº’ ","date":"2024å¹´06æœˆ16æ—¥","objectID":"/2024/06/laravel11%E4%BC%9A%E8%AF%9D/:2:0","tags":["PHP","Laravel"],"title":"Laravle 11.x ä¼šè¯","uri":"/2024/06/laravel11%E4%BC%9A%E8%AF%9D/"},{"categories":["PHP","Laravel"],"content":"æ£€ç´¢æ•°æ® åœ¨ Laravel ä¸­å¤„ç†ä¼šè¯æ•°æ®æœ‰ä¸¤ç§ä¸»è¦æ–¹å¼ï¼šå…¨å±€ session å¸®åŠ©ç¨‹åºå’Œé€šè¿‡ Request å®ä¾‹ã€‚ é€šè¿‡ Request å®ä¾‹è®¿é—®ä¼šè¯ï¼Œè¯¥å®ä¾‹å¯ä»¥åœ¨è·¯ç”±é—­åŒ…æˆ–æ§åˆ¶å™¨æ–¹æ³•ä¸Šè¿›è¡Œç±»å‹æç¤ºã€‚ \u003c?php namespace App\\Http\\Controllers; use Illuminate\\Http\\Request; use Illuminate\\View\\View; class UserController extends Controller { /** * Show the profile for the given user. */ public function show(Request $request, string $id): View { $value = $request-\u003esession()-\u003eget('key'); // ... $user = $this-\u003eusers-\u003efind($id); return view('user.profile', ['user' =\u003e $user]); } } ä»ä¼šè¯ä¸­æ£€ç´¢é¡¹æ—¶ï¼Œè¿˜å¯ä»¥å°†é»˜è®¤å€¼ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ä¼ é€’ get ç»™æ–¹æ³•ã€‚ å¦‚æœä¼šè¯ä¸­ä¸å­˜åœ¨æŒ‡å®šçš„keyï¼Œåˆ™å°†è¿”å›æ­¤é»˜è®¤å€¼ã€‚ å¦‚æœå°†é—­åŒ…ä½œä¸ºé»˜è®¤å€¼ä¼ é€’ç»™æ–¹æ³•ï¼Œ get å¹¶ä¸”è¯·æ±‚çš„é”®ä¸å­˜åœ¨ï¼Œåˆ™å°†æ‰§è¡Œé—­åŒ…å¹¶è¿”å›å…¶ç»“æœï¼š $value = $request-\u003esession()-\u003eget('key', 'default'); $value = $request-\u003esession()-\u003eget('key', function () { return 'default'; }); å…¨å±€ä¼šè¯åŠ©æ‰‹ è¿˜å¯ä»¥ä½¿ç”¨å…¨å±€ session PHP å‡½æ•°åœ¨ä¼šè¯ä¸­æ£€ç´¢å’Œå­˜å‚¨æ•°æ®ã€‚ å½“ä½¿ç”¨å•ä¸ªå­—ç¬¦ä¸²å‚æ•°è°ƒç”¨ session å¸®åŠ©ç¨‹åºæ—¶ï¼Œå®ƒå°†è¿”å›è¯¥ä¼šè¯é”®çš„å€¼ã€‚ å½“ä½¿ç”¨é”®/å€¼å¯¹æ•°ç»„è°ƒç”¨å¸®åŠ©ç¨‹åºæ—¶ï¼Œè¿™äº›å€¼å°†å­˜å‚¨åœ¨ä¼šè¯ä¸­ï¼š Route::get('/home', function () { // Retrieve a piece of data from the session... $value = session('key'); // Specifying a default value... $value = session('key', 'default'); // Store a piece of data in the session... session(['key' =\u003e 'value']); }); æ£€ç´¢æ‰€æœ‰ä¼šè¯æ•°æ® allæ–¹æ³•æ£€ç´¢ä¼šè¯ä¸­çš„æ‰€æœ‰æ•°æ® $data = $request-\u003esession()-\u003eall(); æ£€ç´¢ä¼šè¯æ•°æ®çš„ä¸€éƒ¨åˆ† only å’Œ except æ–¹æ³•å¯ç”¨äºæ£€ç´¢ä¼šè¯æ•°æ®çš„å­é›† $data = $request-\u003esession()-\u003eonly(['username', 'email']); $data = $request-\u003esession()-\u003eexcept(['username', 'email']); ç¡®å®šä¼šè¯ä¸­æ˜¯å¦å­˜åœ¨é¡¹ç›® hasæ–¹æ³•å¯ä»¥ç¡®å®šä¼šè¯ä¸­æ˜¯å¦å­˜åœ¨æŸä¸ªé¡¹ç›®ã€‚ å¦‚æœé¡¹ç›®å­˜åœ¨å¹¶ä¸”ä¸æ˜¯nullï¼Œåˆ™è¿”å›true if ($request-\u003esession()-\u003ehas('users')) { // ... } è¦ç¡®å®šä¼šè¯ä¸­æ˜¯å¦å­˜åœ¨æŸä¸ªé¡¹ç›®ï¼Œå³ä½¿å…¶å€¼ä¸º null ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ä»¥ä¸‹ exists æ–¹æ³•ï¼š if ($request-\u003esession()-\u003eexists('users')) { // ... } è¦ç¡®å®šä¼šè¯ä¸­æ˜¯å¦ä¸å­˜åœ¨æŸä¸ªé¡¹ç›®ï¼Œå¯ä»¥ä½¿ç”¨è¯¥ missing æ–¹æ³•ã€‚ å¦‚æœé¡¹ä¸å­˜åœ¨ï¼Œåˆ™è¯¥ missing æ–¹æ³•è¿”å› true ï¼š if ($request-\u003esession()-\u003emissing('users')) { // ... } ","date":"2024å¹´06æœˆ16æ—¥","objectID":"/2024/06/laravel11%E4%BC%9A%E8%AF%9D/:2:1","tags":["PHP","Laravel"],"title":"Laravle 11.x ä¼šè¯","uri":"/2024/06/laravel11%E4%BC%9A%E8%AF%9D/"},{"categories":["PHP","Laravel"],"content":"å­˜å‚¨æ•°æ® putæ–¹æ³•æˆ–è€…å…¨å±€sessionå¸®åŠ©ç¨‹åºéƒ½å¯ä»¥å°†æ•°æ®å­˜å‚¨åœ¨ä¼šè¯ä¸­ // Via a request instance... $request-\u003esession()-\u003eput('key', 'value'); // Via the global \"session\" helper... session(['key' =\u003e 'value']); æ¨é€åˆ°æ•°ç»„ä¼šè¯å€¼ pushæ–¹æ³•å¯ç”¨äºå°†æ–°å€¼æ¨é€åˆ°ä½œä¸ºæ•°ç»„çš„ä¼šè¯å€¼ä¸Š $request-\u003esession()-\u003epush('user.teams', 'developers'); æ£€ç´¢å’Œåˆ é™¤é¡¹ç›® pullæ–¹æ³•å°†åœ¨å•ä¸ªè¯­å¥ä¸­ä»ä¼šè¯ä¸­æ£€ç´¢å’Œåˆ é™¤é¡¹ç›® $value = $request-\u003esession()-\u003epull('key', 'default'); é€’å¢å’Œé€’å‡ä¼šè¯å€¼ ä½¿ç”¨ increment å’Œ decrement æ–¹æ³•å¯ä»¥å°†ä¼šè¯æ•°æ®ä¸­åŒ…å«çš„æ•´æ•°è¿›è¡Œè‡ªå¢æˆ–é€’å‡ $request-\u003esession()-\u003eincrement('count'); $request-\u003esession()-\u003eincrement('count', $incrementBy = 2); $request-\u003esession()-\u003edecrement('count'); $request-\u003esession()-\u003edecrement('count', $decrementBy = 2); ","date":"2024å¹´06æœˆ16æ—¥","objectID":"/2024/06/laravel11%E4%BC%9A%E8%AF%9D/:2:2","tags":["PHP","Laravel"],"title":"Laravle 11.x ä¼šè¯","uri":"/2024/06/laravel11%E4%BC%9A%E8%AF%9D/"},{"categories":["PHP","Laravel"],"content":"é—ªå­˜æ•°æ® flashæ–¹æ³•å¯ä»¥åœ¨ä¼šè¯ä¸­å­˜å‚¨é¡¹ç›®ä»¥å¤‡ä¸‹ä¸€ä¸ªè¯·æ±‚ä½¿ç”¨ã€‚ ä½¿ç”¨æ­¤æ–¹æ³•å­˜å‚¨åœ¨ä¼šè¯ä¸­çš„æ•°æ®å°†ç«‹å³å¯ç”¨ï¼Œå¹¶åœ¨éšåçš„ HTTP è¯·æ±‚æœŸé—´å¯ç”¨ã€‚åç»­ HTTP è¯·æ±‚åï¼Œçƒ§å½•çš„æ•°æ®å°†è¢«åˆ é™¤ã€‚ é—ªå­˜æ•°æ®ä¸»è¦ç”¨äºçŸ­æœŸçŠ¶æ€æ¶ˆæ¯ã€‚ $request-\u003esession()-\u003eflash('status', 'Task was successful!'); reflashæ–¹æ³•ä¸ºå¤šä¸ªè¯·æ±‚ä¿ç•™é—ªå­˜æ•°æ®ã€‚ è¯¥æ–¹æ³•ä¿ç•™å…¶ä»–è¯·æ±‚çš„æ‰€æœ‰é—ªå­˜æ•°æ®ã€‚ $request-\u003esession()-\u003ereflash(); å¦‚æœéœ€è¦ä¿ç•™ç‰¹å®šçš„é—ªå­˜æ•°æ®ï¼Œåˆ™å¯ä»¥ä½¿ç”¨keepæ–¹æ³•ã€‚ $request-\u003esession()-\u003ekeep(['username', 'email']); è¦ä»…ä¿ç•™å½“å‰çš„é—ªå­˜æ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨nowæ–¹æ³•ã€‚ $request-\u003esession()-\u003enow('status', 'Task was successful!'); ","date":"2024å¹´06æœˆ16æ—¥","objectID":"/2024/06/laravel11%E4%BC%9A%E8%AF%9D/:2:3","tags":["PHP","Laravel"],"title":"Laravle 11.x ä¼šè¯","uri":"/2024/06/laravel11%E4%BC%9A%E8%AF%9D/"},{"categories":["PHP","Laravel"],"content":"åˆ é™¤æ•°æ® forgetæ–¹æ³•å°†ä»ä¼šè¯ä¸­åˆ é™¤ä¸€æ®µæ•°æ®ã€‚ å¦‚æœè¦åˆ é™¤æ‰€æœ‰æ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨flushæ–¹æ³• // Forget a single key... $request-\u003esession()-\u003eforget('name'); // Forget multiple keys... $request-\u003esession()-\u003eforget(['name', 'status']); $request-\u003esession()-\u003eflush(); ","date":"2024å¹´06æœˆ16æ—¥","objectID":"/2024/06/laravel11%E4%BC%9A%E8%AF%9D/:2:4","tags":["PHP","Laravel"],"title":"Laravle 11.x ä¼šè¯","uri":"/2024/06/laravel11%E4%BC%9A%E8%AF%9D/"},{"categories":["PHP","Laravel"],"content":"é‡æ–°ç”Ÿæˆä¼šè¯ID é‡æ–°ç”Ÿæˆä¼šè¯ ID é€šå¸¸æ˜¯ä¸ºäº†é˜²æ­¢æ¶æ„ç”¨æˆ·åˆ©ç”¨å¯¹åº”ç”¨ç¨‹åºçš„ä¼šè¯å›ºå®šæ”»å‡»ã€‚ æ‰‹åŠ¨é‡æ–°ç”Ÿæˆä¼šè¯IDï¼Œå¯ä»¥ä½¿ç”¨regenerateæ–¹æ³• $request-\u003esession()-\u003eregenerate(); invalidateæ–¹æ³•å¯ä»¥åœ¨å•ä¸ªè¯­å¥ä¸­é‡æ–°ç”Ÿæˆä¼šè¯IDå¹¶ä»ä¼šè¯ä¸­åˆ é™¤æ‰€æœ‰æ•°æ® $request-\u003esession()-\u003einvalidate(); ","date":"2024å¹´06æœˆ16æ—¥","objectID":"/2024/06/laravel11%E4%BC%9A%E8%AF%9D/:2:5","tags":["PHP","Laravel"],"title":"Laravle 11.x ä¼šè¯","uri":"/2024/06/laravel11%E4%BC%9A%E8%AF%9D/"},{"categories":["PHP","Laravel"],"content":"ä¼šè¯é˜»æ­¢ è‹¥è¦åˆ©ç”¨ä¼šè¯é˜»æ­¢ï¼Œåº”ç”¨ç¨‹åºå¿…é¡»ä½¿ç”¨æ”¯æŒåŸå­é”çš„ç¼“å­˜é©±åŠ¨ç¨‹åºã€‚ç›®å‰ï¼Œè¿™äº›ç¼“å­˜é©±åŠ¨ç¨‹åºåŒ…æ‹¬ memcached ã€ dynamodb ã€ redis ã€ database file å’Œ array é©±åŠ¨ç¨‹åºã€‚æ­¤å¤–ï¼Œä¸èƒ½ä½¿ç”¨ cookie ä¼šè¯é©±åŠ¨ç¨‹åºã€‚ Laravelæä¾›å…è®¸é™åˆ¶ç»™å®šä¼šè¯çš„å¹¶å‘è¯·æ±‚çš„åŠŸèƒ½ã€‚åªéœ€å°† block æ–¹æ³•é“¾æ¥åˆ°è·¯ç”±å®šä¹‰ä¸Šå³å¯ã€‚ åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œå¯¹ /profile ç»ˆç«¯èŠ‚ç‚¹çš„ä¼ å…¥è¯·æ±‚å°†è·å–ä¼šè¯é”ã€‚ åœ¨ä¿æŒæ­¤é”æ—¶ï¼Œå¯¹å…±äº«ç›¸åŒä¼šè¯ ID çš„ /profile æˆ– /order ç»ˆç»“ç‚¹çš„ä»»ä½•ä¼ å…¥è¯·æ±‚éƒ½å°†ç­‰å¾…ç¬¬ä¸€ä¸ªè¯·æ±‚å®Œæˆæ‰§è¡Œï¼Œç„¶åå†ç»§ç»­æ‰§è¡Œï¼š Route::post('/profile', function () { // ... })-\u003eblock($lockSeconds = 10, $waitSeconds = 10) Route::post('/order', function () { // ... })-\u003eblock($lockSeconds = 10, $waitSeconds = 10) è¯¥ block æ–¹æ³•æ¥å—ä¸¤ä¸ªå¯é€‰å‚æ•°ã€‚è¯¥ block æ–¹æ³•æ¥å—çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¼šè¯é”å®šåœ¨é‡Šæ”¾ä¹‹å‰åº”ä¿ç•™çš„æœ€å¤§ç§’æ•°ã€‚å½“ç„¶ï¼Œå¦‚æœè¯·æ±‚åœ¨æ­¤æ—¶é—´ä¹‹å‰å®Œæˆæ‰§è¡Œï¼Œåˆ™é”å°†æå‰é‡Šæ”¾ã€‚ è¯¥ block æ–¹æ³•æ¥å—çš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯è¯·æ±‚åœ¨å°è¯•è·å–ä¼šè¯é”æ—¶åº”ç­‰å¾…çš„ç§’æ•°ã€‚å¦‚æœè¯·æ±‚æ— æ³•åœ¨ç»™å®šçš„ç§’æ•°å†…è·å¾—ä¼šè¯é”ï¼Œåˆ™å°†æŠ›å‡º Illuminate\\Contracts\\Cache\\LockTimeoutExceptionå¼‚å¸¸ã€‚ å¦‚æœè¿™ä¸¤ä¸ªå‚æ•°å‡æœªä¼ é€’ï¼Œåˆ™åœ¨å°è¯•è·å–é”æ—¶ï¼Œå°†æœ€å¤šè·å– 10 ç§’ï¼Œè¯·æ±‚æœ€å¤šç­‰å¾… 10 ç§’ï¼š Route::post('/profile', function () { // ... })-\u003eblock() ","date":"2024å¹´06æœˆ16æ—¥","objectID":"/2024/06/laravel11%E4%BC%9A%E8%AF%9D/:3:0","tags":["PHP","Laravel"],"title":"Laravle 11.x ä¼šè¯","uri":"/2024/06/laravel11%E4%BC%9A%E8%AF%9D/"},{"categories":["PHP","Laravel"],"content":"è‡ªå®šä¹‰ä¼šè¯é©±åŠ¨ç¨‹åº ","date":"2024å¹´06æœˆ16æ—¥","objectID":"/2024/06/laravel11%E4%BC%9A%E8%AF%9D/:4:0","tags":["PHP","Laravel"],"title":"Laravle 11.x ä¼šè¯","uri":"/2024/06/laravel11%E4%BC%9A%E8%AF%9D/"},{"categories":["PHP","Laravel"],"content":"å®ç°é©±åŠ¨ç¨‹åº è‡ªå®šä¹‰ä¼šè¯é©±åŠ¨ç¨‹åºåº”å®ç°PHPçš„SessionHandlerInterfaceå†…ç½®æ¥å£ã€‚ \u003c?php namespace App\\Extensions; class MongoSessionHandler implements \\SessionHandlerInterface { public function open($savePath, $sessionName) {} public function close() {} public function read($sessionId) {} public function write($sessionId, $data) {} public function destroy($sessionId) {} public function gc($lifetime) {} } Laravel ä¸é™„å¸¦åŒ…å«æ‰©å±•çš„ç›®å½•ã€‚å¯ä»¥è‡ªç”±åœ°å°†å®ƒä»¬æ”¾ç½®åœ¨ä»»ä½•åœ°æ–¹ã€‚åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œåˆ›å»ºäº†ä¸€ä¸ª Extensions ç›®å½•æ¥å®¹çº³ MongoSessionHandler ã€‚ openï¼šé€šå¸¸ç”¨äºåŸºäºæ–‡ä»¶çš„ä¼šè¯å­˜å‚¨ç³»ç»Ÿã€‚ç”±äº Laravel é™„å¸¦äº† file ä¼šè¯é©±åŠ¨ç¨‹åºï¼Œå› æ­¤å¾ˆå°‘éœ€è¦åœ¨æ­¤æ–¹æ³•ä¸­æ·»åŠ ä»»ä½•å†…å®¹ã€‚å¯ä»¥ç®€å•åœ°å°†æ­¤æ–¹æ³•ç•™ç©ºã€‚ closeï¼šä¸openæ–¹æ³•ä¸€æ ·ï¼Œé€šå¸¸å¯ä»¥å¿½ç•¥ä¸è®¡ readï¼šåº”è¿”å›ä¸ç»™å®š$sessionIdå…³è”çš„ä¼šè¯æ•°æ®çš„å­—ç¬¦ä¸²ç‰ˆæœ¬ã€‚åœ¨é©±åŠ¨ç¨‹åºä¸­æ£€ç´¢æˆ–å­˜å‚¨ä¼šè¯æ•°æ®æ—¶ï¼Œæ— éœ€æ‰§è¡Œä»»ä½•åºåˆ—åŒ–æˆ–å…¶ä»–ç¼–ç ï¼Œå› ä¸ºLaravelå°†ä¸»åŠ¨æ‰§è¡Œåºåˆ—åŒ–ã€‚ writeï¼šåº”å°†ä¸å…³è”çš„ $sessionId ç»™å®š $data å­—ç¬¦ä¸²å†™å…¥æŸäº›æŒä¹…æ€§å­˜å‚¨ç³»ç»Ÿï¼Œä¾‹å¦‚ MongoDB æˆ–é€‰æ‹©çš„å…¶ä»–å­˜å‚¨ç³»ç»Ÿã€‚åŒæ ·ï¼Œä¸åº”è¯¥æ‰§è¡Œä»»ä½•åºåˆ—åŒ– ï¼Œå› ä¸º Laravel å·²ç»å¤„ç†äº†ã€‚ destroyï¼šåº”ä»æŒä¹…æ€§å­˜å‚¨ä¸­åˆ é™¤ä¸ å…³è” $sessionId çš„æ•°æ®ã€‚ gcï¼šåº”é”€æ¯æ‰€æœ‰æ—©äºç»™å®š $lifetime çš„ä¼šè¯æ•°æ®ï¼Œå³ UNIX æ—¶é—´æˆ³ã€‚å¯¹äºåƒ Memcached å’Œ Redis è¿™æ ·çš„è‡ªè¿‡æœŸç³»ç»Ÿï¼Œæ­¤æ–¹æ³•å¯èƒ½ç•™ç©ºã€‚ ","date":"2024å¹´06æœˆ16æ—¥","objectID":"/2024/06/laravel11%E4%BC%9A%E8%AF%9D/:4:1","tags":["PHP","Laravel"],"title":"Laravle 11.x ä¼šè¯","uri":"/2024/06/laravel11%E4%BC%9A%E8%AF%9D/"},{"categories":["PHP","Laravel"],"content":"æ³¨å†Œé©±åŠ¨ç¨‹åº å®ç°é©±åŠ¨ç¨‹åºåï¼Œå³å¯å°†å…¶æ³¨å†Œåˆ° Laravelã€‚ è¦å‘ Laravel çš„ä¼šè¯åç«¯æ·»åŠ å…¶ä»–é©±åŠ¨ç¨‹åºï¼Œå¯ä»¥ä½¿ç”¨ Session Facade æä¾› extend çš„æ–¹æ³•ã€‚ åº”ä»æœåŠ¡æä¾›å•† boot çš„æ–¹æ³•è°ƒç”¨è¯¥ extend æ–¹æ³•ã€‚ å¯ä»¥ä»ç°æœ‰ App\\Providers\\AppServiceProvider æä¾›ç¨‹åºä¸­æ‰§è¡Œæ­¤æ“ä½œï¼Œä¹Ÿå¯ä»¥åˆ›å»ºä¸€ä¸ªå…¨æ–°çš„æä¾›ç¨‹åºï¼š \u003c?php namespace App\\Providers; use App\\Extensions\\MongoSessionHandler; use Illuminate\\Contracts\\Foundation\\Application; use Illuminate\\Support\\Facades\\Session; use Illuminate\\Support\\ServiceProvider; class SessionServiceProvider extends ServiceProvider { /** * Register any application services. */ public function register(): void { // ... } /** * Bootstrap any application services. */ public function boot(): void { Session::extend('mongo', function (Application $app) { // Return an implementation of SessionHandlerInterface... return new MongoSessionHandler; }); } } æ³¨å†Œä¼šè¯é©±åŠ¨ç¨‹åºåï¼Œå¯ä»¥ä½¿ç”¨ SESSION_DRIVER ç¯å¢ƒå˜é‡æˆ–åœ¨åº”ç”¨ç¨‹åºçš„ config/session.php é…ç½®æ–‡ä»¶ä¸­å°† mongo é©±åŠ¨ç¨‹åºæŒ‡å®šä¸ºåº”ç”¨ç¨‹åºçš„ä¼šè¯é©±åŠ¨ç¨‹åºã€‚ ","date":"2024å¹´06æœˆ16æ—¥","objectID":"/2024/06/laravel11%E4%BC%9A%E8%AF%9D/:4:2","tags":["PHP","Laravel"],"title":"Laravle 11.x ä¼šè¯","uri":"/2024/06/laravel11%E4%BC%9A%E8%AF%9D/"},{"categories":["PHP","Laravel"],"content":" åŸæ–‡ ","date":"2024å¹´06æœˆ16æ—¥","objectID":"/2024/06/laravel11%E5%93%8D%E5%BA%94/:0:0","tags":["PHP","Laravel"],"title":"Laravel 11.x å“åº”","uri":"/2024/06/laravel11%E5%93%8D%E5%BA%94/"},{"categories":["PHP","Laravel"],"content":"åˆ›å»ºå“åº” å­—ç¬¦ä¸²å’Œæ•°ç»„ Laravelæ¡†æ¶ä¼šè‡ªåŠ¨å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºå®Œæ•´çš„HTTPç›¸åº”ï¼š Route::get('/', function () { return 'Hello World'; }); ä¼šè‡ªåŠ¨å°†æ•°ç»„è½¬æ¢ä¸ºJSONå“åº”ï¼š Route::get('/', function () { return [1, 2, 3]; }); å“åº”å¯¹è±¡ é€šè¿‡è¿”å›å®Œæ•´Responseå®ä¾‹ï¼Œå¯ä»¥è‡ªå®šä¹‰ç›¸åº”çš„HTTPçŠ¶æ€ç å’Œæ ‡å¤´ã€‚ Responseåº”ç»§æ‰¿è‡ªSymfony\\Component\\HttpFoundation\\Responseç±» Route::get('/home', function () { return response('Hello World', 200) -\u003eheader('Content-Type', 'text/plain'); }); Eloquentæ¨¡å‹å’Œæ§åˆ¶å™¨ å¯ä»¥ç›´æ¥ä»è·¯ç”±å’Œæ§åˆ¶å™¨è¿”å›Eloquent ORMæ¨¡å‹å’Œé›†åˆã€‚ä¼šè‡ªåŠ¨å°†æ¨¡å‹å’Œé›†åˆè½¬æ¢ä¸ºJSONå“åº”ï¼ŒåŒæ—¶éµå¾ªæ¨¡å‹çš„éšè—å±æ€§ï¼š use App\\Models\\User; Route::get('/user/{user}', function (User $user) { return $user; }); ","date":"2024å¹´06æœˆ16æ—¥","objectID":"/2024/06/laravel11%E5%93%8D%E5%BA%94/:1:0","tags":["PHP","Laravel"],"title":"Laravel 11.x å“åº”","uri":"/2024/06/laravel11%E5%93%8D%E5%BA%94/"},{"categories":["PHP","Laravel"],"content":"å°†Headersé™„åŠ åˆ°å“åº” headeræ–¹æ³•ä¸ºå“åº”æ·»åŠ ä¸€ç³»åˆ—æ ‡å¤´ return response($content) -\u003eheader('Content-Type', $type) -\u003eheader('X-Header-One', 'Header Value') -\u003eheader('X-Header-Two', 'Header Value'); withHeadersæ–¹æ³•æŒ‡å®šè¦æ·»åŠ åˆ°å“åº”ä¸­çš„æ ‡å¤´æ•°ç»„ return response($content) -\u003ewithHeaders([ 'Content-Type' =\u003e $type, 'X-Header-One' =\u003e 'Header Value', 'X-Header-Two' =\u003e 'Header Value', ]); ç¼“å­˜æ§åˆ¶ä¸­é—´ä»¶ LaravelåŒ…å«ä¸€ä¸ªcache.headersä¸­é—´ä»¶ï¼Œå¯ç”¨äºå¿«é€Ÿè®¾ç½®ä¸€ç»„è·¯ç”±Cache-Controlçš„æ ‡å¤´ã€‚ æŒ‡ä»¤åº”ä½¿ç”¨ä¸ç›¸åº”ç¼“å­˜æ§åˆ¶æŒ‡ä»¤ç­‰æ•ˆçš„â€œè›‡å½¢å¤§å°å†™â€æ¥æä¾›ï¼Œå¹¶åº”ç”¨åˆ†å·åˆ†éš”ã€‚ å¦‚æœ etag åœ¨æŒ‡ä»¤åˆ—è¡¨ä¸­æŒ‡å®šï¼Œåˆ™å“åº”å†…å®¹çš„ MD5 å“ˆå¸Œå€¼å°†è‡ªåŠ¨è®¾ç½®ä¸º ETag æ ‡è¯†ç¬¦ï¼š Route::middleware('cache.headers:public;max_age=2628000;etag')-\u003egroup(function () { Route::get('/privacy', function () { // ... }); Route::get('/terms', function () { // ... }); }); ","date":"2024å¹´06æœˆ16æ—¥","objectID":"/2024/06/laravel11%E5%93%8D%E5%BA%94/:1:1","tags":["PHP","Laravel"],"title":"Laravel 11.x å“åº”","uri":"/2024/06/laravel11%E5%93%8D%E5%BA%94/"},{"categories":["PHP","Laravel"],"content":"å°†Cookieé™„åŠ åˆ°å“åº” cookieæ–¹æ³•å°†cookieé™„åŠ åˆ°Illuminate\\Http\\Responseå®ä¾‹ return response('Hello World')-\u003ecookie( 'name', 'value', $minutes ); è¿˜æ¥å—ä¸€äº›ä¸å¤ªé¢‘ç¹ä½¿ç”¨çš„å‚æ•°ã€‚é€šå¸¸ï¼Œè¿™äº›å‚æ•°ä¸ PHP çš„åŸç”Ÿ setcookie æ–¹æ³•çš„å‚æ•°å…·æœ‰ç›¸åŒçš„ç›®çš„å’Œå«ä¹‰ï¼š return response('Hello World')-\u003ecookie( 'name', 'value', $minutes, $path, $domain, $secure, $httpOnly ); å¦‚æœæƒ³ç¡®ä¿åœ¨å‘é€å“åº”æ—¶é™„å¸¦ä¸€ä¸ª cookieï¼Œä½†è¿˜æ²¡æœ‰è¯¥å“åº”çš„å®ä¾‹ï¼Œå¯ä»¥ä½¿ç”¨ Cookie facade æ¥å°† cookie â€œé˜Ÿåˆ—åŒ–â€ï¼Œä»¥ä¾¿åœ¨å‘é€å“åº”æ—¶é™„åŠ åˆ°å“åº”ä¸Šã€‚ queue æ–¹æ³•æ¥å—åˆ›å»º cookie å®ä¾‹æ‰€éœ€çš„å‚æ•°ã€‚ è¿™äº› cookie å°†åœ¨å‘é€åˆ°æµè§ˆå™¨ä¹‹å‰é™„åŠ åˆ°ä¼ å‡ºçš„å“åº”ä¸Šï¼š use Illuminate\\Support\\Facades\\Cookie; Cookie::queue('name', 'value', $minutes); ç”ŸæˆCookieå®ä¾‹ å¦‚æœæƒ³ç”Ÿæˆä¸€ä¸ªå¯ä»¥ç¨åé™„åŠ åˆ°å“åº”å®ä¾‹çš„ Symfony\\Component\\HttpFoundation\\Cookie å®ä¾‹ï¼Œå¯ä»¥ä½¿ç”¨å…¨å±€ cookie è¾…åŠ©å‡½æ•°ã€‚ é™¤éè¯¥ cookie è¢«é™„åŠ åˆ°å“åº”å®ä¾‹ï¼Œå¦åˆ™å®ƒä¸ä¼šå‘é€å›å®¢æˆ·ç«¯ï¼š $cookie = cookie('name', 'value', $minutes); return response('Hello World')-\u003ecookie($cookie); æå‰è¿‡æœŸCookie å¯ä»¥é€šè¿‡ä¼ å‡ºå“åº” withoutCookie çš„æ–¹æ³•ä½¿ cookie è¿‡æœŸæ¥åˆ é™¤ cookieï¼š return response('Hello World')-\u003ewithoutCookie('name'); å¦‚æœè¿˜æ²¡æœ‰ä¼ å‡ºå“åº”çš„å®ä¾‹ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ Cookie Facade expire çš„æ–¹æ³•ä½¿ cookie è¿‡æœŸï¼š Cookie::expire('name'); ","date":"2024å¹´06æœˆ16æ—¥","objectID":"/2024/06/laravel11%E5%93%8D%E5%BA%94/:1:2","tags":["PHP","Laravel"],"title":"Laravel 11.x å“åº”","uri":"/2024/06/laravel11%E5%93%8D%E5%BA%94/"},{"categories":["PHP","Laravel"],"content":"CookieåŠ å¯† é»˜è®¤æƒ…å†µä¸‹ï¼Œç”±äº Illuminate\\Cookie\\Middleware\\EncryptCookies ä¸­é—´ä»¶çš„å­˜åœ¨ï¼ŒLaravel ç”Ÿæˆçš„æ‰€æœ‰ cookie éƒ½ç»è¿‡åŠ å¯†å’Œç­¾åï¼Œå› æ­¤å®¢æˆ·ç«¯æ— æ³•ä¿®æ”¹æˆ–è¯»å–å®ƒä»¬ã€‚ å¦‚æœæƒ³ç¦ç”¨åº”ç”¨ç¨‹åºç”Ÿæˆçš„ cookie å­é›†çš„åŠ å¯†ï¼Œå¯ä»¥ä½¿ç”¨åº”ç”¨ç¨‹åº bootstrap/app.php æ–‡ä»¶ä¸­çš„æ–¹æ³• encryptCookies ï¼š -\u003ewithMiddleware(function (Middleware $middleware) { $middleware-\u003eencryptCookies(except: [ 'cookie_name', ]); }) ","date":"2024å¹´06æœˆ16æ—¥","objectID":"/2024/06/laravel11%E5%93%8D%E5%BA%94/:1:3","tags":["PHP","Laravel"],"title":"Laravel 11.x å“åº”","uri":"/2024/06/laravel11%E5%93%8D%E5%BA%94/"},{"categories":["PHP","Laravel"],"content":"é‡å®šå‘ é‡å®šå‘å“åº”æ˜¯ Illuminate\\Http\\RedirectResponse ç±»çš„å®ä¾‹ï¼ŒåŒ…å«å°†ç”¨æˆ·é‡å®šå‘åˆ°å¦ä¸€ä¸ª URL æ‰€éœ€çš„æ­£ç¡®æ ‡å¤´ã€‚æœ‰å‡ ç§æ–¹æ³•å¯ä»¥ç”Ÿæˆ RedirectResponse å®ä¾‹ã€‚æœ€ç®€å•çš„æ–¹æ³•æ˜¯ä½¿ç”¨å…¨å±€ redirect å¸®åŠ©ç¨‹åºï¼š Route::get('/dashboard', function () { return redirect('home/dashboard'); }); æœ‰æ—¶ï¼Œéœ€è¦å°†ç”¨æˆ·é‡å®šå‘åˆ°å…¶ä»¥å‰çš„ä½ç½®ï¼Œä¾‹å¦‚å½“æäº¤çš„è¡¨å•æ— æ•ˆæ—¶ã€‚å¯ä»¥ä½¿ç”¨å…¨å±€ back å¸®åŠ©ç¨‹åºå‡½æ•°æ¥æ‰§è¡Œæ­¤æ“ä½œã€‚ç”±äºæ­¤åŠŸèƒ½åˆ©ç”¨ä¼šè¯ï¼Œå› æ­¤è¯·ç¡®ä¿è°ƒç”¨å‡½æ•°çš„ back è·¯ç”±ä½¿ç”¨ web ä¸­é—´ä»¶ç»„ï¼š Route::post('/user/profile', function () { // Validate the request... return back()-\u003ewithInput(); }); ","date":"2024å¹´06æœˆ16æ—¥","objectID":"/2024/06/laravel11%E5%93%8D%E5%BA%94/:2:0","tags":["PHP","Laravel"],"title":"Laravel 11.x å“åº”","uri":"/2024/06/laravel11%E5%93%8D%E5%BA%94/"},{"categories":["PHP","Laravel"],"content":"é‡å®šå‘åˆ°å‘½åè·¯ç”± å½“è°ƒç”¨ä¸å¸¦å‚æ•°çš„ redirect å¸®åŠ©ç¨‹åºæ—¶ï¼Œå°†è¿”å›ä¸€ä¸ªå®ä¾‹ Illuminate\\Routing\\Redirector ï¼Œå…è®¸è°ƒç”¨ Redirector å®ä¾‹ä¸Šçš„ä»»ä½•æ–¹æ³•ã€‚ ä¾‹å¦‚ï¼Œè¦ç”Ÿæˆ RedirectResponse åˆ°å‘½åè·¯ç”±ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹ route æ–¹æ³•ï¼š return redirect()-\u003eroute('login'); å¦‚æœè·¯ç”±å…·æœ‰å‚æ•°ï¼Œåˆ™å¯ä»¥å°†å®ƒä»¬ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ä¼ é€’ç»™ route æ–¹æ³•ï¼š // For a route with the following URI: /profile/{id} return redirect()-\u003eroute('profile', ['id' =\u003e 1]); é€šè¿‡Eloquentæ¨¡å‹å¡«å……å‚æ•° å¦‚æœè¦é‡å®šå‘åˆ°å…·æœ‰â€œIDâ€å‚æ•°çš„è·¯ç”±ï¼Œè¯¥è·¯ç”±æ˜¯ä» Eloquent æ¨¡å‹å¡«å……çš„ï¼Œåˆ™å¯ä»¥ä¼ é€’æ¨¡å‹æœ¬èº«ã€‚å°†è‡ªåŠ¨æå– IDï¼š // For a route with the following URI: /profile/{id} return redirect()-\u003eroute('profile', [$user]); å¦‚æœè¦è‡ªå®šä¹‰æ”¾ç½®åœ¨è·¯ç”±å‚æ•°ä¸­çš„å€¼ï¼Œå¯ä»¥åœ¨è·¯ç”±å‚æ•°å®šä¹‰ ï¼ˆ /profile/{id:slug} ï¼‰ ä¸­æŒ‡å®šåˆ—ï¼Œä¹Ÿå¯ä»¥åœ¨ Eloquent æ¨¡å‹ä¸Šé‡å†™è¯¥ getRouteKey æ–¹æ³•ï¼š /** * Get the value of the model's route key. */ public function getRouteKey(): mixed { return $this-\u003eslug; } ","date":"2024å¹´06æœˆ16æ—¥","objectID":"/2024/06/laravel11%E5%93%8D%E5%BA%94/:2:1","tags":["PHP","Laravel"],"title":"Laravel 11.x å“åº”","uri":"/2024/06/laravel11%E5%93%8D%E5%BA%94/"},{"categories":["PHP","Laravel"],"content":"é‡å®šå‘è‡³æ§åˆ¶å™¨æ“ä½œ è¿˜å¯ä»¥ç”ŸæˆæŒ‡å‘æ§åˆ¶å™¨æ“ä½œçš„é‡å®šå‘ã€‚ä¸ºæ­¤ï¼Œè¯·å°†æ§åˆ¶å™¨å’Œæ“ä½œåç§°ä¼ é€’ç»™ action æ–¹æ³•ï¼š use App\\Http\\Controllers\\UserController; return redirect()-\u003eaction([UserController::class, 'index']); å¦‚æœæ§åˆ¶å™¨è·¯ç”±éœ€è¦å‚æ•°ï¼Œåˆ™å¯ä»¥å°†å®ƒä»¬ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ä¼ é€’ç»™ action æ–¹æ³•ï¼š return redirect()-\u003eaction( [UserController::class, 'profile'], ['id' =\u003e 1] ); ","date":"2024å¹´06æœˆ16æ—¥","objectID":"/2024/06/laravel11%E5%93%8D%E5%BA%94/:2:2","tags":["PHP","Laravel"],"title":"Laravel 11.x å“åº”","uri":"/2024/06/laravel11%E5%93%8D%E5%BA%94/"},{"categories":["PHP","Laravel"],"content":"é‡å®šå‘åˆ°å¤–éƒ¨åŸŸ å¯ä»¥é€šè¿‡è°ƒç”¨è¯¥ away æ–¹æ³•é‡å®šå‘åˆ°åº”ç”¨ç¨‹åºå¤–çš„åŸŸã€‚ è¯¥æ–¹æ³•å°† RedirectResponse åˆ›å»ºä¸€ä¸ªæ— éœ€ä»»ä½•å…¶ä»– URL ç¼–ç ã€éªŒè¯æˆ–éªŒè¯çš„æ–¹æ³•ï¼š return redirect()-\u003eaway('https://www.google.com'); ","date":"2024å¹´06æœˆ16æ—¥","objectID":"/2024/06/laravel11%E5%93%8D%E5%BA%94/:2:3","tags":["PHP","Laravel"],"title":"Laravel 11.x å“åº”","uri":"/2024/06/laravel11%E5%93%8D%E5%BA%94/"},{"categories":["PHP","Laravel"],"content":"ä½¿ç”¨é—ªå­˜çš„ä¼šè¯æ•°é‡é‡å®šå‘ é‡å®šå‘åˆ°æ–° URL å’Œå°†æ•°æ®åˆ·å…¥ä¼šè¯é€šå¸¸åŒæ—¶å®Œæˆã€‚ é€šå¸¸ï¼Œè¿™æ˜¯åœ¨æˆåŠŸæ‰§è¡Œæ“ä½œåï¼Œå½“å‘ä¼šè¯åˆ·æ–°æˆåŠŸæ¶ˆæ¯æ—¶å®Œæˆçš„ã€‚ ä¸ºæ–¹ä¾¿èµ·è§ï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ª RedirectResponse å®ä¾‹ï¼Œå¹¶åœ¨å•ä¸ªæµç•…çš„æ–¹æ³•é“¾ä¸­å°†æ•°æ®é—ªå­˜åˆ°ä¼šè¯ä¸­ï¼š Route::post('/user/profile', function () { // ... return redirect('dashboard')-\u003ewith('status', 'Profile updated!'); }); é‡å®šå‘ç”¨æˆ·åï¼Œå¯ä»¥æ˜¾ç¤ºä¼šè¯ä¸­é—ªçƒçš„æ¶ˆæ¯ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨ Blade è¯­æ³•ï¼š @if (session('status')) \u003cdiv class=\"alert alert-success\"\u003e {{ session('status') }} \u003c/div\u003e @endif ä½¿ç”¨è¾“å…¥é‡å®šå‘ åœ¨å°†ç”¨æˆ·é‡å®šå‘åˆ°æ–°ä½ç½®ä¹‹å‰ï¼Œå¯ä»¥ä½¿ç”¨ RedirectResponse å®ä¾‹æä¾› withInput çš„æ–¹æ³•å°†å½“å‰è¯·æ±‚çš„è¾“å…¥æ•°æ®åˆ·æ–°åˆ°ä¼šè¯ã€‚ å¦‚æœç”¨æˆ·é‡åˆ°éªŒè¯é”™è¯¯ï¼Œé€šå¸¸ä¼šæ‰§è¡Œæ­¤æ“ä½œã€‚ å°†è¾“å…¥åˆ‡æ¢åˆ°ä¼šè¯åï¼Œå¯ä»¥åœ¨ä¸‹ä¸€æ¬¡è¯·æ±‚é‡æ–°å¡«å……è¡¨å•æ—¶è½»æ¾æ£€ç´¢å®ƒï¼š return back()-\u003ewithInput(); ","date":"2024å¹´06æœˆ16æ—¥","objectID":"/2024/06/laravel11%E5%93%8D%E5%BA%94/:2:4","tags":["PHP","Laravel"],"title":"Laravel 11.x å“åº”","uri":"/2024/06/laravel11%E5%93%8D%E5%BA%94/"},{"categories":["PHP","Laravel"],"content":"å…¶ä»–å“åº”ç±»å‹ ","date":"2024å¹´06æœˆ16æ—¥","objectID":"/2024/06/laravel11%E5%93%8D%E5%BA%94/:3:0","tags":["PHP","Laravel"],"title":"Laravel 11.x å“åº”","uri":"/2024/06/laravel11%E5%93%8D%E5%BA%94/"},{"categories":["PHP","Laravel"],"content":"View å“åº” return response() -\u003eview('hello', $data, 200) -\u003eheader('Content-Type', $type); å¦‚æœä¸éœ€è¦ä¼ é€’è‡ªå®šä¹‰ HTTP çŠ¶æ€ç æˆ–è‡ªå®šä¹‰æ ‡å¤´ï¼Œåˆ™å¯ä»¥ä½¿ç”¨å…¨å±€ view å¸®åŠ©ç¨‹åºå‡½æ•°ã€‚ ","date":"2024å¹´06æœˆ16æ—¥","objectID":"/2024/06/laravel11%E5%93%8D%E5%BA%94/:3:1","tags":["PHP","Laravel"],"title":"Laravel 11.x å“åº”","uri":"/2024/06/laravel11%E5%93%8D%E5%BA%94/"},{"categories":["PHP","Laravel"],"content":"JSON å“åº” è¯¥ json æ–¹æ³•ä¼šè‡ªåŠ¨å°† Content-Type æ ‡å¤´è®¾ç½®ä¸º application/json ï¼Œå¹¶ä½¿ç”¨ json_encode PHP å‡½æ•°å°†ç»™å®šçš„æ•°ç»„è½¬æ¢ä¸º JSONï¼š return response()-\u003ejson([ 'name' =\u003e 'Abigail', 'state' =\u003e 'CA', ]); å¦‚æœè¦åˆ›å»º JSONP å“åº”ï¼Œå¯ä»¥å°†è¯¥ json æ–¹æ³•ä¸ä»¥ä¸‹ withCallback æ–¹æ³•ç»“åˆä½¿ç”¨ return response() -\u003ejson(['name' =\u003e 'Abigail', 'state' =\u003e 'CA']) -\u003ewithCallback($request-\u003einput('callback')); ","date":"2024å¹´06æœˆ16æ—¥","objectID":"/2024/06/laravel11%E5%93%8D%E5%BA%94/:3:2","tags":["PHP","Laravel"],"title":"Laravel 11.x å“åº”","uri":"/2024/06/laravel11%E5%93%8D%E5%BA%94/"},{"categories":["PHP","Laravel"],"content":"æ–‡ä»¶ä¸‹è½½ è¯¥ download æ–¹æ³•å¯ç”¨äºç”Ÿæˆå“åº”ï¼Œå¼ºåˆ¶ç”¨æˆ·çš„æµè§ˆå™¨åœ¨ç»™å®šè·¯å¾„ä¸‹è½½æ–‡ä»¶ã€‚ è¯¥ download æ–¹æ³•æ¥å—æ–‡ä»¶åä½œä¸ºè¯¥æ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°ï¼Œè¯¥å‚æ•°å°†ç¡®å®šä¸‹è½½æ–‡ä»¶çš„ç”¨æˆ·çœ‹åˆ°çš„æ–‡ä»¶åã€‚ æœ€åï¼Œå¯ä»¥å°† HTTP æ ‡å¤´æ•°ç»„ä½œä¸ºç¬¬ä¸‰ä¸ªå‚æ•°ä¼ é€’ç»™è¯¥æ–¹æ³•ï¼š return response()-\u003edownload($pathToFile); return response()-\u003edownload($pathToFile, $name, $headers); æµä¸‹è½½ è¯¥ streamDownload æ–¹æ³•å¯ç”¨äºå°†ç»™å®šæ“ä½œçš„å­—ç¬¦ä¸²å“åº”è½¬æ¢ä¸ºå¯ä¸‹è½½çš„å“åº”ï¼Œè€Œæ— éœ€å°†æ“ä½œçš„å†…å®¹å†™å…¥ç£ç›˜ã€‚ æ­¤æ–¹æ³•æ¥å—å›è°ƒã€æ–‡ä»¶åå’Œå¯é€‰çš„æ ‡å¤´æ•°ç»„ä½œä¸ºå…¶å‚æ•°ï¼š use App\\Services\\GitHub; return response()-\u003estreamDownload(function () { echo GitHub::api('repo') -\u003econtents() -\u003ereadme('laravel', 'laravel')['contents']; }, 'laravel-readme.md'); ","date":"2024å¹´06æœˆ16æ—¥","objectID":"/2024/06/laravel11%E5%93%8D%E5%BA%94/:3:3","tags":["PHP","Laravel"],"title":"Laravel 11.x å“åº”","uri":"/2024/06/laravel11%E5%93%8D%E5%BA%94/"},{"categories":["PHP","Laravel"],"content":"æ–‡ä»¶å“åº” è¯¥ file æ–¹æ³•å¯ç”¨äºç›´æ¥åœ¨ç”¨æˆ·çš„æµè§ˆå™¨ä¸­æ˜¾ç¤ºæ–‡ä»¶ï¼ˆå¦‚å›¾åƒæˆ– PDFï¼‰ï¼Œè€Œä¸æ˜¯å¯åŠ¨ä¸‹è½½ã€‚ æ­¤æ–¹æ³•æ¥å—æ–‡ä»¶çš„ç»å¯¹è·¯å¾„ä½œä¸ºå…¶ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå¹¶æ¥å—æ ‡å¤´æ•°ç»„ä½œä¸ºå…¶ç¬¬äºŒä¸ªå‚æ•°ï¼š return response()-\u003efile($pathToFile); return response()-\u003efile($pathToFile, $headers); ","date":"2024å¹´06æœˆ16æ—¥","objectID":"/2024/06/laravel11%E5%93%8D%E5%BA%94/:3:4","tags":["PHP","Laravel"],"title":"Laravel 11.x å“åº”","uri":"/2024/06/laravel11%E5%93%8D%E5%BA%94/"},{"categories":["PHP","Laravel"],"content":"å“åº”å® å¦‚æœè¦å®šä¹‰å¯åœ¨å„ç§è·¯ç”±å’Œæ§åˆ¶å™¨ä¸­é‡å¤ä½¿ç”¨çš„è‡ªå®šä¹‰å“åº”ï¼Œåˆ™å¯ä»¥åœ¨ Response å¤–è§‚ä¸Šä½¿ç”¨è¯¥ macro æ–¹æ³•ã€‚ é€šå¸¸ï¼Œåº”ä»åº”ç”¨ç¨‹åºçš„æœåŠ¡æä¾›å•†ä¹‹ä¸€ï¼ˆå¦‚ App\\Providers\\AppServiceProvider æœåŠ¡æä¾›å•†ï¼‰ boot çš„æ–¹æ³•è°ƒç”¨æ­¤æ–¹æ³•ï¼š \u003c?php namespace App\\Providers; use Illuminate\\Support\\Facades\\Response; use Illuminate\\Support\\ServiceProvider; class AppServiceProvider extends ServiceProvider { /** * Bootstrap any application services. */ public function boot(): void { Response::macro('caps', function (string $value) { return Response::make(strtoupper($value)); }); } } è¯¥ macro å‡½æ•°æ¥å—åç§°ä½œä¸ºå…¶ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œæ¥å—é—­åŒ…ä½œä¸ºå…¶ç¬¬äºŒä¸ªå‚æ•°ã€‚ä» ResponseFactory å®ç°æˆ– response å¸®åŠ©ç¨‹åºè°ƒç”¨å®åç§°æ—¶ï¼Œå°†æ‰§è¡Œå®çš„é—­åŒ…ï¼š return response()-\u003ecaps('foo'); ","date":"2024å¹´06æœˆ16æ—¥","objectID":"/2024/06/laravel11%E5%93%8D%E5%BA%94/:4:0","tags":["PHP","Laravel"],"title":"Laravel 11.x å“åº”","uri":"/2024/06/laravel11%E5%93%8D%E5%BA%94/"},{"categories":["PHP","Laravel"],"content":" åŸæ–‡ ","date":"2024å¹´06æœˆ16æ—¥","objectID":"/2024/06/laravel11%E8%AF%B7%E6%B1%82/:0:0","tags":["PHP","Laravel"],"title":"Laravel 11.x è¯·æ±‚","uri":"/2024/06/laravel11%E8%AF%B7%E6%B1%82/"},{"categories":["PHP","Laravel"],"content":"ä»‹ç» Laravel çš„ Illuminate\\Http\\Request ç±»æä¾›äº†ä¸€ç§é¢å‘å¯¹è±¡çš„æ–¹å¼æ¥ä¸å½“å‰åº”ç”¨ç¨‹åºå¤„ç†çš„ HTTP è¯·æ±‚è¿›è¡Œäº¤äº’ï¼ŒåŒæ—¶å¯ä»¥æ£€ç´¢è¯·æ±‚ä¸­æäº¤çš„è¾“å…¥ã€Cookies å’Œæ–‡ä»¶ã€‚ ","date":"2024å¹´06æœˆ16æ—¥","objectID":"/2024/06/laravel11%E8%AF%B7%E6%B1%82/:1:0","tags":["PHP","Laravel"],"title":"Laravel 11.x è¯·æ±‚","uri":"/2024/06/laravel11%E8%AF%B7%E6%B1%82/"},{"categories":["PHP","Laravel"],"content":"è¯·æ±‚äº¤äº’ ","date":"2024å¹´06æœˆ16æ—¥","objectID":"/2024/06/laravel11%E8%AF%B7%E6%B1%82/:2:0","tags":["PHP","Laravel"],"title":"Laravel 11.x è¯·æ±‚","uri":"/2024/06/laravel11%E8%AF%B7%E6%B1%82/"},{"categories":["PHP","Laravel"],"content":"è®¿é—®è¯·æ±‚ é€šè¿‡ä¾èµ–æ³¨å…¥è¿›è¡Œè·å–å½“å‰HTTPè¯·æ±‚çš„å®ä¾‹ï¼š \u003c?php namespace App\\Http\\Controllers; use Illuminate\\Http\\RedirectResponse; use Illuminate\\Http\\Request; class UserController extends Controller { /** * Store a new user. */ public function store(Request $request): RedirectResponse { $name = $request-\u003einput('name'); // Store the user... return redirect('/users'); } } åŒæ ·çš„ä¹Ÿå¯ä»¥åœ¨é—­åŒ…ä¸­ä½¿ç”¨ï¼š use Illuminate\\Http\\Request; Route::get('/', function (Request $request) { // ... }); ä¾èµ–æ³¨å…¥å’Œè·¯ç”±å‚æ•° å¦‚æœæ§åˆ¶å™¨æ–¹æ³•ä¹Ÿéœ€è¦æ¥è‡ªè·¯ç”±å‚æ•°çš„è¾“å…¥ï¼Œåˆ™åº”è¯¥åœ¨å…¶ä»–ä¾èµ–é¡¹ä¹‹ååˆ—å‡ºè·¯ç”±å‚æ•°ã€‚ ä¾‹å¦‚ï¼Œè·¯ç”±å®šä¹‰å¦‚ä¸‹ï¼š use App\\Http\\Controllers\\UserController; Route::put('/user/{id}', [UserController::class, 'update']); é‚£ä¹ˆæ§åˆ¶å™¨å°±åº”è¯¥æŒ‰ç…§ä»¥ä¸‹æ–¹å¼è¿›è¡Œå®šä¹‰ï¼š \u003c?php namespace App\\Http\\Controllers; use Illuminate\\Http\\RedirectResponse; use Illuminate\\Http\\Request; class UserController extends Controller { /** * Update the specified user. */ public function update(Request $request, string $id): RedirectResponse { // Update the user... return redirect('/users'); } } ","date":"2024å¹´06æœˆ16æ—¥","objectID":"/2024/06/laravel11%E8%AF%B7%E6%B1%82/:2:1","tags":["PHP","Laravel"],"title":"Laravel 11.x è¯·æ±‚","uri":"/2024/06/laravel11%E8%AF%B7%E6%B1%82/"},{"categories":["PHP","Laravel"],"content":"è¯·æ±‚è·¯ç”±ã€ä¸»æœºå’Œæ–¹æ³• æ£€ç´¢è¯·æ±‚è·¯å¾„ pathæ–¹æ³•è¿”å›è¯·æ±‚çš„è·¯å¾„ä¿¡æ¯ã€‚ $uri = $request-\u003epath(); æ£€æŸ¥è¯·æ±‚è·¯å¾„/è·¯ç”± isæ–¹æ³•å…è®¸éªŒè¯ä¼ å…¥è¯·æ±‚è·¯å¾„æ˜¯å¦ä¸ç»™å®šæ¨¡å¼åŒ¹é…ã€‚ å¯ä»¥å°†*å­—ç¬¦ç”¨ä½œé€šé…ç¬¦ if ($request-\u003eis('admin/*')) { // ... } routeIsæ–¹æ³•ï¼Œå¯ä»¥ç¡®å®šå‡ºå…¥è¯·æ±‚æ˜¯å¦ä¸å‘½åè·¯ç”±åŒ¹é…ï¼š if ($request-\u003erouteIs('admin.*')) { // ... } æ£€ç´¢è¯·æ±‚URL urlæˆ–fullUrlæ–¹æ³•å¯ä»¥æ£€ç´¢ä¼ å…¥è¯·æ±‚çš„å®Œæ•´URLã€‚ urlæ–¹æ³•å°†è¿”å›ä¸å¸¦æŸ¥è¯¢å­—ç¬¦ä¸²çš„URL fullUrlæ–¹æ³•è¿”å›çš„URLåŒ…å«æŸ¥è¯¢å­—ç¬¦ä¸² $url = $request-\u003eurl(); $urlWithQueryString = $request-\u003efullUrl(); fullUrlWithQueryæ–¹æ³•ï¼Œå¯ä»¥å°†æŸ¥è¯¢å­—ç¬¦ä¸²æ•°æ®è¿½åŠ åˆ°å½“å‰URLã€‚ æ­¤æ–¹æ³•å°†ç»™å®šçš„æŸ¥è¯¢å­—ç¬¦ä¸²å˜é‡æ•°ç»„ä¸å½“å‰æŸ¥è¯¢å­—ç¬¦ä¸²åˆå¹¶ $request-\u003efullUrlWithQuery(['type' =\u003e 'phone']); fullUrlWithoutQueryæ–¹æ³•åœ¨æ²¡æœ‰ç»™å®šæŸ¥è¯¢å­—ç¬¦ä¸²å‚æ•°çš„æƒ…å†µä¸‹è·å–å½“å‰URL $request-\u003efullUrlWithoutQuery(['type']); æ£€ç´¢è¯·æ±‚ä¸»æœº hostã€httpHostå’ŒschemeAndHttpHostæ–¹æ³•å¯ä»¥æ£€ç´¢ä¼ å…¥è¯·æ±‚çš„ä¸»æœº $request-\u003ehost(); $request-\u003ehttpHost(); $request-\u003eschemeAndHttpHost(); æ£€ç´¢è¯·æ±‚æ–¹æ³• methodæ–¹æ³•å°†è¿”å›è¯·æ±‚çš„æ–¹å¼ isMethodæ–¹æ³•ç”¨æ¥éªŒè¯HTTPè¯·æ±‚æ–¹å¼æ˜¯å¦ä¸ç»™å®šå­—ç¬¦ä¸²åŒ¹é… $method = $request-\u003emethod(); if ($request-\u003eisMethod('post')) { // ... } ","date":"2024å¹´06æœˆ16æ—¥","objectID":"/2024/06/laravel11%E8%AF%B7%E6%B1%82/:2:2","tags":["PHP","Laravel"],"title":"Laravel 11.x è¯·æ±‚","uri":"/2024/06/laravel11%E8%AF%B7%E6%B1%82/"},{"categories":["PHP","Laravel"],"content":"è¯·æ±‚æ ‡å¤´ headeræ–¹æ³•ä»Illuminate\\Http\\Requestå®ä¾‹ä¸­æ£€ç´¢è¯·æ±‚æ ‡å¤´ã€‚ å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™è¿”å›nullï¼Œheaderæ–¹æ³•æ¥å—å¯é€‰çš„ç¬¬äºŒä¸ªå‚æ•°ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œåˆ™ä½¿ç”¨æ­¤å‚æ•° $value = $request-\u003eheader('X-Header-Name'); $value = $request-\u003eheader('X-Header-Name', 'default'); hasHeaderæ–¹æ³•ç”¨äºç¡®å®šè¯·æ±‚æ˜¯å¦åŒ…å«ç»™å®šçš„æ ‡å¤´ if ($request-\u003ehasHeader('X-Header-Name')) { // ... } bearerTokenæ–¹æ³•å¯ç”¨äºä»Authorizationæ ‡å¤´ä¸­æ£€ç´¢æŒæœ‰è€…ä»¤ç‰Œã€‚ å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™è¿”å›ç©ºå­—ç¬¦ä¸² $token = $request-\u003ebearerToken(); ","date":"2024å¹´06æœˆ16æ—¥","objectID":"/2024/06/laravel11%E8%AF%B7%E6%B1%82/:2:3","tags":["PHP","Laravel"],"title":"Laravel 11.x è¯·æ±‚","uri":"/2024/06/laravel11%E8%AF%B7%E6%B1%82/"},{"categories":["PHP","Laravel"],"content":"è¯·æ±‚IPåœ°å€ ipæ–¹æ³•ç”¨äºæ£€ç´¢å‘å‡ºè¯·æ±‚çš„IPåœ°å€ $ipAddress = $request-\u003eip(); ipsæ–¹æ³•å¯ä»¥æ£€ç´¢IPåœ°å€æ•°ç»„ï¼ŒåŒ…æ‹¬ä»£ç†è½¬å‘çš„æ‰€æœ‰å®¢æˆ·ç«¯IPåœ°å€ åŸå§‹å®¢æˆ·ç«¯IPåœ°å€å°†ä½äºæ•°ç»„çš„æœ«å°¾ $ipAddresses = $request-\u003eips(); ","date":"2024å¹´06æœˆ16æ—¥","objectID":"/2024/06/laravel11%E8%AF%B7%E6%B1%82/:2:4","tags":["PHP","Laravel"],"title":"Laravel 11.x è¯·æ±‚","uri":"/2024/06/laravel11%E8%AF%B7%E6%B1%82/"},{"categories":["PHP","Laravel"],"content":"å†…å®¹åå•† Laravel æä¾›äº†å‡ ç§æ–¹æ³•ï¼Œç”¨äºé€šè¿‡ Accept æ ‡å¤´æ£€æŸ¥ä¼ å…¥è¯·æ±‚çš„è¯·æ±‚å†…å®¹ç±»å‹ã€‚ getAcceptableContentTypesæ–¹æ³•è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œå…¶ä¸­åŒ…å«è¯·æ±‚æ¥å—çš„æ‰€æœ‰å†…å®¹ç±»å‹ã€‚ $contentTypes = $request-\u003egetAcceptableContentTypes(); acceptsæ–¹æ³•æ¥å—å†…å®¹ç±»å‹çš„æ•°ç»„ï¼Œ å¦‚æœè¯·æ±‚æ¥å—ä»»ä½•å†…å®¹ç±»å‹ï¼Œåˆ™è¿”å›trueï¼Œå¦åˆ™false if ($request-\u003eaccepts(['text/html', 'application/json'])) { // ... } prefersæ–¹æ³•ç”¨æ¥ç¡®å®šè¯·æ±‚åœ¨ç»™å®šçš„ä¸€ç»„å†…å®¹ç±»å‹ä¸­æœ€å–œæ¬¢å“ªç§å†…å®¹ç±»å‹ã€‚ å¦‚æœè¯·æ±‚ä¸æ¥å—æ‰€æä¾›çš„ä»»ä½•å†…å®¹ç±»å‹ï¼Œåˆ™ä¼šè¿”å›null $preferred = $request-\u003eprefers(['text/html', 'application/json']); expectsJsonæ–¹æ³•ç”¨äºå¿«é€Ÿç¡®å®šä¼ å…¥è¯·æ±‚æ˜¯å¦éœ€è¦JSONå“åº” if ($request-\u003eexpectsJson()) { // ... } ","date":"2024å¹´06æœˆ16æ—¥","objectID":"/2024/06/laravel11%E8%AF%B7%E6%B1%82/:2:5","tags":["PHP","Laravel"],"title":"Laravel 11.x è¯·æ±‚","uri":"/2024/06/laravel11%E8%AF%B7%E6%B1%82/"},{"categories":["PHP","Laravel"],"content":"PRS-7 è¯·æ±‚ PSR-7 æ ‡å‡†æŒ‡å®šäº† HTTP æ¶ˆæ¯çš„æ¥å£ï¼ŒåŒ…æ‹¬è¯·æ±‚å’Œå“åº”ã€‚å¦‚æœè¦è·å– PSR-7 è¯·æ±‚çš„å®ä¾‹è€Œä¸æ˜¯ Laravel è¯·æ±‚ï¼Œåˆ™é¦–å…ˆéœ€è¦å®‰è£…ä¸€äº›åº“ã€‚Laravel ä½¿ç”¨ Symfony HTTP æ¶ˆæ¯æ¡¥æ¥ç»„ä»¶å°†å…¸å‹çš„ Laravel è¯·æ±‚å’Œå“åº”è½¬æ¢ä¸ºå…¼å®¹ PSR-7 çš„å®ç°ï¼š composer require symfony/psr-http-message-bridge composer require nyholm/psr7 å®‰è£…åï¼Œå°±å¯ä»¥é€šè¿‡åœ¨è·¯ç”±é—­åŒ…æˆ–æ§åˆ¶å™¨æ–¹æ³•ä¸Šé”®å…¥æç¤ºè¯·æ±‚æ¥å£æ¥è·å–PSR-7è¯·æ±‚ï¼š use Psr\\Http\\Message\\ServerRequestInterface; Route::get('/', function (ServerRequestInterface $request) { // ... }); ","date":"2024å¹´06æœˆ16æ—¥","objectID":"/2024/06/laravel11%E8%AF%B7%E6%B1%82/:2:6","tags":["PHP","Laravel"],"title":"Laravel 11.x è¯·æ±‚","uri":"/2024/06/laravel11%E8%AF%B7%E6%B1%82/"},{"categories":["PHP","Laravel"],"content":"è¾“å…¥ ","date":"2024å¹´06æœˆ16æ—¥","objectID":"/2024/06/laravel11%E8%AF%B7%E6%B1%82/:3:0","tags":["PHP","Laravel"],"title":"Laravel 11.x è¯·æ±‚","uri":"/2024/06/laravel11%E8%AF%B7%E6%B1%82/"},{"categories":["PHP","Laravel"],"content":"æ£€ç´¢è¾“å…¥ æ£€ç´¢æ‰€æœ‰è¾“å…¥æ•°æ® allæ–¹æ³•æ£€ç´¢arrayæ‰€æœ‰ä¼ å…¥å…¥è¯·æ±‚çš„è¾“å…¥æ•°æ®ã€‚ æ— è®ºè¯·æ±‚æ¥ç»„HTMLè¡¨å•è¿˜æ˜¯XHRè¯·æ±‚ï¼Œéƒ½é€‚ç”¨ã€‚ $input = $request-\u003eall(); collectæ–¹æ³•å¯ä»¥å°†ä¼ å…¥è¯·æ±‚çš„æ‰€æœ‰è¾“å…¥æ•°æ®ä½œä¸ºé›†åˆæ£€ç´¢ $input = $request-\u003ecollect(); collectæ–¹æ³•è¿˜å…è®¸å°†ä¼ å…¥çš„è¾“å…¥çš„å­é›†ä½œä¸ºé›†åˆæ£€ç´¢ $request-\u003ecollect('users')-\u003eeach(function (string $user) { // ... }); æ£€ç´¢è¾“å…¥å€¼ inputæ–¹æ³•ç”¨äºæ£€ç´¢ç”¨æˆ·è¾“å…¥ æ— å‚æ•°è°ƒç”¨ï¼Œå°†æ‰€æœ‰è¾“å…¥å€¼ä½œä¸ºå…³è”æ•°ç»„æ£€ç´¢ $name = $request-\u003einput('name'); $input = $request-\u003einput(); // å¦‚æœè¯·æ±‚çš„è¾“å…¥å€¼ä¸å­˜åœ¨ï¼Œåˆ™å¯ä»¥è®¾ç½®é»˜è®¤å€¼ï¼š $name = $request-\u003einput('name', 'Sally'); ä½¿ç”¨.è¡¨ç¤ºæ³•è®¿é—®æ•°ç»„ $name = $request-\u003einput('products.0.name'); $names = $request-\u003einput('products.*.name'); ä»æŸ¥è¯¢å­—ç¬¦ä¸²ä¸­æ£€ç´¢è¾“å…¥ queryæ–¹æ³•å°†ä»…ä»æŸ¥è¯¢å­—ç¬¦ä¸²ä¸­æ£€ç´¢å€¼ æ— å‚æ•°è°ƒç”¨ï¼Œå°†æ‰€æœ‰æŸ¥è¯¢å­—ç¬¦ä¸²å€¼æ£€ç´¢ä¸ºå…³è”æ•°ç»„ $name = $request-\u003equery('name'); $name = $request-\u003equery('name', 'Helen'); // ä¸å­˜åœ¨åˆ™ä½¿ç”¨ç»™å®šçš„é»˜è®¤å€¼ $name = $request-\u003equery('name', 'Helen'); æ£€ç´¢JSONè¾“å…¥å€¼ å‘é€JSONè¯·æ±‚æ—¶ï¼Œåªè¦è¯·æ±‚Content-Type=application/jsonå°±å¯ä»¥é€šè¿‡inputæ–¹æ³•è®¿é—®JSONæ•°æ®ã€‚ ä¹Ÿå¯ä»¥ä½¿ç”¨.è¯­æ³•æ¥æ£€ç´¢åµŒå¥—åœ¨JSONæ•°ç»„/å¯¹è±¡ä¸­çš„å€¼ $name = $request-\u003einput('user.name'); æ£€ç´¢å­—ç¬¦ä¸²è¾“å…¥å€¼ stringæ–¹æ³•å¯ä»¥å°†è¯·æ±‚æ•°æ®ä½œä¸ºIlluminate\\Support\\Stringableå®ä¾‹è¿›è¡Œæ£€ç´¢ $name = $request-\u003estring('name')-\u003etrim(); æ£€ç´¢å¸ƒå°”å€¼è¾“å…¥å€¼ booleanæ–¹æ³•å°†è¯·æ±‚æ•°æ®æ£€ç´¢ä¸ºå¸ƒå°”å€¼ $archived = $request-\u003eboolean('archived'); æ£€ç´¢æ—¥æœŸè¾“å…¥å€¼ dateæ–¹æ³•å°†åŒ…å«æ—¥æœŸ/æ—¶é—´çš„è¾“å…¥å€¼ä½œä¸ºCarbonå®ä¾‹è¿›è¡Œæ£€ç´¢ã€‚ å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™è¿”å›null $birthday = $request-\u003edate('birthday'); dateæ–¹æ³•æ¥å—çš„ç¬¬äºŒä¸‰å‚æ•°å¯ä»¥åˆ†åˆ«ç”¨äºæŒ‡å®šæ—¥æœŸçš„æ ¼å¼å’Œæ—¶åŒº å¦‚æœæ ¼å¼æ— æ•ˆï¼Œåˆ™ä¼šæŠ›å‡ºInvalidArgumentExceptionå¼‚å¸¸ $elapsed = $request-\u003edate('elapsed', '!H:i', 'Europe/Madrid'); æ£€ç´¢æšä¸¾è¾“å…¥å€¼ enumæ–¹æ³•å¯ä»¥ä»è¯·æ±‚ä¸­æ£€ç´¢ä¸PHPæšä¸¾ç›¸å¯¹åº”çš„è¾“å…¥å€¼ã€‚ å¦‚æœè¯·æ±‚ä¸åŒ…æ‹¬å…·æœ‰ç»™å®šåç§°çš„è¾“å…¥å€¼ï¼Œæˆ–è€…æšä¸¾æ²¡æœ‰è¾“å…¥å€¼åŒ¹é…çš„æ”¯æŒå€¼ï¼Œåˆ™è¿”å›null enumæ–¹æ³•æ¥å—è¾“å…¥å€¼çš„åç§°å’Œæšä¸¾ç±»ä½œä¸ºå…¶ç¬¬ä¸€äºŒå‚æ•° use App\\Enums\\Status; $status = $request-\u003eenum('status', Status::class); é€šè¿‡åŠ¨æ€å±æ€§æ£€ç´¢è¾“å…¥ å¯ä»¥ä½¿ç”¨Illuminate\\Http\\Requestå®ä¾‹ä¸Šçš„åŠ¨æ€å±æ€§è®¿é—®ç”¨æˆ·è¾“å…¥ $name = $request-\u003ename; æ£€ç´¢éƒ¨åˆ†è¾“å…¥æ•°æ® onlyå’Œexceptæ–¹æ³•å¯ä»¥æ£€ç´¢è¾“å…¥æ•°æ®çš„å­é›† ä¸¤ä¸ªæ–¹æ³•éƒ½æ¥å—å•ä¸ªarrayæˆ–åŠ¨æ€å‚æ•°åˆ—è¡¨ onlyæ–¹æ³•ä¸ä¼šè¿”å›è¯·æ±‚ä¸­ä¸å­˜åœ¨çš„é”®å€¼å¯¹ $input = $request-\u003eonly(['username', 'password']); $input = $request-\u003eonly('username', 'password'); $input = $request-\u003eexcept(['credit_card']); $input = $request-\u003eexcept('credit_card'); ","date":"2024å¹´06æœˆ16æ—¥","objectID":"/2024/06/laravel11%E8%AF%B7%E6%B1%82/:3:1","tags":["PHP","Laravel"],"title":"Laravel 11.x è¯·æ±‚","uri":"/2024/06/laravel11%E8%AF%B7%E6%B1%82/"},{"categories":["PHP","Laravel"],"content":"è¾“å…¥çŠ¶æ€ hasæ–¹æ³•å¯ä»¥ç¡®å®šè¯·æ±‚ä¸­æ˜¯å¦å­˜åœ¨å€¼ã€‚å­˜åœ¨è¿”å›true if ($request-\u003ehas('name')) { // ... } hasè¿˜å¯ä»¥æ¥æ”¶ä¸€ä¸ªæ•°ç»„ï¼Œé‚£ä¹ˆå°†ç¡®å®šæ˜¯å¦å­˜åœ¨æ‰€æœ‰æŒ‡å®šçš„å€¼ if ($request-\u003ehas(['name', 'email'])) { // ... } hasAnyå¦‚æœå­˜åœ¨ä»»æ„æŒ‡å®šå€¼ï¼Œåˆ™è¿”å›true if ($request-\u003ehasAny(['name', 'email'])) { // ... } whenHasæ–¹æ³•å¦‚æœè¯·æ±‚ä¸Šå­˜åœ¨å€¼åˆ™å°†æ‰§è¡Œç»™å®šçš„é—­åŒ… $request-\u003ewhenHas('name', function (string $input) { // ... }); whenHasæ–¹æ³•ï¼Œå¦‚æœè¯·æ±‚ä¸­ä¸å­˜åœ¨æŒ‡å®šçš„å€¼ï¼Œåˆ™å¯ä»¥å°†ç¬¬äºŒä¸ªé—­åŒ…ä¼ é€’ç»™å°†è¦æ‰§è¡Œçš„æ–¹æ³•ä¸­ $request-\u003ewhenHas('name', function (string $input) { // The \"name\" value is present... }, function () { // The \"name\" value is not present... }); filledæ–¹æ³•ç”¨æ¥ç¡®å®šè¯·æ±‚ä¸­æ˜¯å¦å­˜åœ¨å€¼å¹¶ä¸”ä¸æ˜¯ç©ºå­—ç¬¦ä¸² if ($request-\u003efilled('name')) { // ... } anyFilledæ–¹æ³•å¦‚æœä»»æ„ä¸€ä¸ªæŒ‡å®šçš„å€¼ä¸æ˜¯ç©ºå­—ç¬¦ä¸²ï¼Œåˆ™è¿”å›true if ($request-\u003eanyFilled(['name', 'email'])) { // ... } whenFilledå¦‚æœè¯·æ±‚ä¸Šå­˜åœ¨å€¼å¹¶ä¸”ä¸æ˜¯ç©ºå­—ç¬¦ä¸²ï¼Œå°†æ‰§è¡Œç»™å®šçš„é—­åŒ… $request-\u003ewhenFilled('name', function (string $input) { // ... }); whenFilledå¦‚æœä¸å­˜åœ¨ï¼Œåˆ™å¯ä»¥ä¼ é€’ç¬¬äºŒä¸ªé—­åŒ…è¿›è¡Œå¤„ç† $request-\u003ewhenFilled('name', function (string $input) { // The \"name\" value is filled... }, function () { // The \"name\" value is not filled... }); missingå’ŒwhenMissingæ–¹æ³•ç”¨äºç¡®å®šè¯·æ±‚ä¸­æ˜¯å¦ç¼ºå°‘ç»™å®šçš„key if ($request-\u003emissing('name')) { // ... } $request-\u003ewhenMissing('name', function () { // The \"name\" value is missing... }, function () { // The \"name\" value is present... }); ","date":"2024å¹´06æœˆ16æ—¥","objectID":"/2024/06/laravel11%E8%AF%B7%E6%B1%82/:3:2","tags":["PHP","Laravel"],"title":"Laravel 11.x è¯·æ±‚","uri":"/2024/06/laravel11%E8%AF%B7%E6%B1%82/"},{"categories":["PHP","Laravel"],"content":"åˆå¹¶å…¶ä»–è¾“å…¥ mergeæ–¹æ³•ï¼Œç”¨äºæ‰‹åŠ¨å°†å…¶ä»–è¾“å…¥åˆå¹¶åˆ°è¯·æ±‚çš„ç°æœ‰è¾“å…¥æ•°æ®ä¸­ã€‚ å¦‚æœè¯·æ±‚ä¸­å·²å­˜åœ¨ç»™å®šçš„è¾“å…¥keyï¼Œåˆ™å°†ä¼šè¢«è¦†ç›–æ‰ $request-\u003emerge(['votes' =\u003e 0]); å¦‚æœè¯·æ±‚çš„è¾“å…¥æ•°æ®ä¸­å°šä¸å­˜åœ¨å“åº”çš„keyï¼Œåˆ™mergeIfMissingæ–¹æ³•å¯ç”¨äºå°†è¾“å…¥åˆå¹¶åˆ°è¯·æ±‚ä¸­ $request-\u003emergeIfMissing(['votes' =\u003e 0]); åˆ·æ–°ä¼šè¯è¾“å…¥ flashæ–¹æ³•å°†åˆ·æ–°ä¼šè¯çš„å½“å‰è¾“å…¥ã€‚ ä»¥ä¾¿åœ¨ç”¨æˆ·å¯¹åº”ç”¨ç¨‹åºçš„ä¸‹ä¸€ä¸ªè¯·æ±‚æœŸé—´å¯ç”¨ $request-\u003eflash(); flashOnly å’Œ flashExcept æ–¹æ³•ç”¨äºå°†æ•æ„Ÿä¿¡æ¯æ’é™¤åœ¨ä¼šè¯ä¹‹å¤– $request-\u003eflashOnly(['username', 'email']); $request-\u003eflashExcept('password'); åˆ·æ–°è¾“å…¥å¹¶é‡å®šå‘ withInputæ–¹æ³•å¯ä»¥åˆ·æ–°è¾“å…¥å¹¶è¿›è¡Œé‡å®šå‘ return redirect('form')-\u003ewithInput(); return redirect()-\u003eroute('user.create')-\u003ewithInput(); return redirect('form')-\u003ewithInput( $request-\u003eexcept('password') ); æ£€ç´¢æ—§è¾“å…¥ oldæ–¹æ³•å°†ä»ä¼šè¯ä¸­æå–å…ˆå‰åˆ·æ–°çš„è¾“å…¥æ•°æ® $username = $request-\u003eold('username'); ","date":"2024å¹´06æœˆ16æ—¥","objectID":"/2024/06/laravel11%E8%AF%B7%E6%B1%82/:3:3","tags":["PHP","Laravel"],"title":"Laravel 11.x è¯·æ±‚","uri":"/2024/06/laravel11%E8%AF%B7%E6%B1%82/"},{"categories":["PHP","Laravel"],"content":"Cookies ä»è¯·æ±‚ä¸­æ£€ç´¢Cookie cookieæ–¹æ³•å°†ä»è¯·æ±‚ä¸­è¿›è¡Œæ£€ç´¢Cookieå€¼ $value = $request-\u003ecookie('name'); ","date":"2024å¹´06æœˆ16æ—¥","objectID":"/2024/06/laravel11%E8%AF%B7%E6%B1%82/:3:4","tags":["PHP","Laravel"],"title":"Laravel 11.x è¯·æ±‚","uri":"/2024/06/laravel11%E8%AF%B7%E6%B1%82/"},{"categories":["PHP","Laravel"],"content":"è¾“å…¥ä¿®æ•´å’Œå½’ä¸€åŒ– é»˜è®¤æƒ…å†µä¸‹ï¼ŒLaravelå°†Illuminate\\Foundation\\Http\\Middleware\\TrimStrings and Illuminate\\Foundation\\Http\\Middleware\\ConvertEmptyStringsToNullä¸­é—´ä»¶åŒ…å«åœ¨åº”ç”¨ç¨‹åºçš„å…¨å±€ä¸­é—´ä»¶ä¸­äº†ã€‚è¿™äº›ä¸­é—´ä»¶å°†è‡ªåŠ¨ä¿®å‰ªè¯·æ±‚ä¸Šçš„æ‰€æœ‰è¾“å…¥å­—ç¬¦ä¸²å­—æ®µï¼Œå¹¶å°†ä»»ä½•ç©ºå­—ç¬¦ä¸²è½¬æ¢ä¸ºnull ç¦ç”¨è¾“å…¥å½’ä¸€åŒ– å¦‚æœè¦å¯¹æ‰€æœ‰è¯·æ±‚ç¦ç”¨æ­¤è¡Œä¸ºï¼Œå¯ä»¥é€šè¿‡è°ƒç”¨åº”ç”¨ç¨‹åº bootstrap/app.php æ–‡ä»¶ä¸­ $middleware-\u003eremove çš„æ–¹æ³•ä»åº”ç”¨ç¨‹åºçš„ä¸­é—´ä»¶ä¸­åˆ é™¤ä¸¤ä¸ªä¸­é—´ä»¶ï¼š use Illuminate\\Foundation\\Http\\Middleware\\ConvertEmptyStringsToNull; use Illuminate\\Foundation\\Http\\Middleware\\TrimStrings; -\u003ewithMiddleware(function (Middleware $middleware) { $middleware-\u003eremove([ ConvertEmptyStringsToNull::class, TrimStrings::class, ]); }) å¦‚æœæƒ³è¦åœ¨åº”ç”¨ç¨‹åºä¸­ç¦ç”¨å¯¹ä¸€éƒ¨åˆ†è¯·æ±‚çš„å­—ç¬¦ä¸²ä¿®å‰ªå’Œç©ºå­—ç¬¦ä¸²è½¬æ¢ï¼Œå¯ä»¥åœ¨åº”ç”¨ç¨‹åºçš„ bootstrap/app.php æ–‡ä»¶ä¸­ä½¿ç”¨ trimStrings å’Œ convertEmptyStringsToNull ä¸­é—´ä»¶æ–¹æ³•ã€‚è¿™ä¸¤ä¸ªæ–¹æ³•éƒ½æ¥å—ä¸€ä¸ªé—­åŒ…æ•°ç»„ï¼Œé—­åŒ…åº”è¿”å› true æˆ– falseï¼Œä»¥æŒ‡ç¤ºæ˜¯å¦åº”è·³è¿‡è¾“å…¥çš„è§„èŒƒåŒ–å¤„ç†ï¼š -\u003ewithMiddleware(function (Middleware $middleware) { $middleware-\u003econvertEmptyStringsToNull(except: [ fn (Request $request) =\u003e $request-\u003eis('admin/*'), ]); $middleware-\u003etrimStrings(except: [ fn (Request $request) =\u003e $request-\u003eis('admin/*'), ]); }) ","date":"2024å¹´06æœˆ16æ—¥","objectID":"/2024/06/laravel11%E8%AF%B7%E6%B1%82/:3:5","tags":["PHP","Laravel"],"title":"Laravel 11.x è¯·æ±‚","uri":"/2024/06/laravel11%E8%AF%B7%E6%B1%82/"},{"categories":["PHP","Laravel"],"content":"æ–‡ä»¶ ","date":"2024å¹´06æœˆ16æ—¥","objectID":"/2024/06/laravel11%E8%AF%B7%E6%B1%82/:4:0","tags":["PHP","Laravel"],"title":"Laravel 11.x è¯·æ±‚","uri":"/2024/06/laravel11%E8%AF%B7%E6%B1%82/"},{"categories":["PHP","Laravel"],"content":"æ£€ç´¢ä¸Šä¼ çš„æ–‡ä»¶ file/Illuminate\\Http\\RequeståŠ¨æ€å±æ€§ç”¨äºæ£€ç´¢ä¸Šä¼ çš„æ–‡ä»¶ fileæ–¹æ³•è¿”å›Illuminate\\Http\\UploadedFileç±»å®ä¾‹ï¼Œ $file = $request-\u003efile('photo'); $file = $request-\u003ephoto; hasFileæ–¹æ³•ç¡®å®šè¯·æ±‚ä¸­æ˜¯å¦å­˜åœ¨æ–‡ä»¶ if ($request-\u003ehasFile('photo')) { // ... } éªŒè¯æˆåŠŸä¸Šä¼  isValidæ–¹æ³•ç”¨äºéªŒè¯ä¸Šä¼ æ–‡ä»¶æ˜¯å¦æˆåŠŸ if ($request-\u003efile('photo')-\u003eisValid()) { // ... } æ–‡ä»¶è·¯å¾„å’Œæ‰©å±•å è¯¥ UploadedFile ç±»è¿˜åŒ…å«ç”¨äºè®¿é—®æ–‡ä»¶çš„å®Œå…¨é™å®šè·¯å¾„åŠå…¶æ‰©å±•åçš„æ–¹æ³•ã€‚ è¯¥ extension æ–¹æ³•å°†å°è¯•æ ¹æ®æ–‡ä»¶çš„å†…å®¹çŒœæµ‹æ–‡ä»¶çš„æ‰©å±•åã€‚ æ­¤æ‰©å±•å¯èƒ½ä¸å®¢æˆ·ç«¯æä¾›çš„æ‰©å±•ä¸åŒ $path = $request-\u003ephoto-\u003epath(); $extension = $request-\u003ephoto-\u003eextension(); ","date":"2024å¹´06æœˆ16æ—¥","objectID":"/2024/06/laravel11%E8%AF%B7%E6%B1%82/:4:1","tags":["PHP","Laravel"],"title":"Laravel 11.x è¯·æ±‚","uri":"/2024/06/laravel11%E8%AF%B7%E6%B1%82/"},{"categories":["PHP","Laravel"],"content":"å­˜å‚¨ä¸Šä¼ çš„æ–‡ä»¶ UploadedFileç±»çš„storeæ–¹æ³•å°†ä¸Šä¼ çš„æ–‡ä»¶ç§»åŠ¨åˆ°ç£ç›˜ä¸­ï¼Œè¯¥ç£ç›˜å¯ä»¥æ˜¯æœ¬åœ°æ–‡ä»¶ç³»ç»ŸæŸä¸€ä½ç½®ï¼Œä¹Ÿå¯ä»¥æ˜¯ Amazon S3ç­‰äº‘å­˜å‚¨ä½ç½® storeæ–¹æ³•æ¥å—å­˜å‚¨æ–‡ä»¶çš„è·¯å¾„ï¼Œæ­¤è·¯å¾„ä¸åŒ…å«æ–‡ä»¶åï¼Œè‡ªåŠ¨ç”Ÿæˆå”¯ä¸€IDä½œä¸ºæ–‡ä»¶å $path = $request-\u003ephoto-\u003estore('images'); $path = $request-\u003ephoto-\u003estore('images', 's3'); å¦‚æœä¸æƒ³è‡ªåŠ¨ç”Ÿæˆæ–‡ä»¶åï¼Œåˆ™å¯ä»¥ä½¿ç”¨è·¯å¾„ã€æ–‡ä»¶åå’Œç£ç›˜åç§°ä½œä¸ºå…¶å‚æ•°storeAsçš„æ–¹æ³• $path = $request-\u003ephoto-\u003estoreAs('images', 'filename.jpg'); $path = $request-\u003ephoto-\u003estoreAs('images', 'filename.jpg', 's3'); ","date":"2024å¹´06æœˆ16æ—¥","objectID":"/2024/06/laravel11%E8%AF%B7%E6%B1%82/:4:2","tags":["PHP","Laravel"],"title":"Laravel 11.x è¯·æ±‚","uri":"/2024/06/laravel11%E8%AF%B7%E6%B1%82/"},{"categories":["PHP","Laravel"],"content":"é…ç½®å—ä¿¡ä»»çš„ä»£ç† å¯ç”¨Laravelåº”ç”¨ç¨‹åºä¸­åŒ…å«çš„Illuminate\\Http\\Middleware\\TrustProxiesä¸­é—´ä»¶ï¼Œå¯ä»¥å¿«é€Ÿè‡ªå®šä¹‰åº”ç”¨ç¨‹åºåº”ä¿¡ä»»çš„è´Ÿè½½å‡è¡¡æˆ–ä»£ç†ã€‚ ä½¿ç”¨bootstrap/app.phpæ–‡ä»¶ä¸­çš„trustProxiesä¸­é—´ä»¶æ–¹æ³•æŒ‡å®šå—ä¿¡ä»»çš„ä»£ç†ï¼š -\u003ewithMiddleware(function (Middleware $middleware) { $middleware-\u003etrustProxies(at: [ '192.168.1.1', '192.168.1.2', ]); }) ä¹Ÿå¯ä»¥é…ç½®åº”å—ä¿¡ä»»çš„ä»£ç†æ ‡å¤´ï¼š -\u003ewithMiddleware(function (Middleware $middleware) { $middleware-\u003etrustProxies(headers: Request::HEADER_X_FORWARDED_FOR | Request::HEADER_X_FORWARDED_HOST | Request::HEADER_X_FORWARDED_PORT | Request::HEADER_X_FORWARDED_PROTO | Request::HEADER_X_FORWARDED_AWS_ELB ); }) ä¿¡ä»»æ‰€æœ‰ä»£ç† -\u003ewithMiddleware(function (Middleware $middleware) { $middleware-\u003etrustProxies(at: '*'); }) ","date":"2024å¹´06æœˆ16æ—¥","objectID":"/2024/06/laravel11%E8%AF%B7%E6%B1%82/:5:0","tags":["PHP","Laravel"],"title":"Laravel 11.x è¯·æ±‚","uri":"/2024/06/laravel11%E8%AF%B7%E6%B1%82/"},{"categories":["PHP","Laravel"],"content":"é…ç½®å—ä¿¡ä»»çš„ä¸»æœº å¯åŠ¨Illuminate\\Http\\Middleware\\TrustHosts ä¸­é—´ä»¶æ¥å®ç°é…ç½®å—ä¿¡ä»»çš„ä¸»æœºã€‚ åœ¨ bootstrap/app.php æ–‡ä»¶ä¸­è°ƒç”¨ trustHosts ä¸­é—´ä»¶æ–¹æ³•ã€‚ä½¿ç”¨æ­¤æ–¹æ³•çš„ at å‚æ•°ï¼Œå¯ä»¥æŒ‡å®šåº”ç”¨ç¨‹åºåº”å“åº”çš„ä¸»æœºåã€‚å¸¦æœ‰å…¶ä»– Host æ ‡å¤´çš„ä¼ å…¥è¯·æ±‚å°†è¢«æ‹’ç»ï¼š -\u003ewithMiddleware(function (Middleware $middleware) { $middleware-\u003etrustHosts(at: ['laravel.test']); }) é»˜è®¤æƒ…å†µä¸‹ï¼Œæ¥è‡ªåº”ç”¨ç¨‹åº URL çš„å­åŸŸçš„è¯·æ±‚ä¹Ÿä¼šè‡ªåŠ¨å—ä¿¡ä»»ã€‚å¦‚æœè¦ç¦ç”¨æ­¤è¡Œä¸ºï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹ subdomains å‚æ•°ï¼š -\u003ewithMiddleware(function (Middleware $middleware) { $middleware-\u003etrustHosts(at: ['laravel.test'], subdomains: false); }) ","date":"2024å¹´06æœˆ16æ—¥","objectID":"/2024/06/laravel11%E8%AF%B7%E6%B1%82/:6:0","tags":["PHP","Laravel"],"title":"Laravel 11.x è¯·æ±‚","uri":"/2024/06/laravel11%E8%AF%B7%E6%B1%82/"},{"categories":["PHP","Laravel"],"content":" åŸæ–‡ ","date":"2024å¹´06æœˆ16æ—¥","objectID":"/2024/06/laravel11%E6%8E%A7%E5%88%B6%E5%99%A8/:0:0","tags":["PHP","Laravel"],"title":"Laravel 11.x æ§åˆ¶å™¨","uri":"/2024/06/laravel11%E6%8E%A7%E5%88%B6%E5%99%A8/"},{"categories":["PHP","Laravel"],"content":"ä»‹ç» ä¸å…¶åœ¨è·¯ç”±æ–‡ä»¶ä¸­å°†æ‰€æœ‰è¯·æ±‚å¤„ç†é€»è¾‘å®šä¹‰ä¸ºé—­åŒ…ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨\"controller\"ç±»æ¥ç»„ç»‡è¿™äº›è¡Œä¸ºã€‚ æ§åˆ¶å™¨å¯ä»¥å°†ç›¸å…³çš„è¯·æ±‚é€»è¾‘åˆ†ç»„åˆ°ä¸€ä¸ªç±»ä¸­ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œæ§åˆ¶å™¨å­˜å‚¨åœ¨app/Http/Controllersç›®å½•ä¸­ã€‚ ","date":"2024å¹´06æœˆ16æ—¥","objectID":"/2024/06/laravel11%E6%8E%A7%E5%88%B6%E5%99%A8/:1:0","tags":["PHP","Laravel"],"title":"Laravel 11.x æ§åˆ¶å™¨","uri":"/2024/06/laravel11%E6%8E%A7%E5%88%B6%E5%99%A8/"},{"categories":["PHP","Laravel"],"content":"ç¼–å†™æ§åˆ¶å™¨ ","date":"2024å¹´06æœˆ16æ—¥","objectID":"/2024/06/laravel11%E6%8E%A7%E5%88%B6%E5%99%A8/:2:0","tags":["PHP","Laravel"],"title":"Laravel 11.x æ§åˆ¶å™¨","uri":"/2024/06/laravel11%E6%8E%A7%E5%88%B6%E5%99%A8/"},{"categories":["PHP","Laravel"],"content":"åŸºæœ¬æ§åˆ¶å™¨ ä½¿ç”¨make:controllerå‘½ä»¤å¿«é€Ÿç”Ÿæˆæ–°æ§åˆ¶å™¨ php artisan make:controller UserController æ§åˆ¶å™¨å¯ä»¥æœ‰ä»»æ„æ•°é‡çš„å…¬å…±æ–¹æ³•ï¼Œè¿™äº›æ–¹æ³•å°†å“åº”ä¼ å…¥çš„HTTPè¯·æ±‚ï¼š \u003c?php namespace App\\Http\\Controllers; use App\\Models\\User; use Illuminate\\View\\View; class UserController extends Controller { public function show(string $id): View { return view('user.profile', [ 'user' =\u003e User::findOrFail($id) ]); } } ç¼–å†™æ§åˆ¶å™¨ç±»å’Œæ–¹æ³•åï¼Œå¯ä»¥å®šä¹‰æ§åˆ¶å™¨æ–¹æ³•çš„è·¯ç”±ï¼š use App\\Http\\Controllers\\UserController; Route::get('/user/{id}', [UserController::class, 'show']); æ§åˆ¶å™¨ä¸éœ€è¦ç»§æ‰¿åŸºç±»ã€‚ç„¶è€Œï¼Œæœ‰æ—¶ç»§æ‰¿ä¸€ä¸ªåŒ…å«æ‰€æœ‰æ§åˆ¶å™¨é€šç”¨æ–¹æ³•çš„åŸºæ§åˆ¶å™¨ç±»ä¼šæ›´æ–¹ä¾¿ã€‚ ","date":"2024å¹´06æœˆ16æ—¥","objectID":"/2024/06/laravel11%E6%8E%A7%E5%88%B6%E5%99%A8/:2:1","tags":["PHP","Laravel"],"title":"Laravel 11.x æ§åˆ¶å™¨","uri":"/2024/06/laravel11%E6%8E%A7%E5%88%B6%E5%99%A8/"},{"categories":["PHP","Laravel"],"content":"å•åŠ¨ä½œæ§åˆ¶å™¨ å¦‚æœä¸€ä¸ªæ§åˆ¶å™¨åŠ¨ä½œç‰¹åˆ«å¤æ‚ï¼Œä¸ºè¿™ä¸ªå•ä¸€åŠ¨ä½œä¸“é—¨åˆ›å»ºä¸€ä¸ªæ§åˆ¶ç±»ä¼šæ›´æ–¹ä¾¿ã€‚ å¯ä»¥åœ¨æ§åˆ¶å™¨ä¸­å®šä¹‰ä¸€ä¸ªå•ä¸€çš„__invokeæ–¹æ³•ã€‚ å¯ä»¥ä½¿ç”¨make:controllerå‘½ä»¤--invokableé€‰é¡¹ç”Ÿæˆå•ä¸€åŠ¨ä½œæ§åˆ¶å™¨ï¼š php artisan make:controller ProvisionServer --invokable \u003c?php namespace App\\Http\\Controllers; use Illuminate\\Http\\Request; class ProvisionServer extends Controller { /** * Handle the incoming request. */ public function __invoke(Request $request) { // } } åœ¨ä¸ºå•åŠ¨ä½œæ§åˆ¶å™¨æ³¨å†Œè·¯ç”±æ—¶ï¼Œä¸éœ€è¦æŒ‡å®šæ§åˆ¶å™¨æ–¹æ³•ã€‚ç›¸åï¼Œå¯ä»¥ç®€å•åœ°å°†æ§åˆ¶å™¨çš„åç§°ä¼ é€’ç»™è·¯ç”±å™¨ï¼š use App\\Http\\Controllers\\ProvisionServer; Route::post('/server', ProvisionServer::class); ","date":"2024å¹´06æœˆ16æ—¥","objectID":"/2024/06/laravel11%E6%8E%A7%E5%88%B6%E5%99%A8/:2:2","tags":["PHP","Laravel"],"title":"Laravel 11.x æ§åˆ¶å™¨","uri":"/2024/06/laravel11%E6%8E%A7%E5%88%B6%E5%99%A8/"},{"categories":["PHP","Laravel"],"content":"æ§åˆ¶å™¨ä¸­é—´ä»¶ ä¸­é—´ä»¶å¯ä»¥åœ¨è·¯ç”±æ–‡ä»¶ä¸­åˆ†é…ç»™æ§åˆ¶å™¨çš„è·¯ç”±ã€‚ Route::get('profile', [UserController::class, 'show'])-\u003emiddleware('auth'); ä¹Ÿå¯ä»¥åœ¨æ§åˆ¶å™¨ç±»ä¸­æŒ‡å®šä¸­é—´ä»¶ã€‚åªéœ€æ§åˆ¶å™¨å®ç°HasMiddlewareæ¥å£ï¼Œè¯¥æ¥å£è§„å®šæ§åˆ¶å™¨åº”å…·æœ‰é™æ€middlewareæ–¹æ³•ã€‚ä»æ¬¡æ–¹æ³•ä¸­ï¼Œå¯ä»¥è¿”å›ä¸€ä¸ªä¸­é—´ä»¶æ•°ç»„ï¼Œè¯¥æ•°ç»„åº”ç”¨äºæ§åˆ¶å™¨çš„æ“ä½œï¼š \u003c?php namespace App\\Http\\Controllers; use App\\Http\\Controllers\\Controller; use Illuminate\\Routing\\Controllers\\HasMiddleware; use Illuminate\\Routing\\Controllers\\Middleware; class UserController extends Controller implements HasMiddleware { /** * Get the middleware that should be assigned to the controller. */ public static function middleware(): array { return [ 'auth', new Middleware('log', only: ['index']), new Middleware('subscribed', except: ['store']), ]; } // ... } è¿˜å¯ä»¥è®²æ§åˆ¶å™¨ä¸­é—´ä»¶å®šä¹‰æˆé—­åŒ…ï¼Œè¿™æä¾›äº†ä¸€ç§æ–¹ä¾¿çš„å½¢å¼æ¥å®šä¹‰å†…è”ä¸­é—´ä»¶ï¼Œè€Œæ— éœ€ç¼–å†™æ•´ä¸ªä¸­é—´ä»¶ç±»ï¼š use Closure; use Illuminate\\Http\\Request; /** * Get the middleware that should be assigned to the controller. */ public static function middleware(): array { return [ function (Request $request, Closure $next) { return $next($request); }, ]; } ","date":"2024å¹´06æœˆ16æ—¥","objectID":"/2024/06/laravel11%E6%8E%A7%E5%88%B6%E5%99%A8/:3:0","tags":["PHP","Laravel"],"title":"Laravel 11.x æ§åˆ¶å™¨","uri":"/2024/06/laravel11%E6%8E%A7%E5%88%B6%E5%99%A8/"},{"categories":["PHP","Laravel"],"content":"èµ„æºæ§åˆ¶å™¨ ä½¿ç”¨make:controllerå‘½ä»¤çš„--resourceé€‰é¡¹ï¼Œå¿«é€Ÿåˆ›å»ºæ§åˆ¶å™¨çš„CRUDæ“ä½œï¼š php artisan make:controller PhotoController --resource æ­¤å‘½ä»¤å°†åœ¨app/Http/Controllers/PhotoController.php ç”Ÿæˆä¸€ä¸ªæ§åˆ¶å™¨ã€‚è¯¥æ§åˆ¶å™¨å°†åŒ…å«æ¯ä¸ªå¯ç”¨èµ„æºæ“ä½œçš„æ–¹æ³•ã€‚ \u003c?php namespace App\\Http\\Controllers; use Illuminate\\Http\\Request; class PhotoController extends Controller { /** * Display a listing of the resource. */ public function index() { // } /** * Show the form for creating a new resource. */ public function create() { // } /** * Store a newly created resource in storage. */ public function store(Request $request) { // } /** * Display the specified resource. */ public function show(string $id) { // } /** * Show the form for editing the specified resource. */ public function edit(string $id) { // } /** * Update the specified resource in storage. */ public function update(Request $request, string $id) { // } /** * Remove the specified resource from storage. */ public function destroy(string $id) { // } } ç„¶åå°±å¯ä»¥æ³¨å†Œä¸€ä¸ªæŒ‡å‘è¯¥æ§åˆ¶å™¨çš„èµ„æºè·¯ç”±ï¼š use App\\Http\\Controllers\\PhotoController; Route::resource('photos', PhotoController::class); ä¹Ÿå¯ä»¥é€šè¿‡å°†æ•°ç»„ä¼ é€’ç»™resourcesæ–¹æ³•æ¥ä¸€æ¬¡æ³¨å†Œå¤šä¸ªèµ„æºæ§åˆ¶å™¨ï¼š Route::resources([ 'photos' =\u003e PhotoController::class, 'posts' =\u003e PostController::class, ]); è‡ªå®šä¹‰ç¼ºå¤±çš„æ¨¡å‹è¡Œä¸º é€šå¸¸ï¼Œå¦‚æœæœªæ‰¾åˆ°éšå¼ç»‘å®šçš„èµ„æºæ¨¡å‹ï¼Œå°†ç”Ÿæˆä¸€ä¸ª 404 HTTP å“åº”ã€‚ ç„¶è€Œï¼Œå¯ä»¥åœ¨å®šä¹‰èµ„æºè·¯ç”±æ—¶é€šè¿‡è°ƒç”¨missing æ–¹æ³•æ¥è‡ªå®šä¹‰æ­¤è¡Œä¸ºã€‚ missing æ–¹æ³•æ¥å—ä¸€ä¸ªé—­åŒ…ï¼Œå¦‚æœåœ¨ä»»ä½•èµ„æºè·¯ç”±ä¸­æ‰¾ä¸åˆ°éšå¼ç»‘å®šçš„æ¨¡å‹ï¼Œè¯¥é—­åŒ…å°†è¢«è°ƒç”¨ï¼š use App\\Http\\Controllers\\PhotoController; use Illuminate\\Http\\Request; use Illuminate\\Support\\Facades\\Redirect; Route::resource('photos', PhotoController::class) -\u003emissing(function (Request $request) { return Redirect::route('photos.index'); }); è½¯åˆ é™¤æ¨¡å‹ é€šå¸¸ï¼Œéšå¼æ¨¡å‹ç»‘å®šä¸ä¼šæ£€ç´¢å·²è½¯åˆ é™¤çš„æ¨¡å‹ï¼Œè€Œæ˜¯è¿”å› 404 HTTP å“åº”ã€‚ ç„¶è€Œï¼Œå¯ä»¥åœ¨å®šä¹‰èµ„æºè·¯ç”±æ—¶è°ƒç”¨ withTrashed æ–¹æ³•æ¥æŒ‡ç¤ºæ¡†æ¶å…è®¸è½¯åˆ é™¤çš„æ¨¡å‹ï¼š use App\\Http\\Controllers\\PhotoController; Route::resource('photos', PhotoController::class)-\u003ewithTrashed(); è°ƒç”¨ä¸å¸¦å‚æ•°çš„ withTrashed æ–¹æ³•å°†å…è®¸ showã€edit å’Œ update èµ„æºè·¯ç”±å¤„ç†è½¯åˆ é™¤çš„æ¨¡å‹ã€‚ å¯ä»¥é€šè¿‡ä¼ é€’ä¸€ä¸ªæ•°ç»„ç»™ withTrashed æ–¹æ³•æ¥æŒ‡å®šè¿™äº›è·¯ç”±çš„å­é›†ã€‚ Route::resource('photos', PhotoController::class)-\u003ewithTrashed(['show']); æŒ‡å®šèµ„æºæ¨¡å‹ å¦‚æœä½¿ç”¨è·¯ç”±æ¨¡å‹ç»‘å®šï¼Œå¹¶å¸Œæœ›èµ„æºæ§åˆ¶å™¨çš„æ–¹æ³•ç±»å‹æç¤ºæ¨¡å‹å®ä¾‹ï¼Œé‚£ä¹ˆå¯ä»¥åœ¨ç”Ÿæˆæ§åˆ¶å™¨æ—¶ä½¿ç”¨ --model é€‰é¡¹ã€‚ php artisan make:controller PhotoController --model=Photo --resource ç”Ÿæˆè¡¨å•è¯·æ±‚ åœ¨ç”Ÿæˆèµ„æºæ§åˆ¶å™¨æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ --requests é€‰é¡¹ç”Ÿæˆè¡¨å•è¯·æ±‚ç±»ï¼Œä»¥ä¾›æ§åˆ¶å™¨çš„å­˜å‚¨ï¼ˆcreateï¼‰å’Œæ›´æ–°ï¼ˆupdateï¼‰æ–¹æ³•ä½¿ç”¨ã€‚ php artisan make:controller PhotoController --model=Photo --resource --requests ","date":"2024å¹´06æœˆ16æ—¥","objectID":"/2024/06/laravel11%E6%8E%A7%E5%88%B6%E5%99%A8/:4:0","tags":["PHP","Laravel"],"title":"Laravel 11.x æ§åˆ¶å™¨","uri":"/2024/06/laravel11%E6%8E%A7%E5%88%B6%E5%99%A8/"},{"categories":["PHP","Laravel"],"content":"éƒ¨åˆ†èµ„æºè·¯ç”± å£°æ˜èµ„æºè·¯ç”±æ—¶ï¼Œå¯ä»¥æŒ‡å®šæ§åˆ¶å™¨åº”å¤„ç†çš„æ“ä½œå­é›†ï¼Œè€Œä¸æ˜¯å®Œæˆçš„é»˜è®¤æ“ä½œé›†ï¼š use App\\Http\\Controllers\\PhotoController; Route::resource('photos', PhotoController::class)-\u003eonly([ 'index', 'show' ]); Route::resource('photos', PhotoController::class)-\u003eexcept([ 'create', 'store', 'update', 'destroy' ]); API èµ„æºè·¯ç”± åœ¨å£°æ˜å°†ç”± API ä½¿ç”¨çš„èµ„æºè·¯ç”±æ—¶ï¼Œå¯ä»¥ä½¿ç”¨apiResourceæ–¹æ³•è‡ªåŠ¨æ’é™¤æä¾› HTML æ¨¡æ¿ï¼ˆå¦‚ create å’Œ edit ï¼‰çš„è·¯ç”±ï¼š use App\\Http\\Controllers\\PhotoController; Route::apiResource('photos', PhotoController::class); åŒæ ·ï¼Œä¹Ÿå¯ä»¥é€šè¿‡å°†æ•°ç»„ä¼ é€’ç»™apiResourceæ–¹æ³•ä¸€æ¬¡æ³¨å†Œå¤šä¸ªAPIèµ„æºæ§åˆ¶å™¨ï¼š use App\\Http\\Controllers\\PhotoController; use App\\Http\\Controllers\\PostController; Route::apiResources([ 'photos' =\u003e PhotoController::class, 'posts' =\u003e PostController::class, ]); å¯ä»¥é€šè¿‡make:controllerå‘½ä»¤çš„--apiå¿«é€Ÿç”ŸæˆAPIèµ„æºè·¯ç”±ï¼š php artisan make:controller PhotoController --api ","date":"2024å¹´06æœˆ16æ—¥","objectID":"/2024/06/laravel11%E6%8E%A7%E5%88%B6%E5%99%A8/:4:1","tags":["PHP","Laravel"],"title":"Laravel 11.x æ§åˆ¶å™¨","uri":"/2024/06/laravel11%E6%8E%A7%E5%88%B6%E5%99%A8/"},{"categories":["PHP","Laravel"],"content":"åµŒå¥—èµ„æº ä¸ºäº†åµŒå¥—èµ„æºæ§åˆ¶å™¨ï¼Œå¯ä»¥åœ¨è·¯ç”±å£°æ˜ä¸­ä½¿ç”¨.ç¬¦å·ï¼š use App\\Http\\Controllers\\PhotoCommentController; Route::resource('photos.comments', PhotoCommentController::class); // /photos/{photo}/comments/{comment} æµ…å±‚åµŒå¥— é€šå¸¸æƒ…å†µä¸‹ï¼Œä¸å¿…åœ¨ URI ä¸­åŒæ—¶åŒ…å«çˆ¶èµ„æºå’Œå­èµ„æºçš„ IDï¼Œå› ä¸ºå­èµ„æºçš„ ID å·²ç»æ˜¯å”¯ä¸€æ ‡è¯†ç¬¦ã€‚ å½“ä½¿ç”¨è‡ªå¢ä¸»é”®ç­‰å”¯ä¸€æ ‡è¯†ç¬¦æ¥è¯†åˆ«æ¨¡å‹åœ¨ URI æ®µä¸­æ—¶ï¼Œå¯ä»¥é€‰æ‹©ä½¿ç”¨ â€œæµ…åµŒå¥—â€ï¼š use App\\Http\\Controllers\\CommentController; Route::resource('photos.comments', CommentController::class)-\u003eshallow(); ","date":"2024å¹´06æœˆ16æ—¥","objectID":"/2024/06/laravel11%E6%8E%A7%E5%88%B6%E5%99%A8/:4:2","tags":["PHP","Laravel"],"title":"Laravel 11.x æ§åˆ¶å™¨","uri":"/2024/06/laravel11%E6%8E%A7%E5%88%B6%E5%99%A8/"},{"categories":["PHP","Laravel"],"content":"å‘½åèµ„æºè·¯ç”± é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰èµ„æºæ§åˆ¶å™¨æ“ä½œéƒ½å…·æœ‰è·¯ç”±åç§°ï¼Œå¯ä»¥é€šè¿‡ä¼ é€’å…·æœ‰æ‰€éœ€è·¯ç”±åç§°çš„nameæ•°æ®æ¥è¦†ç›–è¿™äº›åç§°ï¼š use App\\Http\\Controllers\\PhotoController; Route::resource('photos', PhotoController::class)-\u003enames([ 'create' =\u003e 'photos.build' ]); ","date":"2024å¹´06æœˆ16æ—¥","objectID":"/2024/06/laravel11%E6%8E%A7%E5%88%B6%E5%99%A8/:4:3","tags":["PHP","Laravel"],"title":"Laravel 11.x æ§åˆ¶å™¨","uri":"/2024/06/laravel11%E6%8E%A7%E5%88%B6%E5%99%A8/"},{"categories":["PHP","Laravel"],"content":"å‘½åèµ„æºè·¯ç”±å‚æ•° é»˜è®¤æƒ…å†µä¸‹ï¼ŒRoute::resource æ ¹æ®èµ„æºåç§°çš„å•æ•°å½¢å¼åˆ›å»ºèµ„æºè·¯ç”±çš„è·¯ç”±å‚æ•°ã€‚ å¯ä»¥è½»æ¾åœ°åœ¨æ¯ä¸ªèµ„æºåŸºç¡€ä¸Šä½¿ç”¨ parameters æ–¹æ³•è¦†ç›–è¿™ä¸€è¡Œä¸ºã€‚ ä¼ é€’ç»™ parameters æ–¹æ³•çš„æ•°ç»„åº”è¯¥æ˜¯èµ„æºåç§°å’Œå‚æ•°åç§°çš„å…³è”æ•°ç»„ã€‚ use App\\Http\\Controllers\\AdminUserController; Route::resource('users', AdminUserController::class)-\u003eparameters([ 'users' =\u003e 'admin_user' ]); // URI // /users/{admin_user} ","date":"2024å¹´06æœˆ16æ—¥","objectID":"/2024/06/laravel11%E6%8E%A7%E5%88%B6%E5%99%A8/:4:4","tags":["PHP","Laravel"],"title":"Laravel 11.x æ§åˆ¶å™¨","uri":"/2024/06/laravel11%E6%8E%A7%E5%88%B6%E5%99%A8/"},{"categories":["PHP","Laravel"],"content":"ç¡®å®šèµ„æºè·¯ç”±çš„èŒƒå›´ Laravel çš„ä½œç”¨åŸŸéšå¼æ¨¡å‹ç»‘å®šåŠŸèƒ½å¯ä»¥è‡ªåŠ¨å°†åµŒå¥—ç»‘å®šä½œç”¨åŸŸåŒ–ï¼Œä»¥ç¡®ä¿è§£æçš„å­æ¨¡å‹ç¡®å®å±äºçˆ¶æ¨¡å‹ã€‚ é€šè¿‡åœ¨å®šä¹‰åµŒå¥—èµ„æºæ—¶ä½¿ç”¨ scoped æ–¹æ³•å¯ç”¨è‡ªåŠ¨ä½œç”¨åŸŸåŒ–ï¼Œå¹¶æŒ‡ç¤º Laravel ä½¿ç”¨å“ªä¸ªå­—æ®µæ¥æ£€ç´¢å­èµ„æºï¼š use App\\Http\\Controllers\\PhotoCommentController; Route::resource('photos.comments', PhotoCommentController::class)-\u003escoped([ 'comment' =\u003e 'slug', ]); // URI // /photos/{photo}/comments/{comment:slug} ","date":"2024å¹´06æœˆ16æ—¥","objectID":"/2024/06/laravel11%E6%8E%A7%E5%88%B6%E5%99%A8/:4:5","tags":["PHP","Laravel"],"title":"Laravel 11.x æ§åˆ¶å™¨","uri":"/2024/06/laravel11%E6%8E%A7%E5%88%B6%E5%99%A8/"},{"categories":["PHP","Laravel"],"content":"æœ¬åœ°åŒ–èµ„æºURI é»˜è®¤æƒ…å†µä¸‹ï¼ŒRoute::resource ä¼šä½¿ç”¨è‹±è¯­åŠ¨è¯å’Œå¤æ•°è§„åˆ™åˆ›å»ºèµ„æºçš„ URIã€‚ å¦‚æœéœ€è¦æœ¬åœ°åŒ– create å’Œ edit åŠ¨ä½œçš„åŠ¨è¯ï¼Œå¯ä»¥ä½¿ç”¨ Route::resourceVerbs æ–¹æ³•ã€‚ è¿™å¯ä»¥åœ¨åº”ç”¨ç¨‹åºçš„ App\\Providers\\AppServiceProvider ä¸­çš„ boot æ–¹æ³•å¼€å§‹æ—¶å®Œæˆï¼š /** * Bootstrap any application services. */ public function boot(): void { Route::resourceVerbs([ 'create' =\u003e 'crear', 'edit' =\u003e 'editar', ]); } ","date":"2024å¹´06æœˆ16æ—¥","objectID":"/2024/06/laravel11%E6%8E%A7%E5%88%B6%E5%99%A8/:4:6","tags":["PHP","Laravel"],"title":"Laravel 11.x æ§åˆ¶å™¨","uri":"/2024/06/laravel11%E6%8E%A7%E5%88%B6%E5%99%A8/"},{"categories":["PHP","Laravel"],"content":"è¡¥å……èµ„æºæ§åˆ¶å™¨ å¦‚æœéœ€è¦åœ¨èµ„æºæ§åˆ¶å™¨ä¹‹å¤–æ·»åŠ é¢å¤–çš„è·¯ç”±ï¼Œè¶…å‡ºäº†é»˜è®¤çš„èµ„æºè·¯ç”±é›†åˆï¼Œåº”è¯¥åœ¨è°ƒç”¨ Route::resourceæ–¹æ³•ä¹‹å‰å®šä¹‰è¿™äº›è·¯ç”±ï¼›å¦åˆ™ï¼Œèµ„æºæ–¹æ³•å®šä¹‰çš„è·¯ç”±å¯èƒ½ä¼šæ„å¤–åœ°ä¼˜å…ˆäºè¡¥å……è·¯ç”±ï¼š use App\\Http\\Controller\\PhotoController; Route::get('/photos/popular', [PhotoController::class, 'popular']); Route::resource('photos', PhotoController::class); ","date":"2024å¹´06æœˆ16æ—¥","objectID":"/2024/06/laravel11%E6%8E%A7%E5%88%B6%E5%99%A8/:4:7","tags":["PHP","Laravel"],"title":"Laravel 11.x æ§åˆ¶å™¨","uri":"/2024/06/laravel11%E6%8E%A7%E5%88%B6%E5%99%A8/"},{"categories":["PHP","Laravel"],"content":"å•ä¾‹èµ„æºæ§åˆ¶å™¨ æœ‰æ—¶ï¼Œåº”ç”¨ç¨‹åºä¼šæœ‰ä¸€äº›èµ„æºåªèƒ½æœ‰å•ä¸ªå®ä¾‹ï¼Œé‚£ä¹ˆå¯ä»¥æ³¨å†Œä¸€ä¸ªsingletonèµ„æºæ§åˆ¶å™¨ï¼š use App\\Http\\Controllers\\ProfileController; use Illuminate\\Support\\Facades\\Route; Route::singleton('profile', ProfileController::class); å•ä¾‹å®ä¾‹èµ„æºä¹Ÿå¯ä»¥åµŒå¥—åœ¨æ ‡å‡†èµ„æºä¸­ï¼š Route::singleton('photos.comments', CommentController::class); å¯åˆ›å»ºçš„å•ä¾‹èµ„æº å¯ä»¥åœ¨æ³¨å†Œå•ä¾‹å®ä¾‹èµ„æºè·¯ç”±æ—¶è°ƒç”¨creatableæ–¹æ³•ï¼š Route::singleton('photos.thumbnail', ThumbnailController::class)-\u003ecreatable(); ä½¿ç”¨destroyableæ–¹æ³•æ³¨å†Œå•ä¾‹èµ„æºçš„DELETEè·¯ç”±ï¼Œä½†ä¸æ³¨å†Œåˆ›å»ºæˆ–å­˜å‚¨è·¯ç”±ï¼š Route::singleton('photos.comments', CommentController::class)-\u003edestroyable(); API å•ä¾‹èµ„æº apiSingletonæ–¹æ³•å¯ç”¨äºæ³¨å†ŒAPIæ“ä½œçš„å•ä¾‹èµ„æºï¼š Route::apiSingleton('photos', PhotoController::class); ä¹Ÿå¯ä»¥ä½¿ç”¨creatableå°†èµ„æºæ³¨å†Œstoreå’Œdestroyè·¯ç”±ï¼š Route::apiSingleton('photos', PhotoController::class)-\u003ecreatable(); åŒæ ·çš„destroyableæ–¹æ³•ä¾æ—§å¯ç”¨ï¼š Route::apiSingleton('photos', PhotoController::class)-\u003edestroyable(); ","date":"2024å¹´06æœˆ16æ—¥","objectID":"/2024/06/laravel11%E6%8E%A7%E5%88%B6%E5%99%A8/:4:8","tags":["PHP","Laravel"],"title":"Laravel 11.x æ§åˆ¶å™¨","uri":"/2024/06/laravel11%E6%8E%A7%E5%88%B6%E5%99%A8/"},{"categories":["PHP","Laravel"],"content":"ä¾èµ–æ³¨å…¥å’Œæ§åˆ¶å™¨ ","date":"2024å¹´06æœˆ16æ—¥","objectID":"/2024/06/laravel11%E6%8E%A7%E5%88%B6%E5%99%A8/:5:0","tags":["PHP","Laravel"],"title":"Laravel 11.x æ§åˆ¶å™¨","uri":"/2024/06/laravel11%E6%8E%A7%E5%88%B6%E5%99%A8/"},{"categories":["PHP","Laravel"],"content":"æ„é€ å‡½æ•°æ³¨å…¥ Laravelçš„æœåŠ¡å®¹å™¨ç”¨äºè§£ææ‰€æœ‰çš„Laravelæ§åˆ¶å™¨ã€‚ å› æ­¤ï¼Œå¯ä»¥åœ¨æ§åˆ¶å™¨çš„æ„é€ å‡½æ•°ä¸­å¯¹æ§åˆ¶å™¨å¯èƒ½éœ€è¦çš„ä»»ä½•ä¾èµ–é¡¹è¿›è¡Œç±»å‹æç¤ºã€‚ å£°æ˜çš„ä¾èµ–é¡¹å°†è‡ªåŠ¨è¢«è§£æå¹¶æ³¨å…¥åˆ°æ§åˆ¶å™¨å®ä¾‹ä¸­ã€‚ \u003c?php namespace App\\Http\\Controllers; use App\\Repositories\\UserRepository; class UserController extends Controller { /** * Create a new controller instance. */ public function __construct( protected UserRepository $users, ) {} } ","date":"2024å¹´06æœˆ16æ—¥","objectID":"/2024/06/laravel11%E6%8E%A7%E5%88%B6%E5%99%A8/:5:1","tags":["PHP","Laravel"],"title":"Laravel 11.x æ§åˆ¶å™¨","uri":"/2024/06/laravel11%E6%8E%A7%E5%88%B6%E5%99%A8/"},{"categories":["PHP","Laravel"],"content":"æ–¹æ³•æ³¨å…¥ é™¤äº†æ„é€ å‡½æ•°æ³¨å…¥å¤–ï¼Œè¿˜å¯ä»¥åœ¨æ§åˆ¶å™¨çš„æ–¹æ³•ä¸­å¯¹ä¾èµ–é¡¹è¿›è¡Œç±»å‹æç¤ºã€‚ ä¸€ä¸ªå¸¸è§çš„ç”¨ä¾‹æ˜¯åœ¨æ§åˆ¶å™¨æ–¹æ³•ä¸­æ³¨å…¥ Illuminate\\Http\\Request å®ä¾‹ï¼š \u003c?php namespace App\\Http\\Controllers; use Illuminate\\Http\\RedirectResponse; use Illuminate\\Http\\Request; class UserController extends Controller { /** * Store a new user. */ public function store(Request $request): RedirectResponse { $name = $request-\u003ename; // Store the user... return redirect('/users'); } } å¦‚æœæ§åˆ¶å™¨æ–¹æ³•è¿˜éœ€è¦ä»è·¯ç”±å‚æ•°ä¸­è·å–è¾“å…¥ï¼Œè¯·åœ¨å…¶ä»–ä¾èµ–é¡¹ä¹‹ååˆ—å‡ºè·¯ç”±å‚æ•°ã€‚ ä¾‹å¦‚ï¼Œå¦‚æœè·¯ç”±å®šä¹‰å¦‚ä¸‹æ‰€ç¤ºï¼š use App\\Http\\Controllers\\UserController; Route::put('/user/{id}', [UserController::class, 'update']); ä»ç„¶å¯ä»¥å¯¹ Illuminate\\Http\\Request è¿›è¡Œç±»å‹æç¤ºï¼Œå¹¶é€šè¿‡ä»¥ä¸‹æ–¹å¼è®¿é—® id å‚æ•°ï¼Œå®šä¹‰æ§åˆ¶å™¨æ–¹æ³•å¦‚ä¸‹æ‰€ç¤º: \u003c?php namespace App\\Http\\Controllers; use Illuminate\\Http\\RedirectResponse; use Illuminate\\Http\\Request; class UserController extends Controller { /** * Update the given user. */ public function update(Request $request, string $id): RedirectResponse { // Update the user... return redirect('/users'); } } ","date":"2024å¹´06æœˆ16æ—¥","objectID":"/2024/06/laravel11%E6%8E%A7%E5%88%B6%E5%99%A8/:5:2","tags":["PHP","Laravel"],"title":"Laravel 11.x æ§åˆ¶å™¨","uri":"/2024/06/laravel11%E6%8E%A7%E5%88%B6%E5%99%A8/"},{"categories":["PHP","Laravel"],"content":" åŸæ–‡ ","date":"2024å¹´06æœˆ16æ—¥","objectID":"/2024/06/laravel11csrf%E4%BF%9D%E6%8A%A4/:0:0","tags":["PHP","Laravel"],"title":"Laravel 11.x CSRFä¿æŠ¤","uri":"/2024/06/laravel11csrf%E4%BF%9D%E6%8A%A4/"},{"categories":["PHP","Laravel"],"content":"ä»‹ç» è·¨ç«™è¯·æ±‚ä¼ªé€ ï¼ˆCSRFï¼‰æ˜¯ä¸€ç§æ¶æ„åˆ©ç”¨æ–¹å¼ï¼Œé€šè¿‡è¯¥æ–¹å¼æœªç»æˆæƒçš„å‘½ä»¤ä¼šä»£è¡¨å·²éªŒè¯ç”¨æˆ·æ‰§è¡Œã€‚ Laravel æä¾›äº†ç®€å•çš„æ–¹æ³•æ¥ä¿æŠ¤åº”ç”¨ç¨‹åºå…å—è·¨ç«™è¯·æ±‚ä¼ªé€ ï¼ˆCSRFï¼‰æ”»å‡»çš„å½±å“ã€‚ ","date":"2024å¹´06æœˆ16æ—¥","objectID":"/2024/06/laravel11csrf%E4%BF%9D%E6%8A%A4/:1:0","tags":["PHP","Laravel"],"title":"Laravel 11.x CSRFä¿æŠ¤","uri":"/2024/06/laravel11csrf%E4%BF%9D%E6%8A%A4/"},{"categories":["PHP","Laravel"],"content":"é˜»æ­¢ CSRF è¯·æ±‚ Laravelè‡ªåŠ¨ä¸ºåº”ç”¨ç¨‹åºç®¡ç†çš„æ¯ä¸ªæ´»åŠ¨ç”¨æˆ·ä¼šè¯ç”Ÿæˆä¸€ä¸ªCSRFâ€œtokenâ€ã€‚ æ­¤ä»¤ç‰Œç”¨äºéªŒè¯å·²éªŒè¯ç”¨æˆ·å®é™…ä¸Šæ˜¯æ­£åœ¨å‘åº”ç”¨ç¨‹åºå‘å‡ºè¯·æ±‚çš„äººã€‚ ç”±äºæ­¤ä»¤ç‰Œå­˜å‚¨åœ¨ç”¨æˆ·çš„ä¼šè¯ä¸­ï¼Œå¹¶ä¸”æ¯æ¬¡ä¼šè¯é‡æ–°ç”Ÿæˆæ—¶éƒ½ä¼šæ›´æ”¹ï¼Œå› æ­¤æ¶æ„åº”ç”¨ç¨‹åºæ— æ³•è®¿é—®å®ƒã€‚ å¯ä»¥é€šè¿‡è¯·æ±‚çš„ä¼šè¯æˆ–è€…é€šè¿‡ csrf_token è¾…åŠ©å‡½æ•°æ¥è®¿é—®å½“å‰ä¼šè¯çš„CSRFä»¤ç‰Œ use Illuminate\\Http\\Request; Route::get('/token', function (Request $request) { $token = $request-\u003esession()-\u003etoken(); $token = csrf_token(); // ... }); æ¯å½“æ‚¨å®šä¹‰ä¸€ä¸ª â€œPOSTâ€ã€â€œPUTâ€ã€â€œPATCHâ€ æˆ– â€œDELETEâ€ çš„ HTML è¡¨å•æ—¶ï¼Œéƒ½åº”è¯¥åŒ…å«ä¸€ä¸ªéšè—çš„ CSRF _token å­—æ®µï¼Œä»¥ä¾¿CSRFä¿æŠ¤ä¸­é—´ä»¶å¯ä»¥éªŒè¯è¯·æ±‚ã€‚ ä¸ºäº†æ–¹ä¾¿èµ·è§ï¼Œå¯ä»¥ä½¿ç”¨ @csrf Blade æŒ‡ä»¤æ¥ç”Ÿæˆéšè—çš„ä»¤ç‰Œè¾“å…¥å­—æ®µï¼š \u003cform method=\"POST\" action=\"/profile\"\u003e @csrf \u003c!-- Equivalent to... --\u003e \u003cinput type=\"hidden\" name=\"_token\" value=\"{{ csrf_token() }}\" /\u003e \u003c/form\u003e Illuminate\\Foundation\\Http\\Middleware\\ValidateCsrfToken ä¸­é—´ä»¶é»˜è®¤åŒ…å«åœ¨ web ä¸­é—´ä»¶ç»„ä¸­ï¼Œå®ƒä¼šè‡ªåŠ¨éªŒè¯è¯·æ±‚è¾“å…¥ä¸­çš„ä»¤ç‰Œæ˜¯å¦ä¸ä¼šè¯ä¸­å­˜å‚¨çš„ä»¤ç‰ŒåŒ¹é…ã€‚å½“è¿™ä¸¤ä¸ªä»¤ç‰ŒåŒ¹é…æ—¶ï¼Œå°±å¯ä»¥ç¡®å®šå·²éªŒè¯çš„ç”¨æˆ·æ˜¯å‘èµ·è¯·æ±‚çš„ç”¨æˆ·ã€‚ ","date":"2024å¹´06æœˆ16æ—¥","objectID":"/2024/06/laravel11csrf%E4%BF%9D%E6%8A%A4/:2:0","tags":["PHP","Laravel"],"title":"Laravel 11.x CSRFä¿æŠ¤","uri":"/2024/06/laravel11csrf%E4%BF%9D%E6%8A%A4/"},{"categories":["PHP","Laravel"],"content":"ä»CSRFä¿æŠ¤ä¸­æ’é™¤URI æœ‰æ—¶éœ€è¦ä»CSRFä¿æŠ¤ä¸­æ’é™¤ä¸€ç»„URIã€‚ -\u003ewithMiddleware(function (Middleware $middleware) { $middleware-\u003evalidateCsrfTokens(except: [ 'stripe/*', 'http://example.com/foo/bar', 'http://example.com/foo/*', ]); }) ä¸ºäº†æ–¹ä¾¿èµ·è§ï¼Œåœ¨è¿è¡Œtestsæ—¶ï¼Œæ‰€æœ‰è·¯ç”±éƒ½ä¼šè‡ªåŠ¨ç¦ç”¨ CSRF ä¸­é—´ä»¶ã€‚ ","date":"2024å¹´06æœˆ16æ—¥","objectID":"/2024/06/laravel11csrf%E4%BF%9D%E6%8A%A4/:2:1","tags":["PHP","Laravel"],"title":"Laravel 11.x CSRFä¿æŠ¤","uri":"/2024/06/laravel11csrf%E4%BF%9D%E6%8A%A4/"},{"categories":["PHP","Laravel"],"content":"X-CSRF-Token é™¤äº†æ£€æŸ¥ä½œä¸º POST å‚æ•°çš„ CSRF ä»¤ç‰Œå¤–ï¼Œé»˜è®¤åŒ…å«åœ¨ web ä¸­é—´ä»¶ç»„ä¸­çš„ Illuminate\\Foundation\\Http\\Middleware\\ValidateCsrfToken ä¸­é—´ä»¶è¿˜ä¼šæ£€æŸ¥ X-CSRF-TOKEN è¯·æ±‚å¤´ã€‚ ä¾‹å¦‚ï¼Œå°†ä»¤ç‰Œå­˜å‚¨åœ¨ä¸€ä¸ª HTML å…ƒæ ‡è®°ä¸­ã€‚ \u003cmeta name=\"csrf-token\" content=\"{{ csrf_token() }}\"\u003e ç„¶åï¼Œåœ¨å‘é€ AJAX è¯·æ±‚æ—¶ï¼Œå¯ä»¥ä»å…ƒæ ‡è®°ä¸­è·å–ä»¤ç‰Œï¼Œå¹¶å°†å…¶åŒ…å«åœ¨è¯·æ±‚å¤´ä¸­ï¼š let token = document.querySelector('meta[name=\"csrf-token\"]').getAttribute('content'); fetch('/example', { method: 'POST', headers: { 'X-CSRF-TOKEN': token, 'Content-Type': 'application/json' }, body: JSON.stringify({ key: 'value' }) }); ","date":"2024å¹´06æœˆ16æ—¥","objectID":"/2024/06/laravel11csrf%E4%BF%9D%E6%8A%A4/:3:0","tags":["PHP","Laravel"],"title":"Laravel 11.x CSRFä¿æŠ¤","uri":"/2024/06/laravel11csrf%E4%BF%9D%E6%8A%A4/"},{"categories":["PHP","Laravel"],"content":"X-XSRF-Token Laravel å°†å½“å‰çš„ CSRF ä»¤ç‰Œå­˜å‚¨åœ¨ä¸€ä¸ªåŠ å¯†çš„ XSRF-TOKEN cookie ä¸­ï¼Œè¯¥ cookie åŒ…å«åœ¨æ¡†æ¶ç”Ÿæˆçš„æ¯ä¸ªå“åº”ä¸­ã€‚å¯ä»¥ä½¿ç”¨è¿™ä¸ª cookie çš„å€¼æ¥è®¾ç½® X-XSRF-TOKEN è¯·æ±‚å¤´ã€‚ ä¾‹å¦‚ï¼Œåœ¨å‘é€ AJAX è¯·æ±‚æ—¶ï¼Œå¯ä»¥ä» XSRF-TOKEN cookie ä¸­è·å–ä»¤ç‰Œï¼Œå¹¶å°†å…¶åŒ…å«åœ¨è¯·æ±‚å¤´ä¸­ï¼š let token = document.cookie.split('; ') .find(row =\u003e row.startsWith('XSRF-TOKEN=')) .split('=')[1]; fetch('/example', { method: 'POST', headers: { 'X-XSRF-TOKEN': token, 'Content-Type': 'application/json' }, body: JSON.stringify({ key: 'value' }) }); è¿™æ ·ï¼Œæ‚¨çš„è¯·æ±‚å°†åŒ…å« X-XSRF-TOKEN è¯·æ±‚å¤´ï¼Œç”¨äºéªŒè¯ CSRF ä»¤ç‰Œã€‚ ","date":"2024å¹´06æœˆ16æ—¥","objectID":"/2024/06/laravel11csrf%E4%BF%9D%E6%8A%A4/:4:0","tags":["PHP","Laravel"],"title":"Laravel 11.x CSRFä¿æŠ¤","uri":"/2024/06/laravel11csrf%E4%BF%9D%E6%8A%A4/"},{"categories":["PHP","Laravel"],"content":" åŸæ–‡ ","date":"2024å¹´06æœˆ15æ—¥","objectID":"/2024/06/laravel11%E4%B8%AD%E9%97%B4%E4%BB%B6/:0:0","tags":["PHP","Laravel"],"title":"Laravel 11.x ä¸­é—´ä»¶","uri":"/2024/06/laravel11%E4%B8%AD%E9%97%B4%E4%BB%B6/"},{"categories":["PHP","Laravel"],"content":"ä»‹ç» ä¸­é—´ä»¶ä¸ºæ£€æŸ¥å’Œè¿‡æ»¤è¿›å…¥åº”ç”¨ç¨‹åºçš„HTTPè¯·æ±‚æä¾›äº†ä¸€ç§ä¾¿æ·çš„æœºåˆ¶ã€‚ ","date":"2024å¹´06æœˆ15æ—¥","objectID":"/2024/06/laravel11%E4%B8%AD%E9%97%B4%E4%BB%B6/:1:0","tags":["PHP","Laravel"],"title":"Laravel 11.x ä¸­é—´ä»¶","uri":"/2024/06/laravel11%E4%B8%AD%E9%97%B4%E4%BB%B6/"},{"categories":["PHP","Laravel"],"content":"å®šä¹‰ä¸­é—´ä»¶ make:middlewareå‘½ä»¤ç”¨äºåˆ›å»ºæ–°çš„ä¸­é—´ä»¶ã€‚ php artisan make:middleware EnsureTokenIsValid æ­¤å‘½ä»¤å°†åœ¨app/Http/Middlewareç›®å½•ä¸­æ”¾ç½®ä¸€ä¸ªæ–°EnsureTokenIsValidç±»ã€‚ \u003c?php namespace App\\Http\\Middleware; use Closure; use Illuminate\\Http\\Request; use Symfony\\Component\\HttpFoundation\\Response; class EnsureTokenIsValid { /** * Handle an incoming request. * * @param \\Closure(\\Illuminate\\Http\\Request): (\\Symfony\\Component\\HttpFoundation\\Response) $next */ public function handle(Request $request, Closure $next): Response { if ($request-\u003einput('token') !== 'my-secret-token') { return response('This action is unauthorized.', 401); } return $next($request); } } ","date":"2024å¹´06æœˆ15æ—¥","objectID":"/2024/06/laravel11%E4%B8%AD%E9%97%B4%E4%BB%B6/:2:0","tags":["PHP","Laravel"],"title":"Laravel 11.x ä¸­é—´ä»¶","uri":"/2024/06/laravel11%E4%B8%AD%E9%97%B4%E4%BB%B6/"},{"categories":["PHP","Laravel"],"content":"ä¸­é—´ä»¶å’Œå“åº” ä¸­é—´ä»¶å¯ä»¥åœ¨å°†è¯·æ±‚ä¼ é€’åˆ°åº”ç”¨ç¨‹åºæ›´æ·±å¤„ä¹‹å‰æˆ–ä¹‹åæ‰§è¡Œä»»åŠ¡ã€‚ ä¾‹å¦‚ï¼Œä»¥ä¸‹ä¸­é—´ä»¶ä¼šåœ¨è¯·æ±‚è¢«åº”ç”¨ç¨‹åºå¤„ç†ä¹‹å‰æ‰§è¡ŒæŸäº›ä»»åŠ¡ \u003c?php namespace App\\Http\\Middleware; use Closure; use Illuminate\\Http\\Request; use Symfony\\Component\\HttpFoundation\\Response; class BeforeMiddleware { /** * Handle an incoming request. * * @param \\Closure(\\Illuminate\\Http\\Request): (\\Symfony\\Component\\HttpFoundation\\Response) $next */ public function handle(Request $request, Closure $next): Response { // Perform action return $next($request); } } ä»¥ä¸‹ä¸­é—´ä»¶å°†åœ¨åº”ç”¨ç¨‹åºå¤„ç†è¯·æ±‚åæ‰§è¡Œå…¶ä»»åŠ¡ï¼š \u003c?php namespace App\\Http\\Middleware; use Closure; use Illuminate\\Http\\Request; use Symfony\\Component\\HttpFoundation\\Response; class AfterMiddleware { /** * Handle an incoming request. * * @param \\Closure(\\Illuminate\\Http\\Request): (\\Symfony\\Component\\HttpFoundation\\Response) $next */ public function handle(Request $request, Closure $next): Response { $response = $next($request); // Perform action return $response; } } ","date":"2024å¹´06æœˆ15æ—¥","objectID":"/2024/06/laravel11%E4%B8%AD%E9%97%B4%E4%BB%B6/:2:1","tags":["PHP","Laravel"],"title":"Laravel 11.x ä¸­é—´ä»¶","uri":"/2024/06/laravel11%E4%B8%AD%E9%97%B4%E4%BB%B6/"},{"categories":["PHP","Laravel"],"content":"æ³¨å†Œä¸­é—´ä»¶ ","date":"2024å¹´06æœˆ15æ—¥","objectID":"/2024/06/laravel11%E4%B8%AD%E9%97%B4%E4%BB%B6/:3:0","tags":["PHP","Laravel"],"title":"Laravel 11.x ä¸­é—´ä»¶","uri":"/2024/06/laravel11%E4%B8%AD%E9%97%B4%E4%BB%B6/"},{"categories":["PHP","Laravel"],"content":"å…¨å±€ä¸­é—´ä»¶ å¦‚æœéœ€è¦ä¸­é—´ä»¶åœ¨æ¯ä¸ªHTTPè¯·æ±‚åˆ°è¾¾åº”ç”¨ç¨‹åºæ—¶éƒ½è¿è¡Œï¼Œé‚£ä¹ˆå¯ä»¥å°†å®ƒé™„åŠ åˆ°åº”ç”¨ç¨‹åºçš„å…¨å±€ä¸­é—´ä»¶ä¸­ï¼Œåœ¨åº”ç”¨ç¨‹åºçš„bootstrap/app.phpæ–‡ä»¶ä¸­è¿›è¡Œé…ç½® use App\\Http\\Middleware\\EnsureTokenIsValid; -\u003ewithMiddleware(function (Middleware $middleware) { $middleware-\u003eappend(EnsureTokenIsValid::class); }) åœ¨ withMiddleware é—­åŒ…ä¸­æä¾›çš„ $middleware å¯¹è±¡æ˜¯ Illuminate\\Foundation\\Configuration\\Middleware çš„å®ä¾‹ï¼Œè´Ÿè´£ç®¡ç†åˆ†é…ç»™åº”ç”¨ç¨‹åºè·¯ç”±çš„ä¸­é—´ä»¶ã€‚append æ–¹æ³•å°†ä¸­é—´ä»¶æ·»åŠ åˆ°å…¨å±€ä¸­é—´ä»¶åˆ—è¡¨çš„æœ«å°¾ã€‚ å¦‚æœéœ€è¦å°†ä¸­é—´ä»¶æ·»åŠ åˆ°åˆ—è¡¨çš„å¼€å¤´ï¼Œåº”è¯¥ä½¿ç”¨ prepend æ–¹æ³•ã€‚ æ‰‹åŠ¨ç®¡ç†Laravelé»˜è®¤å…¨å±€ä¸­é—´ä»¶ å¯ä»¥ä½¿ç”¨useæ–¹æ³•å¯¹Laravelæä¾›çš„é»˜è®¤å…¨å±€ä¸­é—´ä»¶è¿›è¡Œæ‰‹åŠ¨ç®¡ç†ï¼Œæ ¹æ®æ‰€éœ€è°ƒæ•´ä¸­é—´ä»¶ä½¿ç”¨ï¼š -\u003ewithMiddleware(function (Middleware $middleware) { $middleware-\u003euse([ // \\Illuminate\\Http\\Middleware\\TrustHosts::class, \\Illuminate\\Http\\Middleware\\TrustProxies::class, \\Illuminate\\Http\\Middleware\\HandleCors::class, \\Illuminate\\Foundation\\Http\\Middleware\\PreventRequestsDuringMaintenance::class, \\Illuminate\\Http\\Middleware\\ValidatePostSize::class, \\Illuminate\\Foundation\\Http\\Middleware\\TrimStrings::class, \\Illuminate\\Foundation\\Http\\Middleware\\ConvertEmptyStringsToNull::class, ]); }) ","date":"2024å¹´06æœˆ15æ—¥","objectID":"/2024/06/laravel11%E4%B8%AD%E9%97%B4%E4%BB%B6/:3:1","tags":["PHP","Laravel"],"title":"Laravel 11.x ä¸­é—´ä»¶","uri":"/2024/06/laravel11%E4%B8%AD%E9%97%B4%E4%BB%B6/"},{"categories":["PHP","Laravel"],"content":"å°†ä¸­é—´ä»¶åˆ†é…ç»™è·¯ç”± åœ¨å®šä¹‰è·¯ç”±æ—¶è°ƒç”¨middlewareæ–¹æ³•å°†ä¸­é—´ä»¶åˆ†é…ç»™è·¯ç”± use App\\Http\\Middleware\\EnsureTokenIsValid; Route::get('/profile', function () { // ... })-\u003emiddleware(EnsureTokenIsValid::class); ä¹Ÿå¯ä»¥å°†ä¸­é—´ä»¶åç§°æ•°ç»„ä¼ é€’ç»™middlewareæ–¹æ³•ï¼Œå°†å¤šä¸ªä¸­é—´ä»¶åˆ†é…ç»™è·¯ç”±ï¼š Route::get('/', function () { // ... })-\u003emiddleware([First::class, Second::class]); æ’é™¤ä¸­é—´ä»¶ å½“å°†ä¸­é—´ä»¶åˆ†é…ç»™ä¸€ç»„è·¯ç”±æ—¶ï¼Œéœ€è¦é˜²æ­¢æŸä¸ªä¸­é—´ä»¶åº”ç”¨äºè¯¥ç»„ä¸­çš„æŸä¸ªå•ç‹¬è·¯ç”±ã€‚ å¯ä»¥ä½¿ç”¨ withoutMiddleware æ–¹æ³•æ¥å®ç°ã€‚ use App\\Http\\Middleware\\EnsureTokenIsValid; Route::middleware([EnsureTokenIsValid::class])-\u003egroup(function () { Route::get('/', function () { // ... }); Route::get('/profile', function () { // ... })-\u003ewithoutMiddleware([EnsureTokenIsValid::class]); }); è¿˜å¯ä»¥ä»æ•´ä¸ªè·¯ç”±ç»„å®šä¹‰ä¸­æ’é™¤ç»™å®šçš„ä¸€ç»„ä¸­é—´ä»¶ use App\\Http\\Middleware\\EnsureTokenIsValid; Route::withoutMiddleware([EnsureTokenIsValid::class])-\u003egroup(function () { Route::get('/profile', function () { // ... }); }); æ³¨æ„ï¼šwithoutMiddleware æ–¹æ³•åªèƒ½ç§»é™¤è·¯ç”±ä¸­çš„ä¸­é—´ä»¶ï¼Œä¸èƒ½ç”¨äºå…¨å±€ä¸­é—´ä»¶ã€‚ ","date":"2024å¹´06æœˆ15æ—¥","objectID":"/2024/06/laravel11%E4%B8%AD%E9%97%B4%E4%BB%B6/:3:2","tags":["PHP","Laravel"],"title":"Laravel 11.x ä¸­é—´ä»¶","uri":"/2024/06/laravel11%E4%B8%AD%E9%97%B4%E4%BB%B6/"},{"categories":["PHP","Laravel"],"content":"ä¸­é—´ä»¶ç»„ å°†å¤šä¸ªä¸­é—´ä»¶åˆ†ç»„åˆ°ä¸€ä¸ªé”®ä¸‹ï¼Œä»¥ä¾¿æ›´è½»æ¾åˆ†é…ç»™è·¯ç”±ï¼Œå¯ä»¥ä½¿ç”¨åº”ç”¨ç¨‹åºbootstrap/app.php æ–‡ä»¶ä¸­çš„æ–¹æ³• appendToGroup å®Œæˆæ­¤æ“ä½œ use App\\Http\\Middleware\\First; use App\\Http\\Middleware\\Second; -\u003ewithMiddleware(function (Middleware $middleware) { $middleware-\u003eappendToGroup('group-name', [ First::class, Second::class, ]); $middleware-\u003eprependToGroup('group-name', [ First::class, Second::class, ]); }) ä¸­é—´ä»¶ç»„å¯ä»¥ä½¿ç”¨ä¸å•ä¸ªä¸­é—´ä»¶ç›¸åŒçš„è¯­æ³•åˆ†é…ç»™è·¯ç”±å’Œæ§åˆ¶å™¨åŠ¨ä½œ Route::get('/', function () { // ... })-\u003emiddleware('group-name'); Route::middleware(['group-name'])-\u003egroup(function () { // ... }); Laravelé»˜è®¤çš„ä¸­é—´ä»¶ç»„ web ä¸­é—´ä»¶ç»„ Illuminate\\Cookie\\Middleware\\EncryptCookies Illuminate\\Cookie\\Middleware\\AddQueuedCookiesToResponse Illuminate\\Session\\Middleware\\StartSession Illuminate\\View\\Middleware\\ShareErrorsFromSession Illuminate\\Foundation\\Http\\Middleware\\ValidateCsrfToken Illuminate\\Routing\\Middleware\\SubstituteBindings api ä¸­é—´ä»¶ç»„ Illuminate\\Routing\\Middleware\\SubstituteBindings å¦‚æœå‘è¿™äº›ç»„é™„åŠ æˆ–å‰ç½®ä¸­é—´ä»¶ï¼Œå¯ä»¥åœ¨åº”ç”¨ç¨‹åºçš„ bootstrap/app.php æ–‡ä»¶ä¸­ä½¿ç”¨ web å’Œ api æ–¹æ³•ã€‚web å’Œ api æ–¹æ³•æ˜¯å‘ç»„æ·»åŠ ä¸­é—´ä»¶çš„ä¾¿æ·æ›¿ä»£æ–¹æ³•ï¼Œç›¸å½“äº appendToGroup æ–¹æ³•ã€‚ use App\\Http\\Middleware\\EnsureTokenIsValid; use App\\Http\\Middleware\\EnsureUserIsSubscribed; -\u003ewithMiddleware(function (Middleware $middleware) { $middleware-\u003eweb(append: [ EnsureUserIsSubscribed::class, ]); $middleware-\u003eapi(prepend: [ EnsureTokenIsValid::class, ]); }) ä¹Ÿå¯ä»¥å°†Laravelçš„é»˜è®¤ä¸­é—´ä»¶æ¡ç›®ä¹‹ä¸€æ›¿æ¢ä¸ºè‡ªå®šä¹‰ä¸­é—´ä»¶ï¼š use App\\Http\\Middleware\\StartCustomSession; use Illuminate\\Session\\Middleware\\StartSession; $middleware-\u003eweb(replace: [ StartSession::class =\u003e StartCustomSession::class, ]); ä¹Ÿå¯ä»¥å®Œå…¨åˆ é™¤ä¸­é—´ä»¶ï¼š $middleware-\u003eweb(remove: [ StartSession::class, ]); æ‰‹åŠ¨ç®¡ç†Laravelçš„é»˜è®¤ä¸­é—´ä»¶ç»„ -\u003ewithMiddleware(function (Middleware $middleware) { $middleware-\u003egroup('web', [ \\Illuminate\\Cookie\\Middleware\\EncryptCookies::class, \\Illuminate\\Cookie\\Middleware\\AddQueuedCookiesToResponse::class, \\Illuminate\\Session\\Middleware\\StartSession::class, \\Illuminate\\View\\Middleware\\ShareErrorsFromSession::class, \\Illuminate\\Foundation\\Http\\Middleware\\ValidateCsrfToken::class, \\Illuminate\\Routing\\Middleware\\SubstituteBindings::class, // \\Illuminate\\Session\\Middleware\\AuthenticateSession::class, ]); $middleware-\u003egroup('api', [ // \\Laravel\\Sanctum\\Http\\Middleware\\EnsureFrontendRequestsAreStateful::class, // 'throttle:api', \\Illuminate\\Routing\\Middleware\\SubstituteBindings::class, ]); }) ","date":"2024å¹´06æœˆ15æ—¥","objectID":"/2024/06/laravel11%E4%B8%AD%E9%97%B4%E4%BB%B6/:3:3","tags":["PHP","Laravel"],"title":"Laravel 11.x ä¸­é—´ä»¶","uri":"/2024/06/laravel11%E4%B8%AD%E9%97%B4%E4%BB%B6/"},{"categories":["PHP","Laravel"],"content":"ä¸­é—´ä»¶åˆ«å å¯ä»¥åœ¨åº”ç”¨ç¨‹åºçš„ bootstrap/app.php æ–‡ä»¶ä¸­ä¸ºä¸­é—´ä»¶åˆ†é…åˆ«åã€‚ ä¸­é—´ä»¶åˆ«åå…è®¸æ‚¨ä¸ºç»™å®šçš„ä¸­é—´ä»¶ç±»å®šä¹‰ä¸€ä¸ªç®€çŸ­çš„åˆ«åï¼Œè¿™å¯¹äºå…·æœ‰è¾ƒé•¿ç±»åçš„ä¸­é—´ä»¶ç‰¹åˆ«æœ‰ç”¨ use App\\Http\\Middleware\\EnsureUserIsSubscribed; -\u003ewithMiddleware(function (Middleware $middleware) { $middleware-\u003ealias([ 'subscribed' =\u003e EnsureUserIsSubscribed::class ]); }) ä¸€æ—¦åœ¨åº”ç”¨ç¨‹åºçš„ bootstrap/app.php æ–‡ä»¶ä¸­å®šä¹‰äº†ä¸­é—´ä»¶åˆ«åï¼Œå°±å¯ä»¥åœ¨å°†ä¸­é—´ä»¶åˆ†é…ç»™è·¯ç”±æ—¶ä½¿ç”¨è¿™ä¸ªåˆ«å Route::get('/profile', function () { // ... })-\u003emiddleware('subscribed'); Laravel å†…ç½®ä¸­é—´ä»¶é»˜è®¤ä½¿ç”¨çš„åˆ«å Alias Middleware auth Illuminate\\Auth\\Middleware\\Authenticate auth.basic Illuminate\\Auth\\Middleware\\AuthenticateWithBasicAuth auth.session Illuminate\\Session\\Middleware\\AuthenticateSession cache.headers Illuminate\\Http\\Middleware\\SetCacheHeaders can Illuminate\\Auth\\Middleware\\Authorize guest Illuminate\\Auth\\Middleware\\RedirectIfAuthenticated password.confirm Illuminate\\Auth\\Middleware\\RequirePassword precognitive Illuminate\\Foundation\\Http\\Middleware\\HandlePrecognitiveRequests signed Illuminate\\Routing\\Middleware\\ValidateSignature subscribed \\Spark\\Http\\Middleware\\VerifyBillableIsSubscribed throttle Illuminate\\Routing\\Middleware\\ThrottleRequests or Illuminate\\Routing\\Middleware\\ThrottleRequestsWithRedis Illuminate\\Routing\\Middleware\\ThrottleRequests æˆ– Illuminate\\Routing\\Middleware\\ThrottleRequestsWithRedis verified Illuminate\\Auth\\Middleware\\EnsureEmailIsVerified ","date":"2024å¹´06æœˆ15æ—¥","objectID":"/2024/06/laravel11%E4%B8%AD%E9%97%B4%E4%BB%B6/:3:4","tags":["PHP","Laravel"],"title":"Laravel 11.x ä¸­é—´ä»¶","uri":"/2024/06/laravel11%E4%B8%AD%E9%97%B4%E4%BB%B6/"},{"categories":["PHP","Laravel"],"content":"ä¸­é—´ä»¶ä¼˜å…ˆçº§ ä»¥ä½¿ç”¨åº”ç”¨ç¨‹åº bootstrap/app.php æ–‡ä»¶ä¸­çš„æ–¹æ³• priority æŒ‡å®šä¸­é—´ä»¶ä¼˜å…ˆçº§ -\u003ewithMiddleware(function (Middleware $middleware) { $middleware-\u003epriority([ \\Illuminate\\Foundation\\Http\\Middleware\\HandlePrecognitiveRequests::class, \\Illuminate\\Cookie\\Middleware\\EncryptCookies::class, \\Illuminate\\Cookie\\Middleware\\AddQueuedCookiesToResponse::class, \\Illuminate\\Session\\Middleware\\StartSession::class, \\Illuminate\\View\\Middleware\\ShareErrorsFromSession::class, \\Illuminate\\Foundation\\Http\\Middleware\\ValidateCsrfToken::class, \\Laravel\\Sanctum\\Http\\Middleware\\EnsureFrontendRequestsAreStateful::class, \\Illuminate\\Routing\\Middleware\\ThrottleRequests::class, \\Illuminate\\Routing\\Middleware\\ThrottleRequestsWithRedis::class, \\Illuminate\\Routing\\Middleware\\SubstituteBindings::class, \\Illuminate\\Contracts\\Auth\\Middleware\\AuthenticatesRequests::class, \\Illuminate\\Auth\\Middleware\\Authorize::class, ]); }) ","date":"2024å¹´06æœˆ15æ—¥","objectID":"/2024/06/laravel11%E4%B8%AD%E9%97%B4%E4%BB%B6/:3:5","tags":["PHP","Laravel"],"title":"Laravel 11.x ä¸­é—´ä»¶","uri":"/2024/06/laravel11%E4%B8%AD%E9%97%B4%E4%BB%B6/"},{"categories":["PHP","Laravel"],"content":"ä¸­é—´ä»¶å‚æ•° ä¸­é—´ä»¶è¿˜å¯ä»¥æ¥æ”¶å…¶ä»–å‚æ•° \u003c?php namespace App\\Http\\Middleware; use Closure; use Illuminate\\Http\\Request; use Symfony\\Component\\HttpFoundation\\Response; class EnsureUserHasRole { /** * Handle an incoming request. * * @param \\Closure(\\Illuminate\\Http\\Request): (\\Symfony\\Component\\HttpFoundation\\Response) $next */ public function handle(Request $request, Closure $next, string $role): Response { if (! $request-\u003euser()-\u003ehasRole($role)) { // Redirect... } return $next($request); } } åœ¨å®šä¹‰è·¯ç”±æ—¶ï¼Œå¯ä»¥é€šè¿‡å°†ä¸­é—´ä»¶åç§°å’Œå‚æ•°ä»¥:åˆ†éš”æ¥æŒ‡å®šä¸­é—´ä»¶å‚æ•°ï¼š Route::put('/post/{id}', function (string $id) { // ... })-\u003emiddleware('role:editor'); å¤šä¸ªå‚æ•°å¯ä»¥ç”¨é€—å·è¿›è¡Œåˆ†éš”ï¼š Route::put('/post/{id}', function (string $id) { // ... })-\u003emiddleware('role:editor,publisher'); ","date":"2024å¹´06æœˆ15æ—¥","objectID":"/2024/06/laravel11%E4%B8%AD%E9%97%B4%E4%BB%B6/:4:0","tags":["PHP","Laravel"],"title":"Laravel 11.x ä¸­é—´ä»¶","uri":"/2024/06/laravel11%E4%B8%AD%E9%97%B4%E4%BB%B6/"},{"categories":["PHP","Laravel"],"content":"ç»ˆæ­¢ä¸­é—´ä»¶ æœ‰æ—¶å€™ï¼Œä¸­é—´ä»¶å¯èƒ½éœ€è¦åœ¨HTTPå“åº”å·²å‘é€åˆ°æµè§ˆå™¨åè¿›è¡Œä¸€äº›å·¥ä½œã€‚å¦‚æœåœ¨ä¸­é—´ä»¶ä¸Šå®šä¹‰äº† terminate æ–¹æ³•ï¼Œå¹¶ä¸” Web æœåŠ¡å™¨ä½¿ç”¨ FastCGIï¼Œé‚£ä¹ˆ terminate æ–¹æ³•å°†ä¼šåœ¨å“åº”å‘é€åˆ°æµè§ˆå™¨åè‡ªåŠ¨è¢«è°ƒç”¨ \u003c?php namespace Illuminate\\Session\\Middleware; use Closure; use Illuminate\\Http\\Request; use Symfony\\Component\\HttpFoundation\\Response; class TerminatingMiddleware { /** * Handle an incoming request. * * @param \\Closure(\\Illuminate\\Http\\Request): (\\Symfony\\Component\\HttpFoundation\\Response) $next */ public function handle(Request $request, Closure $next): Response { return $next($request); } /** * Handle tasks after the response has been sent to the browser. */ public function terminate(Request $request, Response $response): void { // ... } } terminate æ–¹æ³•åº”æ¥æ”¶è¯·æ±‚å’Œå“åº”ä¸¤ä¸ªå‚æ•°ã€‚ä¸€æ—¦å®šä¹‰äº†ä¸€ä¸ªç»ˆæ­¢ä¸­é—´ä»¶ï¼Œéœ€è¦å°†å…¶æ·»åŠ åˆ°è·¯ç”±åˆ—è¡¨æˆ–å…¨å±€ä¸­é—´ä»¶ä¸­ï¼Œå³åœ¨åº”ç”¨ç¨‹åºçš„ bootstrap/app.php æ–‡ä»¶ä¸­ã€‚ åœ¨è°ƒç”¨ä¸­é—´ä»¶çš„ terminate æ–¹æ³•æ—¶ï¼ŒLaravel å°†ä¼šä»æœåŠ¡å®¹å™¨ä¸­è§£æä¸€ä¸ªæ–°çš„ä¸­é—´ä»¶å®ä¾‹ã€‚ å¦‚æœéœ€è¦åœ¨è°ƒç”¨ handle å’Œ terminate æ–¹æ³•æ—¶ä½¿ç”¨åŒä¸€ä¸ªä¸­é—´ä»¶å®ä¾‹ï¼Œå¯ä»¥ä½¿ç”¨å®¹å™¨çš„ singleton æ–¹æ³•å°†ä¸­é—´ä»¶æ³¨å†Œä¸ºå•ä¾‹ã€‚ é€šå¸¸æƒ…å†µä¸‹ï¼Œè¿™éœ€è¦åœ¨ AppServiceProvider çš„ register æ–¹æ³•ä¸­å®Œæˆã€‚ use App\\Http\\Middleware\\TerminatingMiddleware; /** * Register any application services. */ public function register(): void { $this-\u003eapp-\u003esingleton(TerminatingMiddleware::class); } ","date":"2024å¹´06æœˆ15æ—¥","objectID":"/2024/06/laravel11%E4%B8%AD%E9%97%B4%E4%BB%B6/:5:0","tags":["PHP","Laravel"],"title":"Laravel 11.x ä¸­é—´ä»¶","uri":"/2024/06/laravel11%E4%B8%AD%E9%97%B4%E4%BB%B6/"},{"categories":["PHP","Laravel"],"content":" åŸæ–‡ ","date":"2024å¹´06æœˆ14æ—¥","objectID":"/2024/06/laravel11%E8%B7%AF%E7%94%B1/:0:0","tags":["PHP","Laravel"],"title":"Laravel 11.x è·¯ç”±","uri":"/2024/06/laravel11%E8%B7%AF%E7%94%B1/"},{"categories":["PHP","Laravel"],"content":"åŸºæœ¬è·¯ç”± æœ€åŸºæœ¬çš„è·¯ç”±æ¥æ”¶ URI å’Œé—­åŒ…ï¼Œæä¾›äº†ä¸€ç§éå¸¸ç®€å•ä¸”å¯Œæœ‰è¡¨ç°åŠ›çš„æ–¹æ³•æ¥å®šä¹‰è·¯ç”±å’Œè¡Œä¸ºï¼Œè€Œæ— éœ€å¤æ‚çš„è·¯ç”±é…ç½®æ–‡ä»¶ï¼š use Illuminate\\Support\\Facades\\Route; Route::get('/greeting', function () { return 'Hello World'; }); ","date":"2024å¹´06æœˆ14æ—¥","objectID":"/2024/06/laravel11%E8%B7%AF%E7%94%B1/:1:0","tags":["PHP","Laravel"],"title":"Laravel 11.x è·¯ç”±","uri":"/2024/06/laravel11%E8%B7%AF%E7%94%B1/"},{"categories":["PHP","Laravel"],"content":"é»˜è®¤è·¯ç”±æ–‡ä»¶ æ‰€æœ‰è·¯ç”±éƒ½åœ¨ä½äºroutesç›®å½•ä¸­çš„è·¯ç”±æ–‡ä»¶ä¸­å®šä¹‰ã€‚ è¿™äº›æ–‡ä»¶ç”±åº”ç”¨ç¨‹åºbootstrap/app.phpæ–‡ä»¶ä¸­æŒ‡å®šçš„é…ç½®è‡ªåŠ¨åŠ è½½ã€‚ web è·¯ç”± routes/web.phpæ–‡ä»¶å®šä¹‰ç”¨äºWebç•Œé¢çš„è·¯ç”±ï¼Œè¿™äº›è·¯ç”±è¢«åˆ†é…ä¸ºwebä¸­é—´ä»¶ç»„ï¼Œè¯¥ç»„æä¾›ä¼šè¯çŠ¶æ€å’ŒCSRFä¿æŠ¤ç­‰åŠŸèƒ½ã€‚ åœ¨routes/web.phpä¸­å®šä¹‰çš„è·¯ç”±ï¼Œå¯ä»¥é€šè¿‡åœ¨æµè§ˆå™¨ä¸­è¾“å…¥å®šä¹‰çš„è·¯ç”±çš„URLæ¥è®¿é—®ã€‚ ä¾‹å¦‚ï¼šé€šè¿‡http://example.com/userURLè®¿é—®ä»¥ä¸‹è·¯ç”±ï¼š use App\\Http\\Controllers\\UserController; use Illuminate\\Support\\Facades\\Route; Route::get('/user', [UserController::class, 'index']); api è·¯ç”± install:api å‘½ä»¤ç”¨æ¥ç”Ÿæˆæ— çŠ¶æ€APIï¼Œä¼šåˆ›å»ºroutes/api.phpæ–‡ä»¶ è¯¥å‘½ä»¤å°†å®‰è£… Laravel Sanctum ï¼Œå®ƒæä¾›äº†ä¸€ä¸ªå¼ºå¤§è€Œç®€å•çš„APIä»¤ç‰Œèº«ä»½éªŒè¯é˜²æŠ¤ã€‚ php artisan install:api use Illuminate\\Support\\Facades\\Request; use Illuminate\\Support\\Facades\\Route; Route::get('/user', function (Request $request) { return $request-\u003euser(); })-\u003emiddleware('auth:sanctum'); routes/api.phpä¸­çš„è·¯ç”±æ˜¯æ— çŠ¶æ€çš„ï¼Œå¹¶ä¸”è¢«åˆ†é…åˆ°apiä¸­é—´ä»¶ç»„ã€‚ ä¼šè‡ªåŠ¨åº”ç”¨/apiä½œä¸ºURIå‰ç¼€ã€‚ å¯ä»¥é€šè¿‡bootstrap/app.phpä¿®æ”¹å‰ç¼€ -\u003ewithRouting( api: __DIR__.'/../routes/api.php', apiPrefix: 'api/admin', // è‡ªå®šä¹‰å‰ç¼€ // ... ) å¯ç”¨è·¯ç”±æ–¹æ³• Route::get('/get', [UserController::class, 'index']); Route::post('/post', [UserController::class, 'index']); Route::put('/put', [UserController::class, 'index']); Route::patch('/patch', [UserController::class, 'index']); Route::delete('/delete', [UserController::class, 'index']); Route::options('/options', [UserController::class, 'index']); Route::match(['get', 'post'], '/match', [UserController::class, 'index']); Route::any('/any', [UserController::class, 'index']); ä¾èµ–æ³¨å…¥ å¯ä»¥åœ¨è·¯ç”±çš„å›è°ƒç­¾åä¸­è¿›è¡Œç±»å‹æç¤ºï¼Œä»¥å£°æ˜è·¯ç”±æ‰€éœ€çš„ä»»ä½•ä¾èµ–é¡¹ã€‚è¢«å£°æ˜çš„ä¾èµ–é¡¹å°†ç”±æœåŠ¡å®¹å™¨è‡ªåŠ¨è§£æå¹¶æ³¨å…¥åˆ°å›è°ƒä¸­ã€‚ ä¾‹å¦‚ï¼šå¯ä»¥å¯¹Illuminate\\Support\\Facades\\Request ç±»è¿›è¡Œç±»å‹æç¤ºï¼Œä»¥ä¾¿å½“å‰çš„HTTPè¯·æ±‚è‡ªåŠ¨æ³¨å…¥åˆ°è·¯ç”±å›è°ƒä¸­ï¼š use Illuminate\\Support\\Facades\\Request; use Illuminate\\Support\\Facades\\Route; Route::get('/user', function (Request $request) { return $request-\u003euser(); // å¯ä»¥ä½¿ç”¨ $request å¯¹è±¡æ¥è®¿é—®å½“å‰ HTTP è¯·æ±‚ }); CSRF ä¿æŠ¤ åœ¨ web è·¯ç”±æ–‡ä»¶ä¸­å®šä¹‰çš„æŒ‡å‘ POSTã€PUTã€PATCH æˆ– DELETE è·¯ç”±çš„ä»»ä½• HTML è¡¨å•éƒ½åº”åŒ…å«ä¸€ä¸ª CSRF ä»¤ç‰Œå­—æ®µã€‚å¦åˆ™ï¼Œè¯·æ±‚å°†è¢«æ‹’ç»ã€‚ \u003cform method=\"POST\" action=\"/profile\"\u003e @csrf ... \u003c/form\u003e ","date":"2024å¹´06æœˆ14æ—¥","objectID":"/2024/06/laravel11%E8%B7%AF%E7%94%B1/:1:1","tags":["PHP","Laravel"],"title":"Laravel 11.x è·¯ç”±","uri":"/2024/06/laravel11%E8%B7%AF%E7%94%B1/"},{"categories":["PHP","Laravel"],"content":"é‡å®šå‘è·¯ç”± Route::redirect é‡å®šå‘è·¯ç”± Route::redirect('/here', '/there'); Route::redirect é»˜è®¤è¿”å›çŠ¶æ€ç æ˜¯302ä»£ç ï¼Œå¯ä»¥é€šè¿‡ç¬¬ä¸‰ä¸ªå‚æ•°è¿›è¡Œè‡ªå®šä¹‰çŠ¶æ€ä»£ç  Route::redirect('/here', '/there', 301); Route::permanentRedirecté‡å®šå‘è·¯ç”±é»˜è®¤è¿”å›301çŠ¶æ€ä»£ç  Route::permanentRedirect('/here', '/there'); ","date":"2024å¹´06æœˆ14æ—¥","objectID":"/2024/06/laravel11%E8%B7%AF%E7%94%B1/:1:2","tags":["PHP","Laravel"],"title":"Laravel 11.x è·¯ç”±","uri":"/2024/06/laravel11%E8%B7%AF%E7%94%B1/"},{"categories":["PHP","Laravel"],"content":"è§†å›¾è·¯ç”± Route:view è§†å›¾è·¯ç”±ã€‚ è¯¥ view æ–¹æ³•æ¥å— URI ä½œä¸ºå…¶ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå¹¶æ¥å—è§†å›¾åç§°ä½œä¸ºå…¶ç¬¬äºŒä¸ªå‚æ•°ã€‚æ­¤å¤–ï¼Œè¿˜å¯ä»¥æä¾›è¦ä¼ é€’ç»™è§†å›¾çš„æ•°æ®æ•°ç»„ä½œä¸ºå¯é€‰çš„ç¬¬ä¸‰ä¸ªå‚æ•°ï¼š Route::view('/welcome', 'welcome'); Route::view('/welcome', 'welcome', ['name' =\u003e 'Taylor']); ","date":"2024å¹´06æœˆ14æ—¥","objectID":"/2024/06/laravel11%E8%B7%AF%E7%94%B1/:1:3","tags":["PHP","Laravel"],"title":"Laravel 11.x è·¯ç”±","uri":"/2024/06/laravel11%E8%B7%AF%E7%94%B1/"},{"categories":["PHP","Laravel"],"content":"æŸ¥çœ‹æ‰€æœ‰å®šä¹‰çš„è·¯ç”± route:list å‘½ä»¤å¯ä»¥æŸ¥çœ‹åº”ç”¨ç¨‹åºå®šä¹‰çš„æ‰€æœ‰è·¯ç”± php artisan route:list é»˜è®¤æƒ…å†µä¸‹ï¼Œåˆ†é…ç»™æ¯ä¸ªè·¯ç”±çš„è·¯ç”±ä¸­é—´ä»¶ä¸ä¼šè¾“å‡ºï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡-\u2028å‚æ•°æ¥æ˜¾ç¤ºè·¯ç”±ä¸­é—´ä»¶å’Œä¸­é—´ä»¶ç»„åç§° php artisan route:list -v # å±•å¼€ä¸­é—´ä»¶ç»„ php artisan route:list -vv --path=xx æŒ‡å®šæ˜¾ç¤ºä»¥ç»™å®šURIå¼€å¤´çš„è·¯ç”± php artisan route:list --path=api --except-vendoré€‰é¡¹æ¥æŒ‡å®šéšè—ç¬¬ä¸‰æ–¹è½¯ä»¶åŒ…å®šä¹‰çš„ä»»ä½•è·¯ç”± php artisan route:list --except-vendor --only-vendoré€‰é¡¹æ¥æŒ‡å®šä»…æ˜¾ç¤ºç¬¬ä¸‰æ–¹è½¯ä»¶åŒ…å®šä¹‰çš„è·¯ç”± php artisan route:list --only-vendor ","date":"2024å¹´06æœˆ14æ—¥","objectID":"/2024/06/laravel11%E8%B7%AF%E7%94%B1/:1:4","tags":["PHP","Laravel"],"title":"Laravel 11.x è·¯ç”±","uri":"/2024/06/laravel11%E8%B7%AF%E7%94%B1/"},{"categories":["PHP","Laravel"],"content":"å®šåˆ¶è·¯ç”± é»˜è®¤æƒ…å†µï¼Œåº”ç”¨ç¨‹åºçš„è·¯ç”±ç”±bootstrap/app.phpè¿›è¡Œé…ç½®å’ŒåŠ è½½ï¼š use Illuminate\\Foundation\\Application; return Application::configure(basePath: dirname(__DIR__)) -\u003ewithRouting( web: __DIR__.'/../routes/web.php', commands: __DIR__.'/../routes/console.php', health: '/up', )-\u003ecreate(); thené—­åŒ…ï¼Œç”¨æ¥æ³¨å†Œåº”ç”¨ç¨‹åºæ‰€éœ€è¦çš„ä»»ä½•é™„åŠ è·¯ç”± use Illuminate\\Support\\Facades\\Route; -\u003ewithRouting( web: __DIR__.'/../routes/web.php', commands: __DIR__.'/../routes/console.php', health: '/up', then: function () { Route::middleware('api') -\u003eprefix('webhooks') -\u003ename('webhooks.') -\u003egroup(base_path('routes/webhooks.php')); }, ) usingé—­åŒ…ï¼Œç”¨æ¥å®Œå…¨æ§åˆ¶è·¯ç”±æ³¨å†Œã€‚ å½“ä¼ é€’æ­¤å‚æ•°æ—¶ï¼Œæ¡†æ¶å°†ä¸ä¼šæ³¨å†Œä»»ä½•HTTPè·¯ç”±ï¼Œéœ€è¦æ‰‹åŠ¨æ³¨å†Œæ‰€æœ‰è·¯ç”± use Illuminate\\Support\\Facades\\Route; -\u003ewithRouting( commands: __DIR__.'/../routes/console.php', using: function () { Route::middleware('api') -\u003eprefix('api') -\u003egroup(base_path('routes/api.php')); Route::middleware('web') -\u003egroup(base_path('routes/web.php')); }, ) ","date":"2024å¹´06æœˆ14æ—¥","objectID":"/2024/06/laravel11%E8%B7%AF%E7%94%B1/:1:5","tags":["PHP","Laravel"],"title":"Laravel 11.x è·¯ç”±","uri":"/2024/06/laravel11%E8%B7%AF%E7%94%B1/"},{"categories":["PHP","Laravel"],"content":"è·¯ç”±å‚æ•° ","date":"2024å¹´06æœˆ14æ—¥","objectID":"/2024/06/laravel11%E8%B7%AF%E7%94%B1/:2:0","tags":["PHP","Laravel"],"title":"Laravel 11.x è·¯ç”±","uri":"/2024/06/laravel11%E8%B7%AF%E7%94%B1/"},{"categories":["PHP","Laravel"],"content":"å¿…éœ€å‚æ•° è·¯ç”±å‚æ•°é€‚ä¸­ä½¿ç”¨{}æ‹¬èµ·æ¥ï¼Œå¹¶ä¸”åº”ç”±å­—æ¯å­—ç¬¦ç»„æˆã€‚ ä¸‹åˆ’çº¿åœ¨è·¯ç”±å‚æ•°åç§°ä¸­ä¹Ÿæ˜¯å¯ä»¥æ¥å—çš„ã€‚ è·¯ç”±å‚æ•°æ ¹æ®å…¶é¡ºåºæ³¨å…¥åˆ°è·¯ç”±å›è°ƒ/æ§åˆ¶å™¨ä¸­ - è·¯ç”±å›è°ƒ/æ§åˆ¶å™¨å‚æ•°çš„åç§°æ— å…³ç´§è¦ Route::get('/user/{id}', function (string $id) { return 'User ' . $id; }); Route::get('posts/{post}/comments/{comment}', function (string $postId, string $commentId) { return 'Post ' . $postId . ' Comment ' . $commentId; }); å‚æ•°å’Œä¾èµ–æ³¨å…¥ ä¾èµ–æ³¨å…¥é¡¹åº”è¯¥åœ¨è·¯ç”±å‚æ•°å‰ Route::get('/user/{id}', function (Request $request, string $id) { return 'User ' . $id; }); ","date":"2024å¹´06æœˆ14æ—¥","objectID":"/2024/06/laravel11%E8%B7%AF%E7%94%B1/:2:1","tags":["PHP","Laravel"],"title":"Laravel 11.x è·¯ç”±","uri":"/2024/06/laravel11%E8%B7%AF%E7%94%B1/"},{"categories":["PHP","Laravel"],"content":"å¯é€‰å‚æ•° é€šè¿‡åœ¨å‚æ•°åç§°åæ”¾ç½®æ ‡è®°?æ¥è¡¨ç¤ºå¯é€‰å‚æ•°ã€‚ éœ€è¦ç¡®ä¿ç›¸å¯¹äºå˜é‡æä¾›æœ‰é»˜è®¤å€¼ï¼Œä¸æä¾›é»˜è®¤å€¼åˆä¸ä¼ é€’å‚æ•°ï¼Œåˆ™ä¼šå‘ç”Ÿå¼‚å¸¸ Route::get('/user2/{name?}', function (?string $name = null) { return $name; }); Route::get('/user3/{name?}', function (?string $name = 'John') { return $name; }); ","date":"2024å¹´06æœˆ14æ—¥","objectID":"/2024/06/laravel11%E8%B7%AF%E7%94%B1/:2:2","tags":["PHP","Laravel"],"title":"Laravel 11.x è·¯ç”±","uri":"/2024/06/laravel11%E8%B7%AF%E7%94%B1/"},{"categories":["PHP","Laravel"],"content":"æ­£åˆ™çº¦æŸ ä½¿ç”¨è·¯ç”±å®ä¾‹ä¸Šçš„æ–¹æ³•whereé™åˆ¶è·¯ç”±å‚æ•°çš„æ ¼å¼ã€‚ whereæ–¹æ³•æ¥å—å‚æ•°çš„åç§°å’Œæ­£åˆ™è¡¨è¾¾å¼ï¼Œç”¨äºå®šä¹‰å‚æ•°åº”å¦‚ä½•çº¦æŸã€‚ Route::get('/user/{name}', function (string $name) { // ... })-\u003ewhere('name', '[A-Za-z]+'); Route::get('/user/{id}', function (string $id) { // ... })-\u003ewhere('id', '[0-9]+'); Route::get('/user/{id}/{name}', function (string $id, string $name) { // ... })-\u003ewhere(['id' =\u003e '[0-9]+', 'name' =\u003e '[a-z]+']); Laravel æä¾›äº†ä¸€äº›å¸¸ç”¨çš„æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼ï¼Œå¯ç”¨äºå¿«é€Ÿå‘è·¯ç”±æ·»åŠ æ¨¡å¼çº¦æŸ Route::get('/user/{id}/{name}', function (string $id, string $name) { // ... })-\u003ewhereNumber('id')-\u003ewhereAlpha('name'); Route::get('/user/{name}', function (string $name) { // ... })-\u003ewhereAlphaNumeric('name'); Route::get('/user/{id}', function (string $id) { // ... })-\u003ewhereUuid('id'); Route::get('/user/{id}', function (string $id) { // ... })-\u003ewhereUlid('id'); Route::get('/category/{category}', function (string $category) { // ... })-\u003ewhereIn('category', ['movie', 'song', 'painting']); Route::get('/category/{category}', function (string $category) { // ... })-\u003ewhereIn('category', CategoryEnum::cases()); ","date":"2024å¹´06æœˆ14æ—¥","objectID":"/2024/06/laravel11%E8%B7%AF%E7%94%B1/:2:3","tags":["PHP","Laravel"],"title":"Laravel 11.x è·¯ç”±","uri":"/2024/06/laravel11%E8%B7%AF%E7%94%B1/"},{"categories":["PHP","Laravel"],"content":"å…¨å±€çº¦æŸ ä½¿ç”¨pattern æ–¹æ³•ï¼Œå¯ä»¥å®šä¹‰è·¯ç”±å‚æ•°å…¨å±€çº¦æŸã€‚ åœ¨App\\Providers\\AppServiceProviderç±»çš„bootæ–¹æ³•ä¸­å®šä¹‰è¿™äº›æ¨¡å¼ public function boot(): void { // å®šä¹‰å…¨å±€è·¯ç”±å‚æ•°çº¦æŸ Route::pattern('id', '[0-9]+'); } ","date":"2024å¹´06æœˆ14æ—¥","objectID":"/2024/06/laravel11%E8%B7%AF%E7%94%B1/:2:4","tags":["PHP","Laravel"],"title":"Laravel 11.x è·¯ç”±","uri":"/2024/06/laravel11%E8%B7%AF%E7%94%B1/"},{"categories":["PHP","Laravel"],"content":"ç¼–ç æ­£æ–œæ  Laravel è·¯ç”±ç»„ä»¶å…è®¸è·¯ç”±å‚æ•°å€¼ä¸­åŒ…å«é™¤ / ä¹‹å¤–çš„æ‰€æœ‰å­—ç¬¦ã€‚ å¦‚æœéœ€è¦è®© / æˆä¸ºå ä½ç¬¦çš„ä¸€éƒ¨åˆ†ï¼Œå¿…é¡»ä½¿ç”¨ where æ¡ä»¶æ­£åˆ™è¡¨è¾¾å¼æ˜ç¡®å…è®¸ Route::get('search/{search}', function (string $search) { return $search; })-\u003ewhere('search', '.*'); æ³¨æ„ï¼šä»…åœ¨æœ€åä¸€ä¸ªè·¯ç”±æ®µå†…å—æ”¯æŒã€‚ ","date":"2024å¹´06æœˆ14æ—¥","objectID":"/2024/06/laravel11%E8%B7%AF%E7%94%B1/:2:5","tags":["PHP","Laravel"],"title":"Laravel 11.x è·¯ç”±","uri":"/2024/06/laravel11%E8%B7%AF%E7%94%B1/"},{"categories":["PHP","Laravel"],"content":"å‘½åè·¯ç”± å‘½åè·¯ç”±å…è®¸æ–¹ä¾¿åœ°ä¸ºç‰¹å®šè·¯ç”±ç”ŸæˆURLæˆ–è¿›è¡Œé‡å®šå‘ã€‚ å¯ä»¥é€šè¿‡å°† name æ–¹æ³•é“¾æ¥åˆ°è·¯ç”±å®šä¹‰ä¸Šæ¥ä¸ºè·¯ç”±æŒ‡å®šä¸€ä¸ªåç§°ã€‚ Route::get('/user/profile', function () { // ... })-\u003ename('profile'); æ³¨æ„ï¼šè·¯ç”±åç§°åº”å§‹ç»ˆæ˜¯å”¯ä¸€çš„ã€‚ ","date":"2024å¹´06æœˆ14æ—¥","objectID":"/2024/06/laravel11%E8%B7%AF%E7%94%B1/:3:0","tags":["PHP","Laravel"],"title":"Laravel 11.x è·¯ç”±","uri":"/2024/06/laravel11%E8%B7%AF%E7%94%B1/"},{"categories":["PHP","Laravel"],"content":"ç”Ÿæˆå‘½åè·¯ç”±çš„URL ä¸€æ—¦ä¸ºæŸä¸ªè·¯ç”±æŒ‡å®šäº†åç§°ï¼Œå°±å¯ä»¥åœ¨ç”ŸæˆURLæˆ–è¿›è¡Œé‡å®šå‘æ—¶ï¼Œé€šè¿‡ä½¿ç”¨Laravelçš„ route å’Œ redirect è¾…åŠ©å‡½æ•°æ¥å¼•ç”¨è¯¥è·¯ç”±çš„åç§° // Generating URLs... $url = route('profile'); // Generating Redirects... return redirect()-\u003eroute('profile'); return to_route('profile'); å¦‚æœå‘½åè·¯ç”±å®šä¹‰äº†å‚æ•°ï¼Œå¯ä»¥å°†å‚æ•°ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ä¼ é€’ç»™ route å‡½æ•°ã€‚ ä¼ å…¥çš„å‚æ•°ä¼šè‡ªåŠ¨æ’å…¥åˆ°ç”Ÿæˆçš„ URL ä¸­çš„æ­£ç¡®ä½ç½® Route::get('/user/{id}/profile', function (string $id) { // ... })-\u003ename('profile'); $url = route('profile', ['id' =\u003e 1]); å¦‚æœåœ¨æ•°ç»„ä¸­ä¼ é€’äº†é¢å¤–çš„å‚æ•°ï¼Œè¿™äº›é”®å€¼å¯¹å°†è‡ªåŠ¨æ·»åŠ åˆ°ç”Ÿæˆçš„ URL çš„æŸ¥è¯¢å­—ç¬¦ä¸²ä¸­ï¼š Route::get('/user/{id}/profile', function (string $id) { // ... })-\u003ename('profile'); $url = route('profile', ['id' =\u003e 1, 'photos' =\u003e 'yes']); // /user/1/profile?photos=yes ","date":"2024å¹´06æœˆ14æ—¥","objectID":"/2024/06/laravel11%E8%B7%AF%E7%94%B1/:3:1","tags":["PHP","Laravel"],"title":"Laravel 11.x è·¯ç”±","uri":"/2024/06/laravel11%E8%B7%AF%E7%94%B1/"},{"categories":["PHP","Laravel"],"content":"æ£€æŸ¥å½“å‰è·¯ç”± å¯ä»¥åœ¨è·¯ç”±å®ä¾‹ä¸Šä½¿ç”¨namedæ–¹æ³•ç¡®å®šå½“å‰è¯·æ±‚æ˜¯å¦è·¯ç”±åˆ°ç»™å®šçš„å‘½åè·¯ç”± namespace App\\Http\\Middleware; use Closure; use Illuminate\\Http\\Request; use Symfony\\Component\\HttpFoundation\\Response; class RequestMiddleware { /** * Handle an incoming request. * * @param \\Closure(\\Illuminate\\Http\\Request): (\\Symfony\\Component\\HttpFoundation\\Response) $next */ public function handle(Request $request, Closure $next): Response { if ($request-\u003eroute()-\u003enamed('profile')) { print_r('Profile route'); } return $next($request); } } ","date":"2024å¹´06æœˆ14æ—¥","objectID":"/2024/06/laravel11%E8%B7%AF%E7%94%B1/:3:2","tags":["PHP","Laravel"],"title":"Laravel 11.x è·¯ç”±","uri":"/2024/06/laravel11%E8%B7%AF%E7%94%B1/"},{"categories":["PHP","Laravel"],"content":"è·¯ç”±ç»„ è·¯ç”±ç»„å…è®¸åœ¨å¤§é‡è·¯ç”±ä¹‹é—´å…±äº«è·¯ç”±å±æ€§ï¼ˆå¦‚ä¸­é—´ä»¶ï¼‰ï¼Œè€Œæ— éœ€åœ¨æ¯ä¸ªå•ç‹¬çš„è·¯ç”±ä¸Šå®šä¹‰è¿™äº›å±æ€§ã€‚ ","date":"2024å¹´06æœˆ14æ—¥","objectID":"/2024/06/laravel11%E8%B7%AF%E7%94%B1/:4:0","tags":["PHP","Laravel"],"title":"Laravel 11.x è·¯ç”±","uri":"/2024/06/laravel11%E8%B7%AF%E7%94%B1/"},{"categories":["PHP","Laravel"],"content":"ä¸­é—´ä»¶ middlewareæ–¹æ³•å¯ä»¥å°†ä¸­é—´ä»¶åˆ†é…ç»™ç»„å†…çš„æ‰€æœ‰è·¯ç”±ã€‚ ä¸­é—´ä»¶æŒ‰å®ƒä»¬åœ¨æ•°ç»„ä¸­åˆ—å‡ºçš„é¡ºåºæ‰§è¡Œ Route::middleware(['first', 'second'])-\u003egroup(function () { Route::get('/', function () { // Uses first \u0026 second Middleware }); Route::get('/user', function () { // Uses first \u0026 second Middleware }); }); ","date":"2024å¹´06æœˆ14æ—¥","objectID":"/2024/06/laravel11%E8%B7%AF%E7%94%B1/:4:1","tags":["PHP","Laravel"],"title":"Laravel 11.x è·¯ç”±","uri":"/2024/06/laravel11%E8%B7%AF%E7%94%B1/"},{"categories":["PHP","Laravel"],"content":"æ§åˆ¶å™¨ controlleræ–¹æ³•ä¸ºç»„å†…çš„æ‰€æœ‰è·¯ç”±å®šä¹‰å…¬å…±æ§åˆ¶å™¨ã€‚ åœ¨å®šä¹‰è·¯ç”±æ—¶ï¼Œåªéœ€æä¾›å®ƒä»¬è°ƒç”¨çš„æ§åˆ¶å™¨æ–¹æ³•ã€‚ Route::controller(UserController::class)-\u003egroup(function () { Route::get('user', 'show'); Route::get('user/edit', 'edit'); }); ","date":"2024å¹´06æœˆ14æ—¥","objectID":"/2024/06/laravel11%E8%B7%AF%E7%94%B1/:4:2","tags":["PHP","Laravel"],"title":"Laravel 11.x è·¯ç”±","uri":"/2024/06/laravel11%E8%B7%AF%E7%94%B1/"},{"categories":["PHP","Laravel"],"content":"å­åŸŸè·¯ç”± domainæŒ‡å®šå­åŸŸè·¯ç”±ã€‚ å­åŸŸå¯ä»¥åƒè·¯ç”±URIä¸€æ ·åˆ†é…è·¯ç”±å‚æ•°ï¼Œå…è®¸æ•è·å­åŸŸçš„ä¸€éƒ¨åˆ†ï¼Œä»¥ä¾¿åœ¨è·¯ç”±æˆ–æ§åˆ¶å™¨ä¸­ä½¿ç”¨ã€‚ æ³¨æ„ï¼šä¸ºç¡®ä¿å­åŸŸè·¯ç”±å¯è®¿é—®ï¼Œåº”è¯¥åœ¨æ³¨å†Œæ ¹åŸŸè·¯ç”±ä¹‹å‰æ³¨å†Œå­åŸŸè·¯ç”±ã€‚é˜²æ­¢æ ¹åŸŸè·¯ç”±è¦†ç›–å…·æœ‰ç›¸åŒURIè·¯å¾„çš„å­åŸŸè·¯ç”±ã€‚ Route::domain('{account}.myapp.com')-\u003egroup(function () { Route::get('user/{id}', function (string $account, string $id) { // }); }); // GET|HEAD {account}.myapp.com/api/user/{id} ","date":"2024å¹´06æœˆ14æ—¥","objectID":"/2024/06/laravel11%E8%B7%AF%E7%94%B1/:4:3","tags":["PHP","Laravel"],"title":"Laravel 11.x è·¯ç”±","uri":"/2024/06/laravel11%E8%B7%AF%E7%94%B1/"},{"categories":["PHP","Laravel"],"content":"è·¯ç”±å‰ç¼€ prefixæ–¹æ³•å¯ç”¨äºä½¿ç”¨ç»™å®šçš„URI ä¸ºç»„ä¸­çš„æ¯ä¸ªè·¯ç”±æ·»åŠ å‰ç¼€ Route::prefix('admin')-\u003egroup(function () { Route::get('users', function () { // Matches The \"/admin/users\" URL }); }); // GET|HEAD api/admin/users ","date":"2024å¹´06æœˆ14æ—¥","objectID":"/2024/06/laravel11%E8%B7%AF%E7%94%B1/:4:4","tags":["PHP","Laravel"],"title":"Laravel 11.x è·¯ç”±","uri":"/2024/06/laravel11%E8%B7%AF%E7%94%B1/"},{"categories":["PHP","Laravel"],"content":"è·¯ç”±åç§°å‰ç¼€ nameæ–¹æ³•å¯ç”¨äºåœ¨ç»„ä¸­çš„æ¯ä¸ªè·¯ç”±åç§°å‰é¢åŠ ä¸Šç»™å®šçš„å­—ç¬¦ä¸²ã€‚ ç»™å®šçš„å­—ç¬¦ä¸²ä¸æŒ‡å®šçš„è·¯ç”±åç§°å®Œå…¨ç›¸åŒï¼Œå› æ­¤æˆ‘ä»¬ç¡®ä¿åœ¨å‰ç¼€ä¸­æä¾›å°¾.å­—ç¬¦ Route::name('admin.')-\u003egroup(function () { Route::get('users', function () { // Route assigned name \"admin.users\"... })-\u003ename('users'); }); // GET|HEAD api/users ..... admin.users ","date":"2024å¹´06æœˆ14æ—¥","objectID":"/2024/06/laravel11%E8%B7%AF%E7%94%B1/:4:5","tags":["PHP","Laravel"],"title":"Laravel 11.x è·¯ç”±","uri":"/2024/06/laravel11%E8%B7%AF%E7%94%B1/"},{"categories":["PHP","Laravel"],"content":"è·¯ç”±æ¨¡å‹ç»‘å®š ","date":"2024å¹´06æœˆ14æ—¥","objectID":"/2024/06/laravel11%E8%B7%AF%E7%94%B1/:5:0","tags":["PHP","Laravel"],"title":"Laravel 11.x è·¯ç”±","uri":"/2024/06/laravel11%E8%B7%AF%E7%94%B1/"},{"categories":["PHP","Laravel"],"content":"éšå¼ç»‘å®š Laravel ä¼šè‡ªåŠ¨è§£æåœ¨è·¯ç”±æˆ–æ§åˆ¶å™¨æ“ä½œä¸­å®šä¹‰çš„ Eloquent æ¨¡å‹ï¼Œé€šè¿‡ç±»å‹æç¤ºçš„å˜é‡ååŒ¹é…è·¯ç”±æ®µåç§°ã€‚ use App\\Models\\User; Route::get('/users/{user}', function (User $user) { return $user-\u003eemail; }); ç”±äº$userå˜é‡è¢«ç±»å‹æç¤ºä¸ºEloquentæ¨¡å‹ï¼Œå¹¶ä¸”å˜é‡åç§°ä¸{user}URIæ®µåŒ¹é…ï¼Œå› æ­¤ï¼ŒLaravelå°†è‡ªåŠ¨æ³¨å…¥å…·æœ‰ä¸è¯·æ±‚URIä¸­ç›¸åº”å€¼åŒ¹é…çš„ ID çš„æ¨¡å‹å®ä¾‹ã€‚ å¦‚æœåœ¨æ•°æ®åº“ä¸­æ‰¾ä¸åˆ°åŒ¹é…çš„æ¨¡å‹å®ä¾‹ï¼Œåˆ™ä¼šè‡ªåŠ¨ç”Ÿæˆ 404 HTTP å“åº”ã€‚ åœ¨ä½¿ç”¨æ§åˆ¶å™¨æ–¹æ³•æ—¶ï¼Œéšå¼ç»‘å®šä¹Ÿæ˜¯å¯ç”¨çš„ use App\\Http\\Controllers\\UserController; use App\\Models\\User; // Route definition... Route::get('/users/{user}', [UserController::class, 'show']); // Controller method definition... public function show(User $user) { return view('user.profile', ['user' =\u003e $user]); } è½¯åˆ é™¤æ¨¡å‹ withTrashedæ–¹æ³•é“¾æ¥åˆ°è·¯ç”±çš„å®šä¹‰æ¥æŒ‡ç¤ºéšå¼ç»‘å®šæ£€ç´¢å·²è½¯åˆ é™¤çš„æ¨¡å¼ã€‚ use App\\Models\\User; Route::get('/users/{user}', function (User $user) { return $user-\u003eemail; })-\u003ewithTrashed(); è‡ªå®šä¹‰é”® æœ‰æ—¶å¸Œæœ›ä½¿ç”¨é™¤idä»¥å¤–çš„åˆ—æ¥è§£æEloquentæ¨¡å‹ã€‚å¯ä»¥åœ¨è·¯ç”±å‚æ•°å®šä¹‰ä¸­æŒ‡å®šè¯¥åˆ— use App\\Models\\Post; Route::get('/posts/{post:slug}', function (Post $post) { return $post; }); å¦‚æœå¸Œæœ›æ¨¡å‹ç»‘å®šå§‹ç»ˆä½¿ç”¨æ•°æ®åº“åˆ—ï¼Œä½†ä¸æ˜¯idï¼Œåˆ™å¯ä»¥åœ¨Eloquentæ¨¡å‹ä¸Šé‡å†™getRouteKeyNameæ–¹æ³•ã€‚ /** * Get the route key for the model. */ public function getRouteKeyName(): string { return 'slug'; } è‡ªå®šä¹‰é”®å’Œä½œç”¨åŸŸ å½“å•ä¸ªè·¯ç”±å®šä¹‰ä¸­éšå¼ç»‘å®šå¤šä¸ªEloquentæ¨¡å‹æ—¶ï¼Œå¯èƒ½å¸Œæœ›å°†ç¬¬äºŒä¸ªEloquentæ¨¡å‹çš„èŒƒå›´é™å®šä¸ºå¿…é¡»æ˜¯å‰ä¸€ä¸ªEloquentæ¨¡å‹çš„å­çº§ã€‚ ä¾‹å¦‚ï¼šè€ƒè™‘ä»¥ä¸‹è¿™ä¸ªæ ¹æ®ç”¨æˆ·ç‰¹å®šçš„slugæ¥æ£€ç´¢åšå®¢æ–‡ç« çš„è·¯ç”±å®šä¹‰ï¼š use App\\Models\\Post; use App\\Models\\User; Route::get('/users/{user}/posts/{post:slug}', function (User $user, Post $post) { return $post; }); åœ¨å°†è‡ªå®šä¹‰é”®éšå¼ç»‘å®šä½œä¸ºåµŒå¥—è·¯ç”±å‚æ•°ä½¿ç”¨æ—¶ï¼ŒLaravel ä¼šè‡ªåŠ¨å°†æŸ¥è¯¢èŒƒå›´é™å®šåœ¨é€šè¿‡çˆ¶æ¨¡å‹æ¥æ£€ç´¢åµŒå¥—æ¨¡å‹ã€‚Laravel ä½¿ç”¨çº¦å®šæ¥çŒœæµ‹çˆ¶æ¨¡å‹ä¸Šçš„å…³ç³»åç§°ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå°†å‡è®¾ User æ¨¡å‹æœ‰ä¸€ä¸ªåä¸º postsï¼ˆè·¯ç”±å‚æ•°åç§°çš„å¤æ•°å½¢å¼ï¼‰çš„å…³ç³»ï¼Œå¯ä»¥ç”¨æ¥æ£€ç´¢ Post æ¨¡å‹ã€‚ è¿˜å¯ä»¥æŒ‡ç¤º Laravel é™å®šâ€œå­â€ç»‘å®šçš„èŒƒå›´ï¼Œå³ä½¿æœªæä¾›è‡ªå®šä¹‰é”®ä¹Ÿæ˜¯å¦‚æ­¤ã€‚ä¸ºæ­¤ï¼Œå¯ä»¥åœ¨å®šä¹‰è·¯ç”±æ—¶è°ƒç”¨ scopeBindings æ–¹æ³•ï¼š use App\\Models\\Post; use App\\Models\\User; Route::get('/users/{user}/posts/{post}', function (User $user, Post $post) { return $post; })-\u003escopeBindings(); è¿˜å¯ä»¥æŒ‡ç¤ºæ•´ä¸ªè·¯ç”±å®šä¹‰ç»„ä½¿ç”¨ä½œç”¨åŸŸç»‘å®šï¼š Route::scopeBindings()-\u003egroup(function () { Route::get('/users/{user}/posts/{post}', function (User $user, Post $post) { return $post; }); }); åŒæ ·ï¼Œå¯ä»¥é€šè¿‡è°ƒç”¨ withoutScopedBindings æ–¹æ³•æ˜ç¡®æŒ‡ç¤º Laravel ä¸é™å®šç»‘å®šçš„èŒƒå›´ï¼š Route::get('/users/{user}/posts/{post:slug}', function (User $user, Post $post) { return $post; })-\u003ewithoutScopedBindings(); è‡ªå®šä¹‰ç¼ºå¤±çš„æ¨¡å‹è¡Œä¸º é€šå¸¸å¦‚æœæœªæ‰¾åˆ°éšå¼ç»‘å®šçš„æ¨¡å‹ï¼Œåˆ™ä¼šç”Ÿæˆ 404 HTTP å“åº”ã€‚ å¯ä»¥é€šè¿‡åœ¨å®šä¹‰è·¯ç”±æ—¶è°ƒç”¨missingæ–¹æ³•æ¥è‡ªå®šä¹‰æ­¤è¡Œä¸ºã€‚ missingæ–¹æ³•æ¥å—ä¸€ä¸ªé—­åŒ…ï¼Œå¦‚æœæ‰¾ä¸åˆ°éšå¼ç»‘å®šçš„æ¨¡å‹ï¼Œåˆ™å°†è°ƒç”¨è¯¥é—­åŒ… use App\\Http\\Controllers\\LocationsController; use Illuminate\\Http\\Request; use Illuminate\\Support\\Facades\\Redirect; Route::get('/locations/{location:slug}', [LocationsController::class, 'show']) -\u003ename('locations.view') -\u003emissing(function (Request $request) { return Redirect::route('locations.index'); }); éšå¼æšä¸¾ç»‘å®š PHP 8.1 å¼•å…¥äº†å¯¹æšä¸¾ï¼ˆEnumsï¼‰çš„æ”¯æŒã€‚ä¸ºäº†è¡¥å……è¿™ä¸€åŠŸèƒ½ï¼ŒLaravel å…è®¸åœ¨è·¯ç”±å®šä¹‰ä¸­å¯¹ä¸€ä¸ªæœ‰å€¼çš„æšä¸¾è¿›è¡Œç±»å‹æç¤ºï¼Œä¸” Laravel ä»…åœ¨è¯¥è·¯ç”±æ®µå¯¹åº”ä¸€ä¸ªæœ‰æ•ˆçš„æšä¸¾å€¼æ—¶æ‰ä¼šè°ƒç”¨è¯¥è·¯ç”±ã€‚å¦åˆ™ï¼Œå°†è‡ªåŠ¨è¿”å› 404 HTTP å“åº”ã€‚ \u003c?php namespace App\\Enums; enum Category: string { case Fruits = 'fruits'; case People = 'people'; } use App\\Enums\\Category; use Illuminate\\Support\\Facades\\Route; Route::get('/categories/{category}', function (Category $category) { return $category-\u003evalue; }); ","date":"2024å¹´06æœˆ14æ—¥","objectID":"/2024/06/laravel11%E8%B7%AF%E7%94%B1/:5:1","tags":["PHP","Laravel"],"title":"Laravel 11.x è·¯ç”±","uri":"/2024/06/laravel11%E8%B7%AF%E7%94%B1/"},{"categories":["PHP","Laravel"],"content":"æ˜¾ç¤ºç»‘å®š è¦æ³¨å†Œæ˜¾ç¤ºç»‘å®šï¼Œä½¿ç”¨è·¯ç”±å™¨çš„modelæ–¹æ³•ä¸ºç»™å®šå‚æ•°æŒ‡å®šç±»ã€‚ åº”è¯¥åœ¨AppServiceProvider ç±»çš„ boot æ–¹æ³•çš„å¼€å¤´å®šä¹‰æ˜¾å¼æ¨¡å‹ç»‘å®šã€‚ use App\\Models\\User; use Illuminate\\Support\\Facades\\Route; /** * Bootstrap any application services. */ public function boot(): void { Route::model('user', User::class); } use App\\Models\\User; Route::get('/users/{user}', function (User $user) { // ... }); è‡ªå®šä¹‰è§£æé€»è¾‘ å¦‚æœå¸Œæœ›å®šä¹‰è‡ªå·±çš„æ¨¡å‹ç»‘å®šè§£æé€»è¾‘ï¼Œå¯ä»¥ä½¿ç”¨Route:bindæ–¹æ³•ã€‚ ä¼ é€’ç»™ bind æ–¹æ³•çš„é—­åŒ…å°†æ¥æ”¶ URI æ®µçš„å€¼ï¼Œå¹¶åº”è¿”å›åº”æ³¨å…¥åˆ°è·¯ç”±ä¸­çš„ç±»çš„å®ä¾‹ã€‚ åŒæ ·ï¼Œè¿™ç§è‡ªå®šä¹‰åº”è¯¥åœ¨åº”ç”¨ç¨‹åºçš„ AppServiceProvider ç±»çš„ boot æ–¹æ³•ä¸­è¿›è¡Œã€‚ use App\\Models\\User; use Illuminate\\Support\\Facades\\Route; /** * Bootstrap any application services. */ public function boot(): void { Route::bind('user', function (string $value) { return User::where('name', $value)-\u003efirstOrFail(); }); } ä¹Ÿå¯ä»¥åœ¨Eloquent æ¨¡å‹ä¸Šé‡å†™ resolveRouteBinding æ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•å°†æ¥æ”¶ URI æ®µçš„å€¼ï¼Œå¹¶åº”è¿”å›åº”æ³¨å…¥åˆ°è·¯ç”±ä¸­çš„ç±»çš„å®ä¾‹ã€‚ /** * Retrieve the model for a bound value. * * @param mixed $value * @param string|null $field * @return \\Illuminate\\Database\\Eloquent\\Model|null */ public function resolveRouteBinding($value, $field = null) { return $this-\u003ewhere('name', $value)-\u003efirstOrFail(); } å¦‚æœè·¯ç”±ä½¿ç”¨éšå¼ç»‘å®šä½œç”¨åŸŸï¼Œå°†ä½¿ç”¨ resolveChildRouteBinding æ–¹æ³•æ¥è§£æçˆ¶æ¨¡å‹çš„å­ç»‘å®šã€‚ /** * Retrieve the child model for a bound value. * * @param string $childType * @param mixed $value * @param string|null $field * @return \\Illuminate\\Database\\Eloquent\\Model|null */ public function resolveChildRouteBinding($childType, $value, $field) { return parent::resolveChildRouteBinding($childType, $value, $field); } ","date":"2024å¹´06æœˆ14æ—¥","objectID":"/2024/06/laravel11%E8%B7%AF%E7%94%B1/:5:2","tags":["PHP","Laravel"],"title":"Laravel 11.x è·¯ç”±","uri":"/2024/06/laravel11%E8%B7%AF%E7%94%B1/"},{"categories":["PHP","Laravel"],"content":"å›é€€è·¯ç”± ä½¿ç”¨ Route::fallback æ–¹æ³•ï¼Œå¯ä»¥å®šä¹‰ä¸€ä¸ªåœ¨æ²¡æœ‰å…¶ä»–è·¯ç”±åŒ¹é…ä¼ å…¥è¯·æ±‚æ—¶æ‰§è¡Œçš„è·¯ç”±ã€‚ é€šå¸¸ï¼Œæœªå¤„ç†çš„è¯·æ±‚å°†é€šè¿‡åº”ç”¨ç¨‹åºçš„å¼‚å¸¸å¤„ç†ç¨‹åºè‡ªåŠ¨å‘ˆç°ä¸€ä¸ª â€œ404â€ é¡µé¢ã€‚ ç„¶è€Œï¼Œç”±äºä¼šåœ¨ routes/web.php æ–‡ä»¶ä¸­å®šä¹‰å›é€€è·¯ç”±ï¼Œå› æ­¤ web ä¸­é—´ä»¶ç»„ä¸­çš„æ‰€æœ‰ä¸­é—´ä»¶éƒ½å°†åº”ç”¨äºè¯¥è·¯ç”±ã€‚ ä¹Ÿå¯ä»¥æ ¹æ®éœ€è¦å‘è¯¥è·¯ç”±æ·»åŠ é¢å¤–çš„ä¸­é—´ä»¶ã€‚ Route::fallback(function () { // ... }); ğŸ“¢æ³¨æ„ï¼šå›é€€è·¯ç”±åº”å§‹ç»ˆæ˜¯åº”ç”¨ç¨‹åºæ³¨å†Œçš„æœ€åä¸€ä¸ªè·¯ç”±ã€‚ ","date":"2024å¹´06æœˆ14æ—¥","objectID":"/2024/06/laravel11%E8%B7%AF%E7%94%B1/:6:0","tags":["PHP","Laravel"],"title":"Laravel 11.x è·¯ç”±","uri":"/2024/06/laravel11%E8%B7%AF%E7%94%B1/"},{"categories":["PHP","Laravel"],"content":"é€Ÿç‡é™åˆ¶ ","date":"2024å¹´06æœˆ14æ—¥","objectID":"/2024/06/laravel11%E8%B7%AF%E7%94%B1/:7:0","tags":["PHP","Laravel"],"title":"Laravel 11.x è·¯ç”±","uri":"/2024/06/laravel11%E8%B7%AF%E7%94%B1/"},{"categories":["PHP","Laravel"],"content":"å®šä¹‰é€Ÿç‡é™åˆ¶å™¨ LaravelåŒ…å«å¼ºå¤§ä¸”å¯å®šåˆ¶çš„é€Ÿç‡é™åˆ¶æœåŠ¡ï¼Œå¯ä»¥åˆ©ç”¨å®ƒä»¬æ¥é™åˆ¶ç»™å®šè·¯ç”±æˆ–è·¯ç”±ç»„çš„æµé‡é‡ã€‚ è¦å¼€å§‹ä½¿ç”¨ï¼Œåº”è¯¥å®šä¹‰æ»¡è¶³åº”ç”¨ç¨‹åºéœ€æ±‚çš„é€Ÿç‡é™åˆ¶å™¨é…ç½®ã€‚ é€Ÿç‡é™åˆ¶å™¨å¯ä»¥åœ¨åº”ç”¨ç¨‹åºçš„ App\\Providers\\AppServiceProvider ç±»çš„ boot æ–¹æ³•ä¸­å®šä¹‰ã€‚ use Illuminate\\Cache\\RateLimiting\\Limit; use Illuminate\\Http\\Request; use Illuminate\\Support\\Facades\\RateLimiter; /** * Bootstrap any application services. */ protected function boot(): void { RateLimiter::for('api', function (Request $request) { return Limit::perMinute(60)-\u003eby($request-\u003euser()?-\u003eid ?: $request-\u003eip()); }); } é€Ÿç‡é™åˆ¶å™¨æ˜¯ä½¿ç”¨ RateLimiter Facade for çš„æ–¹æ³•å®šä¹‰çš„ã€‚ for æ–¹æ³•æ¥å—ä¸€ä¸ªé€Ÿç‡é™åˆ¶å™¨åç§°å’Œä¸€ä¸ªè¿”å›åº”ç”¨äºåˆ†é…ç»™é€Ÿç‡é™åˆ¶å™¨çš„è·¯ç”±çš„é™åˆ¶é…ç½®çš„é—­åŒ…ã€‚ é™åˆ¶é…ç½®æ˜¯ Illuminate\\Cache\\RateLimiting\\Limit ç±»çš„å®ä¾‹ã€‚ è¯¥ç±»åŒ…å«æœ‰ç”¨çš„ â€œæ„å»ºå™¨â€ æ–¹æ³•ï¼Œå› æ­¤å¯ä»¥å¿«é€Ÿå®šä¹‰é™åˆ¶ã€‚ é€Ÿç‡é™åˆ¶å™¨åç§°å¯ä»¥æ˜¯ä»»ä½•å­—ç¬¦ä¸²ã€‚ use Illuminate\\Cache\\RateLimiting\\Limit; use Illuminate\\Http\\Request; use Illuminate\\Support\\Facades\\RateLimiter; /** * Bootstrap any application services. */ protected function boot(): void { RateLimiter::for('global', function (Request $request) { return Limit::perMinute(1000); }); } å¦‚æœä¼ å…¥çš„è¯·æ±‚è¶…è¿‡äº†æŒ‡å®šçš„é€Ÿç‡é™åˆ¶ï¼ŒLaravel å°†è‡ªåŠ¨è¿”å›ä¸€ä¸ªå¸¦æœ‰ 429 HTTP çŠ¶æ€ç çš„å“åº”ã€‚å¦‚æœå¸Œæœ›å®šä¹‰è‡ªå·±çš„å“åº”æ¥å¤„ç†é€Ÿç‡é™åˆ¶ï¼Œå¯ä»¥ä½¿ç”¨ response æ–¹æ³•ã€‚ RateLimiter::for('global', function (Request $request) { return Limit::perMinute(1000)-\u003eresponse(function (Request $request, array $headers) { return response('Custom response...', 429, $headers); }); }); ç”±äºé€Ÿç‡é™åˆ¶å™¨å›è°ƒæ¥æ”¶ä¼ å…¥çš„ HTTP è¯·æ±‚å®ä¾‹ï¼Œå¯ä»¥æ ¹æ®ä¼ å…¥çš„è¯·æ±‚æˆ–ç»è¿‡èº«ä»½éªŒè¯çš„ç”¨æˆ·åŠ¨æ€åœ°æ„å»ºé€‚å½“çš„é€Ÿç‡é™åˆ¶ã€‚ RateLimiter::for('uploads', function (Request $request) { return $request-\u003euser()-\u003evipCustomer() ? Limit::none() : Limit::perMinute(100); }); åˆ†æ®µé€Ÿç‡é™åˆ¶ å¯ä»¥åœ¨æ„å»ºé€Ÿç‡é™åˆ¶æ—¶ä½¿ç”¨byæ–¹æ³•å¯¹é€Ÿç‡é™åˆ¶è¿›è¡Œåˆ†æ®µ. RateLimiter::for('uploads', function (Request $request) { return $request-\u003euser()-\u003evipCustomer() ? Limit::none() : Limit::perMinute(100)-\u003eby($request-\u003eip()); }); ä¾‹ï¼šé™åˆ¶å¯¹è·¯ç”±çš„è®¿é—®ï¼Œæ¯åˆ†é’Ÿå¯¹ç»è¿‡èº«ä»½éªŒè¯çš„ç”¨æˆ·IDé™åˆ¶ä¸º100æ¬¡ï¼Œå¯¹äºæœªç™»å½•çš„è®¿å®¢ï¼Œæ¯åˆ†é’Ÿé™åˆ¶ä¸º10æ¬¡ RateLimiter::for('uploads', function (Request $request) { return $request-\u003euser() ? Limit::perMinute(100)-\u003eby($request-\u003euser()-\u003eid) : Limit::perMinute(10)-\u003eby($request-\u003eip()); }); å¤šä¸ªé€Ÿç‡é™åˆ¶ å¯ä»¥ä¸ºç»™å®šçš„é€Ÿç‡é™åˆ¶å™¨é…ç½®è¿”å›ä¸€ä¸ªé€Ÿç‡é™åˆ¶æ•°ç»„ã€‚æ¯ä¸ªé€Ÿç‡é™åˆ¶å°†æ ¹æ®å®ƒä»¬åœ¨æ•°ç»„ä¸­çš„é¡ºåºè¿›è¡Œè·¯ç”±è¯„ä¼°ã€‚ RateLimiter::for('login', function (Request $request) { return [ Limit::perMinute(500), Limit::perMinute(3)-\u003eby($request-\u003einput('email')), ]; }); ","date":"2024å¹´06æœˆ14æ—¥","objectID":"/2024/06/laravel11%E8%B7%AF%E7%94%B1/:7:1","tags":["PHP","Laravel"],"title":"Laravel 11.x è·¯ç”±","uri":"/2024/06/laravel11%E8%B7%AF%E7%94%B1/"},{"categories":["PHP","Laravel"],"content":"å°†é€Ÿç‡é™åˆ¶å™¨é™„åŠ åˆ°è·¯ç”± å¯ä»¥ä½¿ç”¨ throttle ä¸­é—´ä»¶å°†é€Ÿç‡é™åˆ¶å™¨é™„åŠ åˆ°è·¯ç”±æˆ–è·¯ç”±ç»„ã€‚ throttle ä¸­é—´ä»¶æ¥å—åˆ†é…ç»™è·¯ç”±çš„é€Ÿç‡é™åˆ¶å™¨çš„åç§°ã€‚ Route::middleware(['throttle:uploads'])-\u003egroup(function () { Route::post('/audio', function () { // ... }); Route::post('/video', function () { // ... }); }); ä½¿ç”¨Redisè¿›è¡ŒèŠ‚æµ é»˜è®¤æƒ…å†µä¸‹ï¼Œthrottle ä¸­é—´ä»¶æ˜ å°„åˆ° Illuminate\\Routing\\Middleware\\ThrottleRequests ç±»ã€‚ ç„¶è€Œï¼Œå¦‚æœä½¿ç”¨ Redis ä½œä¸ºåº”ç”¨ç¨‹åºçš„ç¼“å­˜é©±åŠ¨ç¨‹åºï¼Œå¹¶ä¸”æŒ‡ç¤º Laravel ä½¿ç”¨ Redis æ¥ç®¡ç†é€Ÿç‡é™åˆ¶ï¼Œå¯ä»¥åœ¨åº”ç”¨ç¨‹åºçš„ bootstrap/app.php æ–‡ä»¶ä¸­ä½¿ç”¨ throttleWithRedis æ–¹æ³•ã€‚ è¿™ä¸ªæ–¹æ³•å°† throttle ä¸­é—´ä»¶æ˜ å°„åˆ° Illuminate\\Routing\\Middleware\\ThrottleRequestsWithRedis ä¸­é—´ä»¶ç±»ã€‚ -\u003ewithMiddleware(function (Middleware $middleware) { $middleware-\u003ethrottleWithRedis(); // ... }) ","date":"2024å¹´06æœˆ14æ—¥","objectID":"/2024/06/laravel11%E8%B7%AF%E7%94%B1/:7:2","tags":["PHP","Laravel"],"title":"Laravel 11.x è·¯ç”±","uri":"/2024/06/laravel11%E8%B7%AF%E7%94%B1/"},{"categories":["PHP","Laravel"],"content":"è¡¨å•æ–¹æ³•æ¬ºéª— HTMLè¡¨å•ä¸æ”¯æŒPUTã€PATCHæˆ–DELETEæ“ä½œã€‚å› æ­¤ï¼Œå½“å®šä¹‰ä»HTMLè¡¨å•è°ƒç”¨çš„PUTã€PATCHæˆ–DELETEè·¯ç”±æ—¶ï¼Œéœ€è¦å‘è¡¨å•æ·»åŠ ä¸€ä¸ªéšè—çš„_methodå­—æ®µã€‚å‘é€çš„_methodå­—æ®µçš„å€¼å°†è¢«ç”¨ä½œHTTPè¯·æ±‚æ–¹æ³•ã€‚ \u003cform action=\"/example\" method=\"POST\"\u003e \u003cinput type=\"hidden\" name=\"_method\" value=\"PUT\"\u003e \u003cinput type=\"hidden\" name=\"_token\" value=\"{{ csrf_token() }}\"\u003e \u003c/form\u003e ä¸ºäº†æ–¹ä¾¿èµ·è§ï¼Œå¯ä»¥ä½¿ç”¨ Blade æŒ‡ä»¤ @method æ¥ç”Ÿæˆ _method è¾“å…¥å­—æ®µã€‚ \u003cform action=\"/example\" method=\"POST\"\u003e @method('PUT') @csrf \u003c/form\u003e ","date":"2024å¹´06æœˆ14æ—¥","objectID":"/2024/06/laravel11%E8%B7%AF%E7%94%B1/:8:0","tags":["PHP","Laravel"],"title":"Laravel 11.x è·¯ç”±","uri":"/2024/06/laravel11%E8%B7%AF%E7%94%B1/"},{"categories":["PHP","Laravel"],"content":"è®¿é—®å½“å‰è·¯ç”± å¯ä»¥ä½¿ç”¨ Route Facade ä¸Šçš„ current ã€ currentRouteName å’Œ currentRouteAction æ–¹æ³•æ¥è®¿é—®æœ‰å…³å¤„ç†ä¼ å…¥è¯·æ±‚çš„è·¯ç”±çš„ä¿¡æ¯ use Illuminate\\Support\\Facades\\Route; $route = Route::current(); // Illuminate\\Routing\\Route $name = Route::currentRouteName(); // string $action = Route::currentRouteAction(); // string ","date":"2024å¹´06æœˆ14æ—¥","objectID":"/2024/06/laravel11%E8%B7%AF%E7%94%B1/:9:0","tags":["PHP","Laravel"],"title":"Laravel 11.x è·¯ç”±","uri":"/2024/06/laravel11%E8%B7%AF%E7%94%B1/"},{"categories":["PHP","Laravel"],"content":"è·¨åŸŸèµ„æºå…±äº«ï¼ˆCORSï¼‰ Laravelå¯ä»¥è‡ªåŠ¨ä½¿ç”¨æ‚¨é…ç½®çš„å€¼å“åº”CORS OPTIONS HTTPè¯·æ±‚ã€‚ OPTIONSè¯·æ±‚å°†ç”±HandleCorsä¸­é—´ä»¶è‡ªåŠ¨å¤„ç†ï¼Œè¯¥ä¸­é—´ä»¶å·²è‡ªåŠ¨åŒ…å«åœ¨åº”ç”¨ç¨‹åºçš„å…¨å±€ä¸­é—´ä»¶å †æ ˆä¸­ã€‚ æœ‰æ—¶ï¼Œéœ€è¦è‡ªå®šä¹‰åº”ç”¨ç¨‹åºçš„CORSé…ç½®å€¼ã€‚å¯ä»¥ä½¿ç”¨ config:publish Artisanå‘½ä»¤æ¥å‘å¸ƒCORSé…ç½®æ–‡ä»¶ã€‚ php artisan config:publish cors æ­¤å‘½ä»¤ä¼šå°† cors.php é…ç½®æ–‡ä»¶æ”¾åœ¨åº”ç”¨ç¨‹åº config çš„ç›®å½•ä¸­ã€‚ ","date":"2024å¹´06æœˆ14æ—¥","objectID":"/2024/06/laravel11%E8%B7%AF%E7%94%B1/:10:0","tags":["PHP","Laravel"],"title":"Laravel 11.x è·¯ç”±","uri":"/2024/06/laravel11%E8%B7%AF%E7%94%B1/"},{"categories":["PHP","Laravel"],"content":"è·¯ç”±ç¼“å­˜ åœ¨å°†åº”ç”¨ç¨‹åºéƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒæ—¶ï¼Œåº”è¯¥åˆ©ç”¨ Laravel çš„è·¯ç”±ç¼“å­˜ã€‚ ä½¿ç”¨è·¯ç”±ç¼“å­˜å¯ä»¥å¤§å¹…å‡å°‘æ³¨å†Œæ‰€æœ‰åº”ç”¨ç¨‹åºè·¯ç”±æ‰€éœ€çš„æ—¶é—´ã€‚ è¦ç”Ÿæˆè·¯ç”±ç¼“å­˜ï¼Œå¯ä»¥æ‰§è¡Œ route:cache Artisan å‘½ä»¤ã€‚ php artisan route:cache è¿è¡Œæ­¤å‘½ä»¤åï¼Œç¼“å­˜è·¯ç”±æ–‡ä»¶å°†åœ¨æ¯ä¸ªè¯·æ±‚æ—¶åŠ è½½ã€‚ è¯·è®°ä½ï¼Œå¦‚æœæ·»åŠ äº†ä»»ä½•æ–°è·¯ç”±ï¼Œéœ€è¦ç”Ÿæˆæ–°çš„è·¯ç”±ç¼“å­˜ã€‚ å› æ­¤ï¼Œåœ¨é¡¹ç›®éƒ¨ç½²æœŸé—´åº”è¯¥åªè¿è¡Œ route:cache å‘½ä»¤ã€‚ ä½¿ç”¨ä»¥ä¸‹ route:clear å‘½ä»¤æ¸…é™¤è·¯ç”±ç¼“å­˜ï¼š php artisan route:clear ","date":"2024å¹´06æœˆ14æ—¥","objectID":"/2024/06/laravel11%E8%B7%AF%E7%94%B1/:11:0","tags":["PHP","Laravel"],"title":"Laravel 11.x è·¯ç”±","uri":"/2024/06/laravel11%E8%B7%AF%E7%94%B1/"},{"categories":["PHP","Laravel"],"content":"Laravel 11 Laravel 11 é€šè¿‡å¼•å…¥ç®€åŒ–çš„åº”ç”¨ç¨‹åºç»“æ„ã€æ¯ç§’é€Ÿç‡é™åˆ¶ã€å¥åº·è·¯ç”±ã€ä¼˜é›…çš„åŠ å¯†å¯†é’¥è½®æ¢ã€é˜Ÿåˆ—æµ‹è¯•æ”¹è¿›ã€é‡æ–°å‘é€é‚®ä»¶ä¼ è¾“ã€æç¤ºéªŒè¯å™¨é›†æˆã€æ–°çš„ Artisan å‘½ä»¤ç­‰åŠŸèƒ½ï¼Œç»§ç»­æ”¹è¿›äº† Laravel 10.x ç‰ˆæœ¬ã€‚æ­¤å¤–ï¼ŒLaravel Reverbï¼Œä¸€ä¸ªå®˜æ–¹æ¨å‡ºçš„å¯æ‰©å±• WebSocket æœåŠ¡å™¨ï¼Œä¸ºæ‚¨çš„åº”ç”¨ç¨‹åºæä¾›äº†å¼ºå¤§çš„å®æ—¶åŠŸèƒ½ã€‚ Laravel 11.x æœ€ä½è¦æ±‚ PHP ç‰ˆæœ¬ä¸º 8.2ã€‚ Installation ","date":"2024å¹´06æœˆ13æ—¥","objectID":"/2024/06/laravel11%E5%85%A5%E9%97%A8/:0:0","tags":["PHP","Laravel"],"title":"Laravel 11.x å…¥é—¨","uri":"/2024/06/laravel11%E5%85%A5%E9%97%A8/"},{"categories":["PHP","Laravel"],"content":"åˆ›å»º Laravel é¡¹ç›® å‰æï¼šéœ€è¦å®‰è£… PHP å’Œ Composer # æ–¹å¼ä¸€ï¼ˆé€šè¿‡ Composer create-projectå‘½ä»¤åˆ›å»ºï¼‰ï¼š composer create-project laravel/laravel example-app # æ–¹å¼äºŒï¼ˆé€šè¿‡Composerå…¨å±€å®‰è£…Laravelå®‰è£…ç¨‹åºè¿›è¡Œåˆ›å»ºï¼‰ï¼š composer global require laravel/installer laravel new example-app é€šè¿‡ Laravel Artisan serve å‘½ä»¤å¯åŠ¨æœ¬åœ°å¼€å‘æœåŠ¡å™¨ï¼š cd example-app php artisan serve Configuration Laravel æ¡†æ¶çš„æ‰€æœ‰é…ç½®æ–‡ä»¶éƒ½å­˜å‚¨åœ¨ config ç›®å½•ä¸­ã€‚ about Artisan å‘½ä»¤å¯ä»¥è¿›è¡ŒæŸ¥çœ‹åº”ç”¨ç¨‹åºçš„é…ç½®ã€é©±åŠ¨ç¨‹åºå’Œç¯å¢ƒçš„æ¦‚è¿°ã€‚ å¯ä»¥é€šè¿‡ --only é€‰é¡¹ç­›é€‰æŒ‡å®šéƒ¨åˆ† php artisan about php artisan about --only=environment éœ€è¦æµè§ˆæ›´è¯¦ç»†é…ç½®æ–‡ä»¶çš„å€¼ï¼Œå¯ä»¥ä½¿ç”¨ config:show Artisan å‘½ä»¤ php artisan config:show database ","date":"2024å¹´06æœˆ13æ—¥","objectID":"/2024/06/laravel11%E5%85%A5%E9%97%A8/:1:0","tags":["PHP","Laravel"],"title":"Laravel 11.x å…¥é—¨","uri":"/2024/06/laravel11%E5%85%A5%E9%97%A8/"},{"categories":["PHP","Laravel"],"content":"ç¯å¢ƒé…ç½® åœ¨å…¨æ–° Laravel å®‰è£…ä¸­ï¼Œåº”ç”¨ç¨‹åºçš„æ ¹ç›®å½•å°†åŒ…å«ä¸€ä¸ª.env.example å®šä¹‰è®¸å¤šå¸¸è§ç¯å¢ƒå˜é‡çš„æ–‡ä»¶ã€‚åœ¨å®‰è£…è¿‡ç¨‹ä¸­ï¼Œæ­¤æ–‡ä»¶å°†è‡ªåŠ¨å¤åˆ¶åˆ°.envã€‚ ç›®å½•ä¸­çš„config é…ç½®æ–‡ä»¶ä½¿ç”¨ Laravel env å‡½æ•°è¿›è¡Œè¯»å–ï¼ˆe: env('APP_DEBUG', false) ï¼‰ã€‚ æ³¨æ„ï¼š.envæ–‡ä»¶ä¸­çš„ä»»ä½•å˜é‡éƒ½å¯ä»¥è¢«å¤–éƒ¨ç¯å¢ƒå˜é‡ï¼ˆå¦‚æœåŠ¡å™¨çº§æˆ–ç³»ç»Ÿçº§ç¯å¢ƒå˜é‡ï¼‰è¦†ç›–ã€‚ åœ¨åŠ è½½åº”ç”¨ç¨‹åºçš„ç¯å¢ƒå˜é‡ä¹‹å‰ï¼ŒLaravel ä¼šç¡®å®šæ˜¯å¦å·²ä»å¤–éƒ¨æä¾› APP_ENVç¯å¢ƒå˜é‡æˆ–è€…æ˜¯å¦æŒ‡å®šäº† --env CLI å‚æ•°ã€‚å¦‚æœæœ‰æŒ‡å®šï¼ŒLaravel å°†å°è¯•åŠ è½½æ–‡ä»¶ .env.[APP_ENV]ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™å°†åŠ è½½é»˜è®¤.envæ–‡ä»¶ã€‚ ","date":"2024å¹´06æœˆ13æ—¥","objectID":"/2024/06/laravel11%E5%85%A5%E9%97%A8/:2:0","tags":["PHP","Laravel"],"title":"Laravel 11.x å…¥é—¨","uri":"/2024/06/laravel11%E5%85%A5%E9%97%A8/"},{"categories":["PHP","Laravel"],"content":"ç¯å¢ƒæ–‡ä»¶å®‰å…¨ .envæ–‡ä»¶ä¸åº”è¯¥æäº¤åˆ°åº”ç”¨ç¨‹åºçš„æºä»£ç ç®¡ç†ï¼Œå¦‚æœæ³„æ¼ï¼Œä»»ä½•æ•æ„Ÿå‡­è¯éƒ½ä¼šæš´éœ²ã€‚ ä½†æ˜¯ï¼Œå¯ä»¥ä½¿ç”¨ Laravel çš„å†…ç½®ç¯å¢ƒåŠ å¯†æ¥åŠ å¯†æ–‡ä»¶ã€‚åŠ å¯†åçš„å¯ä»¥å®‰å…¨çš„æ”¾ç½®åœ¨æºä»£ç ç®¡ç†ä¸­ã€‚ env:encrypt å‘½ä»¤åŠ å¯†ç¯å¢ƒæ–‡ä»¶ï¼ŒåŠ å¯†åçš„å†…å®¹æ”¾å…¥.env.encryptedæ–‡ä»¶ä¸­ã€‚ è§£å¯†å¯†é’¥æ˜¾ç¤ºåœ¨å‘½ä»¤çš„è¾“å‡ºä¸­ï¼Œåº”å­˜å‚¨åœ¨å®‰å…¨çš„å¯†ç ç®¡ç†å™¨ä¸­ã€‚ php artisan env:encrypt # å¯ä»¥æä¾›åŠ å¯†å¯†é’¥ï¼Œé€šè¿‡ --key é€‰é¡¹ php artisan env:encrypt --key=3UVsEgGVK36XN82KKeyLFMhvosbZN1aF # æœ‰å¤šä¸ªç¯å¢ƒæ–‡ä»¶ï¼ˆ.env / .env.stagingï¼‰ï¼Œå¯ä»¥é€šè¿‡ --env æ¥æŒ‡å®š php artisan env:encrypt --env=staging env:decrypt å‘½ä»¤è§£å¯†ç¯å¢ƒæ–‡ä»¶ã€‚ é»˜è®¤å°†ä»LARAVEL_ENV_ENCRYPTION_KEY ç¯å¢ƒå˜é‡ä¸­æ£€ç´¢è¯¥å¯†é’¥ ä¹Ÿå¯ä»¥é€šè¿‡ --key é€‰é¡¹ç›´æ¥å‘å‘½ä»¤æä¾›å¯†é’¥ è§£å¯†åçš„æ–‡ä»¶å†…å®¹ä¿å­˜åœ¨.envæ–‡ä»¶ä¸­ php artisan env:decrypt php artisan env:decrypt --key=3UVsEgGVK36XN82KKeyLFMhvosbZN1aF # æœ‰å¤šä¸ªç¯å¢ƒæ–‡ä»¶ï¼ˆ.env / .env.stagingï¼‰ï¼Œå¯ä»¥é€šè¿‡ --env æ¥æŒ‡å®š php artisan env:decrypt --env=staging # è¦è¦†ç›–ç°æœ‰ç¯å¢ƒæ–‡ä»¶ï¼Œå¯ä»¥é€šè¿‡ --force é€‰é¡¹ php artisan env:decrypt --force ","date":"2024å¹´06æœˆ13æ—¥","objectID":"/2024/06/laravel11%E5%85%A5%E9%97%A8/:3:0","tags":["PHP","Laravel"],"title":"Laravel 11.x å…¥é—¨","uri":"/2024/06/laravel11%E5%85%A5%E9%97%A8/"},{"categories":["PHP","Laravel"],"content":"è®¿é—®é…ç½®å€¼ è·å–é…ç½®å€¼ï¼šå¯ä»¥ä½¿ç”¨Config Facade æˆ–å…¨å±€ configå‡½æ•°ã€‚ $value = Config::get('app.timezone'); $value = config('app.timezone'); // å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™è¿”å›é»˜è®¤å€¼ $value = config('app.timezone', 'Asia/Shanghai'); è®¾ç½®é…ç½®å€¼ï¼šå¯ä»¥ä½¿ç”¨ Config::set æˆ–å°†æ•°ç»„ä¼ é€’ç»™configå‡½æ•° Config::set('app.timezone', 'Asia/Shanghai'); config(['app.timezone' =\u003e 'Asia/Shanghai']); ç±»å‹åŒ–é…ç½®æ£€ç´¢ï¼Œå¦‚æœæ£€ç´¢åˆ°çš„é…ç½®å€¼ä¸é¢„æœŸä¸åŒ¹é…ï¼Œåˆ™ä¼šå¼•å‘å¼‚å¸¸ Config::string('config-key'); Config::integer('config-key'); Config::float('config-key'); Config::boolean('config-key'); Config::array('config-key'); ","date":"2024å¹´06æœˆ13æ—¥","objectID":"/2024/06/laravel11%E5%85%A5%E9%97%A8/:4:0","tags":["PHP","Laravel"],"title":"Laravel 11.x å…¥é—¨","uri":"/2024/06/laravel11%E5%85%A5%E9%97%A8/"},{"categories":["PHP","Laravel"],"content":"é…ç½®ç¼“å­˜ config:cache Artisanå‘½ä»¤å°†æ‰€æœ‰é…ç½®æ–‡ä»¶ç¼“å­˜åˆ°å•ä¸ªæ–‡ä»¶ä¸­ã€‚ è¿™ä¼šå°†åº”ç”¨ç¨‹åºçš„æ‰€æœ‰é…ç½®é€‰é¡¹åˆå¹¶åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œæ¡†æ¶å¯ä»¥åŠ é€ŸåŠ è½½è¯¥æ–‡ä»¶ã€‚ php artisan config:cache config:clear ç”¨äºæ¸…é™¤ç¼“å­˜çš„é…ç½® php artisan config:clear ","date":"2024å¹´06æœˆ13æ—¥","objectID":"/2024/06/laravel11%E5%85%A5%E9%97%A8/:5:0","tags":["PHP","Laravel"],"title":"Laravel 11.x å…¥é—¨","uri":"/2024/06/laravel11%E5%85%A5%E9%97%A8/"},{"categories":["PHP","Laravel"],"content":"é…ç½®å‘å¸ƒ Laravelçš„å¤§å¤šæ•°é…ç½®æ–‡ä»¶å·²ç»å‘å¸ƒåœ¨åº”ç”¨ç¨‹åºçš„ config ç›®å½•ä¸­ï¼Œç„¶è€Œï¼Œåƒ cors.php å’Œ view.php è¿™æ ·çš„ä¸€äº›é…ç½®æ–‡ä»¶é»˜è®¤æƒ…å†µä¸‹å¹¶ä¸ä¼šå‘å¸ƒï¼Œå› ä¸ºå¤§å¤šæ•°åº”ç”¨ç¨‹åºä»ä¸éœ€è¦ä¿®æ”¹å®ƒä»¬ã€‚ ä¸è¿‡ï¼Œå¯ä»¥ä½¿ç”¨ config:publish Artisan å‘½ä»¤æ¥å‘å¸ƒé‚£äº›é»˜è®¤æœªå‘å¸ƒçš„é…ç½®æ–‡ä»¶ï¼š php artisan config:publish php artisan config:publish --all ç›®å½•ç»“æ„ ","date":"2024å¹´06æœˆ13æ—¥","objectID":"/2024/06/laravel11%E5%85%A5%E9%97%A8/:6:0","tags":["PHP","Laravel"],"title":"Laravel 11.x å…¥é—¨","uri":"/2024/06/laravel11%E5%85%A5%E9%97%A8/"},{"categories":["PHP","Laravel"],"content":"æ ¹ç›®å½• é¡¹ç›®æ ¹ç›®å½• |-- app (ç”¨äºå­˜æ”¾åº”ç”¨ç¨‹åºæ ¸å¿ƒä»£ç ) |-- bootstrap | |-- cache (ç”¨äºå­˜æ”¾æ¡†æ¶ç”Ÿæˆçš„æ–‡ä»¶ä»¥è¿›è¡Œæ€§èƒ½ä¼˜åŒ–ï¼Œæ¯”å¦‚è·¯ç”±å’ŒæœåŠ¡ç¼“å­˜æ–‡ä»¶) | |-- app.php (åˆå§‹åŒ–æ¡†æ¶) |-- config (ç”¨äºå­˜æ”¾æ‰€æœ‰åº”ç”¨ç¨‹åºçš„é…ç½®æ–‡ä»¶) |-- database (åŒ…å«æ•°æ®åº“è¿ç§»æ–‡ä»¶ã€æ¨¡å‹å·¥å‚å’Œç§å­æ–‡ä»¶ã€‚ä¹Ÿå¯ä»¥å­˜æ”¾SQLiteæ•°æ®åº“æ–‡ä»¶) |-- public | |-- index.php (è¿›å…¥åº”ç”¨ç¨‹åºçš„æ‰€æœ‰è¯·æ±‚çš„å…¥å£ï¼Œå¹¶é…ç½®äº†è‡ªåŠ¨åŠ è½½) | |-- Other (å­˜æ”¾èµ„æºæ–‡ä»¶ï¼Œå¦‚ï¼šå›¾ç‰‡ã€JSå’ŒCSS) |-- resources (å­˜æ”¾è§†å›¾ä»¥åŠåŸå§‹çš„ã€æœªç¼–è¯‘çš„èµ„äº§ï¼Œä¾‹å¦‚ï¼šCSSæˆ–JS) |-- routes (åŒ…å«åº”ç”¨ç¨‹åºçš„æ‰€æœ‰è·¯ç”±å®šä¹‰) | |-- web.php (åŒ…å«Laravelæ”¾ç½®åœ¨webä¸­é—´ä»¶ç»„ä¸­çš„è·¯ç”±ï¼Œè¯¥ä¸­é—´ä»¶ç»„æä¾›ä¼šè¯çŠ¶æ€ã€CSRF ä¿æŠ¤å’Œ Cookie åŠ å¯†) | |-- console.php (åŒ…å«æ‰€æœ‰åŸºäºé—­åŒ…çš„æ§åˆ¶å°å‘½ä»¤) |-- storage | |-- app (ç”¨äºå­˜å‚¨åº”ç”¨ç¨‹åºç”Ÿæˆçš„ä»»ä½•æ–‡ä»¶) | | |-- public (å¯ç”¨äºå­˜å‚¨ç”¨æˆ·ç”Ÿæˆçš„æ–‡ä»¶ï¼Œä¾‹å¦‚é…ç½®æ–‡ä»¶å¤´åƒï¼Œè¿™äº›æ–‡ä»¶æ˜¯å¯å…¬å¼€è®¿é—®çš„) | |-- framework (ç”¨äºå­˜å‚¨æ¡†æ¶ç”Ÿæˆçš„æ–‡ä»¶å’Œç¼“å­˜) | |-- logs (åŒ…å«åº”ç”¨ç¨‹åºçš„æ—¥å¿—æ–‡ä»¶) |-- tests (ç”¨äºè‡ªåŠ¨åŒ–æµ‹è¯•) |-- vendor (åŒ…å«Composerä¾èµ–é¡¹) ","date":"2024å¹´06æœˆ13æ—¥","objectID":"/2024/06/laravel11%E5%85%A5%E9%97%A8/:6:1","tags":["PHP","Laravel"],"title":"Laravel 11.x å…¥é—¨","uri":"/2024/06/laravel11%E5%85%A5%E9%97%A8/"},{"categories":["PHP","Laravel"],"content":"App ç›®å½•æ–‡ä»¶ç”Ÿæˆå‘½ä»¤ appç›®å½•ä¸­è®¸å¤šç±»éƒ½å¯ä»¥ç”±Artisané€šè¿‡å‘½ä»¤ç”Ÿæˆ # æŸ¥çœ‹å¯ç”¨å‘½ä»¤ php artisan list make å‘½ä»¤æ±‡æ€» å‘½ä»¤ æè¿° make:cache-table [cache:table] åˆ›å»ºç¼“å­˜æ•°æ®åº“è¡¨çš„è¿ç§»æ–‡ä»¶ make:cast åˆ›å»ºä¸€ä¸ªæ–°çš„è‡ªå®šä¹‰ Eloquent ç±»å‹è½¬æ¢ç±» make:channel åˆ›å»ºä¸€ä¸ªæ–°çš„é€šé“ç±» make:class åˆ›å»ºä¸€ä¸ªæ–°çš„ç±» make:command åˆ›å»ºä¸€ä¸ªæ–°çš„ Artisan å‘½ä»¤ make:component åˆ›å»ºä¸€ä¸ªæ–°çš„è§†å›¾ç»„ä»¶ç±» make:controller åˆ›å»ºä¸€ä¸ªæ–°çš„æ§åˆ¶å™¨ç±» make:enum åˆ›å»ºä¸€ä¸ªæ–°çš„æšä¸¾ make:event åˆ›å»ºä¸€ä¸ªæ–°çš„äº‹ä»¶ç±» make:exception åˆ›å»ºä¸€ä¸ªæ–°çš„è‡ªå®šä¹‰å¼‚å¸¸ç±» make:factory åˆ›å»ºä¸€ä¸ªæ–°çš„æ¨¡å‹å·¥å‚ make:interface åˆ›å»ºä¸€ä¸ªæ–°çš„æ¥å£ make:job åˆ›å»ºä¸€ä¸ªæ–°çš„ä»»åŠ¡ç±» make:listener åˆ›å»ºä¸€ä¸ªæ–°çš„äº‹ä»¶ç›‘å¬å™¨ç±» make:mail åˆ›å»ºä¸€ä¸ªæ–°çš„é‚®ä»¶ç±» make:middleware åˆ›å»ºä¸€ä¸ªæ–°çš„ä¸­é—´ä»¶ç±» make:migration åˆ›å»ºä¸€ä¸ªæ–°çš„è¿ç§»æ–‡ä»¶ make:model åˆ›å»ºä¸€ä¸ªæ–°çš„ Eloquent æ¨¡å‹ç±» make:notification åˆ›å»ºä¸€ä¸ªæ–°çš„é€šçŸ¥ç±» make:notifications-table [notifications:table] åˆ›å»ºé€šçŸ¥è¡¨çš„è¿ç§»æ–‡ä»¶ make:observer åˆ›å»ºä¸€ä¸ªæ–°çš„è§‚å¯Ÿè€…ç±» make:policy åˆ›å»ºä¸€ä¸ªæ–°çš„ç­–ç•¥ç±» make:provider åˆ›å»ºä¸€ä¸ªæ–°çš„æœåŠ¡æä¾›è€…ç±» make:queue-batches-table [queue:batches-table] åˆ›å»ºæ‰¹å¤„ç†æ•°æ®åº“è¡¨çš„è¿ç§»æ–‡ä»¶ make:queue-failed-table [queue:failed-table] åˆ›å»ºå¤±è´¥é˜Ÿåˆ—ä»»åŠ¡æ•°æ®åº“è¡¨çš„è¿ç§»æ–‡ä»¶ make:queue-table [queue:table] åˆ›å»ºé˜Ÿåˆ—ä»»åŠ¡æ•°æ®åº“è¡¨çš„è¿ç§»æ–‡ä»¶ make:request åˆ›å»ºä¸€ä¸ªæ–°çš„è¡¨å•è¯·æ±‚ç±» make:resource åˆ›å»ºä¸€ä¸ªæ–°çš„èµ„æº make:rule åˆ›å»ºä¸€ä¸ªæ–°çš„éªŒè¯è§„åˆ™ make:scope åˆ›å»ºä¸€ä¸ªæ–°çš„ä½œç”¨åŸŸç±» make:seeder åˆ›å»ºä¸€ä¸ªæ–°çš„æ•°æ®åº“å¡«å……ç±» make:session-table [session:table] åˆ›å»ºä¼šè¯æ•°æ®åº“è¡¨çš„è¿ç§»æ–‡ä»¶ make:test åˆ›å»ºä¸€ä¸ªæ–°çš„æµ‹è¯•ç±» make:trait åˆ›å»ºä¸€ä¸ªæ–°çš„ç‰¹æ€§ make:view åˆ›å»ºä¸€ä¸ªæ–°çš„è§†å›¾ éƒ¨ç½² ","date":"2024å¹´06æœˆ13æ—¥","objectID":"/2024/06/laravel11%E5%85%A5%E9%97%A8/:6:2","tags":["PHP","Laravel"],"title":"Laravel 11.x å…¥é—¨","uri":"/2024/06/laravel11%E5%85%A5%E9%97%A8/"},{"categories":["PHP","Laravel"],"content":"æœåŠ¡å™¨è¦æ±‚ PHP \u003e= 8.2 Ctype PHP Extension cURL PHP Extension DOM PHP Extension Fileinfo PHP Extension Filter PHP Extension Hash PHP Extension Mbstring PHP Extension OpenSSL PHP Extension PCRE PHP Extension PDO PHP Extension Session PHP Extension Tokenizer PHP Extension XML PHP Extension ","date":"2024å¹´06æœˆ13æ—¥","objectID":"/2024/06/laravel11%E5%85%A5%E9%97%A8/:7:0","tags":["PHP","Laravel"],"title":"Laravel 11.x å…¥é—¨","uri":"/2024/06/laravel11%E5%85%A5%E9%97%A8/"},{"categories":["PHP","Laravel"],"content":"æœåŠ¡å™¨é…ç½® ","date":"2024å¹´06æœˆ13æ—¥","objectID":"/2024/06/laravel11%E5%85%A5%E9%97%A8/:8:0","tags":["PHP","Laravel"],"title":"Laravel 11.x å…¥é—¨","uri":"/2024/06/laravel11%E5%85%A5%E9%97%A8/"},{"categories":["PHP","Laravel"],"content":"Nginx server { listen 80; listen [::]:80; server_name example.com; root /srv/example.com/public; add_header X-Frame-Options \"SAMEORIGIN\"; add_header X-Content-Type-Options \"nosniff\"; index index.php; charset utf-8; location / { try_files $uri $uri/ /index.php?$query_string; } location = /favicon.ico { access_log off; log_not_found off; } location = /robots.txt { access_log off; log_not_found off; } error_page 404 /index.php; location ~ \\.php$ { fastcgi_pass unix:/var/run/php/php8.2-fpm.sock; fastcgi_param SCRIPT_FILENAME $realpath_root$fastcgi_script_name; include fastcgi_params; fastcgi_hide_header X-Powered-By; } location ~ /\\.(?!well-known).* { deny all; } } ","date":"2024å¹´06æœˆ13æ—¥","objectID":"/2024/06/laravel11%E5%85%A5%E9%97%A8/:8:1","tags":["PHP","Laravel"],"title":"Laravel 11.x å…¥é—¨","uri":"/2024/06/laravel11%E5%85%A5%E9%97%A8/"},{"categories":["PHP","Laravel"],"content":"FrankenPHP FrankenPHP æ˜¯ä¸€ä¸ªç”¨ Go ç¼–å†™çš„ç°ä»£ PHP åº”ç”¨ç¨‹åºæœåŠ¡å™¨ã€‚ä¸º Laravel PHP åº”ç”¨ç¨‹åºæä¾›æœåŠ¡ï¼Œåªéœ€è°ƒç”¨å…¶php-serverå‘½ä»¤ï¼š frankenphp php-server -r public/ ","date":"2024å¹´06æœˆ13æ—¥","objectID":"/2024/06/laravel11%E5%85%A5%E9%97%A8/:8:2","tags":["PHP","Laravel"],"title":"Laravel 11.x å…¥é—¨","uri":"/2024/06/laravel11%E5%85%A5%E9%97%A8/"},{"categories":["PHP","Laravel"],"content":"ä¼˜åŒ– å°†åº”ç”¨ç¨‹åºéƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒæ—¶ï¼Œæœ‰å¤šç§æ–‡ä»¶åº”è¿›è¡Œç¼“å­˜ï¼ŒåŒ…æ‹¬ï¼šé…ç½®ã€äº‹ä»¶ã€è·¯ç”±å’Œè§†å›¾ã€‚ Laravel æä¾›äº†ä¸€ä¸ªå•ä¸€ä¸”æ–¹ä¾¿çš„optimize Artisanå‘½ä»¤ï¼Œå¯ä»¥ç¼“å­˜æ‰€æœ‰è¿™äº›æ–‡ä»¶ã€‚ é€šå¸¸åº”è¯¥ä½œä¸ºåº”ç”¨ç¨‹åºéƒ¨ç½²è¿‡ç¨‹çš„ä¸€éƒ¨åˆ†æ¥è°ƒç”¨ï¼š php artisan optimize # æ¸…é™¤æ‰€æœ‰ç¼“å­˜ php artisan optimize:clear ","date":"2024å¹´06æœˆ13æ—¥","objectID":"/2024/06/laravel11%E5%85%A5%E9%97%A8/:9:0","tags":["PHP","Laravel"],"title":"Laravel 11.x å…¥é—¨","uri":"/2024/06/laravel11%E5%85%A5%E9%97%A8/"},{"categories":["PHP","Laravel"],"content":"ç¼“å­˜ ","date":"2024å¹´06æœˆ13æ—¥","objectID":"/2024/06/laravel11%E5%85%A5%E9%97%A8/:10:0","tags":["PHP","Laravel"],"title":"Laravel 11.x å…¥é—¨","uri":"/2024/06/laravel11%E5%85%A5%E9%97%A8/"},{"categories":["PHP","Laravel"],"content":"Config ç¼“å­˜ config:cacheå‘½ä»¤ï¼Œå°†é…ç½®è¿›è¡Œç¼“å­˜ã€‚ è¿™æ ·ä¼šå°†æ‰€æœ‰é…ç½®æ–‡ä»¶åˆå¹¶åˆ°ä¸€ä¸ªç¼“å­˜æ–‡ä»¶ä¸­ï¼Œè¿™æå¤§åœ°å‡å°‘äº†æ¡†æ¶åœ¨åŠ è½½é…ç½®å€¼æ—¶è®¿é—®æ–‡ä»¶ç³»ç»Ÿçš„æ¬¡æ•°ã€‚ php artisan config:cache æ³¨æ„ï¼šä½¿ç”¨æ­¤å‘½ä»¤ï¼Œåº”ç¡®ä¿åªåœ¨é…ç½®æ–‡ä»¶ä¸­è°ƒç”¨äº†envå‡½æ•°ã€‚å› ä¸ºä¸€æ—¦é…ç½®è¢«ç¼“å­˜ï¼Œ.envæ–‡ä»¶å°†ä¸ä¼šè¢«åŠ è½½ï¼Œæ‰€æœ‰å¯¹.envå˜é‡çš„envå‡½æ•°è°ƒç”¨å°†è¿”å›nullã€‚ ","date":"2024å¹´06æœˆ13æ—¥","objectID":"/2024/06/laravel11%E5%85%A5%E9%97%A8/:10:1","tags":["PHP","Laravel"],"title":"Laravel 11.x å…¥é—¨","uri":"/2024/06/laravel11%E5%85%A5%E9%97%A8/"},{"categories":["PHP","Laravel"],"content":"Event ç¼“å­˜ event:cacheå‘½ä»¤ï¼Œåœ¨éƒ¨ç½²è¿‡ç¨‹ä¸­ç¼“å­˜åº”ç”¨ç¨‹åºè‡ªåŠ¨å‘ç°çš„äº‹ä»¶åˆ°ç›‘å¬å™¨çš„æ˜ å°„ã€‚ php artisan event:cache ","date":"2024å¹´06æœˆ13æ—¥","objectID":"/2024/06/laravel11%E5%85%A5%E9%97%A8/:10:2","tags":["PHP","Laravel"],"title":"Laravel 11.x å…¥é—¨","uri":"/2024/06/laravel11%E5%85%A5%E9%97%A8/"},{"categories":["PHP","Laravel"],"content":"Routes ç¼“å­˜ route:cacheå‘½ä»¤ï¼Œå°†æ‰€æœ‰çš„è·¯ç”±æ³¨å†Œç®€åŒ–ä¸ºåœ¨ä¸€ä¸ªç¼“å­˜æ–‡ä»¶ä¸­çš„å•ä¸ªæ–¹æ³•è°ƒç”¨ï¼Œä»è€Œåœ¨æ³¨å†Œæ•°ç™¾ä¸ªè·¯ç”±æ—¶æé«˜è·¯ç”±æ³¨å†Œçš„æ€§èƒ½ã€‚ php artisan route:cache ","date":"2024å¹´06æœˆ13æ—¥","objectID":"/2024/06/laravel11%E5%85%A5%E9%97%A8/:10:3","tags":["PHP","Laravel"],"title":"Laravel 11.x å…¥é—¨","uri":"/2024/06/laravel11%E5%85%A5%E9%97%A8/"},{"categories":["PHP","Laravel"],"content":"Views ç¼“å­˜ view:cacheå‘½ä»¤ï¼Œè¯¥å‘½ä»¤ä¼šé¢„ç¼–è¯‘æ‰€æœ‰çš„ Blade è§†å›¾ï¼Œå› æ­¤å®ƒä»¬ä¸ä¼šåœ¨éœ€è¦æ—¶å³æ—¶ç¼–è¯‘ï¼Œä»è€Œæé«˜è¿”å›è§†å›¾çš„æ¯ä¸ªè¯·æ±‚çš„æ€§èƒ½ã€‚ php artisan view:cache ","date":"2024å¹´06æœˆ13æ—¥","objectID":"/2024/06/laravel11%E5%85%A5%E9%97%A8/:10:4","tags":["PHP","Laravel"],"title":"Laravel 11.x å…¥é—¨","uri":"/2024/06/laravel11%E5%85%A5%E9%97%A8/"},{"categories":["PHP","Laravel"],"content":"Debug æ¨¡å¼ config/app.php é…ç½®æ–‡ä»¶ä¸­çš„ debug é€‰é¡¹å†³å®šäº†å®é™…å‘ç”¨æˆ·æ˜¾ç¤ºå¤šå°‘å…³äºé”™è¯¯çš„ä¿¡æ¯ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œè¯¥é€‰é¡¹è®¾ç½®ä¸ºéµå¾ªå­˜å‚¨åœ¨åº”ç”¨ç¨‹åº .env æ–‡ä»¶ä¸­çš„ APP_DEBUG ç¯å¢ƒå˜é‡çš„å€¼ã€‚ æ³¨æ„ï¼šåœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œæ­¤å€¼åº”å§‹ç»ˆä¸ºfalseã€‚ ","date":"2024å¹´06æœˆ13æ—¥","objectID":"/2024/06/laravel11%E5%85%A5%E9%97%A8/:11:0","tags":["PHP","Laravel"],"title":"Laravel 11.x å…¥é—¨","uri":"/2024/06/laravel11%E5%85%A5%E9%97%A8/"},{"categories":["PHP","Laravel"],"content":"å¥åº·è·¯ç”± Laravel åŒ…å«ä¸€ä¸ªå†…ç½®çš„å¥åº·æ£€æŸ¥è·¯ç”±ï¼Œå¯ä»¥ç”¨æ¥ç›‘æ§åº”ç”¨ç¨‹åºçŠ¶æ€ã€‚ åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œè¿™ä¸ªè·¯ç”±å¯ä»¥ç”¨æ¥å‘æ­£å¸¸è¿è¡Œæ—¶é—´ç›‘æ§å™¨ã€è´Ÿè½½å‡è¡¡å™¨æˆ–è€…åƒ Kubernetes è¿™æ ·çš„ç¼–æ’ç³»ç»ŸæŠ¥å‘Šæ‚¨çš„åº”ç”¨ç¨‹åºçŠ¶æ€ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œå¥åº·æ£€æŸ¥è·¯ç”±æä¾›äº /upï¼Œå¦‚æœåº”ç”¨ç¨‹åºå¯åŠ¨æ—¶æ²¡æœ‰å¼‚å¸¸ï¼Œåˆ™ä¼šè¿”å› 200 HTTP å“åº”ã€‚å¦åˆ™ï¼Œä¼šè¿”å› 500 HTTP å“åº”ã€‚ å¯ä»¥åœ¨åº”ç”¨ç¨‹åºçš„ bootstrap/app æ–‡ä»¶ä¸­é…ç½®æ­¤è·¯ç”±çš„ URIï¼š -\u003ewithRouting( web: __DIR__.'/../routes/web.php', commands: __DIR__.'/../routes/console.php', // health: '/up', health: '/status', ) å½“å‘æ­¤è·¯ç”±å‘å‡º HTTP è¯·æ±‚æ—¶ï¼ŒLaravel è¿˜ä¼šè°ƒåº¦ä¸€ä¸ª Illuminate\\Foundation\\Events\\DiagnosingHealth äº‹ä»¶ï¼Œå…è®¸æ‰§è¡Œä¸åº”ç”¨ç¨‹åºç›¸å…³çš„é¢å¤–å¥åº·æ£€æŸ¥ã€‚ åœ¨æ­¤äº‹ä»¶çš„ç›‘å¬å™¨ä¸­ï¼Œå¯ä»¥æ£€æŸ¥åº”ç”¨ç¨‹åºçš„æ•°æ®åº“æˆ–ç¼“å­˜çŠ¶æ€ã€‚å¦‚æœæ£€æµ‹åˆ°åº”ç”¨ç¨‹åºæœ‰é—®é¢˜ï¼Œå¯ä»¥ç›´æ¥åœ¨ç›‘å¬å™¨ä¸­æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ã€‚ ","date":"2024å¹´06æœˆ13æ—¥","objectID":"/2024/06/laravel11%E5%85%A5%E9%97%A8/:12:0","tags":["PHP","Laravel"],"title":"Laravel 11.x å…¥é—¨","uri":"/2024/06/laravel11%E5%85%A5%E9%97%A8/"},{"categories":["AI","ChatGPT"],"content":"ChatGPT æé—®çš„è‰ºæœ¯","date":"2023å¹´10æœˆ26æ—¥","objectID":"/2023/10/chatgpt%E6%8F%90%E9%97%AE%E8%89%BA%E6%9C%AF/","tags":["AI","ChatGPT"],"title":"ChatGPT æé—®çš„è‰ºæœ¯","uri":"/2023/10/chatgpt%E6%8F%90%E9%97%AE%E8%89%BA%E6%9C%AF/"},{"categories":["AI","ChatGPT"],"content":"ä¸€ã€Promptå·¥ç¨‹ ","date":"2023å¹´10æœˆ26æ—¥","objectID":"/2023/10/chatgpt%E6%8F%90%E9%97%AE%E8%89%BA%E6%9C%AF/:1:0","tags":["AI","ChatGPT"],"title":"ChatGPT æé—®çš„è‰ºæœ¯","uri":"/2023/10/chatgpt%E6%8F%90%E9%97%AE%E8%89%BA%E6%9C%AF/"},{"categories":["AI","ChatGPT"],"content":"ä»€ä¹ˆæ˜¯Promptå·¥ç¨‹ï¼Ÿ Prompt å·¥ç¨‹æ˜¯åˆ›å»º Promptã€æé—®æˆ–æŒ‡å¯¼åƒ ChatGPT è¿™æ ·çš„è¯­è¨€æ¨¡å‹è¾“å‡ºçš„è¿‡ç¨‹ã€‚ å®ƒå…è®¸ç”¨æˆ·æ§åˆ¶æ¨¡å‹çš„è¾“å‡ºï¼Œç”Ÿæˆç¬¦åˆå…¶ç‰¹å®šéœ€æ±‚çš„æ–‡æœ¬ã€‚ ChatGPT æ˜¯ä¸€ç§å…ˆè¿›çš„è¯­è¨€æ¨¡å‹ï¼Œèƒ½å¤Ÿç”Ÿæˆç±»ä¼¼äººç±»çš„æ–‡æœ¬ã€‚å®ƒå»ºç«‹åœ¨ Transformer æ¶æ„ä¹‹ä¸Šï¼Œå¯ä»¥å¤„ç†å¤§é‡æ•°æ®å¹¶ç”Ÿæˆé«˜è´¨é‡çš„æ–‡æœ¬ã€‚ ä½†æ˜¯ï¼Œä¸ºäº†ä» ChatGPT è·å¾—æœ€ä½³ç»“æœï¼Œäº†è§£å¦‚ä½•æ­£ç¡®å¼•å¯¼æ¨¡å‹æ˜¯éå¸¸é‡è¦çš„ã€‚ é€šè¿‡å¼•å¯¼æ¨¡å‹ï¼Œç”¨æˆ·å¯ä»¥æ§åˆ¶æ¨¡å‹çš„è¾“å‡ºï¼Œç”Ÿæˆç›¸å…³ã€å‡†ç¡®ä¸”é«˜è´¨é‡çš„æ–‡æœ¬ã€‚ Prompt å·¥ç¨‹çš„ä½œç”¨ï¼š é€šè¿‡æä¾›æ¸…æ™°å’Œå…·ä½“çš„æŒ‡ä»¤ï¼Œæ‚¨å¯ä»¥å¼•å¯¼æ¨¡å‹çš„è¾“ å‡ºï¼Œç¡®ä¿å…¶ç›¸å…³æ€§ã€‚ ","date":"2023å¹´10æœˆ26æ—¥","objectID":"/2023/10/chatgpt%E6%8F%90%E9%97%AE%E8%89%BA%E6%9C%AF/:1:1","tags":["AI","ChatGPT"],"title":"ChatGPT æé—®çš„è‰ºæœ¯","uri":"/2023/10/chatgpt%E6%8F%90%E9%97%AE%E8%89%BA%E6%9C%AF/"},{"categories":["AI","ChatGPT"],"content":"Promptå…¬å¼ Promptå…¬å¼æ˜¯Promptçš„ç‰¹å®šæ ¼å¼ï¼Œé€šå¸¸ç”±ä¸‰ä¸ªä¸»è¦å…ƒç´ ç»„æˆï¼š ä»»åŠ¡ï¼šæ˜ç¡®è€Œç®€æ´åœ°é™ˆè¿°Promptè¦æ±‚æ¨¡å‹ç”Ÿæˆçš„å†…å®¹ã€‚ æŒ‡ä»¤ï¼šæ¨¡å‹å†ç”Ÿæˆæ–‡æœ¬æ—¶åº”éµå¾ªçš„æŒ‡ä»¤ã€‚ è§’è‰²ï¼šæ¨¡å‹åœ¨ç”Ÿæˆæ–‡æœ¬æ—¶åº”æ‰®æ¼”çš„è§’è‰²ã€‚ ","date":"2023å¹´10æœˆ26æ—¥","objectID":"/2023/10/chatgpt%E6%8F%90%E9%97%AE%E8%89%BA%E6%9C%AF/:1:2","tags":["AI","ChatGPT"],"title":"ChatGPT æé—®çš„è‰ºæœ¯","uri":"/2023/10/chatgpt%E6%8F%90%E9%97%AE%E8%89%BA%E6%9C%AF/"},{"categories":["AI","ChatGPT"],"content":"äºŒã€æŒ‡ä»¤PromptæŠ€æœ¯ æŒ‡ä»¤PromptæŠ€æœ¯æ˜¯ä¸€ç§é€šè¿‡æä¾›ç‰¹å®šæŒ‡ä»¤æ¥å¼•å¯¼ChatGPTè¾“å‡ºçš„æ–¹æ³•ã€‚ è¯¥æŠ€æœ¯å¯¹ç¡®ä¿è¾“å‡ºç›¸å…³å’Œé«˜è´¨é‡éå¸¸æœ‰ç”¨ã€‚ Promptå…¬å¼ï¼šâ€œæŒ‰ç…§ä»¥ä¸‹æŒ‡ç¤ºç”Ÿæˆ[ä»»åŠ¡]ï¼š[æŒ‡ç¤º]â€ ç”Ÿæˆä¸­ç§‹èŠ‚ç¥ç¦ï¼š ä»»åŠ¡ï¼šç”Ÿæˆä¸­ç§‹èŠ‚ç¥ç¦ æŒ‡ä»¤ï¼šä½¿ç”¨å¹½é»˜è¯­æ°” Promptå…¬å¼ï¼šâ€œæŒ‰ç…§ä»¥ä¸‹æŒ‡ç¤ºç”Ÿæˆä¸­ç§‹èŠ‚ç¥ç¦ï¼šä½¿ç”¨å¹½é»˜è¯­æ°”â€ ç”Ÿæˆå”®å±‹æ ‡é¢˜ï¼š ä»»åŠ¡ï¼šç”Ÿæˆä¸€ä¸ªä¸¤æˆ¿ä¸¤å…è¿‘åœ°é“çš„å”®å±‹æ ‡é¢˜ æŒ‡ä»¤ï¼šæ ‡é¢˜åº”è¯¥ç¬¦åˆé¦™æ¸¯ç”¨è¯­ä¹ æƒ¯ï¼Œå¹¶ä¸”ä½¿ç”¨ç¹ä½“ Promptå…¬å¼ï¼šâ€œæŒ‰ç…§ä»¥ä¸‹æŒ‡ç¤ºç”Ÿæˆä¸€ä¸ªä¸¤æˆ¿ä¸¤å…è¿‘åœ°é“çš„å”®å±‹æ ‡é¢˜ï¼šæ ‡é¢˜åº”è¯¥ç¬¦åˆé¦™æ¸¯ç”¨è¯­ä¹ æƒ¯ï¼Œå¹¶ä¸”ä½¿ç”¨ç¹ä½“â€ ","date":"2023å¹´10æœˆ26æ—¥","objectID":"/2023/10/chatgpt%E6%8F%90%E9%97%AE%E8%89%BA%E6%9C%AF/:2:0","tags":["AI","ChatGPT"],"title":"ChatGPT æé—®çš„è‰ºæœ¯","uri":"/2023/10/chatgpt%E6%8F%90%E9%97%AE%E8%89%BA%E6%9C%AF/"},{"categories":["AI","ChatGPT"],"content":"ä¸‰ã€è§’è‰²PromptæŠ€æœ¯ è§’è‰² Prompt æŠ€æœ¯æ˜¯ä¸€ç§é€šè¿‡æŒ‡å®šæ¨¡å‹è¦æ‰®æ¼”çš„ç‰¹å®šè§’è‰²æ¥å¼•å¯¼ ChatGPT è¾“å‡ºçš„ æ–¹æ³•ã€‚ è¯¥æŠ€æœ¯å¯¹ç”Ÿæˆé’ˆå¯¹ç‰¹å®šä¸Šä¸‹æ–‡æˆ–å—ä¼—é‡èº«å®šåˆ¶çš„æ–‡æœ¬éå¸¸æœ‰ç”¨ã€‚ Promptå…¬å¼ï¼šâ€œä»¥[è§’è‰²]èº«ä»½ç”Ÿæˆ[ä»»åŠ¡]â€ ç”Ÿæˆä¸­ç§‹èŠ‚ç¥ç¦ï¼š ä»»åŠ¡ï¼šç”Ÿæˆä¸­ç§‹èŠ‚ç¥ç¦ è§’è‰²ï¼šå…¬å¸é¢†å¯¼ Promptå…¬å¼ï¼šâ€œä»¥å…¬å¸é¢†å¯¼çš„èº«ä»½ç”Ÿæˆä¸­ç§‹èŠ‚ç¥ç¦â€ ç”Ÿæˆå”®å±‹æ ‡é¢˜ï¼š ä»»åŠ¡ï¼šç”Ÿæˆä¸€ä¸ªä¸¤æˆ¿ä¸¤å…è¿‘åœ°é“çš„å”®å±‹æ ‡é¢˜ è§’è‰²ï¼šé¦™æ¸¯åœ°äº§ä»£ç†äºº Promptå…¬å¼ï¼šâ€ä»¥é¦™æ¸¯åœ°äº§ä»£ç†äººçš„èº«ä»½ç”Ÿæˆä¸€ä¸ªä¸¤æˆ¿ä¸¤å…è¿‘åœ°é“çš„å”®å±‹æ ‡é¢˜â€œ ","date":"2023å¹´10æœˆ26æ—¥","objectID":"/2023/10/chatgpt%E6%8F%90%E9%97%AE%E8%89%BA%E6%9C%AF/:3:0","tags":["AI","ChatGPT"],"title":"ChatGPT æé—®çš„è‰ºæœ¯","uri":"/2023/10/chatgpt%E6%8F%90%E9%97%AE%E8%89%BA%E6%9C%AF/"},{"categories":["AI","ChatGPT"],"content":"å››ã€æ ‡å‡†Prompt æ ‡å‡†Promptæ˜¯ä¸€ç§é€šè¿‡æä¾›æ¨¡å‹è¦å®Œæˆçš„ç‰¹å®šä»»åŠ¡æ¥å¼•å¯¼ChatGPTè¾“å‡ºçš„ç®€å•æ–¹æ³•ã€‚ Promptå…¬å¼ï¼šâ€œç”Ÿæˆä¸€ä¸ª[ä»»åŠ¡]â€ ç”Ÿæˆä¸€ä¸ªæˆ¿æºæ ‡é¢˜ ä»»åŠ¡ï¼šå†™ä¸€ä¸ªè¿‘åœ°é“çš„ä¸¤æˆ¿ä¸€å…çš„æˆ¿æºå‘å¸ƒæ ‡é¢˜ Promptå…¬å¼ï¼šâ€œç”Ÿæˆä¸€ä¸ªè¿‘åœ°é“çš„ä¸¤æˆ¿ä¸€å…çš„æˆ¿æºå‘å¸ƒæ ‡é¢˜â€ ","date":"2023å¹´10æœˆ26æ—¥","objectID":"/2023/10/chatgpt%E6%8F%90%E9%97%AE%E8%89%BA%E6%9C%AF/:4:0","tags":["AI","ChatGPT"],"title":"ChatGPT æé—®çš„è‰ºæœ¯","uri":"/2023/10/chatgpt%E6%8F%90%E9%97%AE%E8%89%BA%E6%9C%AF/"},{"categories":["AI","ChatGPT"],"content":"äº”ã€é›¶æ ·æœ¬ã€ä¸€æ ·æœ¬å’Œå°‘æ ·æœ¬Prompting é›¶æ ·æœ¬ã€ä¸€æ ·æœ¬å’Œå°‘æ ·æœ¬Promptingæ˜¯ä¸€ç§ä½¿ç”¨ChatGPTç”Ÿæˆæ–‡æœ¬çš„æŠ€æœ¯ï¼Œå¯ä»¥æœ€å°åŒ–æˆ–ä¸ä½¿ç”¨ç¤ºä¾‹ã€‚å½“ç‰¹å®šä»»åŠ¡çš„æ•°æ®æœ‰é™æˆ–ä»»åŠ¡æ˜¯æ–°çš„ä¸”æœªè¢«æ˜ç¡®å®šä¹‰æ—¶ï¼Œè¿™äº›æŠ€æœ¯éå¸¸æœ‰ç”¨ã€‚ é›¶æ ·æœ¬ï¼šç”¨äºä»»åŠ¡æ²¡æœ‰å¯ç”¨çš„æ ·ä¾‹æ—¶ã€‚å°†é€šç”¨ä»»åŠ¡æä¾›ç»™æ¨¡å‹ï¼Œå®ƒæ ¹æ®å¯¹ä»»åŠ¡çš„ç†è§£ç”Ÿæˆæ–‡æœ¬ã€‚ ä¸€æ ·æœ¬ï¼šç”¨äºåªæœ‰ä¸€ä¸ªæ ·ä¾‹å¯ç”¨çš„ä»»åŠ¡ã€‚å°†æ ·ä¾‹æä¾›ç»™æ¨¡å‹ï¼Œå®ƒæ ¹æ®å¯¹æ ·ä¾‹çš„ç†è§£ç”Ÿæˆæ–‡æœ¬ã€‚ å°‘æ ·æœ¬ï¼šç”¨äºä»»åŠ¡æœ‰é™æ•°é‡çš„æ ·ä¾‹å¯ç”¨ã€‚å°†æ ·ä¾‹æä¾›ç»™æ¨¡å‹ï¼Œå®ƒæ ¹æ®è¿™äº›æ ·ä¾‹çš„ç†è§£ç”Ÿæˆæ–‡æœ¬ã€‚ Promptå…¬å¼ï¼šâ€œæ ¹æ®[æ•°é‡]ä¸ªæ ·ä¾‹ç”Ÿæˆæ–‡æœ¬â€ å¯¹äºæ²¡æœ‰å¯ç”¨æ ·ä¾‹çš„æ–°äº§å“ï¼Œç”Ÿæˆä¸€ä¸ªäº§å“æè¿°ï¼š ä»»åŠ¡ï¼šä¸ºæ–°æ™ºèƒ½æ‰‹è¡¨æ’°å†™äº§å“æè¿° Promptå…¬å¼ï¼šâ€œå¯¹äºè¿™ä¸ªæ–°æ™ºèƒ½æ‰‹è¡¨ï¼Œé›¶æ ·ä¾‹ç”Ÿæˆäº§å“æè¿°â€ ä½¿ç”¨ä¸€ä¸ªå¯ç”¨æ ·ä¾‹æ¯”è¾ƒæ–°æ™ºèƒ½æ‰‹æœºå’Œæœ€æ–°æ¬¾çš„ iPhoneï¼š ä»»åŠ¡ï¼šæ¯”è¾ƒä¸€æ¬¾æ–°æ™ºèƒ½æ‰‹æœºå’Œæœ€æ–°æ¬¾çš„ iPhone Promptå…¬å¼ï¼šâ€œä½¿ç”¨ä¸€ä¸ªæ ·ä¾‹ï¼ˆæœ€æ–°æ¬¾ iPhoneï¼‰å¯¹è¿™ä¸ªæ–°æ™ºèƒ½æ‰‹æœºè¿›è¡Œäº§å“æ¯”è¾ƒâ€ å¯¹äºå°‘é‡å¯ç”¨çš„æ ·ä¾‹ï¼Œç”Ÿæˆä¸€ç¯‡äº§å“è¯„è®ºï¼š ä»»åŠ¡ï¼šæ’°å†™ä¸€ç¯‡æ–°ç”µå­é˜…è¯»å™¨çš„è¯„è®º Promptå…¬å¼ï¼šâ€œå¯¹äºè¿™ä¸ªæ–°ç”µå­é˜…è¯»å™¨ï¼Œä½¿ç”¨å°‘æ•°æ ·ä¾‹ï¼ˆå¦å¤–ä¸‰æ¬¾ç”µå­é˜…è¯»å™¨ï¼‰ç”Ÿæˆè¯„è®ºâ€ PS: è¿™äº›æŠ€æœ¯å¯ç”¨äºæ ¹æ®æ¨¡å‹å¯¹ä»»åŠ¡æˆ–æä¾›çš„æ ·ä¾‹çš„ç†è§£ç”Ÿæˆæ–‡æœ¬ã€‚ ","date":"2023å¹´10æœˆ26æ—¥","objectID":"/2023/10/chatgpt%E6%8F%90%E9%97%AE%E8%89%BA%E6%9C%AF/:5:0","tags":["AI","ChatGPT"],"title":"ChatGPT æé—®çš„è‰ºæœ¯","uri":"/2023/10/chatgpt%E6%8F%90%E9%97%AE%E8%89%BA%E6%9C%AF/"},{"categories":["AI","ChatGPT"],"content":"å…­ã€â€œè®©æˆ‘ä»¬æ€è€ƒä¸€ä¸‹â€æç¤º â€œè®©æˆ‘ä»¬æ€è€ƒä¸€ä¸‹â€æç¤ºæ˜¯ä¸€ç§ç”¨æ¥é¼“åŠ±ChatGPTç”Ÿæˆåæ€å’Œæ²‰æ€æ€§æ–‡æœ¬çš„æŠ€å·§ã€‚è¯¥æŠ€å·§å¯¹äºå†™ä½œè®ºæ–‡ã€è¯—æ­Œæˆ–åˆ›æ„å†™ä½œç­‰ä»»åŠ¡éå¸¸æœ‰ç”¨ã€‚ è¿™ç§ç‹¬ç‰¹çš„æç¤ºå¸®åŠ©ChatGPTä»ä¸åŒçš„è§’åº¦å›ç­”é—®é¢˜ï¼Œä»è€Œäº§ç”Ÿæ›´åŠ¨æ€å’Œä¿¡æ¯ä¸°å¯Œçš„æ®µè½ã€‚ Promptå…¬å¼ï¼šâ€œè®©æˆ‘ä»¬æ€è€ƒä¸€ä¸‹ï¼š[ä¸»é¢˜æˆ–é—®é¢˜]â€ è¦ä½¿ç”¨â€œè®©æˆ‘ä»¬æ€è€ƒä¸€ä¸‹â€æç¤ºæŠ€å·§ä¸ChatGPTè¿›è¡Œå¯¹è¯æˆ–æ–‡æœ¬ç”Ÿæˆï¼Œå¯æ˜¯æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤è¿›è¡Œï¼š ç¡®å®šè¦è®¨è®ºçš„ä¸»é¢˜æˆ–æƒ³æ³• åˆ¶å®šä¸€ä¸ªæ˜ç¡®è¡¨åä¸»é¢˜æˆ–æƒ³æ³•å¹¶å¼€å§‹å¯¹è¯æˆ–æ–‡æœ¬ç”Ÿæˆçš„æç¤º åœ¨æç¤ºå‰åŠ ä¸Šâ€œè®©æˆ‘ä»¬æ€è€ƒâ€æˆ–â€œè®©æˆ‘ä»¬è®¨è®ºâ€ï¼Œè¡¨ç¤ºæ­£åœ¨å‘èµ·å¯¹è¯æˆ–è®¨è®º ğŸŒ°ä¾‹å­ï¼š æç¤ºï¼šâ€œè®©æˆ‘ä»¬æ€è€ƒæ°”å€™å˜åŒ–å¯¹å†œä¸šçš„å½±å“â€ æç¤ºï¼šâ€œè®©æˆ‘ä»¬è®¨è®ºäººå·¥æ™ºèƒ½çš„ç°çŠ¶â€ æç¤ºï¼šâ€œè®©æˆ‘ä»¬è°ˆè°ˆè¿œç¨‹å·¥ä½œçš„åˆ©å¼Šâ€ è¿˜å¯ä»¥æ·»åŠ ä¸€ä¸ªå¼€æ”¾å¼çš„é—®é¢˜ã€é™ˆè¿°æˆ–ä¸€æ®µæ–‡æœ¬ï¼Œå¸Œæœ›æ¨¡å‹ç»§ç»­æˆ–æ‰©å±•ã€‚ PSï¼šä¸€æ—¦æä¾›äº†æç¤ºï¼Œæ¨¡å‹å°†ä½¿ç”¨å…¶è®­ç»ƒæ•°æ®å’Œç®—æ³•ç”Ÿæˆä¸æç¤ºç›¸å…³çš„å“åº”ï¼Œå¹¶ä»¥è¿è´¯çš„æ–¹å¼ç»§ç»­å¯¹è¯ã€‚ ","date":"2023å¹´10æœˆ26æ—¥","objectID":"/2023/10/chatgpt%E6%8F%90%E9%97%AE%E8%89%BA%E6%9C%AF/:6:0","tags":["AI","ChatGPT"],"title":"ChatGPT æé—®çš„è‰ºæœ¯","uri":"/2023/10/chatgpt%E6%8F%90%E9%97%AE%E8%89%BA%E6%9C%AF/"},{"categories":["AI","ChatGPT"],"content":"ä¸ƒã€è‡ªä¸€è‡´æ€§æç¤º è‡ªä¸€è‡´æ€§æç¤ºæ˜¯ä¸€ç§ç”¨äºç¡®ä¿ChatGPTçš„è¾“å‡ºä¸æ‰€æä¾›çš„è¾“å…¥ä¸€è‡´çš„æŠ€å·§ã€‚è¿™ç§æŠ€å·§å¯¹äºäº‹å®æ ¸å®ã€æ•°æ®éªŒè¯æˆ–æ–‡æœ¬ç”Ÿæˆä¸­çš„ä¸€è‡´æ€§æ£€æŸ¥ç­‰ä»»åŠ¡éå¸¸æœ‰ç”¨ã€‚ ç¤ºä¾‹ 1ï¼šæ–‡æœ¬ç”Ÿæˆ ä»»åŠ¡ï¼šç”Ÿæˆäº§å“è¯„è®º è¯´æ˜ï¼šè¯„è®ºåº”ä¸è¾“å…¥ä¸­æä¾›çš„äº§å“ä¿¡æ¯ä¸€è‡´ æç¤ºå…¬å¼ï¼šâ€œç”Ÿæˆä¸€ç¯‡ä¸ä»¥ä¸‹äº§å“ä¿¡æ¯ä¸€è‡´çš„äº§å“è¯„è®º[æ’å…¥äº§å“ä¿¡æ¯]â€ ç¤ºä¾‹ 2ï¼šæ–‡æœ¬æ‘˜è¦ ä»»åŠ¡ï¼šæ€»ç»“ä¸€ç¯‡æ–°é—»æ–‡ç«  è¯´æ˜ï¼šæ‘˜è¦åº”ä¸æ–‡ç« ä¸­æä¾›çš„ä¿¡æ¯ä¸€è‡´ æç¤ºå…¬å¼ï¼šâ€œä»¥ä¸ä»¥ä¸‹æä¾›çš„ä¿¡æ¯ä¸€è‡´çš„æ–¹å¼æ€»ç»“ä»¥ä¸‹æ–°é—»æ–‡ç« [æ’å…¥æ–°é—»æ–‡ç« ]â€ ç¤ºä¾‹ 3ï¼šæ–‡æœ¬å®Œæˆ ä»»åŠ¡ï¼šå®Œæˆä¸€ä¸ªå¥å­ è¯´æ˜ï¼šå®Œæˆåº”ä¸è¾“å…¥ä¸­æä¾›çš„ä¸Šä¸‹æ–‡ä¸€è‡´ æç¤ºå…¬å¼ï¼šâ€œä»¥ä¸æ‰€æä¾›çš„ä¸Šä¸‹æ–‡ä¸€è‡´çš„æ–¹å¼å®Œæˆä»¥ä¸‹å¥å­[æ’å…¥å¥å­]â€ ç¤ºä¾‹ 4ï¼šäº‹å®æ ¸æŸ¥ ä»»åŠ¡ï¼šæ£€æŸ¥ç»™å®šæ–°é—»æ–‡ç« ä¸­çš„ä¸€è‡´æ€§ è¾“å…¥æ–‡æœ¬ï¼šâ€œæ–‡ç« ä¸­æåˆ°è¯¥åŸå¸‚çš„äººå£ä¸º 500 ä¸‡ï¼Œä½†åæ¥å®ƒè¯´è¯¥åŸå¸‚çš„äººå£ä¸º 700 ä¸‡ã€‚â€ æç¤ºå…¬å¼ï¼šâ€œè¯·ç¡®ä¿ä»¥ä¸‹æ–‡æœ¬è‡ªæˆ‘ä¸€è‡´ï¼šæ–‡ç« ä¸­æåˆ°è¯¥åŸå¸‚çš„äººå£ä¸º 500 ä¸‡ï¼Œä½† åæ¥å®ƒè¯´è¯¥åŸå¸‚çš„äººå£ä¸º 700 ä¸‡ã€‚â€ ç¤ºä¾‹ 5ï¼šæ•°æ®éªŒè¯ï¼š ä»»åŠ¡ï¼šæ£€æŸ¥ç»™å®šæ•°æ®é›†ä¸­çš„ä¸€è‡´æ€§ è¾“å…¥æ–‡æœ¬ï¼šâ€œæ•°æ®æ˜¾ç¤º 7 æœˆä»½çš„å¹³å‡æ¸©åº¦ä¸º 30 åº¦ï¼Œä½†æœ€ä½æ¸©åº¦è®°å½•ä¸º 20 åº¦ã€‚â€ æç¤ºå…¬å¼ï¼šâ€œè¯·ç¡®ä¿ä»¥ä¸‹æ–‡æœ¬è‡ªæˆ‘ä¸€è‡´ï¼šæ•°æ®æ˜¾ç¤º 7 æœˆä»½çš„å¹³å‡æ¸©åº¦ä¸º 30 åº¦ï¼Œ ä½†æœ€ä½æ¸©åº¦è®°å½•ä¸º 20 åº¦ã€‚â€ ","date":"2023å¹´10æœˆ26æ—¥","objectID":"/2023/10/chatgpt%E6%8F%90%E9%97%AE%E8%89%BA%E6%9C%AF/:7:0","tags":["AI","ChatGPT"],"title":"ChatGPT æé—®çš„è‰ºæœ¯","uri":"/2023/10/chatgpt%E6%8F%90%E9%97%AE%E8%89%BA%E6%9C%AF/"},{"categories":["AI","ChatGPT"],"content":"å…«ã€ç§å­è¯æç¤º ç§å­è¯æç¤ºæ˜¯ä¸€ç§é€šè¿‡æä¾›ç‰¹å®šçš„ç§å­è¯æˆ–çŸ­è¯­æ¥æ§åˆ¶ChatGPTè¾“å‡ºçš„æŠ€å·§ã€‚ Promptï¼šâ€œè¯·æ ¹æ®ä»¥ä¸‹ç§å­è¯ç”Ÿæˆæ–‡æœ¬ï¼š[ç§å­è¯æˆ–çŸ­è¯­]â€ ç”Ÿæˆæ ‡é¢˜ ä»»åŠ¡ï¼šç”Ÿæˆä¸€ä¸ªè¿‘åœ°é“ä¸¤æˆ¿ä¸€å…çš„æˆ¿å±‹æ ‡é¢˜ ç§å­è¯ï¼šâ€œè¿‘åœ°é“ã€æ€¥å”®â€ æç¤ºå…¬å¼ï¼šâ€œè¯·æ ¹æ®ä»¥ä¸‹ç§å­è¯ç”Ÿæˆä¸€ä¸ªè¿‘åœ°é“ä¸¤æˆ¿ä¸€å…çš„æˆ¿å±‹æ ‡é¢˜ï¼šè¿‘åœ°é“ã€æ€¥å”®â€ ","date":"2023å¹´10æœˆ26æ—¥","objectID":"/2023/10/chatgpt%E6%8F%90%E9%97%AE%E8%89%BA%E6%9C%AF/:8:0","tags":["AI","ChatGPT"],"title":"ChatGPT æé—®çš„è‰ºæœ¯","uri":"/2023/10/chatgpt%E6%8F%90%E9%97%AE%E8%89%BA%E6%9C%AF/"},{"categories":["AI","ChatGPT"],"content":"ä¹ã€çŸ¥è¯†ç”Ÿæˆæç¤º çŸ¥è¯†ç”Ÿæˆæç¤ºæ˜¯ä¸€ç§ä»ChatGPTä¸­å¼•å‘æ–°çš„å’ŒåŸå§‹ä¿¡æ¯çš„æŠ€æœ¯ã€‚ Promptï¼šâ€œè¯·ç”Ÿæˆå…³äºã€æ„Ÿå…´è¶£çš„ä¸»é¢˜ã€‘çš„æ–°çš„å’ŒåŸå§‹çš„ä¿¡æ¯â€ è¿™æ˜¯ä¸€ç§åˆ©ç”¨æ¨¡å‹çš„é¢„å…ˆå­˜åœ¨çš„çŸ¥è¯†æ¥ç”Ÿæˆæ–°çš„ä¿¡æ¯æˆ–å›ç­”é—®é¢˜çš„æŠ€æœ¯ã€‚ è¦åœ¨ChatGPTä¸­ä½¿ç”¨æ­¤æç¤ºï¼Œåº”å°†é—®é¢˜æˆ–ä¸»é¢˜ä½œä¸ºè¾“å…¥æä¾›ç»™æ¨¡å‹ï¼Œå¹¶æä¾›ä¸€ä¸ªçŸ¥è¯†ï¼ŒæŒ‡å®šç”Ÿæˆæ–‡æœ¬çš„ä»»åŠ¡æˆ–ç›®æ ‡ã€‚æç¤ºåº”åŒ…æ‹¬æœ‰å…³æ‰€éœ€è¾“å‡ºçš„ä¿¡æ¯ï¼Œä¾‹å¦‚è¦ç”Ÿæˆæ–‡æœ¬ç±»å‹ä»¥åŠä»»ä½•ç‰¹å®šè¦æ±‚æˆ–é™åˆ¶ã€‚ çŸ¥è¯†ç”Ÿæˆ ä»»åŠ¡ï¼šç”Ÿæˆå…³äºæ˜¥èŠ‚çš„æ–°ä¿¡æ¯ è¯´æ˜ï¼šç”Ÿæˆçš„ä¿¡æ¯åº”å‡†ç¡®ä¸”ä¸ä¸»é¢˜ç›¸å…³ æç¤ºå…¬å¼ï¼šâ€œè¯·ç”Ÿæˆå…³äºæ˜¥èŠ‚çš„æ–°çš„å‡†ç¡®ä¿¡æ¯â€ ","date":"2023å¹´10æœˆ26æ—¥","objectID":"/2023/10/chatgpt%E6%8F%90%E9%97%AE%E8%89%BA%E6%9C%AF/:9:0","tags":["AI","ChatGPT"],"title":"ChatGPT æé—®çš„è‰ºæœ¯","uri":"/2023/10/chatgpt%E6%8F%90%E9%97%AE%E8%89%BA%E6%9C%AF/"},{"categories":["AI","ChatGPT"],"content":"åã€çŸ¥è¯†æ•´åˆæç¤º è¿™ç§æŠ€æœ¯åˆ©ç”¨æ¨¡å‹çš„é¢„å…ˆå­˜åœ¨çš„çŸ¥è¯†æ¥æ•´åˆæ–°ä¿¡æ¯æˆ–è¿æ¥ä¸åŒçš„ä¿¡æ¯ã€‚ è¿™ç§æŠ€æœ¯æœ‰åŠ©äºå°†ç°æœ‰çŸ¥è¯†ä¸æ–°ä¿¡æ¯ç›¸ç»“åˆï¼Œç”Ÿæˆå¯¹ç‰¹å®šä¸»ä½“æ›´å…¨é¢çš„ç†è§£ã€‚ ä¸ChatGPTä¸€èµ·ä½¿ç”¨ï¼š å°†æ–°ä¿¡æ¯å’Œç°æœ‰çŸ¥è¯†ä½œä¸ºè¾“å…¥æä¾›ç»™æ¨¡å‹ï¼Œå¹¶æä¾›ä¸€ä¸ªæç¤ºï¼ŒæŒ‡å®šç”Ÿæˆæ–‡æœ¬çš„ä»»åŠ¡æˆ–ç›®æ ‡ã€‚æç¤ºåº”åŒ…å«æœ‰å…³æ‰€éœ€è¾“å‡ºçš„ä¿¡æ¯ï¼Œä¾‹å¦‚è¦ç”Ÿæˆçš„æ–‡æœ¬ç±»å‹ä»¥åŠä»»ä½•ç‰¹å®šè¦æ±‚æˆ–é™åˆ¶ã€‚ çŸ¥è¯†æ•´åˆ ä»»åŠ¡ï¼šå°†æ–°ä¿¡æ¯ä¸ç°æœ‰çŸ¥è¯†æ•´åˆ è¯´æ˜ï¼šæ•´åˆåº”å‡†ç¡®ä¸”ä¸ä¸»é¢˜ç›¸å…³ æç¤ºå…¬å¼ï¼šâ€å°†ä»¥ä¸‹ä¿¡æ¯ä¸æœ‰å…³ã€ç‰¹å®šä¸»é¢˜ã€‘çš„ç°æœ‰çŸ¥è¯†æ•´åˆï¼šã€æ’å…¥æ–°ä¿¡æ¯ã€‘â€œ è¿æ¥ä¿¡æ¯ ä»»åŠ¡ï¼šè¿æ¥ä¸åŒçš„ä¿¡æ¯ è¯´æ˜ï¼šè¿æ¥åº”ç›¸å…³å’Œé€»è¾‘ æç¤ºå…¬å¼ï¼šâ€œä»¥ç›¸å…³å’Œé€»è¾‘çš„æ–¹å¼è¿æ¥ä¸€ä¸‹ä¿¡æ¯ï¼šã€æ’å…¥ä¿¡æ¯1ã€‘ã€ã€æ’å…¥ä¿¡æ¯2ã€‘â€ ","date":"2023å¹´10æœˆ26æ—¥","objectID":"/2023/10/chatgpt%E6%8F%90%E9%97%AE%E8%89%BA%E6%9C%AF/:10:0","tags":["AI","ChatGPT"],"title":"ChatGPT æé—®çš„è‰ºæœ¯","uri":"/2023/10/chatgpt%E6%8F%90%E9%97%AE%E8%89%BA%E6%9C%AF/"},{"categories":["AI","ChatGPT"],"content":"åä¸€ã€å¤šé¡¹é€‰æ‹©æç¤º è¿™ç§æŠ€æœ¯é—®é¢˜æˆ–ä»»åŠ¡å’Œä¸€ç»„é¢„å®šä¹‰çš„é€‰é¡¹ä½œä¸ºæ½œåœ¨ç­”æ¡ˆå‘ˆç°ç»™æ¨¡å‹ã€‚ è¿™ç§æŠ€æœ¯å¯¹äºç”Ÿæˆé™å®šäºç‰¹å®šé€‰å‹é›†çš„æ–‡æœ¬éå¸¸æœ‰ç”¨ï¼Œå¯ç”¨äºé—®ç­”ã€æ–‡æœ¬è¡¥å…¨å’Œå…¶ä»–ä»»åŠ¡ã€‚æ¨¡å‹å¯ä»¥ç”Ÿæˆé™å®šäºé¢„å®šä¹‰é€‰é¡¹çš„æ–‡æœ¬ã€‚ è¦ä¸ ChatGPT ä¸€èµ·ä½¿ç”¨å¤šé¡¹é€‰æ‹©æç¤ºï¼Œåº”å°†é—®é¢˜æˆ–ä»»åŠ¡ä½œä¸ºè¾“å…¥æä¾›ç»™æ¨¡å‹ï¼Œä»¥ åŠä¸€ç»„é¢„å®šä¹‰çš„é€‰é¡¹ä½œä¸ºæ½œåœ¨ç­”æ¡ˆã€‚æç¤ºè¿˜åº”åŒ…æ‹¬æœ‰å…³æ‰€éœ€è¾“å‡ºçš„ä¿¡æ¯ï¼Œä¾‹å¦‚è¦ ç”Ÿæˆçš„æ–‡æœ¬ç±»å‹ä»¥åŠä»»ä½•ç‰¹å®šè¦æ±‚æˆ–é™åˆ¶ã€‚ é—®ç­” ä»»åŠ¡ï¼šå›ç­”å¤šé¡¹é€‰æ‹©é—®é¢˜ è¯´æ˜ï¼šç­”æ¡ˆåº”æ˜¯é¢„å®šä¹‰é€‰é¡¹ä¹‹ä¸€ æç¤ºå…¬å¼ï¼šâ€œé€šè¿‡é€‰æ‹©ä»¥ä¸‹é€‰é¡¹ä¹‹ä¸€å›ç­”ä»¥ä¸‹é—®é¢˜ï¼š[æ’å…¥é—®é¢˜] [æ’å…¥é€‰é¡¹ 1] [æ’å…¥é€‰é¡¹ 2] [æ’å…¥é€‰é¡¹ 3]â€ æ–‡æœ¬è¡¥å…¨ ä»»åŠ¡ï¼šç”¨é¢„å®šä¹‰é€‰é¡¹ä¹‹ä¸€å®Œæˆå¥å­ è¯´æ˜ï¼šå®Œæˆåº”æ˜¯é¢„å®šä¹‰é€‰é¡¹ä¹‹ä¸€ æç¤ºå…¬å¼ï¼šâ€œé€šè¿‡é€‰æ‹©ä»¥ä¸‹é€‰é¡¹ä¹‹ä¸€æ¥å®Œæˆä»¥ä¸‹å¥å­ï¼š[æ’å…¥å¥å­] [æ’å…¥é€‰é¡¹ 1] [æ’å…¥é€‰é¡¹ 2] [æ’å…¥é€‰é¡¹ 3]â€ æƒ…æ„Ÿåˆ†æ ä»»åŠ¡ï¼šå°†æ–‡æœ¬åˆ†ç±»ä¸ºç§¯æçš„ã€ä¸­æ€§çš„æˆ–æ¶ˆæçš„ è¯´æ˜ï¼šåˆ†ç±»åº”æ˜¯é¢„å®šä¹‰é€‰é¡¹ä¹‹ä¸€ æç¤ºå…¬å¼ï¼šâ€œé€šè¿‡é€‰æ‹©ä»¥ä¸‹é€‰é¡¹ä¹‹ä¸€å°†ä»¥ä¸‹æ–‡æœ¬åˆ†ç±»ä¸ºç§¯æçš„ã€ä¸­æ€§çš„æˆ–æ¶ˆæçš„ï¼š [æ’å…¥æ–‡æœ¬] [ç§¯æ] [ä¸­æ€§] [æ¶ˆæ]â€ ","date":"2023å¹´10æœˆ26æ—¥","objectID":"/2023/10/chatgpt%E6%8F%90%E9%97%AE%E8%89%BA%E6%9C%AF/:11:0","tags":["AI","ChatGPT"],"title":"ChatGPT æé—®çš„è‰ºæœ¯","uri":"/2023/10/chatgpt%E6%8F%90%E9%97%AE%E8%89%BA%E6%9C%AF/"},{"categories":["Python","Selenium","docker"],"content":" åœ¨ä½¿ç”¨Selenium Gridæ¨¡æ‹Ÿæ“ä½œä¸Šä¼ æ–‡ä»¶æ—¶ï¼Œä¼šä»æµè§ˆå™¨å®ä¾‹çš„æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿä¸­è¯»å–æ–‡ä»¶ã€‚è¿™å°±å¯¼è‡´äº†ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœGrid Hubæ‰€åœ¨çš„æœºå™¨ä¸Šæ²¡æœ‰è¦ä¸Šä¼ çš„æ–‡ä»¶ï¼Œé‚£ä¹ˆå°±ä¼šå‡ºç°æ–‡ä»¶ä¸å­˜åœ¨çš„é”™è¯¯ã€‚ ","date":"2023å¹´10æœˆ22æ—¥","objectID":"/2023/10/selenium-grid-%E6%A8%A1%E6%8B%9F%E6%93%8D%E4%BD%9C%E4%B8%8A%E4%BC%A0%E6%93%8D%E4%BD%9C%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/:0:0","tags":["Python","Selenium","docker"],"title":"Selenium Grid æ¨¡æ‹Ÿæ“ä½œä¸Šä¼ æ“ä½œé—®é¢˜è§£å†³æ–¹æ¡ˆ","uri":"/2023/10/selenium-grid-%E6%A8%A1%E6%8B%9F%E6%93%8D%E4%BD%9C%E4%B8%8A%E4%BC%A0%E6%93%8D%E4%BD%9C%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/"},{"categories":["Python","Selenium","docker"],"content":"è§£å†³ å°†æµè§ˆå™¨å®ä¾‹çš„æŸä¸€æ–‡ä»¶å¤¹æ˜ å°„å‡ºæ¥ï¼Œåœ¨æ‰§è¡Œä¸Šä¼ æ“ä½œæ—¶ï¼Œå°†æ–‡ä»¶ä¸Šä¼ åˆ°è¯¥æ–‡ä»¶å¤¹ä¸­ï¼Œè¿™æ ·å°±å¯ä»¥è§£å†³æ–‡ä»¶ä¸å­˜åœ¨çš„é—®é¢˜ã€‚ ","date":"2023å¹´10æœˆ22æ—¥","objectID":"/2023/10/selenium-grid-%E6%A8%A1%E6%8B%9F%E6%93%8D%E4%BD%9C%E4%B8%8A%E4%BC%A0%E6%93%8D%E4%BD%9C%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/:1:0","tags":["Python","Selenium","docker"],"title":"Selenium Grid æ¨¡æ‹Ÿæ“ä½œä¸Šä¼ æ“ä½œé—®é¢˜è§£å†³æ–¹æ¡ˆ","uri":"/2023/10/selenium-grid-%E6%A8%A1%E6%8B%9F%E6%93%8D%E4%BD%9C%E4%B8%8A%E4%BC%A0%E6%93%8D%E4%BD%9C%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/"},{"categories":["Python","Selenium","docker"],"content":"æ­¥éª¤ åœ¨æ¯ä¸ªæµè§ˆå™¨é•œåƒä¸­ï¼Œåˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œä¾‹å¦‚ï¼š/home/seluser/upload volumes: - ./upload:/home/upload åœ¨æ‰§è¡Œä¸Šä¼ æ—¶ä¸­ï¼Œå°†æ–‡ä»¶ä¸Šä¼ åˆ°è¯¥æ–‡ä»¶å¤¹ï¼ˆ./uploadï¼‰ä¸­, åœ¨ä»£ç ä¸­å°±å¯ä»¥ä½¿ç”¨/home/uploadæ¥è®¿é—®è¯¥æ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶äº† ele = driver.find_element(By.XPATH, \"//input[@type='file']\") ele.send_keys(\"/home/upload/xxx.txt\") ","date":"2023å¹´10æœˆ22æ—¥","objectID":"/2023/10/selenium-grid-%E6%A8%A1%E6%8B%9F%E6%93%8D%E4%BD%9C%E4%B8%8A%E4%BC%A0%E6%93%8D%E4%BD%9C%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/:1:1","tags":["Python","Selenium","docker"],"title":"Selenium Grid æ¨¡æ‹Ÿæ“ä½œä¸Šä¼ æ“ä½œé—®é¢˜è§£å†³æ–¹æ¡ˆ","uri":"/2023/10/selenium-grid-%E6%A8%A1%E6%8B%9F%E6%93%8D%E4%BD%9C%E4%B8%8A%E4%BC%A0%E6%93%8D%E4%BD%9C%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/"},{"categories":["Python","Selenium","docker"],"content":"å¢å¼ºå¤„ç† æä¾›ä¸Šä¼ æ¥å£ï¼Œå¯ä»¥åœ¨æ‰§è¡Œä¸Šä¼ æ–‡ä»¶æ¨¡æ‹Ÿæ“ä½œä¹‹å‰ï¼Œå…ˆä½¿ç”¨æ¥å£è¿›è¡Œä¸Šä¼  èµ·ä¸€ä¸ªfastapiæœåŠ¡ï¼Œæä¾›ä¸Šä¼ æ¥å£ å°†æœåŠ¡ä¸­çš„uploadæ–‡ä»¶å¤¹æ˜ å°„åˆ°./uploadæ–‡ä»¶å¤¹ä¸­,å®ç°æ–‡ä»¶å…±äº« å°†æ‰€æœ‰æœåŠ¡ä½¿ç”¨NGINXè¿›è¡Œä»£ç† ","date":"2023å¹´10æœˆ22æ—¥","objectID":"/2023/10/selenium-grid-%E6%A8%A1%E6%8B%9F%E6%93%8D%E4%BD%9C%E4%B8%8A%E4%BC%A0%E6%93%8D%E4%BD%9C%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/:2:0","tags":["Python","Selenium","docker"],"title":"Selenium Grid æ¨¡æ‹Ÿæ“ä½œä¸Šä¼ æ“ä½œé—®é¢˜è§£å†³æ–¹æ¡ˆ","uri":"/2023/10/selenium-grid-%E6%A8%A1%E6%8B%9F%E6%93%8D%E4%BD%9C%E4%B8%8A%E4%BC%A0%E6%93%8D%E4%BD%9C%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/"},{"categories":["Python","Selenium","docker"],"content":"è¯´æ˜ Selenium Grid uiç•Œé¢ http://127.0.0.1:8080/ui Selenium Grid Hub http://127.0.0.1:8080/grid/hub from selenium import webdriver from selenium.webdriver.chrome import options # from selenium.webdriver.firefox import options # from selenium.webdriver.edge import options driver = webdriver.Remote(command_executor=\"http://admin:admin@127.0.0.1:8080/grid/hub\", options=options.Options()) Selenium Grid çŠ¶æ€ http://127.0.0.1:8080/grid/hub/status ä¸Šä¼ æ¥å£ http://127.0.0.1:8080/api/upload import requests def upload(pictures): \"\"\" ä¸Šä¼ å›¾ç‰‡ :param pictures: å›¾ç‰‡è·¯å¾„åˆ—è¡¨ :return: å›¾ç‰‡ä¸Šä¼ ååœ¨æµè§ˆå™¨å®ä¾‹ä¸­çš„è·¯å¾„åˆ—è¡¨ \"\"\" url = \"http://admin:admin@127.0.0.1:8080/api/upload\" files = [(\"files\", open(picture, 'rb')) for picture in pictures] response = requests.post(url, files=files) if response.status_code == 401: raise Exception(\"Authorization Required\") elif response.status_code != 200: raise Exception(\"Upload Failed\") else: res = response.json() return [data.get(\"browser_file_path\") for data in res.get(\"data\", [])] files_path = upload([\"/Users/example/Pictures/6.JPG\", \"/Users/example/Pictures/7.png\"]) print(files_path) # ['/home/upload/2023/10/22/19676048770179.JPG', '/home/upload/2023/10/22/19676121458637.png'] ","date":"2023å¹´10æœˆ22æ—¥","objectID":"/2023/10/selenium-grid-%E6%A8%A1%E6%8B%9F%E6%93%8D%E4%BD%9C%E4%B8%8A%E4%BC%A0%E6%93%8D%E4%BD%9C%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/:2:1","tags":["Python","Selenium","docker"],"title":"Selenium Grid æ¨¡æ‹Ÿæ“ä½œä¸Šä¼ æ“ä½œé—®é¢˜è§£å†³æ–¹æ¡ˆ","uri":"/2023/10/selenium-grid-%E6%A8%A1%E6%8B%9F%E6%93%8D%E4%BD%9C%E4%B8%8A%E4%BC%A0%E6%93%8D%E4%BD%9C%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/"},{"categories":["Python","Selenium","docker"],"content":"éƒ¨ç½²å¯åŠ¨ï¼ˆSelenium-Grid-Uploadï¼‰ ","date":"2023å¹´10æœˆ22æ—¥","objectID":"/2023/10/selenium-grid-%E6%A8%A1%E6%8B%9F%E6%93%8D%E4%BD%9C%E4%B8%8A%E4%BC%A0%E6%93%8D%E4%BD%9C%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/:3:0","tags":["Python","Selenium","docker"],"title":"Selenium Grid æ¨¡æ‹Ÿæ“ä½œä¸Šä¼ æ“ä½œé—®é¢˜è§£å†³æ–¹æ¡ˆ","uri":"/2023/10/selenium-grid-%E6%A8%A1%E6%8B%9F%E6%93%8D%E4%BD%9C%E4%B8%8A%E4%BC%A0%E6%93%8D%E4%BD%9C%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/"},{"categories":["Python","Selenium","docker"],"content":"éƒ¨ç½² å…‹éš†é¡¹ç›® git clone https://github.com/Joker-desire/Selenium-Grid-Upload.git è¿›å…¥é¡¹ç›®ç›®å½• cd Selenium-Grid-Upload è¿è¡Œ sh grid.sh run é»˜è®¤superuser username: admin password: admin ","date":"2023å¹´10æœˆ22æ—¥","objectID":"/2023/10/selenium-grid-%E6%A8%A1%E6%8B%9F%E6%93%8D%E4%BD%9C%E4%B8%8A%E4%BC%A0%E6%93%8D%E4%BD%9C%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/:3:1","tags":["Python","Selenium","docker"],"title":"Selenium Grid æ¨¡æ‹Ÿæ“ä½œä¸Šä¼ æ“ä½œé—®é¢˜è§£å†³æ–¹æ¡ˆ","uri":"/2023/10/selenium-grid-%E6%A8%A1%E6%8B%9F%E6%93%8D%E4%BD%9C%E4%B8%8A%E4%BC%A0%E6%93%8D%E4%BD%9C%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/"},{"categories":["Python","Selenium","docker"],"content":"å‘½ä»¤è¡Œ è¿è¡Œ sh grid.sh run # æŒ‡å®šå¯åŠ¨å¤šå°‘ä¸ªæµè§ˆå™¨å®ä¾‹ sh grid.sh run --scale chrome=5 --scale edge=1 --scale firefox=5 å¯åŠ¨ sh grid.sh start é‡å¯ sh grid.sh restart åœæ­¢ sh grid.sh stop åˆ é™¤ sh grid.sh down åˆ›å»ºæ–°çš„superuser sh grid.sh superuser \u003cusername\u003e ","date":"2023å¹´10æœˆ22æ—¥","objectID":"/2023/10/selenium-grid-%E6%A8%A1%E6%8B%9F%E6%93%8D%E4%BD%9C%E4%B8%8A%E4%BC%A0%E6%93%8D%E4%BD%9C%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/:3:2","tags":["Python","Selenium","docker"],"title":"Selenium Grid æ¨¡æ‹Ÿæ“ä½œä¸Šä¼ æ“ä½œé—®é¢˜è§£å†³æ–¹æ¡ˆ","uri":"/2023/10/selenium-grid-%E6%A8%A1%E6%8B%9F%E6%93%8D%E4%BD%9C%E4%B8%8A%E4%BC%A0%E6%93%8D%E4%BD%9C%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/"},{"categories":["Python","Selenium","docker"],"content":"ç¤ºä¾‹ import requests from selenium import webdriver from selenium.webdriver.chrome import options from selenium.webdriver.common.by import By def upload(pictures): \"\"\" ä¸Šä¼ å›¾ç‰‡ :param pictures: å›¾ç‰‡è·¯å¾„åˆ—è¡¨ :return: å›¾ç‰‡ä¸Šä¼ ååœ¨æµè§ˆå™¨å®ä¾‹ä¸­çš„è·¯å¾„åˆ—è¡¨ \"\"\" url = \"http://admin:admin@127.0.0.1:8080/api/upload\" files = [(\"files\", open(picture, 'rb')) for picture in pictures] response = requests.post(url, files=files) if response.status_code == 401: raise Exception(\"Authorization Required\") elif response.status_code != 200: raise Exception(\"Upload Failed\") else: res = response.json() return [data.get(\"browser_file_path\") for data in res.get(\"data\", [])] # åœ¨éœ€è¦æ‰§è¡Œä¸Šä¼ çš„æ¨¡æ‹Ÿç¨‹åºå‰ï¼Œå…ˆè¿›è¡Œä¸Šä¼ éœ€è¦ç”¨åˆ°çš„å›¾ç‰‡ files_path = upload([\"/Users/example/Pictures/6.JPG\", \"/Users/example/Pictures/7.png\"]) driver = webdriver.Remote(command_executor=\"http://admin:admin@127.0.0.1:8080/grid/hub\", options=options.Options()) driver.get(\"https://www.example.com/upload.html\") ele = driver.find_element(By.XPATH, \"//input[@type='file']\") for file_path in files_path: # é€šè¿‡ä¸Šä¼ åçš„å›¾ç‰‡è·å–æµè§ˆå™¨ä¸­çš„è·¯å¾„è¿›è¡Œä¸Šä¼  ele.send_keys(file_path) driver.quit() ","date":"2023å¹´10æœˆ22æ—¥","objectID":"/2023/10/selenium-grid-%E6%A8%A1%E6%8B%9F%E6%93%8D%E4%BD%9C%E4%B8%8A%E4%BC%A0%E6%93%8D%E4%BD%9C%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/:4:0","tags":["Python","Selenium","docker"],"title":"Selenium Grid æ¨¡æ‹Ÿæ“ä½œä¸Šä¼ æ“ä½œé—®é¢˜è§£å†³æ–¹æ¡ˆ","uri":"/2023/10/selenium-grid-%E6%A8%A1%E6%8B%9F%E6%93%8D%E4%BD%9C%E4%B8%8A%E4%BC%A0%E6%93%8D%E4%BD%9C%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/"},{"categories":["Goç¬”è®°"],"content":"æ³›å‹åŸºæœ¬å«ä¹‰ åœ¨å®šä¹‰å‡½æ•°ï¼ˆç»“æ„ç­‰ï¼‰æ—¶ï¼Œå¯èƒ½ä¼šæœ‰å¤šç§ç±»å‹ä¼ å…¥ï¼ŒçœŸæ­£ä½¿ç”¨æ–¹æ³•çš„æ—¶å€™æ‰å¯ä»¥ç¡®å®šç”¨çš„æ˜¯ä»€ä¹ˆç±»å‹ï¼Œæ­¤æ—¶å°±å¯ä»¥ç”¨ä¸€ä¸ªæ›´åŠ å®½æ³›çš„ç±»å‹ï¼ˆå­˜åœ¨ä¸€å®šçº¦æŸï¼Œåªèƒ½åœ¨å“ªäº›ç±»å‹çš„èŒƒå›´å†…ä½¿ç”¨ï¼‰æš‚æ—¶å ä½ã€‚è¿™ä¸ªç±»å‹å°±å«æ³›å‹ã€‚ æ³›å‹å®šä¹‰ å†™æ³•ï¼š[æ³›å‹æ ‡è¯† æ³›å‹çº¦æŸ] ä¾‹å¦‚ï¼š[T any] ã€ [S int|string] ","date":"2023å¹´05æœˆ27æ—¥","objectID":"/2023/05/go-%E6%B3%9B%E5%9E%8B/:0:0","tags":["Goç¬”è®°"],"title":"Go æ³›å‹ï¼ˆ1.18+ï¼‰","uri":"/2023/05/go-%E6%B3%9B%E5%9E%8B/"},{"categories":["Goç¬”è®°"],"content":"æ³›å‹æ–¹æ³• func Say[T any](msg T) T { return msg } func TestFunc(t *testing.T) { // å¯ä»¥ä¼ é€’ä»»æ„ç±»å‹çš„å‚æ•° fmt.Println(Say(\"hello\")) fmt.Println(Say(1)) // æŒ‡å®šç±»å‹ fmt.Println(Say[int](1)) fmt.Println(Say[string](\"hello\")) // å¦‚æœæŒ‡å®šäº†ç±»å‹ï¼Œå‚æ•°å¿…é¡»æ˜¯æŒ‡å®šçš„ç±»å‹ï¼Œå¦åˆ™æŠ¥é”™ï¼šcannot use 1 (untyped int constant) as string value in argument //fmt.Println(Say[string](1)) } ","date":"2023å¹´05æœˆ27æ—¥","objectID":"/2023/05/go-%E6%B3%9B%E5%9E%8B/:1:0","tags":["Goç¬”è®°"],"title":"Go æ³›å‹ï¼ˆ1.18+ï¼‰","uri":"/2023/05/go-%E6%B3%9B%E5%9E%8B/"},{"categories":["Goç¬”è®°"],"content":"æ³›å‹ç»“æ„ä½“ // æ³›å‹ç»“æ„ä½“ type User[T any] struct { Name T } // æ³›å‹ç»“æ„ä½“çš„æ–¹æ³• func (t User[T]) GetName() T { return t.Name } func TestStruct(t *testing.T) { // åœ¨åˆ›å»ºç»“æ„ä½“å˜é‡æ—¶ï¼ŒæŒ‡å®šç±»å‹ï¼ˆå¿…é¡»ï¼‰ fmt.Println(User[string]{Name: \"Joker\"}) fmt.Println(User[int]{Name: 111}) // å¦‚æœæ²¡æœ‰æŒ‡å®šç±»å‹ï¼Œä¼šæŠ¥é”™ï¼šcannot use generic type User[T any] without instantiation //fmt.Println(User{Name: 111}) // å¦‚æœæŒ‡å®šäº†ç±»å‹ï¼Œå‚æ•°å¿…é¡»æ˜¯æŒ‡å®šçš„ç±»å‹ï¼Œå¦åˆ™æŠ¥é”™ï¼šcannot use \"Joker\" (untyped string constant) as int value in struct literal //fmt.Println(User[int]{Name: \"Joker\"}) // è°ƒç”¨æ³›å‹ç»“æ„ä½“çš„æ–¹æ³• fmt.Println(User[string]{Name: \"Joker\"}.GetName()) } ","date":"2023å¹´05æœˆ27æ—¥","objectID":"/2023/05/go-%E6%B3%9B%E5%9E%8B/:2:0","tags":["Goç¬”è®°"],"title":"Go æ³›å‹ï¼ˆ1.18+ï¼‰","uri":"/2023/05/go-%E6%B3%9B%E5%9E%8B/"},{"categories":["Goç¬”è®°"],"content":"æ³›å‹Map // mapçš„keyå¿…é¡»æ˜¯å¯æ¯”è¾ƒçš„ç±»å‹ï¼Œæ‰€ä»¥è¿™é‡Œä½¿ç”¨äº†comparable type MyMap[K comparable, V any] map[K]V func TestMap(t *testing.T) { // å®šä¹‰mapæ—¶ï¼ŒæŒ‡å®šç±»å‹ var myMap MyMap[string, int] myMap = make(MyMap[string, int]) myMap[\"Joker\"] = 18 fmt.Println(myMap) } ","date":"2023å¹´05æœˆ27æ—¥","objectID":"/2023/05/go-%E6%B3%9B%E5%9E%8B/:3:0","tags":["Goç¬”è®°"],"title":"Go æ³›å‹ï¼ˆ1.18+ï¼‰","uri":"/2023/05/go-%E6%B3%9B%E5%9E%8B/"},{"categories":["Goç¬”è®°"],"content":"æ³›å‹åˆ‡ç‰‡ type mySlice[T any] []T func TestSlice(t *testing.T) { // å®šä¹‰sliceæ—¶ï¼ŒæŒ‡å®šç±»å‹ var slice mySlice[int] slice = append(slice, 1, 3, 4, 5) // å¦‚æœå†™å…¥çš„ç±»å‹ä¸æ˜¯æŒ‡å®šçš„ç±»å‹ï¼Œä¼šæŠ¥é”™ï¼šcannot use \"Joker\" (untyped string constant) as int value in argument to append //slice = append(slice, \"Joker\") fmt.Println(slice) // å®šä¹‰sliceæ—¶ï¼Œå¦‚æœæŒ‡å®šçš„ç±»å‹æ˜¯anyï¼Œå¯ä»¥å†™å…¥ä»»æ„ç±»å‹çš„å€¼ var slice2 mySlice[any] slice2 = append(slice2, 1, 3, 4, 5, \"Joker\") fmt.Println(slice2) } ","date":"2023å¹´05æœˆ27æ—¥","objectID":"/2023/05/go-%E6%B3%9B%E5%9E%8B/:4:0","tags":["Goç¬”è®°"],"title":"Go æ³›å‹ï¼ˆ1.18+ï¼‰","uri":"/2023/05/go-%E6%B3%9B%E5%9E%8B/"},{"categories":["Goç¬”è®°"],"content":"è‡ªå®šä¹‰æ³›å‹çº¦æŸ // å®šä¹‰ä¸€ä¸ªæ¥å£ type z interface { GetValue() string } // å®šä¹‰ä¸€ä¸ªç»“æ„ä½“ï¼Œå®ç°zæ¥å£ type MyStruct struct { Name string } func (s MyStruct) GetValue() string { return s.Name } // å®šä¹‰ä¸€ä¸ªç»“æ„ä½“ï¼Œæ²¡æœ‰å®ç°zæ¥å£ type MyStruct2 struct { } // å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œå‚æ•°å¿…é¡»æ˜¯å®ç°äº†zæ¥å£çš„ç±»å‹ func test[T z](s T) T { fmt.Println(s.GetValue()) return s } func TestCustomize(t *testing.T) { myStruct := MyStruct{ Name: \"Joker\", } // åªèƒ½MyStructç±»å‹ï¼ŒMyStructå®ç°äº†zæ¥å£ m := test[MyStruct](myStruct) fmt.Println(m.Name) user := MyStruct2{} // å¦‚æœä¼ å…¥çš„ç±»å‹æ²¡æœ‰å®ç°zæ¥å£ï¼Œä¼šæŠ¥é”™ï¼šMyStruct2 does not implement z (missing GetValue method) u := test[MyStruct2](user) fmt.Println(u) } ","date":"2023å¹´05æœˆ27æ—¥","objectID":"/2023/05/go-%E6%B3%9B%E5%9E%8B/:5:0","tags":["Goç¬”è®°"],"title":"Go æ³›å‹ï¼ˆ1.18+ï¼‰","uri":"/2023/05/go-%E6%B3%9B%E5%9E%8B/"},{"categories":["Goç¬”è®°"],"content":"~ç”¨æ³• å°†å¤šä¸ªçº¦æŸæ¡ä»¶é€šè¿‡~å‰ç¼€å¢åŠ åˆ°è‡ªå®šä¹‰æ¥å£ï¼Œä»¥å®ç°å¤šç±»å‹çº¦æŸ testType[T MyType]ç­‰ä»·äºtestType2[T int | string | bool] type MyType interface { ~int | ~string | ~bool } func testType[T MyType](t T) { fmt.Println(t) } // ä½¿ç”¨æ¥å£å®ç°æ³›å‹çº¦æŸ~int | ~string | ~boolï¼Œç­‰ä»·äºä¸‹é¢çš„int | string | bool func testType2[T int | string | bool](t T) { fmt.Println(t) } func TestMyType(t *testing.T) { // åªèƒ½ä¼ å…¥intã€stringã€boolç±»å‹çš„å‚æ•° testType[int](123) testType[string](\"Joker\") testType[bool](false) // å¯ä»¥ä¸ä¼ é€’ç±»å‹ï¼Œä½†æ˜¯å‚æ•°å¿…é¡»æ˜¯intã€stringã€boolç±»å‹ testType(123) testType(\"Joker\") testType(false) // å¦‚æœä¼ å…¥çš„ç±»å‹ä¸æ˜¯æŒ‡å®šçš„ç±»å‹ï¼Œä¼šæŠ¥é”™ï¼šfloat64 does not implement MyType //testType(12.8) // åªèƒ½ä¼ å…¥intã€stringã€boolç±»å‹çš„å‚æ•° testType2[int](123) testType2[string](\"Joker\") testType2[bool](false) // å¯ä»¥ä¸ä¼ é€’ç±»å‹ï¼Œä½†æ˜¯å‚æ•°å¿…é¡»æ˜¯intã€stringã€boolç±»å‹ testType2(123) testType2(\"Joker\") testType2(false) // å¦‚æœä¼ å…¥çš„ç±»å‹ä¸æ˜¯æŒ‡å®šçš„ç±»å‹ï¼Œä¼šæŠ¥é”™ï¼šfloat64 does not implement int|string|bool //testType2(12.8) } ","date":"2023å¹´05æœˆ27æ—¥","objectID":"/2023/05/go-%E6%B3%9B%E5%9E%8B/:6:0","tags":["Goç¬”è®°"],"title":"Go æ³›å‹ï¼ˆ1.18+ï¼‰","uri":"/2023/05/go-%E6%B3%9B%E5%9E%8B/"},{"categories":["Goç¬”è®°"],"content":"åŸºæœ¬ä»‹ç» åå°„å¯ä»¥åœ¨è¿è¡Œæ—¶åŠ¨æ€è·å–å˜é‡çš„å„ç§ä¿¡æ¯ï¼Œæ¯”å¦‚å˜é‡çš„ç±»å‹ï¼ˆtypeï¼‰ï¼Œç±»åˆ«ï¼ˆkindï¼‰ å¦‚æœæ˜¯ç»“æ„ä½“å˜é‡ï¼Œè¿˜å¯ä»¥è·å–åˆ°ç»“æ„ä½“æœ¬èº«çš„ä¿¡æ¯ï¼ˆåŒ…æ‹¬ç»“æ„ä½“çš„å­—æ®µã€æ–¹æ³•ï¼‰ é€šè¿‡åå°„ï¼Œå¯ä»¥ä¿®æ”¹å˜é‡çš„å€¼ï¼Œå¯ä»¥è°ƒç”¨å…³è”çš„æ–¹æ³• ä½¿ç”¨åå°„ï¼Œéœ€è¦å¼•å…¥reflectåŒ… åº”ç”¨åœºæ™¯ ä¸çŸ¥é“æ¥å£è°ƒç”¨å“ªä¸ªå‡½æ•°ï¼Œæ ¹æ®ä¼ å…¥å‚æ•°åœ¨è¿è¡Œæ—¶ç¡®å®šè°ƒç”¨çš„å…·ä½“æ¥å£ï¼Œè¿™ç§éœ€è¦å¯¹å‡½æ•°æˆ–æ–¹æ³•åå°„ã€‚ å¯¹ç»“æ„ä½“åºåˆ—åŒ–æ—¶ï¼Œå¦‚æœç»“æ„ä½“æœ‰æŒ‡å®šTagï¼Œä¹Ÿä¼šä½¿ç”¨åˆ°åå°„ç”Ÿæˆå¯¹åº”çš„å­—ç¬¦ä¸²ã€‚ é‡è¦çš„å‡½æ•°å’Œæ¦‚å¿µ reflect.TypeOf(å˜é‡å) è·å–å˜é‡çš„å±æ€§ï¼Œè¿”å›reflect.Typeç±»å‹ reflect.ValueOf(å˜é‡å) è·å–å˜é‡çš„å€¼ï¼Œè¿”å›reflect.Valueç±»å‹ï¼ˆç»“æ„ä½“ç±»å‹ï¼‰ï¼Œé€šè¿‡reflect.Valueï¼Œå¯ä»¥è·å–åˆ°å…³äºè¯¥å˜é‡çš„å¾ˆå¤šä¿¡æ¯ã€‚ å˜é‡ã€Interface{} å’Œreflect.Valueæ˜¯å¯ä»¥ç›¸äº’è½¬æ¢çš„ï¼Œè¿™ç‚¹åœ¨å®é™…å¼€å‘ä¸­ä¼šç»å¸¸ä½¿ç”¨åˆ°ã€‚ å¿«é€Ÿå…¥é—¨ æ¡ˆä¾‹1ï¼šæ¼”ç¤ºå¯¹ï¼ˆåŸºæœ¬æ•°æ®ç±»å‹ã€Interface{}ã€reflect.Valueï¼‰è¿›è¡Œåå°„çš„åŸºæœ¬æ“ä½œ package main import ( \"fmt\" \"reflect\" ) func reflectTest(b any) { // é€šè¿‡åå°„è·å–åˆ°ä¼ å…¥çš„å˜é‡çš„typeï¼Œkind,å€¼ // 1.å…ˆè·å–åˆ°reflect.Type rType := reflect.TypeOf(b) fmt.Println(\"rType = \", rType) //rType = int // 2.è·å–åˆ°reflect.Value rValue := reflect.ValueOf(b) fmt.Printf(\"rValue = %v, rValue Type = %T\\n\", rValue, rValue) //rValue = 100, rValue Type = reflect.Value // n2 := 2 + rValue //rValueå¹¶ä¸æ˜¯çœŸæ­£çš„å€¼ï¼Œç›´æ¥ä½¿ç”¨ä¼šæŠ¥é”™ï¼š2 + rValue (mismatched types untyped int and Value) n2 := 2 + rValue.Int() // é€šè¿‡rValue.Int()è·å–åˆ°çœŸæ­£çš„å€¼ fmt.Println(\"n2 = \", n2) //n2 = 102 // 3. å°†rValueè½¬æ¢æˆinterface{} iV := rValue.Interface() // å°†interface{}é€šè¿‡æ–­è¨€è½¬æ¢æˆéœ€è¦çš„ç±»å‹ num2 := iV.(int) fmt.Println(\"num2 = \", num2) //num2 = 100 } func main() { var num int = 100 reflectTest(num) } æ¡ˆä¾‹2ï¼šæ¼”ç¤ºå¯¹ï¼ˆç»“æ„ä½“ç±»å‹ã€Interface{}ã€reflect.Valueï¼‰è¿›è¡Œåå°„çš„åŸºæœ¬æ“ä½œ func reflectTest2(b any) { // 1.å…ˆè·å–åˆ°reflect.Type rType := reflect.TypeOf(b) fmt.Println(\"rType = \", rType) //rType = main.Student // 2.è·å–åˆ°reflect.Value rValue := reflect.ValueOf(b) fmt.Printf(\"rValue = %v, rValue Type = %T\\n\", rValue, rValue) //rValue = {Joker 18}, rValue Type = reflect.Value // 3. å°†rValueè½¬æ¢æˆinterface{} iV := rValue.Interface() // å°†interface{}é€šè¿‡æ–­è¨€è½¬æ¢æˆéœ€è¦çš„ç±»å‹ stu, ok := iV.(Student) if ok { fmt.Printf(\"stu.Name = %v, stu.Age = %v\\n\", stu.Name, stu.Age) //stu.Name = Joker, stu.Age = 18 } } type Student struct { Name string Age int } func main() { stu := Student{ Name: \"Joker\", Age: 18, } reflectTest2(stu) } æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚è¯´æ˜ 1ã€reflect.Value.Kind è·å–å˜é‡çš„ç±»åˆ«ï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ªå¸¸é‡ã€‚æ–‡æ¡£ 2ã€Typeæ˜¯ç±»å‹ï¼ŒKindæ˜¯ç±»åˆ«ï¼Œå®ƒä»¬å¯èƒ½æ˜¯ç›¸åŒçš„ï¼Œä¹Ÿå¯èƒ½æ˜¯ä¸åŒçš„ Var num int = 100 numçš„Typeæ˜¯intï¼ŒKindä¹Ÿæ˜¯int Var sty Student stuçš„Typeæ˜¯ pkg.Studentï¼ŒKindæ˜¯struct 3ã€é€šè¿‡åå°„å¯ä»¥è®©å˜é‡åœ¨interface{}å’ŒReflect.Valueä¹‹é—´äº’ç›¸è½¬æ¢ 4ã€ä½¿ç”¨åå°„çš„æ–¹å¼æ¥è·å–å˜é‡çš„å€¼ï¼ˆå¹¶è¿”å›å¯¹åº”çš„ç±»å‹ï¼‰ï¼Œè¦æ±‚æ•°æ®ç±»å‹åŒ¹é…ï¼Œæ¯”å¦‚xæ˜¯intï¼Œé‚£ä¹ˆå°±åº”è¯¥ä½¿ç”¨reflect.Value(x).Int()è·å–å€¼ï¼Œå¦åˆ™å°†ä¼šåœ¨æ‰§è¡Œæ—¶æŠ¥panic 5ã€é€šè¿‡åå°„æ¥ä¿®æ”¹å˜é‡ï¼Œæ³¨æ„å½“ä½¿ç”¨SetXXæ–¹æ³•æ¥è®¾ç½®éœ€è¦é€šè¿‡å¯¹åº”çš„æŒ‡é’ˆç±»å‹æ¥å®Œæˆï¼Œè¿™æ ·æ‰èƒ½æ”¹å˜ä¼ å…¥çš„å˜é‡çš„å€¼ï¼Œé€šè¿‡éœ€è¦ä½¿ç”¨åˆ°reflect.Value.Elem()æ–¹æ³• func reflectTest3(b any) { rValue := reflect.ValueOf(b) //rValue.SetInt(200) // é”™è¯¯ç”¨æ³• rValue.Elem().SetInt(200) } func main() { var num = 100 //reflectTest3(num) //å¦‚æœè¦ä¿®æ”¹å€¼ï¼Œå¿…é¡»ä¼ é€’æŒ‡é’ˆç±»å‹ï¼Œå¦åˆ™æŠ¥é”™ï¼šreflect.Value.SetInt using unaddressable value reflectTest3(\u0026num) fmt.Println(\"num = \", num) //num = 200 } 6ã€reflect.Value.Elem()ç†è§£ Elem è¿”å›æ¥å£ v åŒ…å«çš„å€¼æˆ–æŒ‡é’ˆ v æŒ‡å‘çš„å€¼ã€‚å¦‚æœ v çš„ç§ç±»ä¸æ˜¯æ¥å£æˆ–æŒ‡é’ˆï¼Œå®ƒä¼šå‘ç”Ÿpanicsã€‚å¦‚æœ v ä¸º nilï¼Œåˆ™è¿”å›é›¶å€¼ã€‚ // rValue.Elem()ç”¨äºè·å–æŒ‡é’ˆæŒ‡å‘å˜é‡ï¼Œç±»ä¼¼ä»¥ä¸‹ä»£ç ç¤ºä¾‹ï¼š num2 := 9 var ptr *int = \u0026num2 *ptr = 3 fmt.Println(\"num2 = \", num2) //num = 3 æœ€ä½³å®è·µ 1ã€ä½¿ç”¨åå°„æ¥éå†ç»“æ„ä½“çš„å­—æ®µï¼Œè°ƒç”¨ç»“æ„ä½“çš„æ–¹æ³•ï¼Œå¹¶è·å–ç»“æ„ä½“æ ‡ç­¾çš„å€¼ func TestReflect01(t *testing.T) { model := User{ Name: \"Joker\", Age: 18, } // è·å–reflect.typeç±»å‹ iType := reflect.TypeOf(model) // è·å–reflect.valueç±»å‹ iValue := reflect.ValueOf(model) // å¦‚æœç±»å‹ä¸æ˜¯ç»“æ„ä½“ç±»å‹ï¼Œå°±é€€å‡º if iValue.Kind() != reflect.Struct { t.Error(\"type is not struct\") return } // è·å–ç»“æ„ä½“å­—æ®µæ•°é‡ num := iValue.NumField() t.Log(\"num = \", num) // num = 2 // éå†ç»“æ„ä½“å­—æ®µ for i := 0; i \u003c num; i++ { // è·å–å­—æ®µåéœ€è¦ä½¿ç”¨reflect.Type name := iType.Field(i).Name t.Logf(\"Field[%d] name: %v, å€¼: %v\\n\", i, name, iValue.Field(i)) //è·å–åˆ°ç»“æ„ä½“å­—æ®µçš„æ ‡ç­¾å€¼ï¼Œéœ€è¦é€šè¿‡reflect.Typeæ¥è·å– tagVal := iType.Field(i).Tag.Get(\"json\") if tagVal != \"\" { t.Logf(\"Field[%d],Tag: %v\\n\", i, tagVal) } } // è·å–ç»“æ„ä½“æ–¹æ³•æ•°é‡ numMethod := iValue.NumMethod() t.Log(\"numMethod = \", numMethod) // numMethod = 2 // éå†ç»“æ„ä½“æ–¹æ³• for i := 0; i \u003c numMethod; i++ { // è·å–æ–¹æ³•åéœ€è¦ä½¿ç”¨reflect.Typeï¼Œå¯ä»¥çœ‹åˆ°è¿™é‡Œè·å–çš„æ–¹æ³•é¡ºåºæ˜¯æŒ‰ç…§æ–¹æ³•åçš„ASCIIç é¡ºåºæ¥çš„ t.Logf(\"Method[%d] name: %v\\n\", i, iType.Method(i).Name) } // è°ƒç”¨æ–¹æ³•ï¼Œéœ€è¦ä½¿ç”¨reflect.Value res := iValue.Method(0).Call(nil) t.Log(\"res = \", res[0].Int()) res = iValue.Method(1).Call(nil) t.Log(\"res = \", res[0].String()) params := []reflect.Value{reflect.ValueOf(\"yy\")} res = iValue.Method(2).Call(params) t.Log(\"res = \", res[0].String()) // å¯ä»¥ä½¿ç”¨æ–¹æ³•åè¿›è¡Œè°ƒç”¨ res = iValue","date":"2023å¹´05æœˆ27æ—¥","objectID":"/2023/05/go%E5%8F%8D%E5%B0%84/:0:0","tags":["Goç¬”è®°"],"title":"Go åå°„","uri":"/2023/05/go%E5%8F%8D%E5%B0%84/"},{"categories":["Goç¬”è®°"],"content":"åºåˆ—åŒ– func Marshal(v any) ([]byte, error) å¯ä¼ å…¥ä»»æ„å‚æ•°è¿›è¡Œåºåˆ—åŒ– ã€å®˜æ–¹æ–‡æ¡£ã€‘ ","date":"2023å¹´05æœˆ25æ—¥","objectID":"/2023/05/go%E5%BA%8F%E5%88%97%E5%8C%96/:0:0","tags":["Goç¬”è®°"],"title":"Go åºåˆ—åŒ–","uri":"/2023/05/go%E5%BA%8F%E5%88%97%E5%8C%96/"},{"categories":["Goç¬”è®°"],"content":"ç»“æ„ä½“åºåˆ—åŒ– package main import ( \"encoding/json\" \"fmt\" ) type User struct { Name string `json:\"name\"` Age int `json:\"age\"` Hobby []string `json:\"hobby\"` } user := User{ Name: \"Joker\", Age: 20, Hobby: []string{\"è·‘æ­¥\", \"çˆ¬å±±\", \"æ¸¸æ³³\"}, } // è°ƒç”¨json.Marshalè¿›è¡Œåºåˆ—åŒ– marshal, err := json.Marshal(\u0026user) if err != nil { fmt.Println(\"Serialization err \", err) } fmt.Println(\"Struct to Serialization result: \", string(marshal)) ","date":"2023å¹´05æœˆ25æ—¥","objectID":"/2023/05/go%E5%BA%8F%E5%88%97%E5%8C%96/:1:0","tags":["Goç¬”è®°"],"title":"Go åºåˆ—åŒ–","uri":"/2023/05/go%E5%BA%8F%E5%88%97%E5%8C%96/"},{"categories":["Goç¬”è®°"],"content":"Mapåºåˆ—åŒ– package main import ( \"encoding/json\" \"fmt\" ) var user map[string]any // mapä½¿ç”¨è¦å…ˆmake user = make(map[string]any) user[\"name\"] = \"Desire\" user[\"age\"] = 19 user[\"hobby\"] = []string{\"ç¯®çƒ\", \"ç¾½æ¯›çƒ\"} marshal, err := json.Marshal(user) if err != nil { fmt.Println(\"Serialization err \", err) } fmt.Println(\"Map to Serialization result: \", string(marshal)) ","date":"2023å¹´05æœˆ25æ—¥","objectID":"/2023/05/go%E5%BA%8F%E5%88%97%E5%8C%96/:2:0","tags":["Goç¬”è®°"],"title":"Go åºåˆ—åŒ–","uri":"/2023/05/go%E5%BA%8F%E5%88%97%E5%8C%96/"},{"categories":["Goç¬”è®°"],"content":"Sliceåºåˆ—åŒ– package main import ( \"encoding/json\" \"fmt\" ) var users []map[string]any user1 := map[string]any{ \"name\": \"Joker\", \"age\": 18, \"hobby\": []string{\"è¶³çƒ\", \"å¾’æ­¥\"}, } users = append(users, user1) user2 := map[string]any{ \"name\": \"Joker2\", \"age\": 18, \"hobby\": []string{\"è¶³çƒ\", \"å¾’æ­¥\"}, } users = append(users, user2) marshal, err := json.Marshal(users) if err != nil { fmt.Println(\"Serialization err \", err) } fmt.Println(\"Map to Serialization result: \", string(marshal)) ååºåˆ—åŒ– func Unmarshal(data []byte, v any) error å‚æ•°1ï¼šååºåˆ—åŒ–æ•°æ®ï¼ˆ[]byteï¼‰,å‚æ•°2ï¼šååºåˆ—åŒ–çš„å¯¹è±¡ ã€å®˜æ–¹æ–‡æ¡£ã€‘ ","date":"2023å¹´05æœˆ25æ—¥","objectID":"/2023/05/go%E5%BA%8F%E5%88%97%E5%8C%96/:3:0","tags":["Goç¬”è®°"],"title":"Go åºåˆ—åŒ–","uri":"/2023/05/go%E5%BA%8F%E5%88%97%E5%8C%96/"},{"categories":["Goç¬”è®°"],"content":"ååºåˆ—åŒ–æˆç»“æ„ä½“ package main import ( \"encoding/json\" \"fmt\" ) type User struct { Name string `json:\"name\"` Age int `json:\"age\"` Hobby []string `json:\"hobby\"` } str := `{\"name\":\"Joker\",\"age\":20,\"hobby\":[\"è·‘æ­¥\",\"çˆ¬å±±\",\"æ¸¸æ³³\"]}` var user User err := json.Unmarshal([]byte(str), \u0026user) if err != nil { fmt.Println(\"Deserialization err \", err) } fmt.Println(user) ","date":"2023å¹´05æœˆ25æ—¥","objectID":"/2023/05/go%E5%BA%8F%E5%88%97%E5%8C%96/:4:0","tags":["Goç¬”è®°"],"title":"Go åºåˆ—åŒ–","uri":"/2023/05/go%E5%BA%8F%E5%88%97%E5%8C%96/"},{"categories":["Goç¬”è®°"],"content":"ååºåˆ—åŒ–æˆMap package main import ( \"encoding/json\" \"fmt\" ) str := `{\"age\":19,\"hobby\":[\"ç¯®çƒ\",\"ç¾½æ¯›çƒ\"],\"name\":\"Desire\"}` var user map[string]any err := json.Unmarshal([]byte(str), \u0026user) if err != nil { fmt.Println(\"Deserialization err \", err) } fmt.Println(user) ","date":"2023å¹´05æœˆ25æ—¥","objectID":"/2023/05/go%E5%BA%8F%E5%88%97%E5%8C%96/:5:0","tags":["Goç¬”è®°"],"title":"Go åºåˆ—åŒ–","uri":"/2023/05/go%E5%BA%8F%E5%88%97%E5%8C%96/"},{"categories":["Goç¬”è®°"],"content":"ååºåˆ—åŒ–æˆSlice package main import ( \"encoding/json\" \"fmt\" ) str := `[{\"age\":18,\"hobby\":[\"è¶³çƒ\",\"å¾’æ­¥\"],\"name\":\"Joker\"},{\"age\":18,\"hobby\":[\"è¶³çƒ\",\"å¾’æ­¥\"],\"name\":\"Joker2\"}]` var users []map[string]any err := json.Unmarshal([]byte(str), \u0026users) if err != nil { fmt.Println(\"Deserialization err \", err) } fmt.Println(users) ","date":"2023å¹´05æœˆ25æ—¥","objectID":"/2023/05/go%E5%BA%8F%E5%88%97%E5%8C%96/:6:0","tags":["Goç¬”è®°"],"title":"Go åºåˆ—åŒ–","uri":"/2023/05/go%E5%BA%8F%E5%88%97%E5%8C%96/"},{"categories":["Goç¬”è®°"],"content":"Argsè§£æå‘½ä»¤è¡Œå‚æ•° flagè§£æå‘½ä»¤è¡Œå‚æ•° package main import ( \"flag\" \"fmt\" \"time\" ) //flagåº“æ˜¯Goè¯­è¨€æ ‡å‡†åº“ä¹‹ä¸€ï¼Œæä¾›äº†å‘½ä»¤è¡Œå‚æ•°è§£æçš„èƒ½åŠ›ã€‚ func main() { b := flag.Bool(\"testBool\", false, \"testBool is bool byte.\") // go run main.go -testBool=false port := flag.Int(\"port\", 8081, \"æœåŠ¡ç«¯å£å·\") // go run main.go --port 8080 var ( boolValue bool intValue int int64Value int64 uintValue uint uint64Value uint64 stringValue string float64Value float64 durationValue time.Duration ) flag.BoolVar(\u0026boolValue, \"bool\", false, \"This is bool value.\") flag.IntVar(\u0026intValue, \"int\", 0, \"This is int value.\") flag.Int64Var(\u0026int64Value, \"int64\", 0, \"This is int64 value.\") flag.UintVar(\u0026uintValue, \"uint\", 0, \"This is uint value.\") flag.Uint64Var(\u0026uint64Value, \"uint64\", 0, \"This is uint64 value.\") flag.StringVar(\u0026stringValue, \"string\", \"\", \"This is string value.\") flag.Float64Var(\u0026float64Value, \"float64\", 0, \"This is float64 value\") flag.DurationVar(\u0026durationValue, \"duration\", time.Second*0, \"This is duration value.\") flag.Parse() fmt.Println(*b, *port) } ","date":"2023å¹´05æœˆ24æ—¥","objectID":"/2023/05/go%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%8F%82%E6%95%B0/:0:0","tags":["Goç¬”è®°"],"title":"Go å‘½ä»¤è¡Œå‚æ•°","uri":"/2023/05/go%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%8F%82%E6%95%B0/"},{"categories":["Goç¬”è®°"],"content":"åŸºæœ¬ä»‹ç» æ–‡ä»¶å†ç¨‹åºä¸­æ˜¯ä»¥æµçš„å½¢å¼æ¥æ“ä½œçš„ã€‚ æµï¼šæ•°æ®å†æ•°æ®æºï¼ˆæ–‡ä»¶ï¼‰å’Œç¨‹åºï¼ˆå†…å­˜ï¼‰ä¹‹é—´ç»å†çš„è·¯å¾„ è¾“å…¥æµï¼šæ•°æ®ä»æ•°æ®æºï¼ˆæ–‡ä»¶ï¼‰åˆ°ç¨‹åºï¼ˆå†…å­˜ï¼‰çš„è·¯å¾„ è¾“å‡ºæµï¼šæ•°æ®ä»ç¨‹åºï¼ˆå†…å­˜ï¼‰åˆ°æ•°æ®æºï¼ˆæ–‡ä»¶ï¼‰çš„è·¯å¾„ os.Fileå°è£…äº†æ‰€æœ‰æ–‡ä»¶ç›¸å…³çš„æ“ä½œï¼ŒFileæ˜¯ä¸€ä¸ªç»“æ„ä½“ã€‚ æ–‡æ¡£ æ–‡ä»¶æ“ä½œ ","date":"2023å¹´05æœˆ23æ—¥","objectID":"/2023/05/go%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C/:0:0","tags":["Goç¬”è®°"],"title":"Goæ–‡ä»¶æ“ä½œ","uri":"/2023/05/go%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C/"},{"categories":["Goç¬”è®°"],"content":"æ–‡ä»¶æ‰“å¼€å’Œå…³é—­ ","date":"2023å¹´05æœˆ23æ—¥","objectID":"/2023/05/go%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C/:1:0","tags":["Goç¬”è®°"],"title":"Goæ–‡ä»¶æ“ä½œ","uri":"/2023/05/go%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C/"},{"categories":["Goç¬”è®°"],"content":"è¯»æ–‡ä»¶æ“ä½œåº”ç”¨å®ä¾‹ 1ã€è¯»å–æ–‡ä»¶çš„å†…å®¹ä½¿ç”¨å¸¦ç¼“å†²åŒºçš„æ–¹å¼ï¼Œä½¿ç”¨os.Open, file.Close, bufio.NewReader(), reader.ReadStringå‡½æ•°å’Œæ–¹æ³• 2ã€è¯»å–æ–‡ä»¶çš„å†…å®¹ä½¿ç”¨ioutilä¸€æ¬¡å°†æ•´ä¸ªæ–‡ä»¶è¯»å…¥åˆ°å†…å­˜ä¸­ï¼Œè¿™ç§æ–¹å¼é€‚ç”¨äºæ–‡ä»¶ä¸å¤§çš„æƒ…å†µã€‚ç›¸å…³æ–¹æ³•å’Œå‡½æ•°(ioutil.ReadFile) ","date":"2023å¹´05æœˆ23æ—¥","objectID":"/2023/05/go%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C/:2:0","tags":["Goç¬”è®°"],"title":"Goæ–‡ä»¶æ“ä½œ","uri":"/2023/05/go%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C/"},{"categories":["Goç¬”è®°"],"content":"å†™æ–‡ä»¶æ“ä½œåº”ç”¨å®ä¾‹ ","date":"2023å¹´05æœˆ23æ—¥","objectID":"/2023/05/go%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C/:3:0","tags":["Goç¬”è®°"],"title":"Goæ–‡ä»¶æ“ä½œ","uri":"/2023/05/go%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C/"},{"categories":["Goç¬”è®°"],"content":"os.OpenFileå†™æ–‡ä»¶ func OpenFile(name string , flag int , perm FileMode ) (* File , error ) è¯´æ˜ï¼š os.OpenFileæ˜¯ä¸€ä¸ªæ›´ä¸€èˆ¬æ€§çš„æ–‡ä»¶æ‰“å¼€å‡½æ•°ï¼Œå®ƒä¼šä½¿ç”¨æŒ‡å®šçš„é€‰é¡¹ã€æŒ‡å®šçš„æ¨¡å¼æ‰“å¼€æŒ‡å®šåç§°çš„æ–‡ä»¶ã€‚å¦‚æœæ“ä½œæˆåŠŸï¼Œè¿”å›æ–‡ä»¶å¯¹è±¡å¯ç”¨äºI/Oã€‚å¦‚æœå‡ºé”™ï¼Œé”™è¯¯åº•å±‚ç±»å‹æ˜¯*PathErrorã€‚ å‚æ•°è¯´æ˜ï¼š ç¬¬ä¸€ä¸ªå‚æ•°ï¼šæ–‡ä»¶è·¯å¾„ ç¬¬äºŒä¸ªå‚æ•°ï¼šæ‰“å¼€æ–‡ä»¶çš„é€‰é¡¹ï¼š ç¬¬ä¸‰ä¸ªå‚æ•°ï¼šæƒé™æ§åˆ¶ å®ä¾‹ï¼š 1ã€åˆ›å»ºæ–°æ–‡ä»¶å¹¶å†™å…¥å†…å®¹ os.O_CREATE|os.O_WRONLY(åˆ›å»º|åªå†™) package main import ( \"bufio\" \"fmt\" \"os\" ) func main() { // åˆ›å»ºæ–°æ–‡ä»¶ï¼Œå†™å…¥å†…å®¹ fileName := \"go-basic/go-file/writer_file/test.txt\" file, err := os.OpenFile(fileName, os.O_CREATE|os.O_WRONLY, 0666) if err != nil { fmt.Println(\"open file err=\", err) return } defer file.Close() // å†™å…¥å†…å®¹ str := \"Hello Golang\\n\" // ä½¿ç”¨å¸¦ç¼“å­˜çš„å†™å…¥ writer := bufio.NewWriter(file) for i := 0; i \u003c 5; i++ { writer.WriteString(str) } //å› ä¸ºå†™å…¥æ˜¯å¸¦ç¼“å­˜çš„ï¼Œæ‰€ä»¥éœ€è¦è°ƒç”¨Flushæ–¹æ³•ï¼Œå°†ç¼“å­˜çš„æ•°æ®çœŸæ­£å†™å…¥åˆ°æ–‡ä»¶ä¸­ writer.Flush() } 2ã€æ‰“å¼€å­˜åœ¨çš„æ–‡ä»¶ï¼Œå°†åŸæ¥çš„å†…å®¹è¿›è¡Œè¦†ç›– os.O_TRUNC|os.O_WRONLY(è¦†ç›–|åªå†™) package main import ( \"bufio\" \"fmt\" \"os\" ) func main() { // æ‰“å¼€å­˜åœ¨çš„æ–‡ä»¶ï¼Œå°†åŸæ¥çš„å†…å®¹è¿›è¡Œè¦†ç›– fileName := \"go-basic/go-file/writer_file/test.txt\" file, err := os.OpenFile(fileName, os.O_TRUNC|os.O_WRONLY, 0666) if err != nil { fmt.Println(\"open file err=\", err) return } defer file.Close() // å†™å…¥å†…å®¹ str := \"Hello New Golang\\n\" // ä½¿ç”¨å¸¦ç¼“å­˜çš„å†™å…¥ writer := bufio.NewWriter(file) for i := 0; i \u003c 10; i++ { writer.WriteString(str) } //å› ä¸ºå†™å…¥æ˜¯å¸¦ç¼“å­˜çš„ï¼Œæ‰€ä»¥éœ€è¦è°ƒç”¨Flushæ–¹æ³•ï¼Œå°†ç¼“å­˜çš„æ•°æ®çœŸæ­£å†™å…¥åˆ°æ–‡ä»¶ä¸­ writer.Flush() } 3ã€æ‰“å¼€å­˜åœ¨çš„æ–‡ä»¶ï¼Œåœ¨åŸæ¥çš„å†…å®¹ä¸­è¿½åŠ å†…å®¹ os.O_APPEND|os.O_WRONLY(è¿½åŠ |åªå†™) package main import ( \"bufio\" \"fmt\" \"os\" ) func main() { // æ‰“å¼€å­˜åœ¨çš„æ–‡ä»¶ï¼Œåœ¨åŸæ¥çš„å†…å®¹ä¸­è¿½åŠ å†…å®¹ fileName := \"go-basic/go-file/writer_file/test.txt\" file, err := os.OpenFile(fileName, os.O_APPEND|os.O_WRONLY, 0666) if err != nil { fmt.Println(\"open file err=\", err) return } defer file.Close() // å†™å…¥å†…å®¹ str := \"APPEND!\\n\" // ä½¿ç”¨å¸¦ç¼“å­˜çš„å†™å…¥ writer := bufio.NewWriter(file) writer.WriteString(str) //å› ä¸ºå†™å…¥æ˜¯å¸¦ç¼“å­˜çš„ï¼Œæ‰€ä»¥éœ€è¦è°ƒç”¨Flushæ–¹æ³•ï¼Œå°†ç¼“å­˜çš„æ•°æ®çœŸæ­£å†™å…¥åˆ°æ–‡ä»¶ä¸­ writer.Flush() } 4ã€æ‰“å¼€å­˜åœ¨çš„æ–‡ä»¶ï¼Œå°†åŸæ¥å†…å®¹è¾“å‡ºåœ¨ç»ˆç«¯ï¼Œå¹¶ä¸”è¿½åŠ å†…å®¹ os.O_RDWR|os.O_APPENDï¼ˆåªè¯»|è¿½åŠ ï¼‰ package main import ( \"bufio\" \"fmt\" \"io\" \"os\" ) func main() { // æ‰“å¼€å­˜åœ¨çš„æ–‡ä»¶ï¼Œå°†åŸæ¥å†…å®¹è¾“å‡ºåœ¨ç»ˆç«¯ï¼Œå¹¶ä¸”è¿½åŠ å†…å®¹ fileName := \"go-basic/go-file/writer_file/test.txt\" file, err := os.OpenFile(fileName, os.O_RDWR|os.O_APPEND, 0666) if err != nil { fmt.Println(\"open file err=\", err) return } defer file.Close() // è¯»å†…å®¹åŸå†…å®¹ reader := bufio.NewReader(file) for { readString, err := reader.ReadString('\\n') if err == io.EOF { break } fmt.Print(readString) } // å†™å…¥å†…å®¹ str := \"APPEND!\\n\" // ä½¿ç”¨å¸¦ç¼“å­˜çš„å†™å…¥ writer := bufio.NewWriter(file) writer.WriteString(str) //å› ä¸ºå†™å…¥æ˜¯å¸¦ç¼“å­˜çš„ï¼Œæ‰€ä»¥éœ€è¦è°ƒç”¨Flushæ–¹æ³•ï¼Œå°†ç¼“å­˜çš„æ•°æ®çœŸæ­£å†™å…¥åˆ°æ–‡ä»¶ä¸­ writer.Flush() } ","date":"2023å¹´05æœˆ23æ—¥","objectID":"/2023/05/go%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C/:3:1","tags":["Goç¬”è®°"],"title":"Goæ–‡ä»¶æ“ä½œ","uri":"/2023/05/go%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C/"},{"categories":["Goç¬”è®°"],"content":"ioutil.WriterFileå†™æ–‡ä»¶ func WriteFile(filename string, data []byte, perm fs.FileMode) error å®ä¾‹ï¼š package main import ( \"fmt\" \"io/ioutil\" ) func main() { fileName := \"go-basic/go-file/writer_file2/test.txt\" fileName2 := \"go-basic/go-file/writer_file2/test2.txt\" data, err := ioutil.ReadFile(fileName) if err != nil { fmt.Println(\"read file err=\", err) return } // å°†test.txtæ–‡ä»¶å†…å®¹å†™å…¥åˆ°test2.txtæ–‡ä»¶ä¸­ï¼ˆå¦‚æœæ–‡ä»¶ä¸å­˜åœ¨åˆ™æ–°å»ºï¼‰ err = ioutil.WriteFile(fileName2, data, 0666) if err != nil { fmt.Println(\"write file err=\", err) return } } ","date":"2023å¹´05æœˆ23æ—¥","objectID":"/2023/05/go%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C/:3:2","tags":["Goç¬”è®°"],"title":"Goæ–‡ä»¶æ“ä½œ","uri":"/2023/05/go%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C/"},{"categories":["Goç¬”è®°"],"content":"åˆ¤æ–­æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹æ˜¯å¦å­˜åœ¨ func (f *File) Stat() (FileInfo, error) å¦‚æœè¿”å›çš„é”™è¯¯ä¸ºnilï¼Œè¯´æ˜æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹å­˜åœ¨ å¦‚æœè¿”å›çš„é”™è¯¯ç±»å‹ä½¿ç”¨os.IsNotExist()åˆ¤æ–­ä¸ºtrueï¼Œè¯´æ˜æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹ä¸å­˜åœ¨ å¦‚æœè¿”å›çš„é”™è¯¯ä¸ºå…¶ä»–ç±»å‹ï¼Œåˆ™ä¸ç¡®å®šæ˜¯å¦å­˜åœ¨ func PathIsExist(path string) bool { _, err := os.Stat(path) if err == nil { return true } if os.IsExist(err) { return true } return false } ","date":"2023å¹´05æœˆ23æ—¥","objectID":"/2023/05/go%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C/:4:0","tags":["Goç¬”è®°"],"title":"Goæ–‡ä»¶æ“ä½œ","uri":"/2023/05/go%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C/"},{"categories":["Goç¬”è®°"],"content":"æ‹·è´æ–‡ä»¶ func Copy(dst Writer, src Reader) (written int64, err error) å®ä¾‹ï¼š package main import ( \"bufio\" \"fmt\" \"io\" \"os\" ) func FileCopy(dstFileName string, srcFileName string) (written int64, err error) { // æ‰“å¼€éœ€è¦æ‹·è´çš„æ–‡ä»¶ srcFile, err := os.Open(srcFileName) if err != nil { return 0, err } // åˆ›å»ºä¸€ä¸ªreader reader := bufio.NewReader(srcFile) // æ‰“å¼€éœ€è¦å†™å…¥çš„æ–‡ä»¶ dstFile, err := os.OpenFile(dstFileName, os.O_WRONLY|os.O_CREATE, 0666) if err != nil { return 0, err } // åˆ›å»ºä¸€ä¸ªwriter writer := bufio.NewWriter(dstFile) // å…³é—­æ–‡ä»¶ defer func() { srcFile.Close() dstFile.Close() }() // ä½¿ç”¨io.Copyå¼€å§‹æ‹·è´ return io.Copy(writer, reader) } func main() { // å°†6.JPGæ–‡ä»¶æ‹·è´åˆ°6_copy.JPG srcFile := \"6.JPG\" dstFile := \"6_copy.JPG\" fileCopy, err := FileCopy(dstFile, srcFile) if err != nil { return } fmt.Println(\"æ‹·è´æˆåŠŸï¼Œå…±æ‹·è´äº†\", fileCopy, \"å­—èŠ‚\") } ","date":"2023å¹´05æœˆ23æ—¥","objectID":"/2023/05/go%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C/:5:0","tags":["Goç¬”è®°"],"title":"Goæ–‡ä»¶æ“ä½œ","uri":"/2023/05/go%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C/"},{"categories":["Goç¬”è®°"],"content":"ç»Ÿè®¡ä¸åŒç±»å‹çš„å­—ç¬¦æ•°é‡ package main import ( \"bufio\" \"fmt\" \"io\" \"os\" ) type CharCount struct { ChCount int // è®°å½•è‹±æ–‡ä¸ªæ•° NumCount int // è®°å½•æ•°å­—ä¸ªæ•° SpaceCount int // è®°å½•ç©ºæ ¼ä¸ªæ•° OtherCount int // è®°å½•å…¶ä»–å­—ç¬¦ä¸ªæ•° } func main() { // å®ä¾‹åŒ–è®°å½•ç»“æ„ä½“ count := CharCount{} // æ‰“å¼€æ–‡ä»¶ fileName := \"go-basic/go-file/file_count/test.txt\" file, err := os.Open(fileName) if err != nil { fmt.Println(\"open file err=\", err) return } defer file.Close() //åˆ›å»ºä¸€ä¸ªreader reader := bufio.NewReader(file) // æ¯è¯»å–ä¸€è¡Œï¼Œå°±å»ç»Ÿè®¡è¯¥è¡Œæœ‰å¤šå°‘ä¸ªè‹±æ–‡ã€æ•°å­—ã€ç©ºæ ¼ä»¥åŠå…¶ä»–å­—ç¬¦ for { readString, err := reader.ReadString('\\n') if err == io.EOF { break } // éå†readStringï¼Œè¿›è¡Œç»Ÿè®¡ for _, v := range readString { switch { case v \u003e= 'a' \u0026\u0026 v \u003c= 'z': fallthrough // ç©¿é€ case v \u003e= 'A' \u0026\u0026 v \u003c= 'Z': count.ChCount++ case v == ' ' || v == '\\t': count.SpaceCount++ case v \u003e= '0' \u0026\u0026 v \u003c= '9': count.NumCount++ default: count.OtherCount++ } } } // ç„¶åå°†ç»“æœä¿å­˜åœ¨ä¸€ä¸ªç»“æ„ä½“ä¸­ fmt.Println(\"å­—ç¬¦çš„ä¸ªæ•°ä¸ºï¼š\", count.ChCount) fmt.Println(\"æ•°å­—çš„ä¸ªæ•°ä¸ºï¼š\", count.NumCount) fmt.Println(\"ç©ºæ ¼çš„ä¸ªæ•°ä¸ºï¼š\", count.SpaceCount) fmt.Println(\"å…¶ä»–å­—ç¬¦çš„ä¸ªæ•°ä¸ºï¼š\", count.OtherCount) } ","date":"2023å¹´05æœˆ23æ—¥","objectID":"/2023/05/go%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C/:6:0","tags":["Goç¬”è®°"],"title":"Goæ–‡ä»¶æ“ä½œ","uri":"/2023/05/go%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C/"},{"categories":["Goç¬”è®°"],"content":"åŸºæœ¬ä»‹ç» Golangä»ç„¶æœ‰é¢å‘å¯¹è±¡ç¼–ç¨‹çš„ç»§æ‰¿ã€å°è£…å’Œå¤šæ€çš„ç‰¹æ€§ï¼Œåªæ˜¯å®ç°çš„æ–¹å¼å’Œå…¶ä»–OOPè¯­è¨€ä¸ä¸€æ ·ã€‚ å°è£… ","date":"2023å¹´05æœˆ21æ—¥","objectID":"/2023/05/go%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E4%B8%89%E5%A4%A7%E7%89%B9%E6%80%A7/:0:0","tags":["Goç¬”è®°"],"title":"Goé¢å‘å¯¹è±¡ä¸‰å¤§ç‰¹æ€§","uri":"/2023/05/go%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E4%B8%89%E5%A4%A7%E7%89%B9%E6%80%A7/"},{"categories":["Goç¬”è®°"],"content":"å°è£…çš„ä»‹ç» å°è£…ï¼ˆencapsulationï¼‰å°±æ˜¯æŠŠæŠ½è±¡å‡ºçš„å­—æ®µå’Œå­—æ®µçš„æ“ä½œå°è£…åœ¨ä¸€èµ·ï¼Œæ•°æ®è¢«ä¿æŠ¤åœ¨å†…éƒ¨ï¼Œç¨‹åºçš„å…¶ä»–åŒ…åªæœ‰é€šè¿‡è¢«æˆæƒçš„æ“ä½œï¼ˆæ–¹æ³•ï¼‰ï¼Œæ‰èƒ½å¯¹å­—æ®µè¿›è¡Œæ“ä½œã€‚ ","date":"2023å¹´05æœˆ21æ—¥","objectID":"/2023/05/go%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E4%B8%89%E5%A4%A7%E7%89%B9%E6%80%A7/:1:0","tags":["Goç¬”è®°"],"title":"Goé¢å‘å¯¹è±¡ä¸‰å¤§ç‰¹æ€§","uri":"/2023/05/go%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E4%B8%89%E5%A4%A7%E7%89%B9%E6%80%A7/"},{"categories":["Goç¬”è®°"],"content":"å°è£…çš„å¥½å¤„ éšè—å®ç°ç»†èŠ‚ å¯ä»¥å¯¹æ•°æ®è¿›è¡ŒéªŒè¯ï¼Œä¿è¯å®‰å…¨åˆç† ","date":"2023å¹´05æœˆ21æ—¥","objectID":"/2023/05/go%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E4%B8%89%E5%A4%A7%E7%89%B9%E6%80%A7/:2:0","tags":["Goç¬”è®°"],"title":"Goé¢å‘å¯¹è±¡ä¸‰å¤§ç‰¹æ€§","uri":"/2023/05/go%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E4%B8%89%E5%A4%A7%E7%89%B9%E6%80%A7/"},{"categories":["Goç¬”è®°"],"content":"å¦‚ä½•ä½“ç°å°è£… å¯¹ç»“æ„ä½“ä¸­çš„å±æ€§è¿›è¡Œå°è£… é€šè¿‡æ–¹æ³•ã€åŒ…å®ç°å°è£… ","date":"2023å¹´05æœˆ21æ—¥","objectID":"/2023/05/go%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E4%B8%89%E5%A4%A7%E7%89%B9%E6%80%A7/:3:0","tags":["Goç¬”è®°"],"title":"Goé¢å‘å¯¹è±¡ä¸‰å¤§ç‰¹æ€§","uri":"/2023/05/go%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E4%B8%89%E5%A4%A7%E7%89%B9%E6%80%A7/"},{"categories":["Goç¬”è®°"],"content":"å°è£…çš„å®ç°æ­¥éª¤ å°†ç»“æ„ä½“ã€å­—æ®µï¼ˆå±æ€§ï¼‰çš„é¦–å­—æ¯å°å†™ï¼ˆç±»ä¼¼privateï¼‰ type student struct { name string age int } ç»™ç»“æ„ä½“æ‰€åœ¨åŒ…æä¾›ä¸€ä¸ªå·¥å‚æ¨¡å¼çš„å‡½æ•°ï¼Œé¦–å­—æ¯å¤§å†™ã€‚ç±»ä¼¼ä¸€ä¸ªæ„é€ å‡½æ•° func NewStudent() *student { return \u0026student{} } æä¾›ä¸€ä¸ªé¦–å­—æ¯å¤§å†™çš„Setæ–¹æ³•ï¼Œç”¨äºå¯¹å±æ€§åˆ¤æ–­å¹¶èµ‹å€¼ func (s *student) SetName(name string) { s.name = name } func (s *student) SetAge(age int) { if age \u003e 0 \u0026\u0026 age \u003c 150 { s.age = age } } æä¾›ä¸€ä¸ªé¦–å­—æ¯å¤§å†™çš„Getæ–¹æ³•ï¼Œç”¨æˆ·è·å–å±æ€§çš„å€¼ func (s *student) GetName() string { return s.name } func (s *student) GetAge() int { return s.age } è°ƒç”¨ student := model.NewStudent() student.SetName(\"Joker\") student.SetAge(19) fmt.Println(student.GetName(), student.GetAge()) //Joker 19 ç»§æ‰¿ ","date":"2023å¹´05æœˆ21æ—¥","objectID":"/2023/05/go%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E4%B8%89%E5%A4%A7%E7%89%B9%E6%80%A7/:4:0","tags":["Goç¬”è®°"],"title":"Goé¢å‘å¯¹è±¡ä¸‰å¤§ç‰¹æ€§","uri":"/2023/05/go%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E4%B8%89%E5%A4%A7%E7%89%B9%E6%80%A7/"},{"categories":["Goç¬”è®°"],"content":"ç»§æ‰¿çš„ä»‹ç» ç»§æ‰¿å¯ä»¥è§£å†³ä»£ç å¤ç”¨ï¼Œè®©ç¼–ç¨‹æ›´åŠ é è¿‘äººç±»æ€ç»´ã€‚ å½“å¤šä¸ªç»“æ„ä½“å­˜åœ¨ç›¸åŒçš„å±æ€§ï¼ˆå­—æ®µï¼‰å’Œæ–¹æ³•æ—¶ï¼Œå¯ä»¥ä»è¿™äº›ç»“æ„ä½“ä¸­æŠ½è±¡å‡ºç»“æ„ä½“ï¼Œåœ¨è¯¥ç»“æ„ä½“ä¸­å®šä¹‰è¿™å†™ç›¸åŒçš„å±æ€§å’Œæ–¹æ³•ã€‚å…¶ä»–çš„ç»“æ„ä½“ä¸éœ€è¦é‡æ–°å®šä¹‰è¿™äº›å±æ€§å’Œæ–¹æ³•ï¼Œåªéœ€åµŒå¥—ä¸€ä¸ªæŠ½è±¡å‡ºæ¥çš„åŒ¿åç»“æ„ä½“å³å¯ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼šåœ¨Golangä¸­ï¼Œå¦‚æœä¸€ä¸ªstructåµŒå¥—äº†å¦ä¸€ä¸ªåŒ¿åç»“æ„ä½“ï¼Œé‚£ä¹ˆè¿™ä¸ªç»“æ„ä½“å¯ä»¥ç›´æ¥è®¿é—®åŒ¿åç»“æ„ä½“çš„å­—æ®µå’Œæ–¹æ³•ï¼Œä»è€Œå®ç°äº†ç»§æ‰¿ç‰¹æ€§ã€‚ ","date":"2023å¹´05æœˆ21æ—¥","objectID":"/2023/05/go%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E4%B8%89%E5%A4%A7%E7%89%B9%E6%80%A7/:5:0","tags":["Goç¬”è®°"],"title":"Goé¢å‘å¯¹è±¡ä¸‰å¤§ç‰¹æ€§","uri":"/2023/05/go%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E4%B8%89%E5%A4%A7%E7%89%B9%E6%80%A7/"},{"categories":["Goç¬”è®°"],"content":"åµŒå¥—åŒ¿åç»“æ„ä½“çš„åŸºæœ¬è¯­æ³• type Person struct { Name string Age int } type Student struct { Person // è¿™å°±æ˜¯åµŒå¥—åŒ¿åç»“æ„ä½“ Score float64 } ","date":"2023å¹´05æœˆ21æ—¥","objectID":"/2023/05/go%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E4%B8%89%E5%A4%A7%E7%89%B9%E6%80%A7/:6:0","tags":["Goç¬”è®°"],"title":"Goé¢å‘å¯¹è±¡ä¸‰å¤§ç‰¹æ€§","uri":"/2023/05/go%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E4%B8%89%E5%A4%A7%E7%89%B9%E6%80%A7/"},{"categories":["Goç¬”è®°"],"content":"ç»§æ‰¿çš„æ·±å…¥è®¨è®º 1ã€ç»“æ„ä½“å¯ä»¥ä½¿ç”¨åµŒå¥—åŒ¿åç»“æ„ä½“æ‰€æœ‰çš„å­—æ®µå’Œæ–¹æ³•ï¼Œå³ï¼šé¦–å­—æ¯å¤§å†™æˆ–å°å†™çš„å­—æ®µã€æ–¹æ³•éƒ½å¯ä»¥ä½¿ç”¨ 2ã€åŒ¿åç»“æ„ä½“å­—æ®µè®¿é—®å¯ä»¥ç®€åŒ– 3ã€å½“ç»“æ„ä½“å’ŒåŒ¿åç»“æ„ä½“æœ‰ç›¸åŒçš„å­—æ®µæˆ–æ–¹æ³•æ—¶ï¼Œç¼–è¯‘å™¨é‡‡ç”¨å°±è¿‘è®¿é—®åŸåˆ™è®¿é—®ï¼Œå¦‚å¸Œæœ›è®¿é—®åŒ¿åç»“æ„ä½“çš„å­—æ®µå’Œæ–¹æ³•ï¼Œå¯ä»¥é€šè¿‡åŒ¿åç»“æ„ä½“åæ¥åŒºåˆ† 4ã€ç»“æ„ä½“åµŒå…¥ä¸¤ä¸ªï¼ˆæˆ–å¤šä¸ªï¼‰åŒ¿åç»“æ„ä½“ï¼Œå¦‚ä¸¤ä¸ªåŒ¿åç»“æ„ä½“æœ‰ç›¸åŒçš„å­—æ®µå’Œæ–¹æ³•ï¼ˆåŒæ—¶ç»“æ„ä½“æœ¬èº«æ²¡æœ‰åŒåçš„å­—æ®µå’Œæ–¹æ³•ï¼‰ï¼Œåœ¨è®¿é—®æ—¶ï¼Œå°±å¿…é¡»æ˜ç¡®æŒ‡å®šåŒ¿åç»“æ„ä½“åå­—ï¼Œå¦åˆ™ç¼–è¯‘æŠ¥é”™ 5ã€å¦‚æœä¸€ä¸ªstructåµŒå¥—äº†ä¸€ä¸ªæœ‰åç»“æ„ä½“ï¼Œè¿™ç§æ¨¡å¼å°±æ˜¯ç»„åˆï¼Œå¦‚æœæ˜¯ç»„åˆå…³ç³»ï¼Œé‚£ä¹ˆåœ¨è®¿é—®ç»„åˆçš„ç»“æ„ä½“çš„å­—æ®µæˆ–æ–¹æ³•æ—¶ï¼Œå¿…é¡»å¸¦ä¸Šç»“æ„ä½“çš„åå­— 6ã€åµŒå¥—åŒ¿åç»“æ„ä½“åï¼Œä¹Ÿå¯ä»¥åœ¨åˆ›å»ºç»“æ„ä½“å˜é‡ï¼ˆå®ä¾‹ï¼‰æ—¶ï¼Œç›´æ¥æŒ‡å®šå„ä¸ªåŒ¿åç»“æ„ä½“å­—æ®µçš„å€¼ æ¥å£ï¼ˆinterfaceï¼‰ ","date":"2023å¹´05æœˆ21æ—¥","objectID":"/2023/05/go%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E4%B8%89%E5%A4%A7%E7%89%B9%E6%80%A7/:7:0","tags":["Goç¬”è®°"],"title":"Goé¢å‘å¯¹è±¡ä¸‰å¤§ç‰¹æ€§","uri":"/2023/05/go%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E4%B8%89%E5%A4%A7%E7%89%B9%E6%80%A7/"},{"categories":["Goç¬”è®°"],"content":"åŸºæœ¬ä»‹ç» interfaceç±»å‹å¯ä»¥å®šä¹‰ä¸€ç»„æ–¹æ³•ï¼Œä½†æ˜¯è¿™äº›æ–¹æ³•ä¸éœ€è¦å®ç°ã€‚å¹¶ä¸”interfaceä¸èƒ½åŒ…å«ä»»ä½•å˜é‡ã€‚ ","date":"2023å¹´05æœˆ21æ—¥","objectID":"/2023/05/go%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E4%B8%89%E5%A4%A7%E7%89%B9%E6%80%A7/:8:0","tags":["Goç¬”è®°"],"title":"Goé¢å‘å¯¹è±¡ä¸‰å¤§ç‰¹æ€§","uri":"/2023/05/go%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E4%B8%89%E5%A4%A7%E7%89%B9%E6%80%A7/"},{"categories":["Goç¬”è®°"],"content":"åŸºæœ¬è¯­æ³• type æ¥å£å interface { method1(å‚æ•°åˆ—è¡¨) è¿”å›å€¼åˆ—è¡¨ method2(å‚æ•°åˆ—è¡¨) è¿”å›å€¼åˆ—è¡¨ } å®ç°æ¥å£æ‰€æœ‰æ–¹æ³• func (c è‡ªå®šä¹‰ç±»å‹) method1(å‚æ•°åˆ—è¡¨) è¿”å›å€¼åˆ—è¡¨ { // æ–¹æ³•å®ç° } func (c è‡ªå®šä¹‰ç±»å‹) method2(å‚æ•°åˆ—è¡¨) è¿”å›å€¼åˆ—è¡¨ { // æ–¹æ³•å®ç° } è¯´æ˜ï¼š æ¥å£é‡Œçš„æ‰€æœ‰æ–¹æ³•éƒ½æ²¡æœ‰æ–¹æ³•ä½“ï¼Œå³æ¥å£çš„æ–¹æ³•éƒ½æ˜¯æ²¡æœ‰å®ç°çš„ã€‚æ¥å£ä½“ç°äº†ç¨‹åºè®¾è®¡çš„å¤šæ€å’Œé«˜å†…èšä½è€¦åˆçš„æ€æƒ³ã€‚ Golangä¸­çš„æ¥å£ï¼Œä¸éœ€è¦æ˜¾å¼çš„å®ç°ã€‚åªè¦ä¸€ä¸ªå˜é‡ï¼Œå«æœ‰æ¥å£ç±»å‹ä¸­çš„æ‰€æœ‰æ–¹æ³•ï¼Œé‚£ä¹ˆè¿™ä¸ªå˜é‡å°±å®ç°äº†è¿™ä¸ªæ¥å£ã€‚ ","date":"2023å¹´05æœˆ21æ—¥","objectID":"/2023/05/go%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E4%B8%89%E5%A4%A7%E7%89%B9%E6%80%A7/:9:0","tags":["Goç¬”è®°"],"title":"Goé¢å‘å¯¹è±¡ä¸‰å¤§ç‰¹æ€§","uri":"/2023/05/go%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E4%B8%89%E5%A4%A7%E7%89%B9%E6%80%A7/"},{"categories":["Goç¬”è®°"],"content":"æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚ 1ã€æ¥å£æœ¬èº«ä¸èƒ½åˆ›å»ºå®ä¾‹ï¼Œä½†æ˜¯å¯ä»¥æŒ‡å‘ä¸€ä¸ªå®ç°äº†è¯¥æ¥å£çš„è‡ªå®šä¹‰ç±»å‹çš„å˜é‡ï¼ˆå®ä¾‹ï¼‰ 2ã€æ¥å£ä¸­æ‰€æœ‰çš„æ–¹æ³•éƒ½æ²¡æœ‰æ–¹æ³•ä½“ï¼Œå³éƒ½æ˜¯æ²¡æœ‰å®ç°çš„æ–¹æ³• 3ã€åœ¨Golangä¸­ï¼Œä¸€ä¸ªè‡ªå®šä¹‰ç±»å‹éœ€è¦å°†æŸä¸ªæ¥å£çš„æ‰€æœ‰æ–¹æ³•éƒ½å®ç°ï¼Œé‚£ä¹ˆè¿™ä¸ªè‡ªå®šä¹‰ç±»å‹å°±å®ç°äº†è¯¥æ¥å£ 4ã€ä¸€ä¸ªè‡ªå®šä¹‰ç±»å‹åªæœ‰å®ç°äº†æŸä¸ªæ¥å£ï¼Œæ‰èƒ½å°†è¯¥è‡ªå®šä¹‰ç±»å‹çš„å®ä¾‹ï¼ˆå˜é‡ï¼‰èµ‹ç»™æ¥å£ç±»å‹ 5ã€åªè¦æ˜¯è‡ªå®šä¹‰æ•°æ®ç±»å‹ï¼Œå°±å¯ä»¥å®ç°æ¥å£ï¼Œä¸ä»…ä»…æ˜¯ç»“æ„ä½“ç±»å‹ 6ã€ä¸€ä¸ªè‡ªå®šä¹‰ç±»å‹å¯ä»¥å®ç°å¤šä¸ªæ¥å£ 7ã€Golangæ¥å£ä¸­ä¸èƒ½æœ‰ä»»ä½•å˜é‡ 8ã€ä¸€ä¸ªæ¥å£å¯ä»¥ç»§æ‰¿å¤šä¸ªåˆ«çš„æ¥å£ï¼Œå¦‚æœè¦å®ç°æ¥å£ï¼Œä¹Ÿå¿…é¡»å°†æ¥å£ç»§æ‰¿çš„åˆ«çš„æ¥å£çš„æ–¹æ³•ä¹Ÿå…¨éƒ¨å®ç° 9ã€interfaceç±»å‹é»˜è®¤æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼ˆå¼•ç”¨ç±»å‹ï¼‰ï¼Œå¦‚æœæ²¡æœ‰å¯¹interfaceåˆå§‹åŒ–å°±ä½¿ç”¨ï¼Œé‚£ä¹ˆä¼šè¾“å‡ºnil 10ã€ç©ºæ¥å£interface{}æ²¡æœ‰ä»»ä½•æ–¹æ³•ï¼Œæ‰€ä»¥æ‰€æœ‰ç±»å‹éƒ½å®ç°äº†ç©ºæ¥å£ï¼Œå³å¯ä»¥æŠŠä»»ä½•ä¸€ä¸ªå˜é‡èµ‹å€¼ç»™ç©ºæ¥å£ ","date":"2023å¹´05æœˆ21æ—¥","objectID":"/2023/05/go%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E4%B8%89%E5%A4%A7%E7%89%B9%E6%80%A7/:10:0","tags":["Goç¬”è®°"],"title":"Goé¢å‘å¯¹è±¡ä¸‰å¤§ç‰¹æ€§","uri":"/2023/05/go%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E4%B8%89%E5%A4%A7%E7%89%B9%E6%80%A7/"},{"categories":["Goç¬”è®°"],"content":"æ¥å£ç»å…¸æ¡ˆä¾‹ï¼ˆç»“æ„ä½“æ’åºï¼‰ package main import ( \"fmt\" \"math/rand\" \"sort\" ) type Student struct { Name string Age int } type StudentSlice []Student func (s StudentSlice) Len() int { // è·å–åˆ‡ç‰‡é•¿åº¦ return len(s) } func (s StudentSlice) Less(i, j int) bool { // æŒ‰ç…§å¹´é¾„å‡åº return s[i].Age \u003c s[j].Age } func (s StudentSlice) Swap(i, j int) { // äº¤æ¢é¡ºåº s[i], s[j] = s[j], s[i] } func main() { slice := StudentSlice{} for i := 0; i \u003c 10; i++ { student := Student{Name: fmt.Sprintf(\"Joker-%d\", rand.Intn(100)), Age: rand.Intn(150)} slice = append(slice, student) } fmt.Println(\"åŸç»“æ„ä½“é¡ºåºï¼š\") for _, stu := range slice { fmt.Println(stu) } sort.Sort(slice) fmt.Println(\"æ’åºåç»“æ„ä½“é¡ºåºï¼š\") for _, stu := range slice { fmt.Println(stu) } } ","date":"2023å¹´05æœˆ21æ—¥","objectID":"/2023/05/go%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E4%B8%89%E5%A4%A7%E7%89%B9%E6%80%A7/:11:0","tags":["Goç¬”è®°"],"title":"Goé¢å‘å¯¹è±¡ä¸‰å¤§ç‰¹æ€§","uri":"/2023/05/go%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E4%B8%89%E5%A4%A7%E7%89%B9%E6%80%A7/"},{"categories":["Goç¬”è®°"],"content":"æ¥å£VSç»§æ‰¿ ","date":"2023å¹´05æœˆ21æ—¥","objectID":"/2023/05/go%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E4%B8%89%E5%A4%A7%E7%89%B9%E6%80%A7/:12:0","tags":["Goç¬”è®°"],"title":"Goé¢å‘å¯¹è±¡ä¸‰å¤§ç‰¹æ€§","uri":"/2023/05/go%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E4%B8%89%E5%A4%A7%E7%89%B9%E6%80%A7/"},{"categories":["Goç¬”è®°"],"content":"æ¡ˆä¾‹ package main import \"fmt\" type IBird interface { Fly() } type IFish interface { Swim() } type Monkey struct { Name string } func (m *Monkey) ClimbTree() { fmt.Println(m.Name, \"ä¼šçˆ¬æ ‘...\") } type SmallMonkey struct { Monkey // ç»§æ‰¿äº†Monkeyç»“æ„ä½“ } // Fly ç»™SmallMonkeyå»¶ä¼¸FlyåŠŸèƒ½ func (m SmallMonkey) Fly() { fmt.Println(m.Name, \"å­¦ä¼šäº†é£è¡Œ...\") } // Swim ç»™SmallMonkeyå»¶ä¼¸SwimåŠŸèƒ½ func (m SmallMonkey) Swim() { fmt.Println(m.Name, \"å­¦ä¼šäº†æ¸¸æ³³...\") } func main() { smallMonkey := SmallMonkey{Monkey{Name: \"æ‚Ÿç©º\"}} smallMonkey.ClimbTree() smallMonkey.Fly() smallMonkey.Swim() var b IBird = smallMonkey b.Fly() var f IFish = smallMonkey f.Swim() } ","date":"2023å¹´05æœˆ21æ—¥","objectID":"/2023/05/go%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E4%B8%89%E5%A4%A7%E7%89%B9%E6%80%A7/:12:1","tags":["Goç¬”è®°"],"title":"Goé¢å‘å¯¹è±¡ä¸‰å¤§ç‰¹æ€§","uri":"/2023/05/go%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E4%B8%89%E5%A4%A7%E7%89%B9%E6%80%A7/"},{"categories":["Goç¬”è®°"],"content":"æ€»ç»“ å½“Aç»“æ„ä½“ç»§æ‰¿äº†Bç»“æ„ä½“ï¼Œé‚£ä¹ˆAç»“æ„ä½“å°±è‡ªåŠ¨çš„ç»§æ‰¿äº†Bç»“æ„ä½“çš„å­—æ®µå’Œæ–¹æ³•ï¼Œå¹¶ä¸”å¯ä»¥ç›´æ¥ä½¿ç”¨ å½“Aç»“æ„ä½“éœ€è¦æ‰©å±•åŠŸèƒ½ï¼ŒåŒæ—¶ä¸å¸Œæœ›å»ç ´åç»§æ‰¿å…³ç³»ï¼Œåˆ™å¯ä»¥å»å®ç°æŸä¸ªæ¥å£å³å¯ï¼Œå› æ­¤å¯ä»¥è®¤ä¸ºï¼Œå®ç°æ¥å£æ˜¯å¯¹ç»§æ‰¿æœºåˆ¶çš„è¡¥å…… ","date":"2023å¹´05æœˆ21æ—¥","objectID":"/2023/05/go%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E4%B8%89%E5%A4%A7%E7%89%B9%E6%80%A7/:12:2","tags":["Goç¬”è®°"],"title":"Goé¢å‘å¯¹è±¡ä¸‰å¤§ç‰¹æ€§","uri":"/2023/05/go%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E4%B8%89%E5%A4%A7%E7%89%B9%E6%80%A7/"},{"categories":["Goç¬”è®°"],"content":"æ¥å£ VS ç»§æ‰¿ æ¥å£å’Œç»§æ‰¿è§£å†³çš„é—®é¢˜ä¸åŒ ç»§æ‰¿çš„ä»·å€¼ä¸»è¦åœ¨äºï¼šè§£å†³ä»£ç çš„å¤ç”¨æ€§å’Œå¯ç»´æŠ¤æ€§ æ¥å£çš„ä»·å€¼ä¸»è¦åœ¨äºï¼šè®¾è®¡ï¼Œè®¾è®¡å¥½å„ç§è§„èŒƒï¼ˆæ–¹æ³•ï¼‰ï¼Œè®©å…¶å®ƒè‡ªå®šä¹‰ç±»å‹å»å®ç°è¿™äº›æ–¹æ³•ã€‚ æ¥å£æ¯”ç»§æ‰¿æ›´åŠ çµæ´» æ¥å£æ¯”ç»§æ‰¿æ›´åŠ çµæ´»ï¼Œç»§æ‰¿æ˜¯æ»¡è¶³is - açš„å…³ç³»ï¼Œè€Œæ¥å£åªéœ€æ»¡è¶³like - açš„å…³ç³» æ¥å£åœ¨ä¸€å®šç¨‹åº¦ä¸Šå®ç°ä»£ç è§£è€¦ å¤šæ€ ","date":"2023å¹´05æœˆ21æ—¥","objectID":"/2023/05/go%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E4%B8%89%E5%A4%A7%E7%89%B9%E6%80%A7/:12:3","tags":["Goç¬”è®°"],"title":"Goé¢å‘å¯¹è±¡ä¸‰å¤§ç‰¹æ€§","uri":"/2023/05/go%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E4%B8%89%E5%A4%A7%E7%89%B9%E6%80%A7/"},{"categories":["Goç¬”è®°"],"content":"åŸºæœ¬ä»‹ç» å˜é‡ï¼ˆå®ä¾‹ï¼‰å…·æœ‰å¤šç§å½¢æ€ã€‚åœ¨Golangä¸­ï¼Œå¤šæ€ç‰¹æ€§æ˜¯é€šè¿‡æ¥å£å®ç°çš„ã€‚å¯ä»¥æŒ‰ç…§ç»Ÿä¸€çš„æ¥å£æ¥è°ƒç”¨ä¸åŒçš„å®ç°ã€‚è¿™æ—¶æ¥å£å˜é‡å°±å‘ˆç°ä¸åŒçš„å½¢æ€ã€‚ ","date":"2023å¹´05æœˆ21æ—¥","objectID":"/2023/05/go%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E4%B8%89%E5%A4%A7%E7%89%B9%E6%80%A7/:13:0","tags":["Goç¬”è®°"],"title":"Goé¢å‘å¯¹è±¡ä¸‰å¤§ç‰¹æ€§","uri":"/2023/05/go%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E4%B8%89%E5%A4%A7%E7%89%B9%E6%80%A7/"},{"categories":["Goç¬”è®°"],"content":"æ¥å£ä½“ç°å¤šæ€çš„ä¸¤ç§å½¢å¼ å¤šæ€å‚æ•° å¤šæ€æ•°ç»„ ","date":"2023å¹´05æœˆ21æ—¥","objectID":"/2023/05/go%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E4%B8%89%E5%A4%A7%E7%89%B9%E6%80%A7/:14:0","tags":["Goç¬”è®°"],"title":"Goé¢å‘å¯¹è±¡ä¸‰å¤§ç‰¹æ€§","uri":"/2023/05/go%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E4%B8%89%E5%A4%A7%E7%89%B9%E6%80%A7/"},{"categories":["Goç¬”è®°"],"content":"ç±»å‹æ–­è¨€ ç±»å‹æ–­è¨€ï¼Œç”±äºæ¥å£æ˜¯ä¸€èˆ¬ç±»å‹ï¼Œä¸çŸ¥é“å…·ä½“ç±»å‹ï¼Œå¦‚æœè¦è½¬æˆå…·ä½“ç±»å‹ï¼Œå°±éœ€è¦ä½¿ç”¨ç±»å‹æ–­è¨€ã€‚ func main() { // ç±»å‹æ–­è¨€ var x interface{} var b float64 = 29.9 x = b // ç©ºæ¥å£ï¼Œå¯ä»¥æ¥å—ä»»æ„ç±»å‹ y := x.(float64) // ä½¿ç”¨ç±»å‹æ–­è¨€ fmt.Printf(\"y çš„ç±»å‹æ˜¯ %T å€¼æ˜¯ %v\\n\", y, y) // y çš„ç±»å‹æ˜¯ float64 å€¼æ˜¯ 29.9 } è¿›è¡Œæ–­è¨€æ—¶è¿›è¡Œæ£€æµ‹ï¼š func main() { // ç±»å‹æ–­è¨€ var x interface{} var b float64 = 29.9 x = b // ç©ºæ¥å£ï¼Œå¯ä»¥æ¥å—ä»»æ„ç±»å‹ if f, ok := x.(float32); ok { // è¿›è¡Œæ£€æµ‹ y := f // ä½¿ç”¨ç±»å‹æ–­è¨€ fmt.Printf(\"y çš„ç±»å‹æ˜¯ %T å€¼æ˜¯ %v\\n\", y, y) // y çš„ç±»å‹æ˜¯ float64 å€¼æ˜¯ 29.9 } else { fmt.Println(\"convert fail\") } } ","date":"2023å¹´05æœˆ21æ—¥","objectID":"/2023/05/go%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E4%B8%89%E5%A4%A7%E7%89%B9%E6%80%A7/:15:0","tags":["Goç¬”è®°"],"title":"Goé¢å‘å¯¹è±¡ä¸‰å¤§ç‰¹æ€§","uri":"/2023/05/go%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E4%B8%89%E5%A4%A7%E7%89%B9%E6%80%A7/"},{"categories":["Goç¬”è®°"],"content":"ç»“æ„ä½“ ","date":"2023å¹´05æœˆ19æ—¥","objectID":"/2023/05/go%E7%BB%93%E6%9E%84%E4%BD%93/:0:0","tags":["Goç¬”è®°"],"title":"Goç»“æ„ä½“","uri":"/2023/05/go%E7%BB%93%E6%9E%84%E4%BD%93/"},{"categories":["Goç¬”è®°"],"content":"å£°æ˜ç»“æ„ä½“ åŸºæœ¬è¯­æ³• type ç»“æ„ä½“åç§° struct{ field1 type field2 type } ","date":"2023å¹´05æœˆ19æ—¥","objectID":"/2023/05/go%E7%BB%93%E6%9E%84%E4%BD%93/:1:0","tags":["Goç¬”è®°"],"title":"Goç»“æ„ä½“","uri":"/2023/05/go%E7%BB%93%E6%9E%84%E4%BD%93/"},{"categories":["Goç¬”è®°"],"content":"å­—æ®µ/å±æ€§ åŸºæœ¬ä»‹ç» ç»“æ„ä½“å­—æ®µ = å±æ€§ = field å­—æ®µæ˜¯ç»“æ„ä½“çš„ä¸€ä¸ªç»„æˆéƒ¨åˆ†ï¼Œä¸€èˆ¬æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ã€æ•°ç»„ï¼Œä¹Ÿå¯æ˜¯å¼•ç”¨ç±»å‹ æ³¨æ„äº‹é¡¹ å­—æ®µå£°æ˜è¯­æ³•åŒå˜é‡ï¼Œç¤ºä¾‹ï¼šName string å­—æ®µçš„ç±»å‹å¯ä»¥ä¸ºï¼šåŸºæœ¬ç±»å‹ã€æ•°ç»„æˆ–å¼•ç”¨ç±»å‹ åœ¨åˆ›å»ºä¸€ä¸ªç»“æ„ä½“å˜é‡åï¼Œå¦‚æœæ²¡æœ‰ç»™å­—ç¬¦èµ‹å€¼ï¼Œéƒ½å¯¹åº”ä¸€ä¸ªé›¶å€¼(é»˜è®¤å€¼) å¸ƒå°”ç±»å‹æ˜¯falseï¼Œæ•°å€¼æ˜¯0ï¼Œå­—ç¬¦ä¸²æ˜¯\"\" æ•°ç»„ç±»å‹çš„é»˜è®¤å€¼å’Œå®ƒçš„å…ƒç´ ç±»å‹ç›¸å…³ï¼Œæ¯”å¦‚ï¼šscore[3] int é»˜è®¤å€¼ï¼š[0,0,0] æŒ‡é’ˆã€sliceå’Œmapçš„é›¶å€¼éƒ½æ˜¯nilï¼Œå³è¿˜æ²¡æœ‰åˆ†é…ç©ºé—´ï¼Œéœ€è¦makeåä½¿ç”¨ ä¸åŒç»“æ„ä½“å˜é‡çš„å­—æ®µæ˜¯ç‹¬ç«‹çš„ï¼Œäº’ä¸å½±å“ï¼Œä¸€ä¸ªç»“æ„ä½“å˜é‡å­—æ®µçš„æ›´æ”¹ï¼Œä¸å½±å“å¦å¤–ä¸€ä¸ª ","date":"2023å¹´05æœˆ19æ—¥","objectID":"/2023/05/go%E7%BB%93%E6%9E%84%E4%BD%93/:2:0","tags":["Goç¬”è®°"],"title":"Goç»“æ„ä½“","uri":"/2023/05/go%E7%BB%93%E6%9E%84%E4%BD%93/"},{"categories":["Goç¬”è®°"],"content":"åˆ›å»ºç»“æ„ä½“å˜é‡ æ–¹å¼ä¸€ï¼šç›´æ¥å£°æ˜ var person Person æ–¹å¼äºŒï¼š{} var person Person = Person{} æ–¹å¼ä¸‰ï¼šnew var person *Person = new(Person) æ–¹å¼å››ï¼š\u0026 var person *Person = \u0026Person{} è¯´æ˜ ç¬¬3ã€4ç§æ–¹å¼è¿”å›çš„æ˜¯ç»“æ„ä½“æŒ‡é’ˆã€‚ ç»“æ„ä½“æŒ‡é’ˆè®¿é—®å­—æ®µçš„æ ‡å‡†æ–¹å¼ï¼š(*ç»“æ„ä½“æŒ‡é’ˆ).å­—æ®µåï¼Œæ¯”å¦‚ï¼š(*person).Name = \"tom\" å¯¹äºç»“æ„ä½“æŒ‡é’ˆè®¿é—®å­—æ®µï¼Œgolangåšäº†ç®€åŒ–æ“ä½œï¼Œä¹Ÿæ”¯æŒ ç»“æ„ä½“æŒ‡é’ˆ.å­—æ®µåï¼Œæ¯”å¦‚ï¼šperson.Name = \"tom\"ã€‚è¿™æ ·æ›´åŠ ç¬¦åˆç¨‹åºå‘˜ä½¿ç”¨ä¹ æƒ¯ï¼Œgolangåº•å±‚è¿›è¡Œäº†ä¸€æ­¥è½¬åŒ–æ“ä½œã€‚ ","date":"2023å¹´05æœˆ19æ—¥","objectID":"/2023/05/go%E7%BB%93%E6%9E%84%E4%BD%93/:3:0","tags":["Goç¬”è®°"],"title":"Goç»“æ„ä½“","uri":"/2023/05/go%E7%BB%93%E6%9E%84%E4%BD%93/"},{"categories":["Goç¬”è®°"],"content":"ç»“æ„ä½“å†…å­˜åˆ†é…æœºåˆ¶ ","date":"2023å¹´05æœˆ19æ—¥","objectID":"/2023/05/go%E7%BB%93%E6%9E%84%E4%BD%93/:4:0","tags":["Goç¬”è®°"],"title":"Goç»“æ„ä½“","uri":"/2023/05/go%E7%BB%93%E6%9E%84%E4%BD%93/"},{"categories":["Goç¬”è®°"],"content":"ç»“æ„ä½“å˜é‡åœ¨å†…å­˜ä¸­å­˜åœ¨ç¤ºä¾‹å›¾ å˜é‡æ€»æ˜¯å­˜åœ¨å†…å­˜ä¸­çš„ï¼Œé‚£ä¹ˆç»“æ„ä½“å˜é‡ä¹Ÿæ˜¯ä¸€æ ·çš„ var p1 Person p1.Name = \"Joker\" p1.Age = 18 var p2 Person = p1 fmt.Println(p2.Age) //18 p2.Name = \"Tommy\" fmt.Printf(\"p2.Name=%v, p1.Name=%v\\n\", p2.Name, p1.Name) //p2.Name=Tommy, p1.Name=Joker ç¤ºä¾‹å›¾ï¼š ","date":"2023å¹´05æœˆ19æ—¥","objectID":"/2023/05/go%E7%BB%93%E6%9E%84%E4%BD%93/:4:1","tags":["Goç¬”è®°"],"title":"Goç»“æ„ä½“","uri":"/2023/05/go%E7%BB%93%E6%9E%84%E4%BD%93/"},{"categories":["Goç¬”è®°"],"content":"ç»“æ„ä½“æŒ‡é’ˆå˜é‡åœ¨å†…å­˜ä¸­å­˜åœ¨ç¤ºä¾‹å›¾ var p1 Person p1.Name = \"Joker\" p1.Age = 18 var p2 *Person = \u0026p1 fmt.Println((*p2).Age) //18 fmt.Println(p2.Age) //18 p2.Name = \"Tommy\" fmt.Printf(\"p2.Name=%v, p1.Name=%v\\n\", p2.Name, p1.Name) //p2.Name=Tommy, p1.Name=Tommy fmt.Printf(\"p2.Name=%v, p1.Name=%v\\n\", (*p2).Name, p1.Name) //p2.Name=Tommy, p1.Name=Tommy ç¤ºä¾‹å›¾ï¼š ","date":"2023å¹´05æœˆ19æ—¥","objectID":"/2023/05/go%E7%BB%93%E6%9E%84%E4%BD%93/:4:2","tags":["Goç¬”è®°"],"title":"Goç»“æ„ä½“","uri":"/2023/05/go%E7%BB%93%E6%9E%84%E4%BD%93/"},{"categories":["Goç¬”è®°"],"content":"ç»“æ„ä½“ä½¿ç”¨æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚ ç»“æ„ä½“çš„æ‰€æœ‰å­—æ®µåœ¨å†…å­˜ä¸­æ˜¯è¿ç»­çš„ package main import \"fmt\" type Point struct { x int y int } type Rect struct { leftUp, rightDown Point } type Rect2 struct { leftUp, rightDown *Point } func main() { r1 := Rect{Point{1, 2}, Point{3, 4}} // r1æœ‰4ä¸ªintï¼Œåœ¨å†…å­˜ä¸­æ˜¯è¿ç»­åˆ†å¸ƒçš„ fmt.Printf(\"r1.leftUp.xçš„åœ°å€=%p r1.leftUp.yçš„åœ°å€=%p r1.rightDown.xçš„åœ°å€=%p r1.rightDown.yçš„åœ°å€=%p\\n\", \u0026r1.leftUp.x, \u0026r1.leftUp.y, \u0026r1.rightDown.x, \u0026r1.rightDown.y) // r1.leftUp.xçš„åœ°å€=0x1400012c000 r1.leftUp.yçš„åœ°å€=0x1400012c008 r1.rightDown.xçš„åœ°å€=0x1400012c010 r1.rightDown.yçš„åœ°å€=0x1400012c018 r2 := Rect2{\u0026Point{10, 20}, \u0026Point{30, 40}} // r2æœ‰2ä¸ª*Pointï¼Œåœ¨å†…å­˜ä¸­2ä¸ª*Pointæœ¬èº«åœ°å€ä¹Ÿæ˜¯è¿ç»­åˆ†å¸ƒçš„ fmt.Printf(\"r2.leftUp æœ¬èº«åœ°å€=%p r2.rightDown æœ¬èº«åœ°å€=%p\\n\", \u0026r2.leftUp, \u0026r2.rightDown) //r2.leftUp æœ¬èº«åœ°å€=0x1400008e210 r2.rightDown æœ¬èº«åœ°å€=0x1400008e218 // ä½†æ˜¯å®ƒä»¬æŒ‡å‘çš„åœ°å€ä¸ä¸€å®šæ˜¯è¿ç»­çš„ fmt.Printf(\"r2.leftUp æŒ‡å‘åœ°å€=%p r2.rightDown æŒ‡å‘åœ°å€=%p\\n\", r2.leftUp, r2.rightDown) //r2.leftUp æŒ‡å‘åœ°å€=0x140000a8010 r2.rightDown æŒ‡å‘åœ°å€=0x140000a8020 } å†…å­˜åˆ†å¸ƒå›¾ï¼š ç»“æ„ä½“æ˜¯ç”¨æˆ·å•ç‹¬å®šä¹‰çš„ç±»å‹ï¼Œå’Œå…¶å®ƒç±»å‹è¿›è¡Œè½¬æ¢æ—¶éœ€è¦æœ‰å®Œå…¨ç›¸åŒçš„å­—æ®µï¼ˆåå­—ã€ä¸ªæ•°å’Œç±»å‹ï¼‰ package main import \"fmt\" type A struct { Num int } type B struct { Num int } func main() { var a A var b B a = A(b) // å¯ä»¥è¿›è¡Œè½¬æ¢ fmt.Println(a, b) } ç»“æ„ä½“è¿›è¡Œtypeé‡æ–°å®šä¹‰ï¼ˆç›¸å½“äºå–åˆ«åï¼‰ï¼ŒGolangè®¤ä¸ºæ˜¯æ–°çš„æ•°æ®ç±»å‹ï¼Œä½†æ˜¯ç›¸äº’é—´å¯ä»¥å¼ºè½¬ type Student struct { Name string Age int } type Stu Student var stu1 Student var stu2 Stu //stu2 = stu1 //cannot use stu1 (variable of type Student) as type Stu in assignment stu2 = Stu(stu1) fmt.Println(stu1, stu2) structçš„æ¯ä¸ªå­—æ®µä¸Šï¼Œå¯ä»¥å†™ä¸Šä¸€ä¸ªtagï¼Œè¯¥tagå¯ä»¥é€šè¿‡åå°„æœºåˆ¶è·å–ï¼Œå¸¸è§çš„ä½¿ç”¨åœºæ™¯å°±æ˜¯åºåˆ—åŒ–å’Œååºåˆ—åŒ– æ–¹æ³• Golangä¸­çš„æ–¹æ³•æ˜¯ä½œç”¨åœ¨æŒ‡å®šçš„æ•°æ®ç±»å‹ä¸Šï¼ˆå³ï¼šå’ŒæŒ‡å®šçš„æ•°æ®ç±»å‹ç»‘å®šï¼‰ï¼Œå› æ­¤è‡ªå®šä¹‰ç±»å‹ï¼Œéƒ½å¯ä»¥æœ‰æ–¹æ³•ï¼Œè€Œä¸ä»…ä»…æ˜¯struct ","date":"2023å¹´05æœˆ19æ—¥","objectID":"/2023/05/go%E7%BB%93%E6%9E%84%E4%BD%93/:5:0","tags":["Goç¬”è®°"],"title":"Goç»“æ„ä½“","uri":"/2023/05/go%E7%BB%93%E6%9E%84%E4%BD%93/"},{"categories":["Goç¬”è®°"],"content":"å£°æ˜æ–¹æ³• func (recevier type) methodName (å‚æ•°åˆ—è¡¨) ï¼ˆè¿”å›å€¼åˆ—è¡¨ï¼‰{ // æ–¹æ³•ä½“ return è¿”å›å€¼ } recevier typeï¼šè¡¨ç¤ºè¿™ä¸ªæ–¹æ³•å’Œtypeè¿™ä¸ªç±»å‹è¿›è¡Œç»‘å®šï¼Œæˆ–è€…è¯´è¯¥æ–¹æ³•ä½œç”¨äºtypeç±»å‹ recevier typeï¼štypeå¯ä»¥æ˜¯ç»“æ„ä½“ï¼Œä¹Ÿå¯ä»¥æ˜¯å…¶å®ƒçš„è‡ªå®šä¹‰ç±»å‹ recevier ï¼šå°±æ˜¯typeç±»å‹çš„ä¸€ä¸ªå˜é‡ï¼ˆå®ä¾‹ï¼‰ï¼Œ å‚æ•°åˆ—è¡¨ï¼šæ–¹æ³•è¾“å…¥ è¿”å›å€¼åˆ—è¡¨ï¼šè¿”å›å€¼ï¼Œå¯ä»¥æœ‰å¤šä¸ª æ–¹æ³•ä½“ï¼šé€»è¾‘ä»£ç  returnï¼šä¸æ˜¯å¿…é¡»çš„ ç¤ºä¾‹ï¼š ","date":"2023å¹´05æœˆ19æ—¥","objectID":"/2023/05/go%E7%BB%93%E6%9E%84%E4%BD%93/:6:0","tags":["Goç¬”è®°"],"title":"Goç»“æ„ä½“","uri":"/2023/05/go%E7%BB%93%E6%9E%84%E4%BD%93/"},{"categories":["Goç¬”è®°"],"content":"æ–¹æ³•çš„è°ƒç”¨å’Œä¼ å‚æœºåˆ¶åŸç† è¯´æ˜ï¼šæ–¹æ³•çš„è°ƒç”¨å’Œä¼ å‚æœºåˆ¶å’Œå‡½æ•°åŸºæœ¬ä¸€æ ·ï¼Œä¸ä¸€æ ·çš„åœ°æ–¹æ˜¯æ–¹æ³•è°ƒç”¨æ—¶ï¼Œä¼šå°†è°ƒç”¨æ–¹æ³•çš„å˜é‡ï¼Œå½“åšå®å‚ä¹Ÿä¼ é€’ç»™æ–¹æ³•ã€‚ ","date":"2023å¹´05æœˆ19æ—¥","objectID":"/2023/05/go%E7%BB%93%E6%9E%84%E4%BD%93/:7:0","tags":["Goç¬”è®°"],"title":"Goç»“æ„ä½“","uri":"/2023/05/go%E7%BB%93%E6%9E%84%E4%BD%93/"},{"categories":["Goç¬”è®°"],"content":"æ–¹æ³•æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚ 1ã€ç»“æ„ä½“ç±»å‹æ˜¯å€¼ç±»å‹ï¼Œåœ¨æ–¹æ³•è°ƒç”¨ä¸­ï¼Œéµå®ˆå€¼ç±»å‹çš„ä¼ é€’æœºåˆ¶ï¼Œæ˜¯å€¼æ‹·è´ä¼ é€’æ–¹å¼ã€‚ 2ã€å¦‚æœå¸Œæœ›åœ¨æ–¹æ³•ä¸­ä¿®æ”¹ç»“æ„ä½“å˜é‡çš„å€¼ï¼Œå¯ä»¥é€šè¿‡ç»“æ„ä½“æŒ‡é’ˆçš„æ–¹å¼è¿›è¡Œå¤„ç†ã€‚ï¼ˆè¿™ç§æ–¹å¼ç”¨çš„æ¯”è¾ƒå¤šï¼Œå› ä¸ºæŒ‡é’ˆä¼ é€’æ•ˆç‡é«˜ï¼‰ 3ã€Golangä¸­çš„æ–¹æ³•ä½œç”¨åœ¨æŒ‡å®šçš„æ•°æ®ç±»å‹ä¸Šï¼ˆå³ï¼šå’ŒæŒ‡å®šçš„æ•°æ®ç±»å‹ç»‘å®šï¼‰ï¼Œå› æ­¤è‡ªå®šä¹‰ç±»å‹ï¼Œéƒ½å¯ä»¥æœ‰æ–¹æ³•ï¼Œè€Œä¸ä»…ä»…æ˜¯structã€‚ 4ã€æ–¹æ³•çš„è®¿é—®èŒƒå›´æ§åˆ¶çš„è§„åˆ™ï¼Œå’Œå‡½æ•°ä¸€æ ·ã€‚æ–¹æ³•åé¦–å­—æ¯å°å†™ï¼Œåªèƒ½åœ¨æœ¬åŒ…è®¿é—®ï¼Œæ–¹æ³•é¦–å­—æ¯å¤§å†™ï¼Œå¯ä»¥åœ¨æœ¬åŒ…å’Œå…¶ä»–åŒ…è®¿é—®ã€‚ 5ã€å¦‚æœä¸€ä¸ªå˜é‡å®ç°äº†String()è¿™ä¸ªæ–¹æ³•ï¼Œé‚£ä¹ˆfmt.Printlné»˜è®¤ä¼šè°ƒç”¨è¿™ä¸ªå˜é‡çš„String()è¿›è¡Œè¾“å‡ºã€‚ ","date":"2023å¹´05æœˆ19æ—¥","objectID":"/2023/05/go%E7%BB%93%E6%9E%84%E4%BD%93/:8:0","tags":["Goç¬”è®°"],"title":"Goç»“æ„ä½“","uri":"/2023/05/go%E7%BB%93%E6%9E%84%E4%BD%93/"},{"categories":["Goç¬”è®°"],"content":"æ–¹æ³• VS å‡½æ•° 1ã€è°ƒç”¨æ–¹å¼ä¸ä¸€æ · å‡½æ•°çš„è°ƒç”¨æ–¹å¼ï¼šå‡½æ•°å(å®å‚åˆ—è¡¨) æ–¹æ³•çš„è°ƒç”¨æ–¹å¼ï¼šå˜é‡.æ–¹æ³•å(å®å‚åˆ—è¡¨) 2ã€æ™®é€šå‡½æ•°ï¼Œæ¥æ”¶è€…ä¸ºå€¼ç±»å‹æ—¶ï¼Œä¸èƒ½å°†æŒ‡é’ˆç±»å‹çš„æ•°æ®ç›´æ¥ä¼ é€’ 3ã€å¯¹äºæ–¹æ³•ï¼Œæ¥æ”¶è€…ä¸ºå€¼ç±»å‹æ—¶ï¼Œå¯ä»¥ç›´æ¥ç”¨æŒ‡é’ˆç±»å‹çš„å˜é‡è°ƒç”¨æ–¹æ³•ï¼Œåè¿‡æ¥ä¹Ÿå¯ä»¥ã€‚ æ³¨ï¼šä¸ç®¡è°ƒç”¨å½¢å¼å¦‚ä½•ï¼ŒçœŸæ­£å†³å®šæ˜¯å€¼æ‹·è´è¿˜æ˜¯åœ°å€æ‹·è´è¿˜æ˜¯çœ‹æ–¹å¼æ˜¯å’Œå“ªç§ç±»å‹ç»‘å®š å·¥å‚æ¨¡å¼ Golangçš„ç»“æ„ä½“æ²¡æœ‰æ„é€ å‡½æ•°ï¼Œé€šå¸¸å¯ä»¥ä½¿ç”¨å·¥å‚æ¨¡å¼æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ ä½¿ç”¨å·¥å‚æ¨¡å¼è§£å†³ç»“æ„ä½“é¦–å­—æ¯å°å†™åœ¨åˆ«çš„åŒ…è°ƒç”¨é—®é¢˜ï¼š ","date":"2023å¹´05æœˆ19æ—¥","objectID":"/2023/05/go%E7%BB%93%E6%9E%84%E4%BD%93/:9:0","tags":["Goç¬”è®°"],"title":"Goç»“æ„ä½“","uri":"/2023/05/go%E7%BB%93%E6%9E%84%E4%BD%93/"},{"categories":["PHP","Laravel"],"content":"åŸºæœ¬è·¯ç”± ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:0:0","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"åŸºæœ¬è·¯ç”± æœ€åŸºæœ¬çš„Laravelè·¯ç”±ä»…æ¥å—URIå’Œä¸€ä¸ªé—­åŒ…ï¼š Route::get(\"foo\", function () { return 'Hello PHP'; }); ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:1:0","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"å¯ç”¨çš„è·¯ç”±å™¨æ–¹æ³• è·¯ç”±å™¨å…è®¸æ³¨å†Œå“åº”ä»»ä½•HTTPåŠ¨è¯çš„è·¯ç”± Route::get(uri, $callback); Route::post(uri, $callback); Route::put(uri, $callback); Route::patch(uri, $callback); Route::delete(uri, $callback); Route::options(uri, $callback); åœ¨Laravelä¸­å¯ä»¥å®šä¹‰å“åº”å¤šä¸ªHTTPåŠ¨ä½œçš„è·¯ç”± /** * æ³¨å†Œå¯å“åº”å¤šä¸ªHTTPåŠ¨ä½œçš„è·¯ç”± */ Route::match(['get', 'post'], 'match', function () { return 'ä½¿ç”¨matchå®šä¹‰å¯å“åº”å¤šä¸ªHTTPåŠ¨ä½œçš„è·¯ç”±'; }); /** * æ³¨å†Œå¯å“åº”å…¨éƒ¨HTTPåŠ¨ä½œçš„è·¯ç”± */ Route::any('any', function () { return 'ä½¿ç”¨anyå®šä¹‰å…¨éƒ¨HTTPåŠ¨ä½œçš„è·¯ç”±'; }); ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:1:1","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"ä¾èµ–æ³¨å…¥ å¯ä»¥åœ¨è·¯ç”±çš„å›è°ƒç­¾åä¸­é”®å…¥æç¤ºè·¯ç”±æ‰€éœ€è¦çš„ä»»ä½•ä¾èµ–é¡¹ã€‚ å£°æ˜çš„ä¾èµ–é¡¹å°†è‡ªåŠ¨è§£æï¼Œå¹¶ç”±LaravelæœåŠ¡å®¹å™¨æ³¨å…¥å›è°ƒä¸­ã€‚ Route::get('/api', function (Request $request) { Log::info(\"apiæ¥å£è¯·æ±‚\"); print_r($request-\u003eall()); return 'apiæ¥å£è¯·æ±‚'; }); ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:1:2","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"é‡å®šå‘è·¯ç”± Route::redirectæ–¹æ³•æä¾›äº†ä¸€ä¸ªæ–¹ä¾¿å¿«æ·çš„æ–¹å¼è¿›è¡Œé‡å®šå‘åˆ°å¦ä¸€ä¸ªURIçš„è·¯ç”± Route::redirect('/here', '/api/first'); é»˜è®¤æƒ…å†µä¸‹ï¼Œè¿”å›äº†302çŠ¶æ€ç ï¼Œå¯ä»¥ä½¿ç”¨å¯é€‰å‚æ•°è¿›è¡Œè‡ªå®šä¹‰çŠ¶æ€ç  Route::redirect('/here', '/api/first', 301); æˆ–è€…å¯ä»¥ä½¿ç”¨Route::permanentRedirectï¼Œæ­¤æ–¹æ³•è¿”å›301çŠ¶æ€ç  Route::permanentRedirect('/here2', '/api/api'); ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:2:0","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"è·¯ç”±åˆ—è¡¨ # æŸ¥çœ‹å…¨éƒ¨è·¯ç”± php artisan route:list # é€šè¿‡-vé€‰é¡¹æ¥æ˜¾ç¤ºè·¯ç”±ä¸­é—´ä»¶ php artisan route:list -v # é€šè¿‡ --path é€‰é¡¹ä»…æ˜¾ç¤ºç»™å®šURIå¼€å¤´çš„è·¯ç”± php artisan route:list --path=api # é€šè¿‡ --except-vendor é€‰é¡¹éšè—ç¬¬ä¸‰æ–¹è½¯ä»¶åŒ…å®šä¹‰çš„ä»»ä½•è·¯ç”± php artisan route:list --except-vendor # é€šè¿‡ --only-vendor é€‰é¡¹åªæ˜¾ç¤ºç¬¬ä¸‰æ–¹è½¯ä»¶åŒ…å®šä¹‰çš„ä»»ä½•è·¯ç”± php artisan route:list --only-vendor ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:3:0","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"è·¯ç”±å‚æ•° ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:4:0","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"å¿…éœ€å‚æ•° åœ¨è·¯ç”±ä¸­æ•è·URIçš„æ®µ è·¯ç”±å‚æ•°é€‚ä¸­åŒ…å«åœ¨{}å¤§æ‹¬å·ä¸­ï¼Œå¹¶åº”ç”±å­—æ¯å­—ç¬¦ç»„æˆï¼Œä¸‹åˆ’çº¿_åœ¨è·¯ç”±å‚æ•°åç§°ä¸­ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚ è·¯ç”±å‚æ•°æ ¹æ®å…¶é¡ºåºæ³¨å…¥è·¯ç”±å›è°ƒ/æ§åˆ¶å™¨ï¼Œå‚æ•°çš„åç§°æ— å…³ç´§è¦ã€‚ // ä»URLä¸­è·å–ç”¨æˆ·ID Route::get('/user/{id}', function (string $id) { return 'User ' . $id; }); // URLï¼šhttp://127.0.0.1:8000/api/user/1 // ç»“æœï¼šUser 1 Route::get('/posts/{post}/comments/{comment}', function (string $postId, string $commentId) { return 'Post id -\u003e ' . $postId . ' Comment id -\u003e ' . $commentId; }); // url: http://127.0.0.1:8000/api/posts/1001/comments/3000 // ç»“æœï¼šPost id -\u003e 1001 Comment id -\u003e 3000 ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:4:1","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"å‚æ•°å’Œä¾èµ–æ³¨å…¥ å¦‚æœè·¯ç”±å…·æœ‰ä¾èµ–é¡¹ï¼Œå¹¶å¸Œæœ›LaravelæœåŠ¡å®¹å™¨è‡ªåŠ¨æ³¨å…¥è·¯ç”±çš„å›è°ƒä¸­ï¼Œåº”è¯¥åœ¨ä¾èµ–é¡¹ä¹‹ååˆ—å‡ºè·¯ç”±å‚æ•° use Illuminate\\Http\\Request; Route::get('/user/{id}', function (Request $request, string $id) { return 'User ' . $id; }); ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:4:2","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"å¯é€‰å‚æ•° é€šè¿‡æ”¾ç½®ä¸€ä¸ª?åœ¨å‚æ•°åç§°åæ ‡è®°ï¼Œåˆ™å¯è®¾ç½®ä¸€ä¸ªå¯é€‰å‚æ•°ã€‚ æ³¨ï¼šç¡®ä¿ç»™è·¯ç”±çš„ç›¸åº”å˜é‡ä¸€ä¸ªé»˜è®¤å€¼ã€‚ Route::get('/user/{name?}', function (string $name = null) { return $name; }); Route::get('/user/{name?}', function (string $name = 'Joker') { return $name; }); ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:4:3","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"æ­£åˆ™è¡¨è¾¾å¼çº¦æŸ ä½¿ç”¨è·¯ç”±å®ä¾‹ä¸Šçš„whereæ–¹æ³•é™åˆ¶è·¯ç”±å‚æ•°çš„æ ¼å¼ whereæ–¹æ³•æ¥å—å‚æ•°çš„åç§°å’Œå®šä¹‰å¦‚ä½•çº¦æŸå‚æ•°çš„æ­£åˆ™è¡¨è¾¾å¼ å¦‚æœä¼ å…¥çš„è¯·æ±‚ä¸è·¯ç”±æ¨¡å¼çº¦æŸä¸åŒ¹é…ï¼Œå°†è¿”å›404HTTPå“åº” Route::get('/user/{name}', function (string $name) { // ... })-\u003ewhere('name', '[A-Za-z]+'); Route::get('/user/{id}', function (int $id) { //... })-\u003ewhere('id', '[0-9]+'); Route::get('/user/{id}/{name}', function (int $id, string $name) { // ... })-\u003ewhere(['id' =\u003e '[0-9]+', 'name' =\u003e '[A-Za-z]+']); ä¸ºäº†æ–¹ä¾¿èµ·è§ï¼Œä¸€äº›å¸¸ç”¨çš„æ­£åˆ™è¡¨è¾¾å¼å…·æœ‰è¾…åŠ©æ–¹æ³•ï¼Œå…è®¸å¿«é€Ÿå‘è·¯ç”±æ·»åŠ æ¨¡å¼çº¦æŸ /** * whereAlphaNumeric: æŒ‡å®šç»™å®šçš„è·¯ç”±å‚æ•°å¿…é¡»æ˜¯å­—æ¯æ•°å­— */ Route::get('/user/{name}', function (string $name) { // ... })-\u003ewhereAlphaNumeric('name'); /** * whereNumber: æŒ‡å®šç»™å®šçš„è·¯ç”±å‚æ•°å¿…é¡»æ˜¯æ•°å­— */ Route::get('/user/{id}', function (int $id) { //... })-\u003ewhereNumber('id'); /** * ä½¿ç”¨å¤šä¸ªå‚æ•°çº¦æŸæ¡ä»¶ */ Route::get('/user/{id}/{name}', function (int $id, string $name) { // ... })-\u003ewhereNumber('id')-\u003ewhereAlpha('name'); /** * whereUuid: æŒ‡å®šç»™å®šçš„è·¯ç”±å‚æ•°å¿…é¡»æ˜¯UUlDsã€‚ */ Route::get('/user/{id}', function (string $id) { // ... })-\u003ewhereUuid('id'); /** * whereUlid: æŒ‡å®šç»™å®šçš„è·¯ç”±å‚æ•°å¿…é¡»æ˜¯ULIDsã€‚ */ Route::get('/user/{id}', function (string $id) { // ... })-\u003ewhereUlid('id'); /** * whereIn: æŒ‡å®šç»™å®šçš„è·¯ç”±å‚æ•°å¿…é¡»æ˜¯ç»™å®šå€¼ä¹‹ä¸€ */ Route::get('/category/{category}', function (string $category) { // ... })-\u003ewhereIn('category', ['movie', 'song', 'painting']); å…¨å±€çº¦æŸæ¡ä»¶ ä½¿ç”¨pattenæ–¹æ³•å¯ä»¥å®šä¹‰å…¨å±€çº¦æŸæ¡ä»¶ã€‚ åœ¨app/Providers/RouteServiceProvider.phpæ–‡ä»¶ä¸­çš„RouteServiceProviderç±»çš„bootæ–¹æ³•ä¸­å®šä¹‰è¿™äº›å…¨å±€çº¦æŸæ¡ä»¶æ¨¡å¼ public function boot(): void { // å®šä¹‰å…¨å±€çº¦æŸæ¡ä»¶ Route::pattern('id', '[0-9]+'); // ... } ä¸€æ—¦å®šä¹‰äº†å…¨å±€æ¨¡å¼ï¼Œå°†ä½¿ç”¨å‚æ•°åç§°çš„è‡ªåŠ¨åº”ç”¨äºæ‰€æœ‰è·¯ç”± Route::get('/user/{id}', function (string $id) { return 'userid -\u003e ' . $id; }); ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:4:4","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"ç¼–ç çš„æ­£æ–œæ  Laravelè·¯ç”±ç»„ä»¶å…è®¸é™¤/ä¹‹å¤–çš„æ‰€æœ‰å­—ç¬¦éƒ½åœ¨å­˜åœ¨äºè·¯ç”±å‚æ•°å€¼ä¸­ã€‚ å¿…é¡»ä½¿ç”¨whereæ¡ä»¶æ­£åˆ™è¡¨è¾¾å¼æ˜ç¡®å…è®¸/æˆä¸ºå ä½ç¬¦çš„ä¸€éƒ¨åˆ†ã€‚ æ³¨ï¼šç¼–ç çš„æ­£æ–œæ ä»…åœ¨æœ€åä¸€ä¸ªè·¯ç”±æ®µå†…å—æ”¯æŒã€‚ Route::get('/search/{search}', function (string $search) { return 'Search -\u003e ' . $search; })-\u003ewhere('search', '.*'); // URLï¼šhttp://127.0.0.1:8000/api/search/Joker/19/Shenzhen // ç»“æœï¼šSearch -\u003e Joker/19/Shenzhen ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:4:5","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"å‘½åè·¯çº¿ å‘½åè·¯ç”±å…è®¸ä¸ºç‰¹å®šè·¯ç”±æ–¹ä¾¿åœ°ç”ŸæˆURLæˆ–é‡å®šå‘ã€‚ é€šè¿‡nameæ–¹æ³•é“¾æ¥åˆ°è·¯ç”±å®šä¹‰ä¸Šï¼Œå¯ä»¥æŒ‡å®šè·¯ç”±çš„åç§°ã€‚ æ³¨ï¼šè·¯ç”±åç§°åº”å§‹ç»ˆæ˜¯å”¯ä¸€çš„ã€‚ Route::get('/user/profile', function () { // ... })-\u003ename('profile'); ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:5:0","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"ç”Ÿæˆå‘½åè·¯ç”±çš„URL ä¸€æ—¦ä¸ºç»™å®šçš„è·¯ç”±åˆ†é…ä¸€ä¸ªåå­—ï¼Œå¯ä»¥é€šè¿‡Laravelçš„routeå’Œredirectè¾…åŠ©å‡½æ•°ç”ŸæˆURLæˆ–é‡å®šå‘æ—¶ä½¿ç”¨è¯¥è·¯ç”±çš„åç§°ï¼š Route::get('/user/create', function () { // ç”Ÿæˆå®Œæ•´çš„URL $url = route('profile'); log::debug($url) // http://127.0.0.1:8000/api/user/profile // ç”Ÿæˆé‡å®šå‘(ä¸¤ç§æ–¹å¼) // return redirect()-\u003eroute('profile'); return to_route('profile'); }); å¦‚æœå‘½åè·¯ç”±å®šä¹‰äº†å‚æ•°ï¼Œå¯ä»¥å°†å‚æ•°ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ä¼ é€’ç»™routeå‡½æ•°ã€‚ç»™å®šçš„å‚æ•°å°†è‡ªåŠ¨æ’å…¥åˆ°ç”Ÿæˆçš„URLçš„æ­£ç¡®ä½ç½®ï¼š Route::get('/user/{id}/profile', function (string $id) { // ... })-\u003ename('profile'); // ç”Ÿæˆå®Œæ•´çš„URL $url = route('profile', ['id' =\u003e 1]); log::debug($url); // http://127.0.0.1:8000/api/user/1/profile å¦‚æœåœ¨æ•°ç»„ä¸­ä¼ é€’å…¶ä»–å‚æ•°ï¼Œè¿™äº›é”®å€¼å¯¹å°†è‡ªåŠ¨æ·»åŠ åˆ°ç”Ÿæˆçš„URLçš„æŸ¥è¯¢å­—ç¬¦ä¸²ä¸­ï¼š $url = route('profile', ['id' =\u003e 1, 'photos' =\u003e 'yes']); log::debug($url); // http://127.0.0.1:8000/api/user/1/profile?photos=yes ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:5:1","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"æ£€æŸ¥å½“å‰è·¯ç”± å¦‚æœæƒ³ç¡®å®šå½“å‰è¯·æ±‚æ˜¯å¦è·¯ç”±åˆ°ç»™å®šçš„å‘½åè·¯ç”±ï¼Œå¯ä»¥åœ¨Routeå®ä¾‹ä¸Šä½¿ç”¨namedæ–¹æ³•ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥åœ¨è·¯ç”±ä¸­é—´ä»¶æ£€æŸ¥å½“å‰è·¯ç”±åç§°ï¼š if ($request-\u003eroute()-\u003enamed('profile')){ // ... } ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:5:2","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"è·¯ç”±ç»„ è·¯ç”±ç»„å…è®¸å…±äº«è·¯ç”±å±æ€§ã€‚ä¾‹å¦‚ä¸­é—´ä»¶ï¼Œè€Œæ— éœ€åœ¨æ¯ä¸ªç‹¬ç«‹çš„è·¯ç”±ä¸Šå®šä¹‰è¿™äº›å±æ€§ã€‚ åµŒå¥—ç»„å°è¯•æ™ºèƒ½åœ°å°†å±æ€§ä¸å…¶çˆ¶ç»„\"åˆå¹¶\"ã€‚ä¸­é—´ä»¶å’Œwhereæ¡ä»¶åˆå¹¶ï¼ŒåŒæ—¶é™„åŠ åç§°å’Œå‰ç¼€ã€‚URLå‰ç¼€ä¸­çš„å‘½åç©ºé—´åˆ†éš”ç¬¦å’Œæ–œæ ä¼šåœ¨é€‚å½“çš„åœ°æ–¹è‡ªåŠ¨æ·»åŠ ã€‚ ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:6:0","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"è·¯ç”±ä¸­é—´ä»¶ è¦å°†ä¸­é—´ä»¶åˆ†é…ç»™ç»„å†…çš„æ‰€æœ‰è·¯ç”±ï¼Œå¯ä»¥åœ¨å®šä¹‰ç»„ä¹‹å‰ä½¿ç”¨middlewareæ–¹æ³•ã€‚ ä¸­é—´ä»¶æŒ‰ç…§å®ƒä»¬åœ¨æ•°ç»„ä¸­åˆ—å‡ºçš„é¡ºåºæ‰§è¡Œ Route::middleware(['first', 'second'])-\u003egroup(function () { Route::get('/', function () { // ... }); Route::get('/user/profile', function () { // ... }); }); ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:6:1","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"æ§åˆ¶å™¨ å¦‚æœä¸€ç»„è·¯ç”±éƒ½ä½¿ç”¨ç›¸åŒçš„æ§åˆ¶å™¨ï¼Œå¯ä»¥ä½¿ç”¨controlleræ–¹æ³•ä¸ºç»„å†…çš„æ‰€æœ‰è·¯ç”±å®šä¹‰å…¬å…±æ§åˆ¶å™¨ã€‚ç„¶åå†å®šä¹‰è·¯ç”±æ—¶ï¼Œåªéœ€è¦æä¾›ä»–ä»¬è°ƒç”¨çš„æ§åˆ¶å™¨æ–¹æ³• use \\App\\Http\\Controllers\\Api\\OrderController; Route::controller(OrderController::class)-\u003egroup(function () { Route::get('/order/{id}', 'show'); Route::get('/orders', 'store'); }); ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:6:2","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"è·¯ç”±å‰ç¼€ prefixæ–¹æ³•å¯ä»¥ç”¨ç»™å®šçš„URIä¸ºç»„ä¸­çš„æ¯ä¸ªè·¯ç”±åšå‰ç¼€ã€‚ Route::prefix('admin')-\u003egroup(function () { Route::get('/users', function () { // å¯¹åº” '/admin/users' çš„URL }); }); ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:6:3","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"è·¯ç”±åç§°å‰ç¼€ nameæ–¹æ³•å¯ä»¥ç»™å®šå­—ç¬¦ä¸²ä½œä¸ºç»„ä¸­çš„æ¯ä¸ªè·¯ç”±åçš„å‰ç¼€ å»ºè®®è¦æä¾›æœ«å°¾.å­—ç¬¦åœ¨å‰ç¼€ä¸­ Route::name('admin.')-\u003egroup(function () { Route::get('/users', function () { // è¢«åˆ†é…çš„è·¯ç”±åä¸ºï¼š'admin.users' })-\u003ename('users'); }); ä¸­é—´ä»¶ ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:6:4","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"å®šä¹‰ä¸­é—´ä»¶ å¯ä»¥ä½¿ç”¨make:middleware Artisanå‘½ä»¤ php artisan make:middleware EnsureTokenIsValid æ­¤å‘½ä»¤å°†åœ¨é¡¹ç›®çš„ app/Http/Middleware ç›®å½•ä¸­æ”¾ç½®ä¸€ä¸ªæ–°çš„ EnsureTokenIsValid ç±»ã€‚ \u003c?php namespace App\\Http\\Middleware; use Closure; use Illuminate\\Http\\Request; use Symfony\\Component\\HttpFoundation\\Response; class EnsureTokenIsValid { /** * Handle an incoming request. * * @param \\Closure(\\Illuminate\\Http\\Request): (\\Symfony\\Component\\HttpFoundation\\Response) $next */ public function handle(Request $request, Closure $next): Response { // åˆ¤æ–­ä¼ å…¥çš„tokenæ˜¯å¦ä¸€è‡´ if ($request-\u003einput('token') !== 'my-secret-token') { return redirect('home') // å¦‚æœä¸ä¸€è‡´ï¼Œåˆ™é‡å®šå‘åˆ°homeè·¯ç”± } return $next($request); } } ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:7:0","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"ä¸­é—´ä»¶å’Œç›¸åº” ä¸­é—´ä»¶å¯ä»¥åœ¨è¯·æ±‚æ›´æ·±å…¥åœ°ä¼ é€’åˆ°åº”ç”¨ç¨‹åºä¹‹å‰æˆ–ä¹‹åæ‰§è¡Œä»»åŠ¡ è¯·æ±‚ä¹‹å‰æ‰§è¡Œä»»åŠ¡ \u003c?php namespace App\\Http\\Middleware; use Closure; use Illuminate\\Http\\Request; use Symfony\\Component\\HttpFoundation\\Response; class BeforeMiddleware { /** * Handle an incoming request. * * @param \\Closure(\\Illuminate\\Http\\Request): (\\Symfony\\Component\\HttpFoundation\\Response) $next */ public function handle(Request $request, Closure $next): Response { // æ‰§è¡Œæ“ä½œ return $next($request); } } è¯·æ±‚åæ‰§è¡Œä»»åŠ¡ \u003c?php namespace App\\Http\\Middleware; use Closure; use Illuminate\\Http\\Request; use Symfony\\Component\\HttpFoundation\\Response; class AfterMiddleware { /** * Handle an incoming request. * * @param \\Closure(\\Illuminate\\Http\\Request): (\\Symfony\\Component\\HttpFoundation\\Response) $next */ public function handle(Request $request, Closure $next): Response { $response = $next($request); // æ‰§è¡Œæ“ä½œ return $response; } } ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:8:0","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"æ³¨å†Œä¸­é—´ä»¶ ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:9:0","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"å…¨å±€ä¸­é—´ä»¶ å¦‚æœå¸Œæœ›åœ¨å¯¹åº”ç¨‹åºçš„æ¯ä¸ªHTTPè¯·æ±‚æœŸé—´è¿è¡Œä¸­é—´ä»¶ï¼Œéœ€è¦åœ¨app/Http/Kernel.phpç±»çš„$middlewareå±æ€§ä¸­åˆ—å‡ºä¸­é—´ä»¶ç±»ã€‚ class Kernel extends HttpKernel { /** * The application's global HTTP middleware stack. * * These middleware are run during every request to your application. * * @var array\u003cint, class-string|string\u003e */ protected $middleware = [ // \\App\\Http\\Middleware\\TrustHosts::class, \\App\\Http\\Middleware\\TrustProxies::class, \\Illuminate\\Http\\Middleware\\HandleCors::class, \\App\\Http\\Middleware\\PreventRequestsDuringMaintenance::class, \\Illuminate\\Foundation\\Http\\Middleware\\ValidatePostSize::class, \\App\\Http\\Middleware\\TrimStrings::class, \\Illuminate\\Foundation\\Http\\Middleware\\ConvertEmptyStringsToNull::class, ]; ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:9:1","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"å°†ä¸­é—´ä»¶åˆ†é…ç»™è·¯ç”± å¦‚æœè¦å°†ä¸­é—´ä»¶åˆ†é…ç»™ç‰¹å®šè·¯ç”±ï¼Œå¯ä»¥åœ¨å®šä¹‰è·¯ç”±æ—¶è°ƒç”¨middlewareæ–¹æ³• use \\App\\Http\\Middleware\\BeforeMiddleware; Route::get('/profile', function () { // ... })-\u003emiddleware(BeforeMiddleware::class); é€šè¿‡å‘middlewareæ–¹æ³•ä¼ é€’ä¸€ç»„ä¸­é—´ä»¶åç§°ï¼Œå¯ä»¥ä¸ºè·¯ç”±åˆ†é…å¤šä¸ªä¸­é—´ä»¶ use \\App\\Http\\Middleware\\BeforeMiddleware; use \\App\\Http\\Middleware\\AfterMiddleware; Route::get('/profile', function () { // ... })-\u003emiddleware([BeforeMiddleware::class, AfterMiddleware::class]); ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:9:2","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"å®šä¹‰ä¸­é—´ä»¶åˆ«å ä¸ºäº†æ–¹ä¾¿èµ·è§ï¼Œå¯ä»¥åœ¨åº”ç”¨ç¨‹åºçš„app/Http/Kernel.phpæ–‡ä»¶ä¸­ä¸ºä¸­é—´ä»¶åˆ†é…åˆ«å protected $middlewareAliases = [ ... // è‡ªå®šä¹‰ä¸­é—´ä»· 'before' =\u003e \\App\\Http\\Middleware\\BeforeMiddleware::class, 'after' =\u003e \\App\\Http\\Middleware\\AfterMiddleware::class ]; åœ¨è·¯ç”±ä¸­ä½¿ç”¨ä¸­é—´ä»¶åˆ†é…çš„åˆ«å Route::get('/profile', function () { // ... })-\u003emiddleware(['before', 'after']); ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:9:3","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"æ’é™¤ä¸­é—´ä»¶ å½“å°†ä¸­é—´ä»¶åˆ†é…ç»™ä¸€ç»„è·¯ç”±æ—¶ï¼Œå¯èƒ½å¶å°”éœ€è¦é˜²æ­¢ä¸­é—´ä»¶åº”ç”¨äºç»„å†…çš„å•ä¸ªè·¯ç”±ã€‚ å¯ä»¥ä½¿ç”¨withoutMiddlewareæ–¹æ³•å®Œæˆæ­¤æ“ä½œã€‚ use \\App\\Http\\Middleware\\EnsureTokenIsValid; Route::middleware([EnsureTokenIsValid::class])-\u003egroup(function () { Route::get('/', function () { // ... }); Route::get('/profile', function () { // ... })-\u003ewithoutMiddleware([EnsureTokenIsValid::class]); }); ä¹Ÿå¯ä»¥ä»æ•´ä¸ªç»„è·¯ç”±å®šä¹‰ä¸­æ’é™¤ä¸€ç»„ç»™å®šçš„ä¸­é—´ä»¶ use \\App\\Http\\Middleware\\EnsureTokenIsValid; Route::middleware([EnsureTokenIsValid::class])-\u003egroup(function () { Route::get('/', function () { // ... }); Route::withoutMiddleware([EnsureTokenIsValid::class])-\u003egroup(function () { Route::get('/login', function () { // ... }); }); }); ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:9:4","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"ä¸­é—´ä»¶ç»„ å¦‚æœå¸Œæœ›å°†å¤šä¸ªä¸­é—´ä»¶ç»„åˆåœ¨ä¸€ä¸ªé”®ä¸‹ï¼Œä»¥ä½¿å®ƒä»¬æ›´å®¹æ˜“åˆ†é…ç»™è·¯ç”±ã€‚å¯ä»¥ä½¿ç”¨HTTPå†…æ ¸çš„$middlewareGroupså±æ€§æ¥å®Œæˆæ­¤æ“ä½œã€‚ LaravelåŒ…æ‹¬é¢„å®šä¹‰å¸¦æœ‰webå’Œapiä¸­é—´ä»¶ç»„ï¼Œå…¶ä¸­åŒ…å«è‚¯å‘¢ä¸ªå¸Œæœ›åº”ç”¨äºwebå’Œapiè·¯ç”±çš„å¸¸è§ä¸­é—´ä»¶ã€‚è¿™äº›ä¸­é—´ä»¶ç»„ä¼šç”±åº”ç”¨ç¨‹åºçš„App\\Providers\\RouteServiceProvideræœåŠ¡æä¾›è€…è‡ªåŠ¨åº”ç”¨äºç›¸åº”çš„webå’Œapiè·¯ç”±æ–‡ä»¶ä¸­çš„è·¯ç”± /** * The application's route middleware groups. * * @var array\u003cstring, array\u003cint, class-string|string\u003e\u003e */ protected $middlewareGroups = [ 'web' =\u003e [ \\App\\Http\\Middleware\\EncryptCookies::class, \\Illuminate\\Cookie\\Middleware\\AddQueuedCookiesToResponse::class, \\Illuminate\\Session\\Middleware\\StartSession::class, \\Illuminate\\View\\Middleware\\ShareErrorsFromSession::class, // \\App\\Http\\Middleware\\VerifyCsrfToken::class, \\Illuminate\\Routing\\Middleware\\SubstituteBindings::class, ], 'api' =\u003e [ // \\Laravel\\Sanctum\\Http\\Middleware\\EnsureFrontendRequestsAreStateful::class, \\Illuminate\\Routing\\Middleware\\ThrottleRequests::class . ':api', \\Illuminate\\Routing\\Middleware\\SubstituteBindings::class, ], ]; ä¸­é—´ä»¶ç»„å¯ä»¥ä½¿ç”¨ä¸å•ä¸ªä¸­é—´ä»¶ç›¸åŒçš„è¯­æ³•åˆ†é…ç»™è·¯ç”±å’Œæ§åˆ¶å™¨åŠ¨ä½œã€‚åŒç†ï¼Œä¸­é—´ä»¶ç»„ä½¿ä¸€æ¬¡å°†å¤šä¸ªä¸­é—´ä»¶åˆ†é…ç»™ä¸€ä¸ªè·¯ç”±æ›´åŠ æ–¹ä¾¿ Route::get('/', function () { // ... })-\u003emiddleware('web'); Route::middleware(['web'])-\u003egroup(function () { // ... }); ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:9:5","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"æ’åºä¸­é—´ä»¶ åœ¨ç‰¹å®šæƒ…å†µä¸‹ï¼Œå¯èƒ½éœ€è¦ä¸­é—´ä»¶ä»¥ç‰¹å®šçš„é¡ºåºæ‰§è¡Œï¼Œä½†å½“å®ƒä»¬åˆ†é…åˆ°è·¯ç”±æ—¶ï¼Œæ˜¯æ— æ³•æ§åˆ¶å®ƒä»¬çš„é¡ºåºçš„ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥ä½¿ç”¨åˆ°app/Http/Kernel.phpæ–‡ä»¶çš„$middlewarePriorityå±æ€§æŒ‡å®šä¸­é—´ä»¶ä¼˜å…ˆçº§ã€‚ æ³¨ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼ŒHTTPå†…æ ¸ä¸­å¯èƒ½ä¸å­˜åœ¨æ­¤å±æ€§ã€‚å¦‚æœä¸å­˜åœ¨åˆ™æ–°å¢å³å¯ã€‚ /** * ä¸­é—´ä»¶çš„ä¼˜å…ˆçº§æ’åºåˆ—è¡¨ * * è¿™è¿«ä½¿éå…¨å±€ä¸­é—´ä»¶å§‹ç»ˆå¤„äºç»™å®šçš„é¡ºåº * * @var string[] */ protected $middlewarePriority = [ \\Illuminate\\Foundation\\Http\\Middleware\\HandlePrecognitiveRequests::class, \\Illuminate\\Cookie\\Middleware\\EncryptCookies::class, \\Illuminate\\Session\\Middleware\\StartSession::class, \\Illuminate\\View\\Middleware\\ShareErrorsFromSession::class, \\Illuminate\\Contracts\\Auth\\Middleware\\AuthenticatesRequests::class, \\Illuminate\\Routing\\Middleware\\ThrottleRequests::class, \\Illuminate\\Routing\\Middleware\\ThrottleRequestsWithRedis::class, \\Illuminate\\Contracts\\Session\\Middleware\\AuthenticatesSessions::class, \\Illuminate\\Routing\\Middleware\\SubstituteBindings::class, \\Illuminate\\Auth\\Middleware\\Authorize::class, ]; ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:9:6","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"ä¸­é—´ä»¶å‚æ•° ä¸­é—´ä»¶ä¹Ÿå¯ä»¥æ¥æ”¶é¢å¤–çš„å‚æ•°ï¼Œé¢å¤–çš„ä¸­é—´ä»¶å‚æ•°å°†åœ¨$nextå‚æ•°ä¹‹åä¼ é€’ç»™ä¸­é—´ä»¶ \u003c?php namespace App\\Http\\Middleware; use Closure; use Illuminate\\Http\\Request; use Symfony\\Component\\HttpFoundation\\Response; class EnsureTokenIsValid { /** * Handle an incoming request. * * @param \\Closure(\\Illuminate\\Http\\Request): (\\Symfony\\Component\\HttpFoundation\\Response) $next */ public function handle(Request $request, Closure $next, string $role): Response { if (!$request-\u003euser()-\u003ehasRole($role)) { // é‡å®šå‘... } return $next($request); } } åœ¨å®šä¹‰è·¯ç”±æ—¶ï¼Œå¯ä»¥æŒ‡å®šä¸­é—´ä»¶å‚æ•°ï¼Œæ–¹æ³•æ˜¯ä½¿ç”¨:åˆ†å‰²ä¸­é—´ä»¶åç§°å’Œå‚æ•°ã€‚å¤šä¸ªå‚æ•°åº”ä»¥é€—å·åˆ†éš” Route::put('/post/{id}', function (string $id) { // ... })-\u003emiddleware('role:editor'); ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:9:7","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"å¯ç»ˆæ­¢çš„ä¸­é—´ä»¶ éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œåœ¨å°†HTTPå“åº”å‘é€åˆ°æµè§ˆå™¨ä¹‹åï¼Œä¸­é—´ä»¶å¯èƒ½éœ€è¦åšä¸€äº›å·¥ä½œã€‚ å¦‚æœåœ¨ä¸­é—´ä»¶ä¸Šå®šä¹‰äº†ä¸€ä¸ªterminateæ–¹æ³•ï¼Œå¹¶ä¸”webæœåŠ¡å™¨ä½¿ç”¨FastCGIï¼Œåˆ™åœ¨å°†å“åº”å‘é€åˆ°æµè§ˆå™¨åä¼šè‡ªåŠ¨è°ƒç”¨terminateæ–¹æ³• \u003c?php namespace App\\Http\\Middleware; use Closure; use Illuminate\\Http\\Request; use Symfony\\Component\\HttpFoundation\\Response; class TerminatingMiddleware { /** * Handle an incoming request. * * @param \\Closure(\\Illuminate\\Http\\Request): (\\Symfony\\Component\\HttpFoundation\\Response) $next */ public function handle(Request $request, Closure $next): Response { return $next($request); } /** * åœ¨å“åº”å‘é€åˆ°æµè§ˆå™¨åå¤„ç†ä»»åŠ¡ * * @param Request $request * @param Response $response * @return void */ public function terminate(Request $request, Response $response): void { //... } } terminateæ–¹æ³•åº”è¯¥åŒæ—¶æ¥æ”¶è¯·æ±‚å’Œå“åº”ã€‚ä¸€æ—¦å®šä¹‰äº†ä¸€ä¸ªå¯ç»ˆæ­¢çš„ä¸­é—´ä»¶ï¼Œåº”è¯¥å°†å®ƒæ·»åŠ åˆ°app/Http/Kernel.phpæ–‡ä»¶ä¸­çš„è·¯ç”±æˆ–å…¨å±€ä¸­é—´ä»¶åˆ—è¡¨ä¸­ã€‚ å½“åœ¨ä¸­é—´ä»¶ä¸Šè°ƒç”¨terminateæ–¹æ³•æ—¶ï¼ŒLaravelä¼šä»æœåŠ¡å™¨å®¹å™¨è§£æä¸€ä¸ªæ–°çš„ä¸­é—´ä»¶å®ä¾‹ã€‚å¦‚æœæƒ³åœ¨è°ƒç”¨handleå’Œterminateæ–¹æ³•æ—¶ä½¿ç”¨ç›¸åŒçš„ä¸­é—´ä»¶å®ä¾‹ï¼Œå¯ä»¥ä½¿ç”¨å®¹å™¨çš„singletonæ–¹æ³•å‘å®¹å™¨æ³¨å†Œä¸­é—´ä»¶ã€‚é€šå¸¸åº”è¯¥åœ¨é¡¹ç›®çš„AppServiceProviderçš„registeræ–¹æ³•ä¸­å®Œæˆ \u003c?php namespace App\\Providers; use App\\Http\\Middleware\\TerminatingMiddleware; use Illuminate\\Support\\ServiceProvider; class AppServiceProvider extends ServiceProvider { /** * Register any application services. */ public function register(): void { // $this-\u003eapp-\u003esingleton(TerminatingMiddleware::class); } ... } æ§åˆ¶å™¨ æ§åˆ¶å™¨å¯ä»¥å°†ç›¸å…³çš„è¯·æ±‚å¤„ç†é€»è¾‘åˆ†ç»„åˆ°ä¸€ä¸ªç±»ä¸­ã€‚ ä¾‹å¦‚ï¼šä¸€ä¸ªUserControllerç±»å¯èƒ½ä¼šå¤„ç†æ‰€æœ‰ä¸ç”¨æˆ·ç›¸å…³çš„ä¼ å…¥è¯·æ±‚ï¼ŒåŒ…æ‹¬æ˜¾ç¤ºã€åˆ›å»ºã€æ›´æ–°å’Œåˆ é™¤ç”¨æˆ·ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæ§åˆ¶å™¨å­˜å‚¨åœ¨app/Http/Controllerç›®å½•ä¸­ã€‚ ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:9:8","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"ç¼–å†™æ§åˆ¶å™¨ ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:10:0","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"åŸºæœ¬æ§åˆ¶å™¨ å¯ä»¥ä½¿ç”¨make:controllerArtisanå‘½ä»¤å¿«é€Ÿç”Ÿæˆæ–°æ§åˆ¶å™¨ php artisan make:controller UserController é»˜è®¤æƒ…å†µä¸‹ç”Ÿæˆåœ¨app/Http/Controllerç›®å½•ä¸­ï¼Œå¯ä»¥é€šè¿‡æŒ‡å®šè·¯å¾„å­ç›®å½•Api/UserControllerè¿›è¡Œç”Ÿæˆï¼Œè¿™æ ·ç”Ÿæˆåçš„ç›®å½•åœ¨app/Http/Controller/Apiç›®å½•ä¸‹ php artisan make:controller Api/UserController ç¤ºä¾‹ \u003c?php namespace App\\Http\\Controllers\\Api; use App\\Http\\Controllers\\Controller; use Illuminate\\Http\\Request; class UserController extends Controller { public function show(string $id): string { return 'User' . $id; } } å®šä¹‰åˆ°æ§åˆ¶å™¨æ–¹æ³•çš„è·¯ç”±ï¼š use App\\Http\\Controllers\\Api\\UserController; Route::get('/user/{id}', [UserController::class, 'show']); ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:10:1","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"å•åŠ¨ä½œæ§åˆ¶å™¨ å¦‚æœæ§åˆ¶å™¨åŠ¨ä½œç‰¹åˆ«å¤æ‚ï¼Œå¯èƒ½ä¼šå‘ç°å°†æ•´ä¸ªæ§åˆ¶å™¨ä¸“ç”¨äºè¯¥å•ä¸ªåŠ¨ä½œå¾ˆæ–¹ä¾¿ã€‚ä¸ºæ­¤ï¼Œå¯ä»¥åœ¨æ§åˆ¶å™¨ä¸­å®šä¹‰ä¸€ä¸ª__invokeæ–¹æ³•ã€‚ å¯ä»¥ä½¿ç”¨make:controllerArtisanå‘½ä»¤çš„--invokableé€‰é¡¹ç”Ÿæˆå¯è°ƒç”¨æ§åˆ¶å™¨ php artisan make:controller ProvisionServer --invokable ç”Ÿæˆçš„æ§åˆ¶å™¨ï¼š \u003c?php namespace App\\Http\\Controllers\\Api; use App\\Http\\Controllers\\Controller; use Illuminate\\Http\\Request; class ProvisionServer extends Controller { /** * Handle the incoming request. */ public function __invoke(Request $request): array { // return $request-\u003eall(); } } ä¸ºå•åŠ¨ä½œæ§åˆ¶å™¨æ³¨å†Œè·¯ç”±æ—¶ï¼Œä¸éœ€è¦æŒ‡å®šæ§åˆ¶å™¨æ–¹æ³•ã€‚å¯ä»¥ç®€å•åœ°å°†æ§åˆ¶å™¨çš„åç§°ä¼ é€’ç»™è·¯ç”±å™¨ï¼š use App\\Http\\Controllers\\Api\\ProvisionServer; Route::get('/server', ProvisionServer::class); ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:10:2","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"æ§åˆ¶å™¨ä¸­é—´ä»¶ ä¸­é—´ä»¶å¯ä»¥åœ¨è·¯ç”±æ–‡ä»¶ä¸­åˆ†é…ç»™æ§åˆ¶å™¨çš„è·¯ç”±ï¼š Route::get('/user/{id}', [UserController::class, 'show'])-\u003emiddleware('auth'); ä¹Ÿå¯ä»¥åœ¨æ§åˆ¶å™¨çš„æ„é€ å‡½æ•°ä¸­æŒ‡å®šä¸­é—´ä»¶ã€‚ä½¿ç”¨æ§åˆ¶å™¨æ„é€ å‡½æ•°ä¸­çš„middlewareæ–¹æ³•å°†ä¸­é—´ä»¶åˆ†é…ç»™æ§åˆ¶å™¨çš„æ“ä½œï¼š \u003c?php namespace App\\Http\\Controllers\\Api; use App\\Http\\Controllers\\Controller; use Closure; use Illuminate\\Http\\Request; class UserController extends Controller { public function __construct() { $this-\u003emiddleware('auth'); $this-\u003emiddleware('log')-\u003eonly('index'); $this-\u003emiddleware('subscribed')-\u003eexcept('store'); // æ§åˆ¶å™¨è¿˜å…è®¸ä½¿ç”¨é—­åŒ…æ³¨å†Œä¸­é—´ä»¶ $this-\u003emiddleware(function (Request $request, Closure $next) { return $next($request); }); } public function show(string $id): string { return 'User' . $id; } } ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:11:0","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"èµ„æºæ§åˆ¶å™¨ å¦‚æœå°†åº”ç”¨ç¨‹åºä¸­çš„æ¯ä¸ªEloquentæ¨¡å‹éƒ½æ˜¯ä¸ºèµ„æºï¼Œé‚£ä¹ˆé€šå¸¸å¯¹åº”ç”¨ç¨‹åºä¸­çš„æ¯ä¸ªèµ„æºéƒ½æ‰§è¡Œç›¸åŒçš„æ“ä½œã€‚ Laravelçš„èµ„æºè·¯ç”±é€šè¿‡å•è¡Œä»£ç å³å¯å°†å…¸å‹çš„å¢åˆ æ”¹æŸ¥(CURD)è·¯ç”±åˆ†é…ç»™æ§åˆ¶å™¨ã€‚é¦–ç›¸ï¼Œä½¿ç”¨Artisanå‘½ä»¤make:controllerçš„--resourceé€‰é¡¹æ¥å¿«é€Ÿåˆ›å»ºä¸€ä¸ªæ§åˆ¶å™¨ \u003c?php namespace App\\Http\\Controllers\\Api; use App\\Http\\Controllers\\Controller; use Illuminate\\Http\\Request; class PhotoController extends Controller { /** * Display a listing of the resource. */ public function index() { // } /** * Show the form for creating a new resource. */ public function create() { // } /** * Store a newly created resource in storage. */ public function store(Request $request) { // } /** * Display the specified resource. */ public function show(string $id) { // } /** * Show the form for editing the specified resource. */ public function edit(string $id) { // } /** * Update the specified resource in storage. */ public function update(Request $request, string $id) { // } /** * Remove the specified resource from storage. */ public function destroy(string $id) { // } } ç»™æ§åˆ¶å™¨æ³¨å†Œä¸€ä¸ªèµ„æºè·¯ç”±ï¼š use App\\Http\\Controllers\\Api\\PhotoController; Route::resource('photos', PhotoController::class); è¿™ä¸ªå•ä¸€çš„è·¯ç”±å£°æ˜åˆ›å»ºäº†å¤šä¸ªè·¯ç”±æ¥å¤„ç†èµ„æºä¸Šçš„å„ç§è¡Œä¸ºï¼Œå¯ä»¥é€šè¿‡php artisan route:listæ¥å¿«é€Ÿäº†è§£ï¼š ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:12:0","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"è‡ªå®šä¹‰ç¼ºå¤±æ¨¡å‹è¡Œä¸º é€šå¸¸å¦‚æœæœªæ‰¾åˆ°éšå¼ç»‘å®šçš„èµ„æºæ¨¡å‹ï¼Œåˆ™ä¼šç”ŸæˆçŠ¶æ€ç ä¸º404çš„HTTPå“åº”ã€‚ä½†æ˜¯å¯ä»¥é€šè¿‡åœ¨å®šä¹‰èµ„æºè·¯ç”±æ—¶è°ƒç”¨missingçš„æ–¹æ³•æ¥è‡ªå®šä¹‰è¯¥è¡Œä¸ºã€‚missingæ–¹æ³•æ¥å—ä¸€ä¸ªé—­åŒ…ï¼Œå¦‚æœå¯¹ä»»ä½•èµ„æºçš„è·¯ç”±éƒ½æ‰¾ä¸åˆ°éšå¼ç»‘å®šæ¨¡å‹ï¼Œåˆ™å°†è°ƒç”¨è¯¥é—­åŒ…ï¼š Route::resource('photos', PhotoController::class) -\u003emissing(function (Request $request) { return Redirect::route('photos.index'); }); ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:12:1","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"è½¯åˆ é™¤æ¨¡å‹ é€šå¸¸æƒ…å†µä¸‹ï¼Œéšå¼æ¨¡å‹ç»‘å®šå°†ä¸ä¼šæ£€ç´¢å·²ç»è¿›è¡Œäº†è½¯åˆ é™¤çš„æ¨¡å‹ï¼Œå¹¶ä¸”ä¼šè¿”å›ä¸€ä¸ª404HTTPå“åº”ã€‚ä½†æ˜¯ï¼Œå¯ä»¥åœ¨å®šä¹‰èµ„æºè·¯ç”±æ—¶è°ƒç”¨withTrashedæ–¹æ³•æ¥å‘Šè¯‰æ¡†æ¶å…è®¸è½¯åˆ é™¤çš„æ¨¡å‹ï¼š use App\\Http\\Controllers\\Api\\PhotoController; Route::resource('photos', PhotoController::class)-\u003ewithTrashed(); å½“ä¸ä¼ é€’å‚æ•°è°ƒç”¨withTrashedæ—¶ï¼Œå°†åœ¨showã€edit å’Œ updateèµ„æºè·¯ç”±ä¸­å…è®¸è½¯åˆ é™¤çš„æ¨¡å‹ã€‚å¯ä»¥é€šè¿‡ä¸€ä¸ªæ•°ç»„æŒ‡å®šè¿™äº›è·¯ç”±çš„å­é›†ä¼ é€’ç»™withTrashedæ–¹æ³•ï¼š Route::resource('photos', PhotoController::class) -\u003ewithTrashed(['show']); ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:12:2","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"æŒ‡å®šèµ„æºæ¨¡å‹ å¦‚æœä½¿ç”¨äº†è·¯ç”±æ¨¡å‹çš„ç»‘å®šå¹¶ä¸”æƒ³åœ¨èµ„æºæ§åˆ¶å™¨çš„æ–¹æ³•ä¸­ä½¿ç”¨ç±»å‹æç¤ºï¼Œå¯ä»¥åœ¨ç”Ÿæˆæ§åˆ¶å™¨çš„æ—¶å€™ä½¿ç”¨--modelé€‰é¡¹ï¼š php artisan make:controller Api/PhotoController --model=Photo --resource ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:12:3","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"ç”Ÿæˆè¡¨å•è¯·æ±‚ å¯ä»¥åœ¨ç”Ÿæˆèµ„æºæ§åˆ¶å™¨æ—¶æä¾›--requestsé€‰é¡¹æ¥è®©Artisanä½æ§åˆ¶å™¨çš„storageå’Œupdateæ–¹æ³•ç”Ÿæˆè¡¨å•è¯·æ±‚ç±»ï¼š php artisan make:controller Api/PhotoController --model=Photo --resource --requests ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:12:4","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"éƒ¨åˆ†èµ„æºè·¯ç”± å½“å£°æ˜èµ„æºè·¯ç”±æ—¶ï¼Œå¯ä»¥æŒ‡å®šæ§åˆ¶å™¨å¤„ç†çš„éƒ¨åˆ†è¡Œä¸ºï¼Œè€Œä¸æ˜¯æ‰€æœ‰é»˜è®¤çš„è¡Œä¸ºï¼š use App\\Http\\Controllers\\Api\\PhotoController; Route::resource('photos', PhotoController::class) -\u003eonly(['index', 'show']); Route::resource('photos', PhotoController::class) -\u003eexcept(['create', 'store', 'update', 'destroy']); ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:12:5","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"APIèµ„æºè·¯ç”± å½“å£°æ˜ç”¨äºAPIçš„èµ„æºè·¯ç”±æ—¶ï¼Œé€šå¸¸éœ€è¦æ’é™¤æ˜¾ç¤ºHTMLæ¨¡æ¿çš„è·¯ç”±ï¼Œä¾‹å¦‚createå’Œeditã€‚ä¸ºäº†æ–¹ä¾¿ï¼Œå¯ä»¥ä½¿ç”¨apiResourceæ–¹æ³•æ¥æ’é™¤è¿™ä¸¤ä¸ªè·¯ç”±ï¼š use App\\Http\\Controllers\\Api\\PhotoController; Route::apiResource('photos', PhotoController::class); ä¹Ÿå¯ä»¥ä¼ é€’ä¸€ä¸ªæ•°ç»„ç»™apiResourcesæ–¹æ³•æ¥åŒæ—¶æ³¨å†Œå¤šä¸ªAPIèµ„æºæ§åˆ¶å™¨ï¼š Route::apiResources([ 'photos' =\u003e PhotoController::class, 'posts' =\u003e PostController::class, ]); è¦å¿«é€Ÿç”ŸæˆAPIèµ„æºæ§åˆ¶å™¨ï¼Œå¯ä»¥æ‰§è¡Œmake:controllerå‘½ä»¤æ—¶ä½¿ç”¨--apiå‚æ•°ï¼š php artisan make:controller PhotoController --api ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:12:6","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"åµŒå¥—èµ„æº æœ‰æ—¶å¯èƒ½éœ€è¦å®šä¹‰ä¸€ä¸ªåµŒå¥—çš„èµ„æºå‹è·¯ç”±ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªphotoèµ„æºå¯èƒ½è¢«æ·»åŠ äº†å¤šä¸ªcommentsã€‚é‚£ä¹ˆå¯ä»¥åœ¨è·¯ç”±ä¸­ä½¿ç”¨.ç¬¦å·æ¥å£°æ˜èµ„æºå‹æ§åˆ¶å™¨ï¼š use App\\Http\\Controllers\\Api\\PhotoController; Route::resource('photos.comments', PhotoController::class); ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:12:7","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"æµ…å±‚åµŒå¥— é€šå¸¸ï¼Œå¹¶ä¸æ˜¯åœ¨æ‰€æœ‰æƒ…å†µä¸‹éƒ½éœ€è¦å­å•ŠURIä¸­åŒæ—¶æ‹¥æœ‰çˆ¶IDå’Œå­IDï¼Œå› ä¸ºå­IDå·²ç»æ˜¯å”¯ä¸€çš„æ ‡è¯†ç¬¦ã€‚å½“ä½¿ç”¨å”¯ä¸€æ ‡è¯†ç¬¦ï¼ˆå¦‚è‡ªåŠ¨é€’å¢çš„ä¸»é”®ï¼‰æ¥è¡¨ç¤ºURIä¸­çš„æ¨¡å¼æ—¶ï¼Œå¯ä»¥é€‰æ‹©ä½¿ç”¨ã€Œæµ…åµŒå¥—ã€çš„æ–¹å¼å®šä¹‰è·¯ç”±ï¼š use App\\Http\\Controllers\\Api\\PhotoController; Route::resource('photos.comments', PhotoController::class) -\u003eshallow(); ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:12:8","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"å‘½åèµ„æºè·¯ç”± é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰çš„èµ„æºæ§åˆ¶å™¨è¡Œä¸ºéƒ½æœ‰ä¸€ä¸ªè·¯ç”±åç§°ï¼Œå¯ä»¥ä¼ å…¥namesæ•°ç»„æ¥è¦†ç›–è¿™äº›åç§°ï¼š use App\\Http\\Controllers\\Api\\PhotoController; Route::resource('photos.comments', PhotoController::class) -\u003enames(['create' =\u003e 'photos.build']); ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:12:9","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"å‘½åèµ„æºè·¯ç”±å‚æ•° é»˜è®¤æƒ…å†µä¸‹ï¼ŒRoute::resourceä¼šæ ¹æ®èµ„æºåç§°çš„å•æ•°å½¢å¼åˆ›å»ºèµ„æºè·¯ç”±çš„è·¯ç”±å‚æ•°ã€‚å¯ä»¥ä½¿ç”¨parametersæ–¹æ³•æ¥è½»æ¾åœ°è¦†ç›–èµ„æºè·¯ç”±åç§°ã€‚ä¼ å…¥parametersæ–¹æ³•åº”è¯¥æ˜¯è‡ªæ„¿åç§°å’Œå‚æ•°åç§°çš„å…³è”æ•°ç»„ï¼š use App\\Http\\Controllers\\Api\\PhotoController; Route::resource('photos', PhotoController::class) -\u003eparameters(['photos' =\u003e 'photo_id']); ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:12:10","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"é™å®šèŒƒå›´çš„èµ„æºè·¯ç”± Laravelçš„ä½œç”¨åŸŸéšå¼æ¨¡å‹ç»‘å®šåŠŸèƒ½å¯ä»¥è‡ªåŠ¨ç¡®å®šåµŒå¥—ç»‘å®šçš„èŒƒå›´ï¼Œä»¥ä¾¿ç¡®è®¤å·²è§£æçš„å­æ¨¡å‹å±äºçˆ¶æ¨¡å‹ã€‚é€šè¿‡åœ¨å®šä¹‰åµŒå¥—èµ„æºæ—¶ä½¿ç”¨scopedæ–¹æ³•ï¼Œå¯ä»¥å¯ç”¨è‡ªåŠ¨èŒƒå›´ç•Œå®šï¼Œå¹¶æŒ‡ç¤ºLaravelåº”è¯¥é€šè¿‡ä»¥ä¸‹æ–¹å¼æ¥æ£€ç´¢å­èµ„æºçš„å“ªä¸ªå­—æ®µï¼š use App\\Http\\Controllers\\Api\\PhotoController; Route::resource('photos.comments', PhotoController::class) -\u003escoped(['comment' =\u003e 'slug']); ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:12:11","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"æœ¬åœ°åŒ–èµ„æºURIs é»˜è®¤æƒ…å†µä¸‹ï¼ŒRoute::resourceå°†ä¼šç”¨è‹±æ–‡åŠ¨è¯åˆ›å»ºèµ„æºURIsã€‚å¦‚æœéœ€è¦è‡ªå®šä¹‰createå’Œeditè¡Œä¸ºçš„åŠ¨è¯ï¼Œå¯ä»¥åœ¨App\\Providers\\RouteServiceProvider çš„ boot æ–¹æ³•ä¸­ä½¿ç”¨ Route::resourceVerbs æ–¹æ³•å®ç°ï¼š public function boot(): void { ... Route::resourceVerbs([ 'create' =\u003e 'crear', 'edit' =\u003e 'editar', ]); ... } ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:12:12","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"è¡¥å……èµ„æºæ§åˆ¶å™¨ å¦‚æœéœ€è¦å‘èµ„æºæ§åˆ¶å™¨æ·»åŠ è¶…å‡ºé»˜è®¤èµ„æºè·¯ç”±é›†çš„å…¶ä»–è·¯ç”±ï¼Œåˆ™åº”åœ¨è°ƒç”¨Route::resourceæ–¹æ³•ä¹‹å‰å®šä¹‰è¿™äº›è·¯ç”±ï¼›å¦åˆ™ï¼Œç”±resourceæ–¹æ³•å®šä¹‰çš„è·¯ç”±å¯èƒ½ä¼šæ— æ„ä¸­ä¼˜å…ˆäºè¡¥å……è·¯ç”±ï¼š use App\\Http\\Controllers\\Api\\PhotoController; Route::get('/photos/popular', [PhotoController::class, 'popular']); ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:12:13","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"å•ä¾‹èµ„æºæ§åˆ¶å™¨ æœ‰æ—¶å€™ï¼Œåº”ç”¨ä¸­çš„èµ„æºå¯èƒ½åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥æ³¨å†Œæˆå•ä¾‹ï¼ˆsignletonï¼‰èµ„æºæ§åˆ¶å™¨ï¼š use App\\Http\\Controllers\\Api\\PhotoController; Route::singleton('photos', PhotoController::class); å•ä¾‹èµ„æºä¸­createè·¯ç”±æ²¡æœ‰è¢«æ³¨å†Œï¼›å¹¶ä¸”æ³¨å†Œçš„è·¯ç”±ä¸æ¥å—è·¯ç”±å‚æ•°ï¼Œå› ä¸ºè¯¥èµ„æºä¸­åªæœ‰ä¸€ä¸ªå®ä¾‹å­˜åœ¨ï¼š å•ä¾‹èµ„æºä¹Ÿå¯ä»¥åœ¨æ ‡å‡†èµ„æºå†…åµŒå¥—ä½¿ç”¨ï¼š Route::singleton('photos.comments', PhotoController::class); ä¸Šä¾‹ä¸­ï¼Œphotoèµ„æºå°†æ¥æ”¶æ‰€æœ‰çš„æ ‡å‡†èµ„æºè·¯ç”±ï¼›ä¸è¿‡commentsèµ„æºå°†ä¼šæ˜¯ä¸ªå•ä¾‹èµ„æºï¼Œå®ƒçš„è·¯ç”±å¦‚ä¸‹æ‰€ç¤ºï¼š Creatableå•ä¾‹èµ„æº æœ‰æ—¶ï¼Œå¯èƒ½éœ€è¦ä¸ºå•ä¾‹èµ„æºå®šä¹‰createå’Œstorageè·¯ç”±ã€‚è¦å®ç°è¿™ä¸€åŠŸèƒ½ï¼Œå¯ä»¥åœ¨æ³¨å†Œå•ä¾‹èµ„æºè·¯ç”±æ—¶ï¼Œè°ƒç”¨creatableæ–¹æ³•ï¼š Route::singleton('photos.comments', PhotoController::class) -\u003ecreatable(); å¦‚æœå¸Œæœ›Laravelä¸ºå•ä¸ªèµ„æºæ³¨å†ŒDETELEè·¯ç”±ï¼Œä½†ä¸æ³¨å†Œåˆ›å»ºæˆ–å­˜å‚¨è·¯ç”±ï¼Œåˆ™å¯ä»¥ä½¿ç”¨destroyableæ–¹æ³•ï¼š Route::singleton('photos.comments', PhotoController::class) -\u003edestroyable(); APIå•ä¾‹èµ„æº apiSingletonæ–¹æ³•å¯ç”¨äºæ³¨å†Œå°†é€šè¿‡APIæ“ä½œçš„å•ä¾‹èµ„æºï¼Œä»è€Œä¸éœ€è¦createå’Œeditè·¯ç”±ï¼š Route::apiSingleton('photos', PhotoController::class); APIå•ä¾‹èµ„æºä¹Ÿå¯ä»¥æ—¶creatableï¼Œå®ƒå°†æ³¨å†Œstoreå’Œdestroyèµ„æºè·¯ç”±ï¼š Route::apiSingleton('photos', PhotoController::class) -\u003ecreatable(); ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:12:14","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"ä¾èµ–æ³¨å…¥å’Œæ§åˆ¶å™¨ ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:13:0","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"æ„é€ å‡½æ•°æ³¨å…¥ LaravelæœåŠ¡å®¹å™¨ç”¨äºè§£ææ‰€æœ‰Laravelæ§åˆ¶å™¨ã€‚å› æ­¤ï¼Œå¯ä»¥åœ¨å…¶æ„é€ å‡½æ•°ä¸­å¯¹æ§åˆ¶å™¨å¯èƒ½éœ€è¦çš„ä»»ä½•ä¾èµ–é¡¹è¿›è¡Œç±»å‹æç¤ºã€‚å£°æ˜çš„ä¾èµ–é¡¹å°†è‡ªåŠ¨è§£æå¹¶æ³¨å…¥åˆ°æ§åˆ¶å™¨å®ä¾‹ä¸­ï¼š \u003c?php namespace App\\Http\\Controllers; use App\\Repositories\\UserRepository; class UserController extends Controller { /** * åˆ›å»ºæ–°æ§åˆ¶å™¨å®ä¾‹ã€‚ */ public function __construct( protected UserRepository $users, ) {} } ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:13:1","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"æ–¹æ³•æ³¨å…¥ æ–¹æ³•æ³¨å…¥çš„ä¸€ä¸ªå¸¸è§ç”¨ä¾‹æ—¶å°†Illuminate\\Http\\Requestå®ä¾‹æ³¨å…¥åˆ°æ§åˆ¶å™¨æ–¹æ³•ä¸­ï¼š \u003c?php namespace App\\Http\\Controllers\\Api; use App\\Http\\Controllers\\Controller; use Illuminate\\Http\\Request; class UserController extends Controller { public function __construct(Request $request) { $name = $request-\u003ename; // ... return redirect('/users'); } } å¦‚æœæ§åˆ¶å™¨æ–¹æ³•ä¹Ÿéœ€è¦è·¯ç”±å‚æ•°ï¼Œé‚£å°±åœ¨å…¶ä»–ä¾èµ–é¡¹ä¹‹ååˆ—å‡ºè·¯ç”±å‚æ•°å³å¯ï¼š use App\\Http\\Controllers\\UserController; Route::put('/user/{id}', [UserController::class, 'update']); \u003c?php namespace App\\Http\\Controllers; use Illuminate\\Http\\RedirectResponse; use Illuminate\\Http\\Request; class UserController extends Controller { /** * æ›´æ–°ç»™å®šç”¨æˆ·ã€‚ */ public function update(Request $request, string $id): RedirectResponse { // æ›´æ–°ç”¨æˆ·ã€‚ã€‚ã€‚ return redirect('/users'); } } HTTPè¯·æ±‚ Laravelçš„Illuminate\\Http\\Requestç±»æä¾›äº†ä¸€ç§é¢å‘å¯¹è±¡çš„æ–¹å¼æ¥ä¸å½“å‰ç”±åº”ç”¨ç¨‹åºå¤„ç†çš„HTTPè¯·æ±‚è¿›è¡Œäº¤äº’ï¼Œå¹¶æ£€ç´¢æäº¤è¯·æ±‚çš„è¾“å…¥å†…å®¹ã€Cookieå’Œæ–‡ä»¶ã€‚ ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:13:2","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"ä¸è¯·æ±‚äº¤äº’ ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:14:0","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"è®¿é—®è¯·æ±‚ è¦é€šè¿‡ä¾èµ–æ³¨å…¥è·å–å½“å‰çš„HTTPè¯·æ±‚å®ä¾‹ï¼Œåº”è¯¥åœ¨è·¯ç”±é—­åŒ…æˆ–æ§åˆ¶å™¨æ–¹æ³•ä¸­å¯¼å…¥Illuminate\\Http\\Requestç±»ã€‚ä¼ å…¥çš„è¯·æ±‚å®ä¾‹å°†ç”±LaravelæœåŠ¡å®¹å™¨è‡ªåŠ¨æ³¨å…¥ï¼š \u003c?php namespace App\\Http\\Controllers\\Api; use App\\Http\\Controllers\\Controller; use Illuminate\\Http\\Request; class UserController extends Controller { public function __construct(Request $request) { $name = $request-\u003ename; // ... return redirect('/users'); } public function show(string $id): string { return 'User' . $id; } } ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:14:1","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"è¯·æ±‚è·¯å¾„ã€ä¸»æœºå’Œæ–¹æ³• Illuminate\\Http\\Requestå®ä¾‹æä¾›å„ç§æ–¹æ³•æ¥æ£€æŸ¥ä¼ å…¥çš„HTTPè¯·æ±‚ï¼Œå¹¶æ‰©å±•äº†Symfony\\Component\\HttpFoundation\\Requestç±»ã€‚ è·å–è¯·æ±‚è·¯å¾„ pathæ–¹æ³•è¿”å›è¯·æ±‚çš„è·¯å¾„ä¿¡æ¯ã€‚ // è®¿é—®ï¼šhttp://127.0.0.1:8000/api/user/1 $uri = $request-\u003epath(); // api/user/1 æ£€æŸ¥è¯·æ±‚è·¯å¾„/è·¯ç”±ä¿¡æ¯ isæ–¹æ³•å…è®¸éªŒè¯ä¼ å…¥è¯·æ±‚è·¯å¾„æ˜¯å¦ä¸ç»™å®šçš„æ¨¡å¼åŒ¹é…ã€‚å½“ä½¿ç”¨æ­¤æ–¹æ³•æ—¶ï¼Œå¯ä»¥ä½¿ç”¨*å­—ç¬¦ä½œä¸ºé€šé…ç¬¦ï¼š if ($request-\u003eis('admin/*')) { // ... } ä½¿ç”¨routeIsæ–¹æ³•ï¼Œå¯ä»¥ç¡®å®šä¼ å…¥çš„è¯·æ±‚æ˜¯å¦ä¸å‘½åè·¯ç”±åŒ¹é…ï¼š if ($request-\u003erouteIs('admin.*')) { // ... } è·å–è¯·æ±‚URL è¦è·å–ä¼ å…¥è¯·æ±‚çš„å®Œæ•´URLï¼Œå¯ä»¥ä½¿ç”¨urlæˆ–fullUrlæ–¹æ³•ã€‚ urlæ–¹æ³•å°†è¿”å›ä¸å¸¦æŸ¥è¯¢å­—ç¬¦ä¸²çš„URLï¼Œè€ŒfullUrlæ–¹æ³•å°†åŒ…æ‹¬æŸ¥è¯¢å­—ç¬¦ä¸²ï¼š // è®¿é—®ï¼šhttp://127.0.0.1:8000/api/user/1?type=2 $url = $request-\u003eurl(); // http://127.0.0.1:8000/api/user/1 $urlWithQueryString = $request-\u003efullUrl(); // http://127.0.0.1:8000/api/user/1?type=2 å¦‚æœæƒ³å°†æŸ¥è¯¢å­—ç¬¦ä¸²æ•°æ®é™„åŠ åˆ°å½“å‰URLï¼Œè¯·è°ƒç”¨fullUrlWithQueryæ–¹æ³•ã€‚æ­¤æ–¹æ³•å°†ç»™å®šçš„æŸ¥è¯¢å­—ç¬¦ä¸²å˜é‡æ•°ç»„ä¸å½“å‰æŸ¥è¯¢å­—ç¬¦ä¸²åˆå¹¶ï¼š $request-\u003efullUrlWithQuery(['phone' =\u003e '11111']); è·å–è¯·æ±‚Host Route::get('/getHost', function (Request $request) { $host = $request-\u003ehost(); $httpHost = $request-\u003ehttpHost(); $schemeAndHttpHost = $request-\u003eschemeAndHttpHost(); return ['host' =\u003e $host, 'httpHost' =\u003e $httpHost, 'schemeAndHttpHost' =\u003e $schemeAndHttpHost]; }); // { // \"host\": \"127.0.0.1\", // \"httpHost\": \"127.0.0.1:8000\", // \"schemeAndHttpHost\": \"http://127.0.0.1:8000\" // } è·å–è¯·æ±‚æ–¹æ³• methodæ–¹æ³•å°†è¿”å›è¯·æ±‚çš„HTTPåŠ¨è¯ï¼Œå¯ä»¥ä½¿ç”¨isMethodæ–¹æ³•æ¥éªŒè¯HTTPåŠ¨è¯æ˜¯å¦ä¸ç»™å®šçš„å­—ç¬¦ä¸²åŒ¹é…ï¼š $method = $request-\u003emethod(); if ($request-\u003eisMethod('post')) { // ... } ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:14:2","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"è¯·æ±‚å¤´ ä½¿ç”¨headeræ–¹æ³•ä»Illuminate\\Http\\Requestå®ä¾‹ä¸­æ£€ç´¢è¯·æ±‚æ ‡å¤´ã€‚å¦‚æœè¯·æ±‚ä¸­æ²¡æœ‰æ ‡å¤´ï¼Œåˆ™è¿”å›nullã€‚headeræ–¹æ³•æ¥å—ä¸¤ä¸ªå¯é€‰å‚æ•°ï¼Œå¦‚æœè¯¥æ ‡å¤´åœ¨è¯·æ±‚ä¸­ä¸å­˜åœ¨ï¼Œåˆ™è¿”å›ç¬¬äºŒä¸ªå‚æ•°ï¼š $header = $request-\u003eheader('X-Header-Name'); // null $header = $request-\u003eheader('X-Header-Name', 'default'); // default hasHeaderæ–¹æ³•å¯ç”¨äºç¡®å®šè¯·æ±‚æ˜¯å¦åŒ…å«ç»™å®šçš„æ ‡å¤´ï¼š if ($request-\u003ehasHeader('X-Header-Name')) { // ... } bearerTokenæ–¹æ³•å¯ç”¨äºä»Authorizationæ ‡å¤´æ£€ç´¢æˆæƒæ ‡è®°ã€‚å¦‚æœä¸å­˜åœ¨æ­¤ç±»æ ‡å¤´ï¼Œå°†è¿”å›ä¸€ä¸ªç©ºå­—ç¬¦ä¸²ï¼š $bearerToken = $request-\u003ebearerToken(); ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:14:3","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"è¯·æ±‚IPåœ°å€ ipæ–¹æ³•å¯ç”¨äºæ£€ç´¢åº”ç”¨ç¨‹åºå‘å‡ºè¯·æ±‚çš„å®¢æˆ·ç«¯çš„IPåœ°å€ï¼š $ip = $request-\u003eip(); ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:14:4","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"å†…å®¹åå•† Laravelæä¾›äº†å‡ ç§æ–¹æ³•ï¼Œé€šè¿‡Acceptæ ‡å¤´æ£€æŸ¥ä¼ å…¥è¯·æ±‚çš„è¯·æ±‚å†…å®¹ç±»å‹ã€‚é¦–å…ˆï¼ŒgetAcceptableContentTypesæ–¹æ³•å°†è¿”å›åŒ…å«è¯·æ±‚æ¥å—çš„æ‰€æœ‰å†…å®¹ç±»å‹çš„æ•°ç»„ï¼š $acceptableContentTypes = $request-\u003egetAcceptableContentTypes(); // [ // \"text/html\", // \"application/xhtml+xml\", // \"image/avif\", // \"image/webp\", // \"image/apng\", // \"application/xml\", // \"*/*\", // \"application/signed-exchange\" // ] acceptsæ–¹æ³•æ¥æ”¶ä¸€ä¸ªå†…å®¹ç±»å‹æ•°ç»„ï¼Œå¹¶åœ¨è¯·æ±‚æ¥å—ä»»ä½•å†…å®¹ç±»å‹æ—¶è¿”å›trueã€‚å¦åˆ™å°†è¿”å›falseï¼š if ($request-\u003eaccepts(['text/html', 'application/json'])) { // ... } prefersæ–¹æ³•ç¡®å®šç»™å®šå†…å®¹ç±»å‹æ•°ç»„ä¸­çš„å“ªç§å†…å®¹ç±»å‹ç”±è¯·æ±‚æœ€å…·ä¼˜åŠ¿ã€‚å¦‚æœè¯·æ±‚æœªæ¥å—ä»»ä½•æä¾›çš„å†…å®¹ç±»å‹ï¼Œåˆ™è¿”å›nullï¼š $prefers = $request-\u003eprefers(['text/html', 'application/json']); // text/html ç”±äºè®¸å¤šåº”ç”¨ç¨‹åºä»…æä¾›HTMLæˆ–JSONï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨expectsJsonæ–¹æ³•å¿«é€Ÿç¡®å®šä¼ å…¥è¯·æ±‚æ˜¯å¦æœŸæœ›è·å¾—JSONå“åº”ï¼š if ($request-\u003eexpectsJson()){ // ... } ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:14:5","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"PSR-7è¯·æ±‚ ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:14:6","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"è¾“å…¥ ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:15:0","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"æ£€ç´¢è¾“å…¥ æ£€ç´¢æ‰€æœ‰è¾“å…¥æ•°æ® ä½¿ç”¨allæ–¹æ³•å°†æ‰€æœ‰ä¼ å…¥è¯·æ±‚çš„è¾“å…¥æ•°æ®ä½œä¸ºarrayæ£€ç´¢ã€‚æ— è®ºä¼ å…¥è¯·æ±‚æ˜¯å¦æ¥è‡ªäºHTMLè¡¨å•æˆ–XHRè¯·æ±‚ï¼š $all = $request-\u003eall(); ä½¿ç”¨collectæ–¹æ³•ï¼Œå¯ä»¥å°†æ‰€æœ‰ä¼ å…¥è¯·æ±‚çš„è¾“å…¥æ•°æ®ä½œä¸ºé›†åˆæ£€ç´¢ï¼š $collection = $request-\u003ecollect(); collectæ–¹æ³•è¿˜å…è®¸å°†ä¼ å…¥è¯·æ±‚çš„å­é›†ä½œä¸ºé›†åˆæ£€ç´¢ï¼š $request-\u003ecollect('users')-\u003eeach(function (string $user) { // ... }); æ£€ç´¢è¾“å…¥å€¼ inputæ–¹æ³•å¯ç”¨äºæ£€ç´¢ç”¨æˆ·è¾“å…¥ï¼š $name = $request-\u003einput('name'); å¯ä»¥å°†é»˜è®¤å€¼ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ä¼ é€’ç»™inputæ–¹æ³•ã€‚å¦‚æœè¯·æ±‚ä¸­ä¸å­˜åœ¨æ‰€è¯·æ±‚çš„è¾“å…¥å€¼ï¼Œåˆ™è¿”å›æ­¤å€¼ï¼š $name = $request-\u003einput('name', 'desire'); å¤„ç†åŒ…å«æ•°ç»„è¾“å…¥çš„è¡¨å•æ—¶ï¼Œä½¿ç”¨.ç¬¦å·è®¿é—®æ•°ç»„ï¼š $name = $request-\u003einput('products.0.name'); $names = $request-\u003einput('products.*.name'); å¦‚æœä¸å¸¦ä»»ä½•å‚æ•°çš„inputæ–¹æ³•ï¼Œä»¥å°†æ‰€æœ‰è¾“å…¥å€¼ä½œä¸ºå…³è”æ•°ç»„æ£€ç´¢å‡ºæ¥ï¼š $input = $request-\u003einput(); ä»æŸ¥è¯¢å­—ç¬¦ä¸²æ£€ç´¢è¾“å…¥ queryæ–¹æ³•ä»…ä»æŸ¥è¯¢å­—ç¬¦ä¸²æ£€ç´¢å€¼ $queryName = $request-\u003equery('name'); å¦‚æœè¯·æ±‚çš„æŸ¥è¯¢å­—ç¬¦ä¸²å€¼æ•°æ®ä¸å­˜åœ¨ï¼Œåˆ™å°†è¿”å›æ­¤æ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°ï¼š $queryName = $request-\u003equery('name', 'Desire'); å¦‚æœè°ƒç”¨ä¸å¸¦ä»»ä½•å‚æ•°çš„queryæ–¹æ³•ï¼Œä»¥å°†æ‰€æœ‰æŸ¥è¯¢å­—ç¬¦ä¸²å€¼ä½œä¸ºå…³è”æ•°ç»„æ£€ç´¢å‡ºæ¥ï¼š $query = $request-\u003equery(); æ£€ç´¢å¯å­—ç¬¦ä¸²åŒ–çš„è¾“å…¥å€¼ å¯ä»¥ä½¿ç”¨stringæ–¹æ³•å°†è¯·æ±‚çš„è¾“å…¥æ•°æ®æ£€ç´¢ä¸ºIlluminate\\Http\\Requestçš„å®ä¾‹ï¼Œè€Œä¸æ˜¯å°†å…¶ä½œä¸ºåŸºæœ¬stringæ£€ç´¢ï¼š $stringAble = $request-\u003estring('name')-\u003etrim(); æ£€ç´¢å¸ƒå°”å€¼è¾“å…¥ å¯ä»¥ä½¿ç”¨booleanæ–¹æ³•è¿›è¡Œå¸ƒå°”å€¼æ£€ç´¢ã€‚ å¯¹äº 1ï¼Œã€Œ1ã€ï¼Œtrueï¼Œã€Œtrueã€ï¼Œã€Œonã€å’Œã€Œyesã€ï¼Œè¿”å› trueã€‚æ‰€æœ‰å…¶ä»–å€¼å°†è¿”å› falseï¼š $archived = $request-\u003eboolean('archived'); æ£€ç´¢æ—¥æœŸè¾“å…¥å€¼ åŒ…å«æ—¥æœŸ/æ—¶é—´çš„è¾“å…¥å€¼å¯ä»¥ä½¿ç”¨dateæ–¹æ³•æ£€ç´¢ä¸ºCarbonå®ä¾‹ã€‚å¦‚æœè¯·æ±‚ä¸­ä¸åŒ…å«ç»™å®šåç§°çš„è¾“å…¥å€¼ï¼Œåˆ™è¿”å›nullï¼š $birthday = $request-\u003edate('birthday'); dateæ–¹æ³•å¯æ¥å—çš„ç¬¬äºŒä¸ªå’Œç¬¬ä¸‰ä¸ªå‚æ•°å¯ç”¨äºåˆ†åˆ«æŒ‡å®šæ—¥æœŸçš„æ ¼å¼å’Œæ—¶åŒºï¼š $elapsed = $request-\u003edate('elapsed', '!H:i', 'Europe/Madrid'); å¦‚æœè¾“å…¥å€¼å­˜åœ¨ä½†æ ¼å¼æ— æ•ˆï¼Œåˆ™ä¼šæŠ›å‡ºä¸€ä¸ªInvalidArgumentExceptionå¼‚å¸¸ï¼›å› æ­¤ï¼Œåœ¨è°ƒç”¨dateæ–¹æ³•ä¹‹å‰å»ºè®®å¯¹è¾“å…¥è¿›è¡ŒéªŒè¯ã€‚ æ£€ç´¢æšä¸¾è¾“å…¥å€¼ enumæ–¹æ³•æ¥å—è¾“å…¥å€¼çš„åç§°å’Œæšä¸¾ç±»ä½œä¸ºå…¶ç¬¬ä¸€ä¸ªå’Œç¬¬äºŒä¸ªå‚æ•°ã€‚ å¦‚æœè¯·æ±‚ä¸­ä¸åŒ…å«ç»™å®šåç§°çš„è¾“å…¥å€¼æˆ–æšä¸¾æ²¡æœ‰ä¸è¾“å…¥å€¼åŒ¹é…çš„å¤‡ä»½å€¼ï¼Œåˆ™è¿”å›null use App\\Enums\\Status; $status = $request-\u003eenum('status', Status::class); é€šè¿‡åŠ¨æ€å±æ€§æ£€ç´¢è¾“å…¥ å¯ä»¥ä½¿ç”¨Illuminate\\Http\\Requestå®ä¾‹ä¸Šçš„åŠ¨æ€å±æ€§è®¿é—®ç”¨æˆ·è¾“å…¥ï¼š $name = $request-\u003ename; ä½¿ç”¨åŠ¨æ€å±æ€§æ—¶ï¼ŒLaravelé¦–å…ˆä¼šåœ¨è¯·æ±‚è´Ÿè½½ä¸­æŸ¥æ‰¾å‚æ•°çš„å€¼ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œåˆ™ä¼šåœ¨åŒ¹é…è·¯ç”±çš„å‚æ•°ä¸­æœç´¢è¯¥å­—æ®µã€‚ æ£€ç´¢è¾“å…¥æ•°æ®çš„ä¸€éƒ¨åˆ† å¦‚æœéœ€è¦æ£€ç´¢è¾“å…¥æ•°æ®çš„å­é›†ï¼Œåˆ™å¯ä»¥ä½¿ç”¨onlyå’Œexceptæ–¹æ³•ã€‚è¿™ä¸¤ä¸ªæ–¹æ³•éƒ½æ¥å—ä¸€ä¸ªå•ä¸€çš„arrayæˆ–åŠ¨æ€å‚æ•°åˆ—è¡¨ï¼š $only = $request-\u003eonly(['username', 'password']); $only1 = $request-\u003eonly('username', 'password'); $except = $request-\u003eexcept(['credit_card']); $except1 = $request-\u003eexcept('credit_card'); æ³¨ï¼šonlyæ–¹æ³•è¿”å›è¯·æ±‚çš„æ‰€æœ‰é”®å€¼å¯¹ï¼›ä½†æ˜¯ï¼Œä¸ä¼šè¿”å›è¯·æ±‚ä¸­ä¸å­˜åœ¨çš„é”®å€¼å¯¹ã€‚ ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:15:1","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"åˆ¤æ–­è¾“å…¥æ˜¯å¦å­˜åœ¨ å¯ä»¥ä½¿ç”¨hasæ–¹æ³•æ¥ç¡®å®šè¯·æ±‚ä¸­æ˜¯å¦å­˜åœ¨æŸä¸ªå€¼ã€‚å¦‚æœè¯·æ±‚ä¸­å­˜åœ¨è¯¥å€¼åˆ™è¿”å›trueï¼š if ($request-\u003ehas('name')) { // ... } å½“ç»™å®šä¸€ä¸ªæ•°ç»„æ—¶ï¼Œhasæ–¹æ³•å°†ç¡®å®šæ‰€æœ‰æŒ‡å®šçš„å€¼æ˜¯å¦éƒ½å­˜åœ¨ï¼š if ($request-\u003ehas(['name', 'email'])) { // ... } whenHasæ–¹æ³•å°†åœ¨è¯·æ±‚ä¸­å­˜åœ¨ä¸€ä¸ªå€¼æ—¶æ‰§è¡Œç»™å®šçš„é—­åŒ…ï¼š $request-\u003ewhenHas('name', function (string $input) { // ... }); å¯ä»¥é€šè¿‡å‘whenHasæ–¹æ³•ä¼ é€’ç¬¬äºŒä¸ªé—­åŒ…æ¥æ‰§è¡Œåœ¨è¯·æ±‚ä¸­æ²¡æœ‰æŒ‡å®šå€¼çš„æƒ…å†µï¼š $request-\u003ewhenHas('name', function (string $input) { // \"name\" å€¼å­˜åœ¨... }, function () { // \"name\" å€¼ä¸å­˜åœ¨... }); hasAnyæ–¹æ³•æ”¾å›trueï¼Œå¦‚æœä»»æ„æŒ‡å®šçš„å€¼å­˜åœ¨ï¼Œåˆ™è¿”å›trueï¼š if ($request-\u003ehasAny(['name', 'email'])) { // ... } å¦‚æœæƒ³è¦ç¡®å®šè¯·æ±‚ä¸­æ˜¯å¦å­˜åœ¨ä¸€ä¸ªå€¼ä¸”ä¸æ˜¯ä¸€ä¸ªç©ºå­—ç¬¦ä¸²ï¼Œåˆ™å¯ä»¥ä½¿ç”¨fulledæ–¹æ³•ï¼š if ($request-\u003efilled('name')) { // ... } whenFilledæ–¹æ³•å°†è¯·æ±‚ä¸­å­˜åœ¨ä¸€ä¸ªå€¼ä¸”ä¸æ˜¯ç©ºå­—ç¬¦ä¸²æ—¶æ‰§è¡Œç»™å®šçš„é—­åŒ…ï¼š $request-\u003ewhenFilled('name', function (string $input) { // ... }); å¯ä»¥é€šè¿‡å‘whenFilledæ–¹æ³•ä¼ é€’ç¬¬äºŒä¸ªé—­åŒ…æ¥æ‰§è¡Œåœ¨è¯·æ±‚ä¸­æ²¡æœ‰æŒ‡å®šå€¼çš„æƒ…å†µï¼š $request-\u003ewhenFilled('name', function (string $input) { // \"name\" å€¼å·²å¡«å†™... }, function () { // \"name\" å€¼æœªå¡«å†™... }); è¦ç¡®å®šç»™å®šçš„é”®æ˜¯å¦ä¸å­˜åœ¨è¯·æ±‚ä¸­ï¼Œå¯ä»¥ä½¿ç”¨missingå’ŒwhenMissingæ–¹æ³•ï¼š if ($request-\u003emissing('name')) { // ... } $request-\u003ewhenMissing('name', function (array $input) { // \"name\" å€¼ç¼ºå¤±... }, function () { // \"name\" å€¼å­˜åœ¨... }); ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:15:2","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"åˆå¹¶å…¶ä»–è¾“å…¥ å¯ä»¥ä½¿ç”¨mergeæ–¹æ³•ï¼Œæ‰‹åŠ¨å°†å…¶ä»–è¾“å…¥åˆå¹¶åˆ°è¯·æ±‚çš„å‘å³è¾“å…¥æ•°æ®ä¸­ã€‚å¦‚æœç»™å®šçš„è¾“å…¥é”®å·²ç»å­˜åœ¨äºè¯·æ±‚ä¸­ï¼Œå®ƒå°†è¢«æä¾›ç»™mergeæ–¹æ³•çš„æ•°æ®è¦†ç›–ï¼š $request-\u003emerge(['votes' =\u003e 0]); å¦‚æœè¯·æ±‚çš„è¾“å…¥æ•°æ®ä¸­ä¸å­˜åœ¨ç›¸åº”çš„é”®ï¼Œåˆ™å¯ä»¥ä½¿ç”¨mergeIfMissingæ–¹æ³•å°†è¾“å…¥åˆå¹¶åˆ°è¯·æ±‚ä¸­ï¼š $request-\u003emergeIfMissing(['votes' =\u003e 0]); ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:15:3","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"æ—§è¾“å…¥ Laravelå…è®¸åœ¨ä¸¤æ¬¡è¯·æ±‚ä¹‹é—´ä¿ç•™æ•°æ®ã€‚è¿™ä¸ªç‰¹æ€§åœ¨æ£€æµ‹åˆ°éªŒè¯é”™è¯¯åé‡æ–°å¡«å……è¡¨å•æ—¶ç‰¹åˆ«æœ‰ç”¨ã€‚ä½†æ˜¯ï¼Œå¦‚æœä½¿ç”¨Laravelçš„åŒ…å«çš„è¡¨å•éªŒè¯ï¼Œä¸éœ€è¦è‡ªå·±æ‰‹åŠ¨è°ƒç”¨è¿™äº›æ–¹æ³•ï¼Œå› ä¸ºLaravelçš„ä¸€äº›å†…ç½®éªŒè¯åŠŸèƒ½å°†è‡ªåŠ¨è°ƒç”¨å®ƒä»¬ã€‚ ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:15:4","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"é—ªå­˜ é—ªå­˜è¾“å…¥åˆ°Session åœ¨Illuminate\\Http\\Requestç±»ä¸Šçš„flashæ–¹æ³•å°†å½“å‰è¾“å…¥é—ªå­˜åˆ°sessionï¼Œä»¥ä¾¿åœ¨ä¸‹ä¸€æ¬¡ç”¨æˆ·è¯·æ±‚åº”ç”¨ç¨‹åºæ—¶ä½¿ç”¨ï¼š $request-\u003eflash(); è¿˜å¯ä»¥ä½¿ç”¨flashOnlyå’ŒflashExceptæ–¹æ³•é—ªå­˜ä¸€éƒ¨åˆ†è¯·æ±‚æ•°æ®åˆ°Sessionã€‚è¿™äº›æ–¹æ³•å¯¹äºå°†æ•æ„Ÿä¿¡æ¯ï¼ˆå¦‚å¯†ç ï¼‰æ’é™¤åœ¨Sessionå¤–çš„æƒ…å†µä¸‹éå¸¸æœ‰ç”¨ï¼š $request-\u003eflashOnly(['username', 'email']); $request-\u003eflashExcept('password'); é—ªå­˜è¾“å…¥åé‡å®šå‘ å¯ä»¥ä½¿ç”¨withInputæ–¹æ³•å°†è¾“å…¥é—ªå­˜åˆ°é‡å®šå‘ä¸­ï¼š return redirect('form')-\u003ewithInput(); return redirect()-\u003eroute('user.create')-\u003ewithInput(); return redirect('form')-\u003ewithInput( $request-\u003eexcept('password') ); æ£€ç´¢æ—§è¾“å…¥å€¼ è‹¥è¦è·å–ä¸Šä¸€æ¬¡è¯·æ±‚æ‰€ä¿å­˜çš„å°±è¾“å…¥æ•°æ®ï¼Œå¯ä»¥åœ¨Illuminate\\Http\\Requestçš„å®ä¾‹ä¸Šè°ƒç”¨oldæ–¹æ³•ï¼Œoldæ–¹æ³•ä¼šä»sessionä¸­æ£€ç´¢å…ˆå‰é—ªå­˜çš„è¾“å…¥æ•°æ®ï¼š $username = $request-\u003eold('username'); æ­¤å¤–ï¼ŒLaravelè¿˜æä¾›äº†ä¸€ä¸ªå…¨å±€è¾…åŠ©å‡½æ•°oldã€‚å¦‚æœåœ¨Bladeæ¨¡æ¿ä¸­æ˜¾ç¤ºæ—§çš„è¾“å…¥ï¼Œåˆ™æ›´æ–¹ä¾¿ä½¿ç”¨oldè¾…åŠ©å‡½æ•°é‡æ–°å¡«å……è¡¨å•ã€‚å¦‚æœç»™å®šå­—æ®µæ²¡æœ‰å°±è¾“å…¥ï¼Œåˆ™ä¼šè¿”å›nullï¼š \u003cinput type=\"text\" name=\"username\" value=\"{{ old('username') }}\"\u003e ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:15:5","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"Cookies æ£€ç´¢è¯·æ±‚ä¸­çš„Cookies Laravelæ¡†æ¶åˆ›å»ºçš„æ‰€æœ‰cookieséƒ½ç»è¿‡åŠ å¯†å¹¶ç­¾åï¼Œè¿™æ„å‘³ç€å¦‚æœå®¢æˆ·ç«¯æ›´æ”¹äº†cookieå€¼ï¼Œåˆ™è¿™äº›cookieå°†è¢«è§†ä¸ºæ— æ•ˆã€‚è¦ä»è¯·æ±‚ä¸­æ£€ç´¢cookieå€¼ï¼Œåœ¨Illuminate\\Http\\Requestå®ä¾‹ä¸Šä½¿ç”¨cookieæ–¹æ³•ï¼š $cookie = $request-\u003ecookie('name'); ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:15:6","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"è¾“å…¥è¿‡æ»¤å’Œè§„èŒƒåŒ– é»˜è®¤æƒ…å†µä¸‹ï¼ŒLaravelåœ¨åº”ç”¨ç¨‹åºçš„å…¨å±€ä¸­é—´ä»¶ä¸­åŒ…å«App\\Http\\Middleware\\TrimStringså’ŒIlluminate\\Foundation\\Http\\Middleware\\ConvertEmptyStringsToNullä¸­é—´ä»¶ã€‚è¿™äº›ä¸­é—´ä»¶åœ¨App\\Http\\Kernelç±»çš„å…¨å±€ä¸­é—´ä»¶ä¸­åˆ—å‡ºã€‚è¿™äº›ä¸­é—´ä»¶å°†è‡ªåŠ¨ä¿®å‰ªè¯·æ±‚ä¸­çš„å­—ç¬¦ä¸²å­—æ®µï¼Œå¹¶å°†ä»»ä½•ç©ºå­—ç¬¦ä¸²è½¬æ¢ä¸ºnullã€‚ ç¦ç”¨è¾“å…¥è§„èŒƒåŒ– å¦‚æœè¦ç¦ç”¨æ‰€æœ‰è¯·æ±‚çš„è¯¥è¡Œä¸ºï¼Œå¯ä»¥ä» App\\Http\\Kernel ç±»çš„ $middleware å±æ€§ä¸­åˆ é™¤è¿™ä¸¤ä¸ªä¸­é—´ä»¶ï¼Œä»è€Œå°†å®ƒä»¬ä»åº”ç”¨ç¨‹åºçš„ä¸­é—´ä»¶æ ˆä¸­åˆ é™¤ã€‚ å¦‚æœæƒ³è¦ç¦ç”¨åº”ç”¨ç¨‹åºçš„ä¸€éƒ¨åˆ†è¯·æ±‚çš„å­—ç¬¦ä¸²ä¿®å‰ªå’Œç©ºå­—ç¬¦ä¸²è½¬æ¢ï¼Œå¯ä»¥ä½¿ç”¨ä¸­é—´ä»¶æä¾›çš„ skipWhen æ–¹æ³•ã€‚è¯¥æ–¹æ³•æ¥å—ä¸€ä¸ªé—­åŒ…ï¼Œè¯¥é—­åŒ…åº”è¿”å› true æˆ– falseï¼Œä»¥æŒ‡ç¤ºæ˜¯å¦åº”è·³è¿‡è¾“å…¥è§„èŒƒåŒ–ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œéœ€è¦åœ¨åº”ç”¨ç¨‹åºçš„ AppServiceProvider çš„ boot æ–¹æ³•ä¸­è°ƒç”¨ skipWhen æ–¹æ³•ã€‚ use App\\Http\\Middleware\\TrimStrings; use Illuminate\\Http\\Request; use Illuminate\\Foundation\\Http\\Middleware\\ConvertEmptyStringsToNull; /** * Bootstrap any application services. */ public function boot(): void { TrimStrings::skipWhen(function (Request $request) { return $request-\u003eis('admin/*'); }); ConvertEmptyStringsToNull::skipWhen(function (Request $request) { // ... }); } ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:16:0","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"æ–‡ä»¶ ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:17:0","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"æ£€ç´¢ä¸Šä¼ çš„æ–‡ä»¶ å¯ä»¥ä½¿ç”¨fileæ–¹æ³•æˆ–åŠ¨æ€å±æ€§ä»Illuminate\\Http\\Requestå®ä¾‹ä¸­æ£€ç´¢å·²ä¸Šä¼ çš„æ–‡ä»¶ã€‚fileæ–¹æ³•è¿”å›Illuminate\\Http\\UploadedFileç±»çš„å®ä¾‹ï¼Œè¯¥ç±»æ‰©å±•äº†PHPçš„SplFileInfoç±»ï¼Œå¹¶æä¾›äº†å„ç§ç”¨äºä¸æ–‡ä»¶äº¤äº’çš„æ–¹æ³•ï¼š $file = $request-\u003efile('photo'); $file = $request-\u003ephoto; å¯ä»¥ä½¿ç”¨hasFileæ–¹æ³•æ£€æŸ¥è¯·æ±‚ä¸­æ˜¯å¦å­˜åœ¨æ–‡ä»¶ï¼š if ($request-\u003ehasFile('photo')) { // ... } éªŒè¯æˆåŠŸä¸Šä¼ çš„æ–‡ä»¶ é™¤äº†æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨ä¹‹å¤–ï¼Œè¿˜å¯ä»¥é€šè¿‡isValidæ–¹æ³•éªŒè¯ä¸Šä¼ æ–‡ä»¶æ—¶æ˜¯å¦å­˜åœ¨é—®é¢˜ï¼š if ($request-\u003efile('photo')-\u003eisValid()) { // ... } æ–‡ä»¶è·¯å¾„å’Œæ‰©å±•å UploadedFile ç±»è¿˜åŒ…å«è®¿é—®æ–‡ä»¶çš„å®Œå…¨é™å®šè·¯å¾„åŠå…¶æ‰©å±•åçš„æ–¹æ³•ã€‚extension æ–¹æ³•å°†å°è¯•åŸºäºå…¶å†…å®¹çŒœæµ‹æ–‡ä»¶çš„æ‰©å±•åã€‚æ­¤æ‰©å±•åå¯èƒ½ä¸å®¢æˆ·ç«¯æä¾›çš„æ‰©å±•åä¸åŒï¼š $path = $request-\u003ephoto-\u003epath(); $extension = $request-\u003ephoto-\u003eextension(); ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:17:1","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"å­˜å‚¨ä¸Šä¼ çš„æ–‡ä»¶ è¦å­˜å‚¨å·²ä¸Šä¼ çš„æ–‡ä»¶ï¼Œé€šå¸¸ä¼šä½¿ç”¨æ‚¨é…ç½®çš„ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿ ã€‚UploadedFile ç±»å…·æœ‰ä¸€ä¸ª store æ–¹æ³•ï¼Œè¯¥æ–¹æ³•å°†ä¸Šä¼ çš„æ–‡ä»¶ç§»åŠ¨åˆ°æ‚¨çš„ç£ç›˜ä¸­çš„ä¸€ä¸ªä½ç½®ï¼Œè¯¥ä½ç½®å¯ä»¥æ˜¯æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿä¸Šçš„ä½ç½®ï¼Œä¹Ÿå¯ä»¥æ˜¯åƒ Amazon S3 è¿™æ ·çš„äº‘å­˜å‚¨ä½ç½®ã€‚ store æ–¹æ³•æ¥å—å­˜å‚¨æ–‡ä»¶çš„è·¯å¾„ï¼Œè¯¥è·¯å¾„ç›¸å¯¹äºæ–‡ä»¶ç³»ç»Ÿçš„é…ç½®æ ¹ç›®å½•ã€‚æ­¤è·¯å¾„ä¸åº”åŒ…å«æ–‡ä»¶åï¼Œå› ä¸ºå°†è‡ªåŠ¨ç”Ÿæˆå”¯ä¸€çš„ ID ä½œä¸ºæ–‡ä»¶åã€‚ store æ–¹æ³•è¿˜æ¥å—ä¸€ä¸ªå¯é€‰çš„ç¬¬äºŒä¸ªå‚æ•°ï¼Œç”¨äºæŒ‡å®šåº”ç”¨äºå­˜å‚¨æ–‡ä»¶çš„ç£ç›˜çš„åç§°ã€‚è¯¥æ–¹æ³•å°†è¿”å›ç›¸å¯¹äºç£ç›˜æ ¹ç›®å½•çš„æ–‡ä»¶è·¯å¾„ï¼š $path = $request-\u003ephoto-\u003estore('images'); $path = $request-\u003ephoto-\u003estore('images', 's3'); å¦‚æœä¸å¸Œæœ›è‡ªåŠ¨ç”Ÿæˆæ–‡ä»¶åï¼Œåˆ™å¯ä»¥ä½¿ç”¨storeAsæ–¹æ³•ï¼Œè¯¥æ–¹æ³•æ¥å—è·¯å¾„ã€æ–‡ä»¶åå’Œç£ç›˜åç§°ä½œä¸ºå…¶å‚æ•°ï¼š $path = $request-\u003ephoto-\u003estoreAs('images', 'filename.jpg'); $path = $request-\u003ephoto-\u003estoreAs('images', 'filename.jpg', 's3'); ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:17:2","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"é…ç½®å—ä¿¡ä»»çš„ä»£ç† ä½¿ç”¨ App\\Http\\Middleware\\TrustProxies ä¸­é—´ä»¶ï¼Œè¿™ä¸ªä¸­é—´ä»¶å·²ç»åŒ…å«åœ¨ Laravel åº”ç”¨ç¨‹åºä¸­ï¼Œå®ƒå…è®¸å¿«é€Ÿå®šåˆ¶åº”ç”¨ç¨‹åºåº”ä¿¡ä»»çš„è´Ÿè½½å‡è¡¡å™¨æˆ–ä»£ç†ã€‚ä¿¡ä»»çš„ä»£ç†åº”è¯¥è¢«åˆ—åœ¨æ­¤ä¸­é—´ä»¶çš„ $proxies å±æ€§ä¸Šçš„æ•°ç»„ä¸­ã€‚é™¤äº†é…ç½®å—ä¿¡ä»»çš„ä»£ç†ä¹‹å¤–ï¼Œè¿˜å¯ä»¥é…ç½®åº”è¯¥ä¿¡ä»»çš„ä»£ç† $headersï¼š \u003c?php namespace App\\Http\\Middleware; use Illuminate\\Http\\Middleware\\TrustProxies as Middleware; use Illuminate\\Http\\Request; class TrustProxies extends Middleware { /** * æ­¤åº”ç”¨ç¨‹åºçš„å—ä¿¡ä»»ä»£ç†ã€‚ * * @var string|array */ protected $proxies = [ '192.168.1.1', '192.168.1.2', ]; /** * åº”ç”¨äºæ£€æµ‹ä»£ç†çš„æ ‡å¤´ã€‚ * * @var int */ protected $headers = Request::HEADER_X_FORWARDED_FOR | Request::HEADER_X_FORWARDED_HOST | Request::HEADER_X_FORWARDED_PORT | Request::HEADER_X_FORWARDED_PROTO; } æ³¨æ„ å¦‚æœæ­£åœ¨ä½¿ç”¨ AWS å¼¹æ€§è´Ÿè½½å¹³è¡¡ï¼Œè¯·å°† $headers å€¼è®¾ç½®ä¸º Request::HEADER_X_FORWARDED_AWS_ELB ä¿¡ä»»æ‰€æœ‰ä»£ç† /** * åº”ç”¨æ‰€ä¿¡ä»»çš„ä»£ç†ã€‚ * * @var string|array */ protected $proxies = '*'; ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:18:0","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"é…ç½®å¯ä¿¡ä»»çš„Host é»˜è®¤æƒ…å†µä¸‹ï¼ŒLaravel å°†å“åº”å®ƒæ¥æ”¶åˆ°çš„æ‰€æœ‰è¯·æ±‚ï¼Œè€Œä¸ç®¡ HTTP è¯·æ±‚çš„ Host æ ‡å¤´çš„å†…å®¹æ˜¯ä»€ä¹ˆã€‚æ­¤å¤–ï¼Œåœ¨ web è¯·æ±‚æœŸé—´ç”Ÿæˆåº”ç”¨ç¨‹åºçš„ç»å¯¹ URL æ—¶ï¼Œå°†ä½¿ç”¨ Host å¤´çš„å€¼ã€‚ é€šå¸¸æƒ…å†µä¸‹ï¼Œåº”è¯¥é…ç½® Web æœåŠ¡å™¨ï¼ˆå¦‚ Nginx æˆ– Apacheï¼‰ä»…å‘åŒ¹é…ç»™å®šä¸»æœºåçš„åº”ç”¨ç¨‹åºå‘é€è¯·æ±‚ã€‚ç„¶è€Œï¼Œå¦‚æœæ²¡æœ‰ç›´æ¥è‡ªå®šä¹‰ Web æœåŠ¡å™¨çš„èƒ½åŠ›ï¼Œéœ€è¦æŒ‡ç¤º Laravel ä»…å“åº”ç‰¹å®šä¸»æœºåçš„è¯·æ±‚ï¼Œå¯ä»¥ä¸ºåº”ç”¨ç¨‹åºå¯ç”¨ App\\Http\\Middleware\\TrustHosts ä¸­é—´ä»¶ã€‚ TrustHosts ä¸­é—´ä»¶å·²ç»åŒ…å«åœ¨åº”ç”¨ç¨‹åºçš„ $middleware å †æ ˆä¸­ï¼›ä½†æ˜¯ï¼Œåº”è¯¥å°†å…¶å–æ¶ˆæ³¨é‡Šä»¥ä½¿å…¶ç”Ÿæ•ˆã€‚åœ¨æ­¤ä¸­é—´ä»¶çš„ hosts æ–¹æ³•ä¸­ï¼Œå¯ä»¥æŒ‡å®šåº”ç”¨ç¨‹åºåº”è¯¥å“åº”çš„ä¸»æœºåã€‚å…·æœ‰å…¶ä»– Host å€¼æ ‡å¤´çš„ä¼ å…¥è¯·æ±‚å°†è¢«æ‹’ç»ï¼š /** * è·å–åº”è¢«ä¿¡ä»»çš„ä¸»æœºæ¨¡å¼ã€‚ * * @return array\u003cint, string\u003e */ public function hosts(): array { return [ 'laravel.test', $this-\u003eallSubdomainsOfApplicationUrl(), ]; } allSubdomainsOfApplicationUrl å¸®åŠ©ç¨‹åºæ–¹æ³•å°†è¿”å›ä¸åº”ç”¨ç¨‹åºapp.urlé…ç½®å€¼çš„æ‰€æœ‰å­åŸŸç›¸åŒ¹é…çš„æ­£åˆ™è¡¨è¾¾å¼ã€‚åœ¨æ„å»ºåˆ©ç”¨é€šé…ç¬¦å­åŸŸçš„åº”ç”¨ç¨‹åºæ—¶ï¼Œè¿™ä¸ªå¸®åŠ©ç¨‹åºæä¾›äº†ä¸€ç§æ–¹ä¾¿çš„æ–¹æ³•æ¥å…è®¸æ‰€æœ‰åº”ç”¨ç¨‹åºçš„å­åŸŸã€‚ å“åº” ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:19:0","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"åˆ›å»ºå“åº” ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:20:0","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"å­—ç¬¦ä¸² \u0026 æ•°ç»„ æœ€åŸºæœ¬å°±æ˜¯ä»è·¯ç”±æˆ–æ§åˆ¶å™¨è¿”å›ä¸€ä¸ªç®€å•çš„å­—ç¬¦ä¸²ï¼Œæ¡†æ¶ä¼šè‡ªåŠ¨å°†è¿™ä¸ªå­—ç¬¦ä¸²è½¬åŒ–ä¸ºä¸€ä¸ªå®Œæ•´çš„HTTPå“åº”ï¼š Route::get('/', function () { return 'Hello PHP!'; }); ä¹Ÿå¯ä»¥è¿”å›æ•°ç»„ï¼Œæ¡†æ¶ä¼šè‡ªåŠ¨å°†æ•°ç»„è½¬æ¢ä¸ºJSONå“åº”ï¼š Route::get('/', function () { return [1, 3, 4]; }); ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:20:1","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"Responseå¯¹è±¡ è¿”å›ä¸€ä¸ªå®Œæ•´çš„Illuminate\\Http\\Responseå®åŠ›å…è®¸è‡ªå®šä¹‰è¿”å›çš„HTTPçŠ¶æ€ç å’Œè¿”å›å¤´ä¿¡æ¯ã€‚Responseå®ä¾‹ç»§æ‰¿è‡ªSymfony\\Component\\HttpFoundation\\Responseç±»ï¼Œæ­¤ç±»æä¾›äº†å„ç§æ„å»ºHTTPå“åº”çš„æ–¹æ³•ï¼š Route::get('/home', function () { return response('Hello PHP!', 200) -\u003eheader('Content-Type', 'text/plain'); }); ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:20:2","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"Eloquentæ¨¡å‹å’Œé›†åˆ å¯ä»¥ç›´æ¥ä»è·¯ç”±å’Œæ§åˆ¶å™¨è¿”å› Eloquent ORM æ¨¡å‹å’Œé›†åˆã€‚è¿™æ ·åšæ—¶ï¼ŒLaravel å°†è‡ªåŠ¨å°†æ¨¡å‹å’Œé›†åˆè½¬æ¢ä¸º JSON å“åº”ï¼ŒåŒæ—¶éµå¾ªæ¨¡å‹çš„ éšè—å±æ€§: use App\\Models\\User; Route::get('/user/{user}', function (User $user) { return $user; }); ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:20:3","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"æ·»åŠ å“åº”å¤´ å¯ä»¥ä½¿ç”¨headeræ–¹æ³•å°†ä¸€ç³»åˆ—å¤´æ·»åŠ åˆ°å“åº”ä¸­ï¼š return response($content) -\u003eheader('Content-Type', $type) -\u003eheader('X-Header-One', 'Header Value') -\u003eheader('X-Header-Two', 'Header Value'); ä¹Ÿå¯ä»¥ä½¿ç”¨withHeadersæ–¹æ³•æŒ‡å®šè¦æ·»åŠ åˆ°å“åº”çš„æ ‡å¤´æ•°ç»„ï¼š return response($content) -\u003ewithHeaders([ 'Content-Type' =\u003e $type, 'X-Header-One' =\u003e 'Header Value', 'X-Header-Two' =\u003e 'Header Value', ]); ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:20:4","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"ç¼“å­˜æ§åˆ¶ä¸­é—´ä»¶ LaravelåŒ…å«ä¸€ä¸ªcache.headersä¸­é—´ä»¶ï¼Œå¯ç”¨äºå¿«é€Ÿè®¾ç½®ä¸€ç»„è·¯ç”±çš„CaChe-Controlæ ‡å¤´ã€‚æŒ‡ä»¤åº”ä½¿ç”¨ç›¸åº”ç¼“å­˜æ§åˆ¶æŒ‡å®šçš„è›‡å½¢å‘½åæ³•ç­‰æ•ˆé¡¹æä¾›ï¼Œå¹¶åº”ä»¥åˆ†å·åˆ†å‰²ã€‚å¦‚æœåœ¨æŒ‡ä»¤åˆ—è¡¨ä¸­æŒ‡å®šäº†etagï¼Œåˆ™å“åº”å†…å®¹çš„MD5å“ˆå¸Œå°†è‡ªåŠ¨è®¾ç½®ä¸ºETagæ ‡è¯†ç¬¦ï¼š Route::middleware('cache.headers:public;max_age=2628000;etag')-\u003egroup(function () { Route::get('/privacy', function () { // ... }); Route::get('/terms', function () { // ... }); }); ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:20:5","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"æ·»åŠ å“åº”Cookies å¯ä»¥ä½¿ç”¨cookieæ–¹æ³•å°†cookieé™„åŠ åˆ°ä¼ å‡ºçš„Illumize\\Http\\Responseå®ä¾‹ï¼Œåº”å°†cookieçš„åç§°ã€å€¼å’Œæœ‰æ•ˆåˆ†é’Ÿæ•°ä¼ é€’ç»™æ­¤æ–¹æ³•ï¼š return response('Hello World')-\u003ecookie( 'name', 'value', $minutes ); cookieæ–¹æ³•è¿˜æ¥å—ä¸€äº›ä½¿ç”¨é¢‘ç‡è¾ƒä½çš„å‚æ•°ã€‚é€šå¸¸ï¼Œè¿™äº›å‚æ•°çš„ç›®çš„å’Œæ„ä¹‰ä¸PHPåŸç”Ÿsetcookieçš„å‚æ•°ç›¸åŒ return response('Hello World')-\u003ecookie( 'name', 'value', $minutes, $path, $domain, $secure, $httpOnly ); å¦‚æœå¸Œæœ›ç¡®ä¿cookieä¸ä¼ å‡ºå“åº”ä¸€èµ·å‘é€ï¼Œä½†è¿˜æ²¡æœ‰è¯¥å“åº”çš„å®ä¾‹ï¼Œåˆ™å¯ä»¥ä½¿ç”¨Cookiefacadeå°†cookieåŠ å…¥é˜Ÿåˆ—ï¼Œä»¥ä¾¿åœ¨å‘é€å“åº”æ—¶é™„åŠ åˆ°å“åº”ä¸­ã€‚queueæ–¹æ³•æ¥å—åˆ›å»ºcookieå®ä¾‹æ‰€éœ€çš„å‚æ•°ã€‚åœ¨å‘é€åˆ°æµè§ˆå™¨ä¹‹å‰ï¼Œè¿™äº›cookieså°†é™„åŠ åˆ°ä¼ å‡ºçš„å“åº”ä¸­ï¼š use Illuminate\\Support\\Facades\\Cookie; Cookie::queue('name', 'value', $minutes); ç”ŸæˆCookieå®ä¾‹ å¦‚æœè¦ç”Ÿæˆä¸€ä¸ªSymfony\\Component\\HttpFoundation\\Cookieå®ä¾‹ï¼Œæ‰“ç®—ç¨åé™„åŠ åˆ°å“åº”å®ä¾‹ä¸­ã€‚å¯ä»¥ä½¿ç”¨å…¨å±€cookieåŠ©æ‰‹å‡½æ•°ã€‚æ­¤cookieå°†ä¸ä¼šå‘é€å›å®¢æˆ·ç«¯ï¼Œé™¤éå®ƒè¢«é™„åŠ åˆ°å“åº”å®ä¾‹ä¸­ï¼š $cookie = cookie('name', 'value', $minutes); return response('Hello PHP')-\u003ecookie($cookie) æå‰è¿‡æœŸCookies å¯ä»¥é€šè¿‡å“åº”ä¸­çš„withoutCookieæ–¹æ³•ä½¿Cookieè¿‡æœŸï¼Œç”¨äºåˆ é™¤Cookieï¼š return response('Hello PHP')-\u003ewithoutCookie('name'); å¦‚æœå°šæœªæœ‰åˆ›å»ºå“åº”çš„å®ä¾‹ï¼Œåˆ™å¯ä»¥ä½¿ç”¨Cookiefacadeä¸­çš„expireæ–¹æ³•ä½¿Cookieè¿‡æœŸï¼š Cookie::expire('name'); ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:20:6","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"Cookies \u0026 åŠ å¯† é»˜è®¤æƒ…å†µä¸‹ï¼Œç”± Laravel ç”Ÿæˆçš„æ‰€æœ‰ cookie éƒ½ç»è¿‡äº†åŠ å¯†å’Œç­¾åï¼Œå› æ­¤å®¢æˆ·ç«¯æ— æ³•ç¯¡æ”¹æˆ–è¯»å–å®ƒä»¬ã€‚å¦‚æœè¦å¯¹åº”ç”¨ç¨‹åºç”Ÿæˆçš„éƒ¨åˆ† cookie ç¦ç”¨åŠ å¯†ï¼Œå¯ä»¥ä½¿ç”¨ App\\Http\\Middleware\\EncryptCookies ä¸­é—´ä»¶çš„ $except å±æ€§ï¼Œè¯¥å±æ€§ä½äº App/Http/Middleware ç›®å½•ä¸­ï¼š \u003c?php namespace App\\Http\\Middleware; use Illuminate\\Cookie\\Middleware\\EncryptCookies as Middleware; class EncryptCookies extends Middleware { /** * The names of the cookies that should not be encrypted. * * @var array\u003cint, string\u003e */ protected $except = [ // 'cookie_name', ]; } ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:20:7","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"é‡å®šå‘ é‡å®šå‘å“åº”æ˜¯ Illuminate\\Http\\RedirectResponse ç±»çš„å®ä¾‹ï¼ŒåŒ…å«å°†ç”¨æˆ·é‡å®šå‘åˆ°å¦ä¸€ä¸ª URL æ‰€éœ€çš„é€‚å½“ HTTP å¤´ã€‚Laravel æœ‰å‡ ç§æ–¹æ³•å¯ä»¥ç”Ÿæˆ RedirectResponse å®ä¾‹ã€‚æœ€ç®€å•çš„æ–¹æ³•æ˜¯ä½¿ç”¨å…¨å±€ redirect åŠ©æ‰‹å‡½æ•°ï¼š Route::get('/dashboard', function () { return redirect('home/dashboard') }); æœ‰æ—¶å¯èƒ½å¸Œæœ›å°†ç”¨æˆ·é‡å®šå‘åˆ°ä»¥å‰çš„ä½ç½®ï¼Œä¾‹å¦‚å½“æäº¤çš„è¡¨å•æ— æ•ˆæ—¶ï¼Œå¯ä»¥ä½¿ç”¨å…¨å±€backåŠ©æ‰‹å‡½æ•°æ¥æ‰§è¡Œæ“ä½œã€‚ç”±äºæ­¤åŠŸèƒ½ä½¿ç”¨sessionï¼Œè¯·ç¡®ä¿è°ƒç”¨backå‡½æ•°çš„è·¯ç”±ä½¿ç”¨çš„æ˜¯webä¸­é—´ä»¶ç»„ï¼š Route::post('/user/profile', function () { // éªŒè¯è¯·æ±‚å‚æ•° return back()-\u003ewithInput(); }); ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:21:0","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"é‡å®šå‘åˆ°æŒ‡å®šåç§°çš„è·¯ç”± å½“åœ¨æ²¡æœ‰ä¼ é€’å‚æ•°çš„æƒ…å†µä¸‹è°ƒç”¨redirectåŠ©æ‰‹å‡½æ•°æ—¶ï¼Œå°†è¿”å›Illuminate\\Routing\\Redirectorçš„å®ä¾‹ï¼Œå…è®¸è°ƒç”¨Redirectorå®ä¾‹ä¸Šçš„ä»»ä½•æ–¹æ³•ã€‚ä¾‹å¦‚ï¼Œè¦å¯¹å‘½åè·¯ç”±ç”ŸæˆRedirectResponseï¼Œå¯ä»¥ä½¿ç”¨routeæ–¹æ³•ï¼š return redirect()-\u003eroute('login'); å¦‚æœè·¯ç”±ä¸­æœ‰å‚æ•°ï¼Œå¯ä»¥å°†å…¶ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ä¼ é€’ç»™routeæ–¹æ³•ï¼š // å¯¹äºå…·æœ‰ä»¥ä¸‹URIçš„è·¯ç”±: /profile/{id} return redirect()-\u003eroute('profile', ['id' =\u003e 1]); é€šè¿‡Eloquentæ¨¡å‹å¡«å……å‚æ•° å¦‚æœè¦é‡å®šå‘åˆ°ä½¿ç”¨ä»Eloquentæ¨¡å‹ç”°ä¸­IDå‚æ•°çš„è·¯ç”±ï¼Œå¯ä»¥ç›´æ¥ä¼ é€’æ¨¡å‹æœ¬èº«ã€‚IDå°†ä¼šè¢«è‡ªåŠ¨æå–ï¼š // å¯¹äºå…·æœ‰ä»¥ä¸‹URIçš„è·¯ç”±: /profile/{id} return redirect()-\u003eroute('profile', [$user]); å¦‚æœæƒ³è¦è‡ªå®šä¹‰è·¯ç”±å‚æ•°ï¼Œå¯ä»¥æŒ‡å®šè·¯ç”±å‚æ•°(/profile/{id:slug})æˆ–è€…é‡å†™Eloquentæ¨¡å‹ä¸ŠgetRouteKeyæ–¹æ³•ï¼š /** * è·å–æ¨¡å‹çš„è·¯ç”±é”®å€¼ã€‚ */ public function getRouteKey(): mixed { return $this-\u003eslug; } ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:21:1","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"é‡å®šå‘åˆ°æ§åˆ¶å™¨æ–¹æ³• ä¹Ÿå¯ä»¥ç”Ÿæˆé‡å®šå‘åˆ°controller actionsã€‚åªè¦æŠŠæ§åˆ¶å™¨å’Œactionçš„åç§°ä¼ é€’ç»™actionæ–¹æ³•ï¼š use App\\Http\\Controllers\\UserController; return redirect()-\u003eaction([UserController::class, 'index']); å¦‚æœæ§åˆ¶å™¨è·¯ç”±æœ‰å‚æ•°ï¼Œå¯ä»¥å°†å…¶ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ä¼ é€’ç»™actionæ–¹æ³•ï¼š return redirect()-\u003eaction( [UserController::class, 'profile'], ['id' =\u003e 1] ); ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:21:2","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"é‡å®šå‘åˆ°å¤–éƒ¨åŸŸå æœ‰æ—¶å€™éœ€è¦é‡å®šå‘åˆ°åº”ç”¨å¤–çš„åŸŸåã€‚å¯ä»¥é€šè¿‡è°ƒç”¨awayæ–¹æ³•ï¼Œå®ƒä¼šåˆ›å»ºä¸€ä¸ªä¸å¸¦æœ‰ä»»ä½•é¢å¤–çš„URLç¼–ç ã€æœ‰æ•ˆæ€§æ ¡éªŒå’Œæ£€æŸ¥RedirectResponseå®ä¾‹ï¼š return redirect()-\u003eaway('https://www.google.com'); ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:21:3","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"é‡å®šå‘å¹¶ä½¿ç”¨é—ªå­˜çš„Sessionæ•°æ® é‡å®šå‘åˆ°æ–°çš„URLçš„åŒæ—¶ä¼ é€’æ•°æ®ç»™sessionæ˜¯å¾ˆå¸¸è§çš„ã€‚é€šå¸¸åœ¨å°†æ¶ˆæ¯å‘é€ç»™sessionåæˆåŠŸæ‰§è¡Œæ“ä½œåå®Œæˆçš„ã€‚ä¸ºäº†æ–¹ä¾¿ï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªRedirectResponseå®ä¾‹å¹¶åœ¨é“¾å¼æ–¹æ³•è°ƒç”¨ä¸­å°†æ•°æ®ä¼ é€’ç»™sessionï¼š Route::post('/user/profile', function () { // ... return redirect('dashboard')-\u003ewith('status', 'Profile updated!'); }); ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:21:4","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"å…¶ä»–å“åº”ç±»å‹ responseåŠ©æ‰‹å¯ä»¥ç”¨äºç”Ÿæˆå…¶ä»–ç±»å‹çš„å“åº”å®ä¾‹ã€‚å½“ä¸å¸¦å‚æ•°è°ƒç”¨responseåŠ©æ‰‹æ—¶ï¼Œä¼šè¿”å›Illuminate\\Contracts\\Routing\\ResponseFactorycontractçš„å®ç°ã€‚è¯¥å¥‘çº¦æä¾›äº†å‡ ç§æœ‰ç”¨çš„æ–¹æ³•æ¥ç”Ÿæˆå“åº”ã€‚ ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:22:0","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"è§†å›¾å“åº” return response() -\u003eview('hello', $data, 200) -\u003eheader('Content-Type', $type); å¦‚æœä¸éœ€è¦ä¼ é€’è‡ªå®šä¹‰HTTPçŠ¶æ€ä»£ç æˆ–è‡ªå®šä¹‰æ ‡å¤´ï¼Œåˆ™å¯ä»¥ä½¿ç”¨å…¨å±€viewè¾…åŠ©å‡½æ•°ã€‚ ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:22:1","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"JSONå“åº” jsonæ–¹æ³•ä¼šè‡ªåŠ¨å°†Content-Typeè¡¨å¤´è®¾ç½®ä¸ºapplication/jsonï¼Œå¹¶ä½¿ç”¨json_encodePHPå‡½æ•°å°†ç»™å®šçš„æ•°ç»„è½¬æ¢ä¸ºJSONï¼š return response()-\u003ejson([ 'name' =\u003e 'Abigail', 'state' =\u003e 'CA', ]); å¦‚æœæƒ³åˆ›å»ºä¸€ä¸ªJSONPå“åº”ï¼Œå¯ä»¥ç»“åˆä½¿ç”¨jsonæ–¹æ³•å’ŒwithCallbackæ–¹æ³•ï¼š return response() -\u003ejson(['name' =\u003e 'Abigail', 'state' =\u003e 'CA']) -\u003ewithCallback($request-\u003einput('callback')); ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:22:2","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"æ–‡ä»¶ä¸‹è½½ downloadæ–¹æ³•å¯ç”¨äºç”Ÿæˆå¼ºåˆ¶ç”¨æˆ·æµè§ˆå™¨åœ¨ç»™å®šè·¯å¾„ä¸‹è½½æ–‡ä»¶çš„å“åº”ã€‚downloadæ–¹æ³•æ¥å—æ–‡ä»¶åä½œä¸ºè¯¥æ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°ï¼Œè¿™å°†ç¡®å®šä¸‹è½½æ–‡ä»¶çš„ç”¨æˆ·çœ‹åˆ°çš„æ–‡ä»¶åã€‚æœ€åï¼Œå¯ä»¥å°†ä¸€ç»„HTTPæ ‡å¤´ä½œä¸ºè¯¥æ–¹æ³•çš„ç¬¬ä¸‰ä¸ªå‚æ•°ä¼ é€’ï¼š return response()-\u003edownload($pathToFile); return response()-\u003edownload($pathToFile, $name, $headers); æµå¼ä¸‹è½½ æœ‰æ—¶å€™å¯èƒ½å¸Œæœ›å°†ç»™å®šæ“ä½œçš„å­—ç¬¦ä¸²å“åº”è½¬æ¢ä¸ºå¯ä¸‹è½½çš„å“åº”ï¼Œè€Œä¸å¿…å°†æ“ä½œçš„å†…å®¹å†™å…¥ç£ç›˜ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥ä½¿ç”¨streamDownloadæ–¹æ³•ã€‚æ­¤æ–¹æ³•æ¥å—å›è°ƒã€æ–‡ä»¶åå’Œå¯é€‰çš„æ ‡å¤´æ•°ç»„ä½œä¸ºå…¶å‚æ•°ï¼š use App\\Services\\GitHub; return response()-\u003estreamDownload(function () { echo GitHub::api('repo') -\u003econtents() -\u003ereadme('laravel', 'laravel')['contents']; }, 'laravel-readme.md'); ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:22:3","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"æ–‡ä»¶å“åº” fileæ–¹æ³•å¯ç”¨äºç›´æ¥åœ¨ç”¨æˆ·çš„æµè§ˆå™¨ä¸­æ˜¾ç¤ºæ–‡ä»¶ï¼Œä¾‹å¦‚å›¾åƒæˆ–PDFï¼Œè€Œä¸æ˜¯å¯åŠ¨ä¸‹è½½ã€‚è¿™ä¸ªæ–¹æ³•æ¥å—æ–‡ä»¶çš„è·¯å¾„ä½œä¸ºå®ƒçš„ç¬¬ä¸€ä¸ªå‚æ•°å’Œä¸€ä¸ªæ ‡å¤´æ•°ç»„ä½œä¸ºå®ƒçš„ç¬¬äºŒä¸ªå‚æ•°ï¼š return response()-\u003efile($pathToFile); return response()-\u003efile($pathToFile, $headers); ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:22:4","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"å“åº”å® å¦‚æœæƒ³å®šä¹‰ä¸€ä¸ªå¯ä»¥åœ¨å„ç§è·¯ç”±å’Œæ§åˆ¶å™¨ä¸­é‡å¤ä½¿ç”¨çš„è‡ªå®šä¹‰å“åº”ï¼Œå¯ä»¥ä½¿ç”¨Responsefacadeä¸Šçš„macroæ–¹æ³•ã€‚é€šå¸¸ï¼Œåº”ç”¨ä»åº”ç”¨ç¨‹åºçš„æœåŠ¡æä¾›è€…ï¼Œå¦‚App\\Providers\\AppServiceProvideræœåŠ¡æä¾›ç¨‹åºçš„bootæ–¹æ³•è°ƒç”¨æ­¤æ–¹æ³•ï¼š \u003c?php namespace App\\Providers; use Illuminate\\Support\\Facades\\Response; use Illuminate\\Support\\ServiceProvider; class AppServiceProvider extends ServiceProvider { /** * å¯åŠ¨ä¸€ä¸ªåº”ç”¨çš„æœåŠ¡ */ public function boot(): void { Response::macro('caps', function (string $value) { return Response::make(strtoupper($value)); }); } } macroå‡½æ•°æ¥å—åç§°ä½œä¸ºå…¶ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå¹¶æ¥å—é—­åŒ…ä½œä¸ºå…¶ç¬¬äºŒä¸ªå‚æ•°ã€‚å½“ä»ResponseFactoryå®ç°æˆ–responseåŠ©æ‰‹å‡½æ•°è°ƒç”¨å®åç§°æ—¶ï¼Œå°†æ‰§è¡Œå®çš„é—­åŒ…ï¼š return response()-\u003ecaps('foo'); ä¼šè¯ ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:23:0","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"ç®€ä»‹ ç”±äºHTTPé©±åŠ¨çš„åº”ç”¨ç¨‹åºæ˜¯æ— çŠ¶æ€çš„ï¼ŒSessionæä¾›äº†ä¸€ç§åœ¨å¤šä¸ªè¯·æ±‚ä¹‹é—´å­˜å‚¨æœ‰å…³ç”¨æˆ·ä¿¡æ¯çš„æ–¹æ³•ï¼Œè¿™ç±»ä¿¡æ¯ä¸€èˆ¬éƒ½å­˜å‚¨åœ¨åç»­è¯·æ±‚å¯ä»¥è®¿é—®çš„æŒä¹…å­˜å‚¨/åç«¯ä¸­ã€‚ Laravelé€šè¿‡åŒä¸€ä¸ªå¯è¯»æ€§å¼ºçš„APIå¤„ç†å„ç§è‡ªå¸¦çš„åå°é©±åŠ¨ç¨‹åºã€‚æ”¯æŒè¯¸å¦‚æ¯”è¾ƒçƒ­é—¨çš„Memcachedã€Rediså’Œæ•°æ®åº“ã€‚ ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:24:0","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"é…ç½® Sessionçš„é…ç½®æ–‡ä»¶å­˜å‚¨åœ¨config/session.phpæ–‡ä»¶ä¸­ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒLaravleä¸ºç»å¤§å¤šæ•°åº”ç”¨ç¨‹åºé…ç½®çš„Sessioné©±åŠ¨ä¸ºfileé©±åŠ¨ï¼Œå®ƒé€‚ç”¨äºå¤§å¤šæ•°ç¨‹åºã€‚å¦‚æœåº”ç”¨ç¨‹åºéœ€è¦å†å¤šä¸ªwebæœåŠ¡å™¨ä¹‹é—´è¿›è¡Œè´Ÿè½½å¹³è¡¡ï¼Œåº”è¯¥é€‰æ‹©ä¸€ä¸ªæ‰€æœ‰æœåŠ¡å™¨éƒ½å¯ä»¥è®¿é—®çš„å‡ ç§å¼å­˜å‚¨ï¼Œä¾‹å¦‚Redisæˆ–æ•°æ®åº“ã€‚ Sessiondriverçš„é…ç½®é¢„è®¾äº†æ¯ä¸ªè¯·æ±‚å­˜å‚¨Sessionæ•°æ®çš„ä½ç½®ã€‚Laravelè‡ªå¸¦äº†å‡ ä¸ªä¸é”™è€Œä¸”å¼€ç®±å³ç”¨çš„é©±åŠ¨ï¼š fileï¼šSessionå­˜å‚¨åœ¨storage/framework/sessions cookieï¼šSessionå­˜å‚¨åœ¨å®‰å…¨åŠ å¯†çš„cookieä¸­ databaseï¼šSessionå‚¨å­˜åœ¨å…³ç³»å‹æ•°æ®åº“ä¸­ memcached/redisï¼šSessionå­˜å‚¨åœ¨åŸºäºé«˜é€Ÿç¼“å­˜çš„å­˜å‚¨ç³»ç»Ÿä¸­ dynamodbï¼šSessionå­˜å‚¨åœ¨AWS DynamoDBä¸­ arrayï¼šSessionå­˜å‚¨åœ¨PHPæ•°ç»„ä¸­ï¼Œä¸ä¼šè¢«åˆä¹è¯ ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:24:1","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"é©±åŠ¨å…ˆå†³æ¡ä»¶ æ•°æ®åº“ ä½¿ç”¨databaseSessioné©±åŠ¨æ—¶ï¼Œéœ€è¦åˆ›å»ºä¸€ä¸ªè®°å½•Sessionçš„è¡¨ã€‚ä¸‹é¢æ˜¯Schemaçš„å£°æ˜ç¤ºä¾‹ï¼š use Illuminate\\Database\\Schema\\Blueprint; use Illuminate\\Support\\Facades\\Schema; Schema::create('sessions', function (Blueprint $table) { $table-\u003estring('id')-\u003eprimary(); $table-\u003eforeignId('user_id')-\u003enullable()-\u003eindex(); $table-\u003estring('ip_address', 45)-\u003enullable(); $table-\u003etext('user_agent')-\u003enullable(); $table-\u003etext('payload'); $table-\u003einteger('last_activity')-\u003eindex(); }); å¯ä»¥ä½¿ç”¨Artisanå‘½ä»¤session:tableç”Ÿæˆè¿™ä¸ªè¿ç§» php artisan session:table php artisan migrate Redis åœ¨Laravelä½¿ç”¨Redis Sessioné©±åŠ¨å‰ï¼Œéœ€è¦å®‰è£…PhpReis PHPæ‰©å±•ï¼Œå¯ä»¥é€šè¿‡PECL/Composerå®‰è£…predis/predisåŒ…ã€‚ ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:24:2","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"ä½¿ç”¨Session ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:25:0","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"è·å–æ•°æ® åœ¨ Laravel ä¸­æœ‰ä¸¤ç§åŸºæœ¬çš„ Session ä½¿ç”¨æ–¹å¼ï¼šå…¨å±€ session åŠ©æ‰‹å‡½æ•°å’Œé€šè¿‡ Request å®ä¾‹ã€‚é¦–å…ˆçœ‹ä¸‹é€šè¿‡ Request å®ä¾‹è®¿é—® Session , å®ƒå¯ä»¥éšå¼ç»‘å®šè·¯ç”±é—­åŒ…æˆ–è€…æ§åˆ¶å™¨æ–¹æ³•ã€‚è®°ä½ï¼ŒLaravel ä¼šè‡ªåŠ¨æ³¨å…¥æ§åˆ¶å™¨æ–¹æ³•çš„ä¾èµ–ã€‚ \u003c?php namespace App\\Http\\Controllers; use App\\Http\\Controllers\\Controller; use Illuminate\\Http\\Request; use Illuminate\\View\\View; class UserController extends Controller { /** * æ˜¾ç¤ºæŒ‡å®šç”¨æˆ·ä¸ªäººèµ„æ–™ã€‚ */ public function show(Request $request, string $id): View { $value = $request-\u003esession()-\u003eget('key'); // ... $user = $this-\u003eusers-\u003efind($id); return view('user.profile', ['user' =\u003e $user]); } } å½“ä»Sessionè·å–æ•°æ®æ—¶ï¼Œä¹Ÿå¯ä»¥åœ¨getæ–¹æ³•ç¬¬äºŒä¸ªå‚æ•°é‡Œä¼ é€’ä¸€ä¸ªdefaulté»˜è®¤å€¼ï¼Œå¦‚æœSessioné‡Œä¸å­˜åœ¨é”®å€¼å¯¹keyçš„æ•°æ®ç»“æœï¼Œè¿™ä¸ªé»˜è®¤å€¼å°±ä¼šè¿”å›ã€‚å¦‚æœä¼ é€’ç»™getæ–¹æ³•ä¸€ä¸ªé—­åŒ…ä½œä¸ºé»˜è®¤å€¼ï¼Œè¿™ä¸ªé—­åŒ…ä¼šè¢«æ‰§è¡Œå¹¶ä¸”è¿”å›ç»“æœï¼š $value = $request-\u003esession()-\u003eget('key', 'default'); $value = $request-\u003esession()-\u003eget('key', function () { return 'default'; }); å…¨å±€SessionåŠ©æ‰‹å‡½æ•° å¯ä»¥åœ¨Sessioné‡Œä½¿ç”¨PHPå…¨å±€sessionå‡½æ•°è·å–å’Œå­˜å‚¨æ•°æ®ã€‚å½“è¿™ä¸ªsessionå‡½æ•°ä»¥ä¸€ä¸ªå•ç‹¬çš„å­—ç¬¦ä¸²å½¢å¼è¢«è°ƒç”¨æ—¶ï¼Œå®ƒå°†è¿”å›è¿™ä¸ªSessioné”®å€¼å¯¹çš„ç»“æœã€‚å½“å‡½æ•°ä»¥key-valueæ•°ç»„å½¢å¼è¢«è°ƒç”¨æ—¶ï¼Œè¿™äº›å€¼ä¼šè¢«å­˜å‚¨åœ¨Sessionä¸­ï¼š Route::get('/home', function () { // ä» Session è·å–æ•°æ® ... $value = session('key'); // è®¾ç½®é»˜è®¤å€¼... $value = session('key', 'default'); // åœ¨Session é‡Œå­˜å‚¨ä¸€æ®µæ•°æ® ... session(['key' =\u003e 'value']); }); è·å–æ‰€æœ‰Sessionæ•°æ® å¯ä»¥ä½¿ç”¨allæ–¹æ³•ä»Sessioné‡Œè·å–æ‰€æœ‰æ•°æ®ï¼š $data = $request-\u003esession()-\u003eall(); åˆ¤æ–­Sessioné‡Œæ˜¯å¦å­˜åœ¨æ¡ç›® å¯ä»¥ä½¿ç”¨hasæ–¹æ³•ã€‚å¦‚æœæ¡ç›®å­˜åœ¨è¿”å›trueï¼Œå¦åˆ™è¿”å›nullï¼š if ($request-\u003esession()-\u003ehas('users')) { // ... } åˆ¤æ–­ Session é‡Œæ˜¯å¦å­˜åœ¨ä¸€ä¸ªå³ä½¿ç»“æœå€¼ä¸º null çš„æ¡ç›®ï¼Œå¯ä»¥ä½¿ç”¨ exists æ–¹æ³•ï¼š if ($request-\u003esession()-\u003eexists('users')) { // ... } è¦ç¡®å®šæŸä¸ªæ¡ç›®æ˜¯å¦åœ¨ä¼šè¯ä¸­ä¸å­˜åœ¨ï¼Œå¯ä»¥ä½¿ç”¨ missing æ–¹æ³•ã€‚å¦‚æœæ¡ç›®ä¸å­˜åœ¨ï¼Œmissing æ–¹æ³•è¿”å› trueï¼š if ($request-\u003esession()-\u003emissing('users')) { // ... } ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:25:1","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"å­˜å‚¨æ•°æ® Session é‡Œå­˜å‚¨æ•°æ®ï¼Œé€šå¸¸å°†ä½¿ç”¨ Request å®ä¾‹ä¸­çš„ put æ–¹æ³•æˆ–è€… session åŠ©æ‰‹å‡½æ•°ï¼š // é€šè¿‡ Request å®ä¾‹å­˜å‚¨ ... $request-\u003esession()-\u003eput('key', 'value'); // é€šè¿‡å…¨å±€ Session åŠ©æ‰‹å‡½æ•°å­˜å‚¨ ... session(['key' =\u003e 'value']); Sessionå­˜å‚¨æ•°ç»„ push æ–¹æ³•å¯ä»¥æŠŠä¸€ä¸ªæ–°å€¼æ¨å…¥åˆ°ä»¥æ•°ç»„å½¢å¼å­˜å‚¨çš„ session å€¼é‡Œã€‚ä¾‹å¦‚ï¼šå¦‚æœ user.teams é”®å€¼å¯¹æœ‰ä¸€ä¸ªå…³äºå›¢é˜Ÿåå­—çš„æ•°ç»„ï¼Œå¯ä»¥æ¨å…¥ä¸€ä¸ªæ–°å€¼åˆ°è¿™ä¸ªæ•°ç»„é‡Œï¼š $request-\u003esession()-\u003epush('user.teams', 'developers'); è·å–\u0026åˆ é™¤æ¡ç›® pull æ–¹æ³•ä¼šä» Session é‡Œè·å–å¹¶ä¸”åˆ é™¤ä¸€ä¸ªæ¡ç›®ï¼š $value = $request-\u003esession()-\u003epull('key', 'default'); é€’å¢ã€é€’å‡ä¼šè¯å€¼ å¦‚æœ Session æ•°æ®é‡Œæœ‰æ•´å½¢å¸Œæœ›è¿›è¡ŒåŠ å‡æ“ä½œï¼Œå¯ä»¥ä½¿ç”¨ increment å’Œ decrement æ–¹æ³•ï¼š $request-\u003esession()-\u003eincrement('count'); $request-\u003esession()-\u003eincrement('count', $incrementBy = 2); $request-\u003esession()-\u003edecrement('count'); $request-\u003esession()-\u003edecrement('count', $decrementBy = 2); ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:25:2","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"é—ªå­˜æ•°æ® æœ‰æ—¶å¯èƒ½æƒ³åœ¨ Session é‡Œä¸ºä¸‹æ¬¡è¯·æ±‚å­˜å‚¨ä¸€äº›æ¡ç›®ã€‚å¯ä»¥ä½¿ç”¨ flash æ–¹æ³•ã€‚ä½¿ç”¨è¿™ä¸ªæ–¹æ³•ï¼Œå­˜å‚¨åœ¨ Session çš„æ•°æ®å°†ç«‹å³å¯ç”¨å¹¶ä¸”ä¼šä¿ç•™åˆ°ä¸‹ä¸€ä¸ª HTTP è¯·æ±‚æœŸé—´ï¼Œä¹‹åä¼šè¢«åˆ é™¤ã€‚é—ªå­˜æ•°æ®ä¸»è¦ç”¨äºçŸ­æœŸçš„çŠ¶æ€æ¶ˆæ¯ï¼š $request-\u003esession()-\u003eflash('status', 'Task was successful!'); å¦‚æœéœ€è¦ä¸ºå¤šæ¬¡è¯·æ±‚æŒä¹…åŒ–é—ªå­˜æ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨ reflash æ–¹æ³•ï¼Œå®ƒä¼šä¸ºä¸€ä¸ªé¢å¤–çš„è¯·æ±‚ä¿æŒä½æ‰€æœ‰çš„é—ªå­˜æ•°æ®ï¼Œå¦‚æœä»…éœ€è¦ä¿æŒç‰¹å®šçš„é—ªå­˜æ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨ keep æ–¹æ³•ï¼š $request-\u003esession()-\u003ereflash(); $request-\u003esession()-\u003ekeep(['username', 'email']); å¦‚æœä»…ä¸ºäº†å½“å‰çš„è¯·æ±‚æŒä¹…åŒ–é—ªå­˜æ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨ now æ–¹æ³•ï¼š $request-\u003esession()-\u003enow('status', 'Task was successful!'); ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:25:3","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"åˆ é™¤æ•°æ® forget æ–¹æ³•ä¼šä» Session åˆ é™¤ä¸€äº›æ•°æ®ã€‚å¦‚æœæƒ³åˆ é™¤æ‰€æœ‰ Session æ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨ flush æ–¹æ³•ï¼š // åˆ é™¤ä¸€ä¸ªå•ç‹¬çš„é”®å€¼å¯¹ ... $request-\u003esession()-\u003eforget('name'); // åˆ é™¤å¤šä¸ª é”®å€¼å¯¹ ... $request-\u003esession()-\u003eforget(['name', 'status']); $request-\u003esession()-\u003eflush(); ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:25:4","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"é‡æ–°ç”ŸæˆSessionID é‡æ–°ç”Ÿæˆ Session ID ç»å¸¸è¢«ç”¨æ¥é˜»æ­¢æ¶æ„ç”¨æˆ·ä½¿ç”¨ session fixation æ”»å‡»ä½ çš„åº”ç”¨ã€‚ å¦‚æœæ­£åœ¨ä½¿ç”¨å…¥é—¨å¥—ä»¶æˆ– Laravel Fortify ä¸­çš„ä»»æ„ä¸€ç§ï¼Œ Laravel ä¼šåœ¨è®¤è¯é˜¶æ®µè‡ªåŠ¨ç”Ÿæˆ Session IDï¼›ç„¶è€Œå¦‚æœéœ€è¦æ‰‹åŠ¨é‡æ–°ç”Ÿæˆ Session ID ï¼Œå¯ä»¥ä½¿ç”¨ regenerate æ–¹æ³•ï¼š $request-\u003esession()-\u003eregenerate(); å¦‚æœéœ€è¦é‡æ–°ç”Ÿæˆ Session ID å¹¶åŒæ—¶åˆ é™¤æ‰€æœ‰ Session é‡Œçš„æ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨ invalidate æ–¹æ³•ï¼š $request-\u003esession()-\u003einvalidate(); ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:25:5","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"Sessioné˜»å¡ é»˜è®¤æƒ…å†µä¸‹ï¼ŒLaravel å…è®¸ä½¿ç”¨åŒä¸€ Session çš„è¯·æ±‚å¹¶å‘åœ°æ‰§è¡Œï¼Œä¸¾ä¾‹æ¥è¯´ï¼Œå¦‚æœä½¿ç”¨ä¸€ä¸ª JavaScript HTTP åº“å‘ä½ çš„åº”ç”¨æ‰§è¡Œä¸¤æ¬¡ HTTP è¯·æ±‚ï¼Œå®ƒä»¬å°†åŒæ—¶æ‰§è¡Œã€‚å¯¹å¤šæ•°åº”ç”¨è¿™ä¸æ˜¯é—®é¢˜ï¼Œç„¶è€Œ åœ¨ä¸€å°éƒ¨åˆ†åº”ç”¨ä¸­å¯èƒ½å‡ºç° Session æ•°æ®ä¸¢å¤±ï¼Œè¿™äº›åº”ç”¨ä¼šå‘ä¸¤ä¸ªä¸åŒçš„åº”ç”¨ç«¯å¹¶å‘è¯·æ±‚ï¼Œå¹¶åŒæ—¶å†™å…¥æ•°æ®åˆ° Sessionã€‚ ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒLaravel å…è®¸é™åˆ¶æŒ‡å®š Session çš„å¹¶å‘è¯·æ±‚ã€‚é¦–å…ˆï¼Œå¯ä»¥åœ¨è·¯ç”±å®šä¹‰æ—¶ä½¿ç”¨ block é“¾å¼æ–¹æ³•ã€‚åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œä¸€ä¸ªåˆ° /profile çš„è·¯ç”±è¯·æ±‚ä¼šæ‹¿åˆ°ä¸€æŠŠ Session é”ã€‚å½“å®ƒå¤„åœ¨é”å®šçŠ¶æ€æ—¶ï¼Œä»»ä½•ä½¿ç”¨ç›¸åŒ Session ID çš„åˆ° /profile æˆ– /order çš„è·¯ç”±è¯·æ±‚éƒ½å¿…é¡»ç­‰å¾…ï¼Œç›´åˆ°ç¬¬ä¸€ä¸ªè¯·æ±‚å¤„ç†å®Œæˆåå†ç»§ç»­æ‰§è¡Œï¼š Route::post('/profile', function () { // ... })-\u003eblock($lockSeconds = 10, $waitSeconds = 10) Route::post('/order', function () { // ... })-\u003eblock($lockSeconds = 10, $waitSeconds = 10) block æ–¹æ³•æ¥å—ä¸¤ä¸ªå¯é€‰å‚æ•°ã€‚block æ–¹æ³•æ¥å—çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ Session é”é‡Šæ”¾å‰åº”è¯¥æŒæœ‰çš„æœ€å¤§ç§’æ•°ã€‚å½“ç„¶ï¼Œå¦‚æœè¯·æ±‚åœ¨æ­¤æ—¶é—´ä¹‹å‰å®Œæˆæ‰§è¡Œï¼Œé”å°†æå‰é‡Šæ”¾ã€‚ block æ–¹æ³•æ¥å—çš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯è¯·æ±‚åœ¨è¯•å›¾è·å¾— Session é”æ—¶åº”è¯¥ç­‰å¾…çš„ç§’æ•°ã€‚å¦‚æœè¯·æ±‚åœ¨ç»™å®šçš„ç§’æ•°å†…æ— æ³•è·å¾—ä¼šè¯é”ï¼Œå°†æŠ›å‡º Illuminate\\Contracts\\Cache\\LockTimeoutException å¼‚å¸¸ã€‚ å¦‚æœä¸ä¼ å‚ï¼Œé‚£ä¹ˆ Session é”é»˜è®¤é”å®šæœ€å¤§æ—¶é—´æ˜¯ 10 ç§’ï¼Œè¯·æ±‚é”æœ€å¤§çš„ç­‰å¾…æ—¶é—´ä¹Ÿæ˜¯ 10 ç§’ï¼š Route::post('/profile', function () { // ... })-\u003eblock() ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:26:0","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP","Laravel"],"content":"æ·»åŠ è‡ªå®šä¹‰Sessioné©±åŠ¨ å®ç°é©±åŠ¨ å¦‚æœç°å­˜çš„ Session é©±åŠ¨ä¸èƒ½æ»¡è¶³éœ€æ±‚ï¼ŒLaravel å…è®¸è‡ªå®šä¹‰ Session Handlerã€‚è‡ªå®šä¹‰é©±åŠ¨åº”å®ç° PHP å†…ç½®çš„ SessionHandlerInterfaceã€‚è¿™ä¸ªæ¥å£ä»…åŒ…å«å‡ ä¸ªæ–¹æ³•ã€‚ä»¥ä¸‹æ˜¯ MongoDB é©±åŠ¨å®ç°çš„ä»£ç ç‰‡æ®µï¼š \u003c?php namespace App\\Extensions; class MongoSessionHandler implements \\SessionHandlerInterface { public function open($savePath, $sessionName) {} public function close() {} public function read($sessionId) {} public function write($sessionId, $data) {} public function destroy($sessionId) {} public function gc($lifetime) {} } æ³¨ï¼šLaravel æ²¡æœ‰å†…ç½®å­˜æ”¾æ‰©å±•çš„ç›®å½•ï¼Œå¯ä»¥æ”¾ç½®åœ¨ä»»æ„ç›®å½•ä¸‹ï¼Œè¿™ä¸ªç¤ºä¾‹é‡Œï¼Œåˆ›å»ºäº†ä¸€ä¸ª Extensions ç›®å½•å­˜æ”¾ MongoSessionHandlerã€‚ open æ–¹æ³•é€šå¸¸ç”¨äºåŸºäºæ–‡ä»¶çš„ Session å­˜å‚¨ç³»ç»Ÿã€‚å› ä¸º Laravel é™„å¸¦äº†ä¸€ä¸ªfileSession é©±åŠ¨ã€‚ä½ æ— é¡»åœ¨é‡Œé¢å†™ä»»ä½•ä»£ç ã€‚å¯ä»¥ç®€å•åœ°å¿½ç•¥æ‰ã€‚ close æ–¹æ³•è·Ÿ open æ–¹æ³•å¾ˆåƒï¼Œé€šå¸¸ä¹Ÿå¯ä»¥å¿½ç•¥æ‰ã€‚å¯¹å¤§å¤šæ•°é©±åŠ¨æ¥è¯´ï¼Œå®ƒä¸æ˜¯å¿…é¡»çš„ã€‚ read æ–¹æ³•åº”è¿”å›ä¸ç»™å®šçš„ $sessionId å…³è”çš„ Session æ•°æ®çš„å­—ç¬¦ä¸²æ ¼å¼ã€‚åœ¨ä½ çš„é©±åŠ¨ä¸­è·å–æˆ–å­˜å‚¨ Session æ•°æ®æ—¶ï¼Œæ— é¡»ä½œä»»ä½•åºåˆ—åŒ–å’Œç¼–ç çš„æ“ä½œï¼ŒLaravel ä¼šè‡ªåŠ¨ä¸ºä½ æ‰§è¡Œåºåˆ—åŒ–ã€‚ write æ–¹æ³•å°†ä¸ $sessionId å…³è”çš„ç»™å®šçš„ $data å­—ç¬¦ä¸²å†™å…¥åˆ°ä¸€äº›æŒä¹…åŒ–å­˜å‚¨ç³»ç»Ÿï¼Œå¦‚ MongoDB æˆ–è€…å…¶ä»–ä½ é€‰æ‹©çš„å­˜å‚¨ç³»ç»Ÿã€‚å†æ¬¡ï¼Œä½ æ— é¡»è¿›è¡Œä»»ä½•åºåˆ—åŒ–æ“ä½œï¼ŒLaravel ä¼šè‡ªåŠ¨ä¸ºä½ å¤„ç†ã€‚ destroy æ–¹æ³•åº”å¯ä»¥ä»æŒä¹…åŒ–å­˜å‚¨ä¸­åˆ é™¤ä¸ $sessionId ç›¸å…³è”çš„æ•°æ®ã€‚ gc æ–¹æ³•åº”å¯ä»¥é”€æ¯ç»™å®šçš„ $lifetimeï¼ˆUNIX æ—¶é—´æˆ³æ ¼å¼ ï¼‰ä¹‹å‰çš„æ‰€æœ‰ Session æ•°æ®ã€‚å¯¹äºåƒ Memcached å’Œ Redis è¿™ç±»æ‹¥æœ‰è¿‡æœŸæœºåˆ¶çš„ç³»ç»Ÿæ¥è¯´ï¼Œæœ¬æ–¹æ³•å¯ä»¥ç½®ç©ºã€‚ æ³¨å†Œé©±åŠ¨ åœ¨ Laravel ä¸­æ·»åŠ é¢å¤–çš„é©±åŠ¨åˆ° Session åç«¯ ï¼Œå¯ä»¥ä½¿ç”¨ Session Facade æä¾›çš„ extend æ–¹æ³•ã€‚ä½ åº”è¯¥åœ¨æœåŠ¡æä¾›è€…ä¸­çš„ boot æ–¹æ³•ä¸­è°ƒç”¨ extend æ–¹æ³•ã€‚å¯ä»¥é€šè¿‡å·²æœ‰çš„ App\\Providers\\AppServiceProvider æˆ–åˆ›å»ºä¸€ä¸ªå…¨æ–°çš„æœåŠ¡æä¾›è€…æ‰§è¡Œæ­¤æ“ä½œï¼š \u003c?php namespace App\\Providers; use App\\Extensions\\MongoSessionHandler; use Illuminate\\Contracts\\Foundation\\Application; use Illuminate\\Support\\Facades\\Session; use Illuminate\\Support\\ServiceProvider; class SessionServiceProvider extends ServiceProvider { /** * æ³¨å†Œä»»æ„åº”ç”¨æœåŠ¡ã€‚ */ public function register(): void { // ... } /** * å¯åŠ¨ä»»æ„åº”ç”¨æœåŠ¡ã€‚ */ public function boot(): void { Session::extend('mongo', function (Application $app) { // è¿”å›ä¸€ä¸ª SessionHandlerInterface æ¥å£çš„å®ç° ... return new MongoSessionHandler; }); } } ä¸€æ—¦ Session é©±åŠ¨æ³¨å†Œå®Œæˆï¼Œå°±å¯ä»¥åœ¨ config/session.php é…ç½®æ–‡ä»¶é€‰æ‹©ä½¿ç”¨ mongo é©±åŠ¨ã€‚ ","date":"2023å¹´05æœˆ08æ—¥","objectID":"/2023/05/laravel01/:27:0","tags":["PHP","Laravel"],"title":"Laravel è·¯ç”±","uri":"/2023/05/laravel01/"},{"categories":["PHP"],"content":"ä¸€ã€åˆè¯†PHPï¼Ÿ ","date":"2023å¹´04æœˆ27æ—¥","objectID":"/2023/04/php%E5%85%A5%E9%97%A8/:0:0","tags":["PHP"],"title":"PHPå…¥é—¨","uri":"/2023/04/php%E5%85%A5%E9%97%A8/"},{"categories":["PHP"],"content":"1.1 PHPæ˜¯ä»€ä¹ˆ PHP(Hypertext Preprocessor è¶…æ–‡æœ¬é¢„å¤„ç†å™¨)çš„ç®€ç§°ï¼Œæ˜¯ä¸€ç§è¢«å¹¿æ³›åº”ç”¨çš„å¼€æºé€šç”¨çš„æœåŠ¡å™¨ç«¯è„šæœ¬è¯­è¨€ï¼Œé€‚ç”¨äºwebå¼€å‘å¹¶å¯åµŒå…¥HTMLä¸­ é€šç”¨ï¼šæŒ‡è·¨å¹³å°ï¼Œå¦‚ï¼šWindowsã€Linuxã€MacOS å¼€æºï¼šæ„å‘³ç€ä½ å¯ä»¥è½»æ¾è·å–å…¨éƒ¨æºä»£ç ï¼Œå¹¶è¿›è¡Œå®šåˆ¶æˆ–æ‰©å±• å…è´¹ï¼šæ„å‘³ç€ä½ ä¸å¿…ä¸ºPHPèŠ±ä¸€åˆ†é’±ï¼Œå“ªæ€•ç”¨åœ¨å•†ä¸šé¡¹ç›®ä¸­ æœåŠ¡å™¨ç«¯ï¼šæ„å‘³ç€ä½ å¿…é¡»å°†å®ƒå®‰è£…åœ¨æœåŠ¡å™¨ç¯å¢ƒä¸‹æ‰å¯ä»¥ä½¿ç”¨ è„šæœ¬è¯­è¨€ï¼šè§£é‡Šå‹è¯­è¨€ï¼ŒæŒ‰ç¼–å†™é¡ºåºæ‰§è¡Œã€‚æ˜¯æŒ‡ä¸éœ€è¦ç¼–è¯‘,ç›´æ¥ç”±è§£é‡Šå™¨/è™šæ‹Ÿæœºæ‰§è¡Œçš„ç¼–ç¨‹è¯­è¨€ ","date":"2023å¹´04æœˆ27æ—¥","objectID":"/2023/04/php%E5%85%A5%E9%97%A8/:1:0","tags":["PHP"],"title":"PHPå…¥é—¨","uri":"/2023/04/php%E5%85%A5%E9%97%A8/"},{"categories":["PHP"],"content":"1.2 PHPèƒ½åšä»€ä¹ˆ å¯ä»¥å¿«é€ŸåŠ¨æ€çš„ç”ŸæˆHTMLé¡µé¢ å¯ä»¥è¿”å›å‰ç«¯éœ€è¦çš„å„ç§ç±»å‹çš„æ•°æ® å¯ä»¥é«˜æ•ˆå®‰å…¨çš„å¤„ç†è¡¨å•æ•°æ® å¯ä»¥å®‰å…¨çš„æ“ä½œæœåŠ¡å™¨ä¸Šçš„æ–‡ä»¶ å¯ä»¥æ§åˆ¶ä¸å®¢æˆ·ç«¯çš„ä¼šè¯( Cookie/Session ) å¯ä»¥å¯¹ç”¨æˆ·çš„è¡Œä¸ºè¿›è¡Œæˆæƒæ§åˆ¶ å¯ä»¥é«˜æ•ˆå®‰å…¨çš„æ“ä½œå„ç§ç±»å‹çš„æ•°æ®åº“ é€šè¿‡æ‰©å±•ï¼Œå¯ä»¥å®ç°åŠ å¯†ï¼Œå‹ç¼©ç­‰å…¶ä»–åŠŸèƒ½ å¯ä»¥æä¾›æ¥å£æ•°æ®ï¼ŒåŒ…æ‹¬ï¼šå°ç¨‹åºã€APPã€ç­‰å…¶ä»–è¯­è¨€ ","date":"2023å¹´04æœˆ27æ—¥","objectID":"/2023/04/php%E5%85%A5%E9%97%A8/:2:0","tags":["PHP"],"title":"PHPå…¥é—¨","uri":"/2023/04/php%E5%85%A5%E9%97%A8/"},{"categories":["PHP"],"content":"1.3 PHPç¨‹åºæ‰§è¡Œæµç¨‹ äºŒã€PHPåŸºç¡€ ","date":"2023å¹´04æœˆ27æ—¥","objectID":"/2023/04/php%E5%85%A5%E9%97%A8/:3:0","tags":["PHP"],"title":"PHPå…¥é—¨","uri":"/2023/04/php%E5%85%A5%E9%97%A8/"},{"categories":["PHP"],"content":"2.1 phpç¨‹åº PHPæ–‡ä»¶çš„é»˜è®¤æ‰©å±•åæ˜¯.php PHPæ–‡ä»¶ä¸­å¯ä»¥åŒ…å«htmlã€CSSã€JavaScriptä»£ç  ","date":"2023å¹´04æœˆ27æ—¥","objectID":"/2023/04/php%E5%85%A5%E9%97%A8/:4:0","tags":["PHP"],"title":"PHPå…¥é—¨","uri":"/2023/04/php%E5%85%A5%E9%97%A8/"},{"categories":["PHP"],"content":"2.1.1 PHPæ ‡è®° å¼€å§‹æ ‡è®°\u003c?php å’Œç»“æŸæ ‡è®°?\u003eä¸­é—´å†™phpä»£ç  å½“è§£æä¸€ä¸ªæ–‡ä»¶æ—¶ï¼ŒPHPä¼šå¯»æ‰¾èµ·å§‹å’Œç»“æŸæ ‡è®°ï¼Œä¹Ÿå°±æ˜¯å‘Šè¯‰PHPå¼€å§‹å’Œåœæ­¢è§£æäºŒè€…ä¹‹é—´çš„ä»£ç ã€‚ æ­¤ç§è§£ææ–¹å¼ä½¿å¾—PHPå¯ä»¥è¢«åµŒå…¥åˆ°å„ç§ä¸åŒçš„æ–‡æ¡£ä¸­å»ï¼Œè€Œä»»ä½•èµ·å§‹å’Œç»“æŸæ ‡è®°ä¹‹å¤–çš„éƒ¨åˆ†éƒ½ä¼šè¢«PHPè§£æå™¨å¿½ç•¥ \u003c?php ... ?\u003e ","date":"2023å¹´04æœˆ27æ—¥","objectID":"/2023/04/php%E5%85%A5%E9%97%A8/:4:1","tags":["PHP"],"title":"PHPå…¥é—¨","uri":"/2023/04/php%E5%85%A5%E9%97%A8/"},{"categories":["PHP"],"content":"2.1.2 PHPä»£ç  æŒ‡ä»¤ æè¿° echo å¯ä»¥è¾“å‡ºä¸€ä¸ªæˆ–å¤šä¸ªå­—ç¬¦ä¸²ï¼Œç”¨é€—å·éš”å¼€ print åªå…è®¸è¾“å‡ºä¸€ä¸ªå­—ç¬¦ä¸² ","date":"2023å¹´04æœˆ27æ—¥","objectID":"/2023/04/php%E5%85%A5%E9%97%A8/:4:2","tags":["PHP"],"title":"PHPå…¥é—¨","uri":"/2023/04/php%E5%85%A5%E9%97%A8/"},{"categories":["PHP"],"content":"2.1.3 è¯­å¥ç»“æŸç¬¦; ä¸€è¡Œä»£ç ç»“æŸåº”è¯¥ä»¥;ç»“æŸ \u003c?php echo 111, 222; print 11; ","date":"2023å¹´04æœˆ27æ—¥","objectID":"/2023/04/php%E5%85%A5%E9%97%A8/:4:3","tags":["PHP"],"title":"PHPå…¥é—¨","uri":"/2023/04/php%E5%85%A5%E9%97%A8/"},{"categories":["PHP"],"content":"2.1.4 æ³¨é‡Š \u003c?php // è¿™æ˜¯å•è¡Œæ³¨é‡Š /* è¿™æ˜¯å¤šè¡Œæ³¨é‡Š æ³¨é‡Šåï¼Œåœ¨æµè§ˆå™¨å’Œç½‘é¡µæºç ä¸­ï¼Œæ˜¯çœ‹ä¸åˆ°çš„ã€‚ */ ","date":"2023å¹´04æœˆ27æ—¥","objectID":"/2023/04/php%E5%85%A5%E9%97%A8/:4:4","tags":["PHP"],"title":"PHPå…¥é—¨","uri":"/2023/04/php%E5%85%A5%E9%97%A8/"},{"categories":["PHP"],"content":"2.3 PHPå˜é‡ ","date":"2023å¹´04æœˆ27æ—¥","objectID":"/2023/04/php%E5%85%A5%E9%97%A8/:5:0","tags":["PHP"],"title":"PHPå…¥é—¨","uri":"/2023/04/php%E5%85%A5%E9%97%A8/"},{"categories":["PHP"],"content":"2.3.1 å£°æ˜å˜é‡ å£°æ˜å˜é‡ä½¿ç”¨$ = å±äºèµ‹å€¼è¿ç®—ç¬¦ \u003c?php $a = 2; $b = 3; echo $a + $b; ","date":"2023å¹´04æœˆ27æ—¥","objectID":"/2023/04/php%E5%85%A5%E9%97%A8/:5:1","tags":["PHP"],"title":"PHPå…¥é—¨","uri":"/2023/04/php%E5%85%A5%E9%97%A8/"},{"categories":["PHP"],"content":"2.3.2 å˜é‡å‘½åè§„åˆ™ ä¸èƒ½ä»¥æ•°å­—å¼€å¤´ ä¸­é—´ä¸èƒ½æœ‰ç©ºæ ¼ \u003c?php # ä¸‹åˆ’çº¿å‘½åæ³• $new_title = 'phpæ˜¯ä¸–ç•Œä¸Šæœ€å¥½çš„è¯­è¨€'; echo $new_title; echo '\u003chr\u003e'; # å°é©¼å³°å‘½åæ³• $newTitle = 'phpæ˜¯ä¸–ç•Œä¸Šæœ€å¥½çš„è¯­è¨€'; echo $newTitle; echo '\u003chr\u003e'; # å¤§é©¼å³°å‘½åæ³• $NewTitle = 'phpæ˜¯ä¸–ç•Œä¸Šæœ€å¥½çš„è¯­è¨€'; echo $NewTitle; ","date":"2023å¹´04æœˆ27æ—¥","objectID":"/2023/04/php%E5%85%A5%E9%97%A8/:5:2","tags":["PHP"],"title":"PHPå…¥é—¨","uri":"/2023/04/php%E5%85%A5%E9%97%A8/"},{"categories":["PHP"],"content":"2.4 phpæ ‡é‡æ•°æ®ç±»å‹ ç±»å‹ æè¿° å¸ƒå°”å‹ Boolean true å’Œ false æ•´å‹ Integer 0~æ— é™å¤§ æµ®ç‚¹å‹ Float å¸¦å°æ•°çš„æ•°å­— å­—ç¬¦ä¸² String æ±‰å­—ã€è‹±æ–‡ã€å¤åˆã€ç­‰ echo è¾“å‡ºæ•°æ®å€¼ var_dump å¯ä»¥æ‰“å°æ•°æ®ç±»å‹å’Œå€¼ ","date":"2023å¹´04æœˆ27æ—¥","objectID":"/2023/04/php%E5%85%A5%E9%97%A8/:6:0","tags":["PHP"],"title":"PHPå…¥é—¨","uri":"/2023/04/php%E5%85%A5%E9%97%A8/"},{"categories":["PHP"],"content":"2.4.1 å¸ƒå°”å‹ å¸ƒå°”å‹é€šå¸¸ç”¨äºæ¡ä»¶åˆ¤æ–­ å½“echoé‡ä¸Štrueçš„æ—¶å€™è¿”å›1ï¼Œé‡ä¸Šfalseåˆ™è¿”å›ç©ºå­—ç¬¦ä¸² \u003c?php $a = true; echo $a; var_dump($a); $b = false; echo $b; var_dump($b); ","date":"2023å¹´04æœˆ27æ—¥","objectID":"/2023/04/php%E5%85%A5%E9%97%A8/:6:1","tags":["PHP"],"title":"PHPå…¥é—¨","uri":"/2023/04/php%E5%85%A5%E9%97%A8/"},{"categories":["PHP"],"content":"2.4.2 æ•´å‹ æ•´æ•°ä¸èƒ½åŒ…å«é€—å·æˆ–ç©ºæ ¼ æ•´æ•°æ˜¯æ²¡æœ‰å°æ•°ç‚¹çš„ æ•´æ•°å¯ä»¥æ˜¯æ•´æ•°æˆ–è´Ÿæ•° æ•´æ•°å¯ä»¥ç”¨ä¸‰ç§æ ¼å¼æ¥æŒ‡å®šï¼šåè¿›åˆ¶ã€åå…­è¿›åˆ¶ã€å…«è¿›åˆ¶ \u003c?php $number = 0; var_dump($number); //int(0) $number = 67; var_dump($number); //int(67) $number = -322; var_dump($number);//int(-322) ","date":"2023å¹´04æœˆ27æ—¥","objectID":"/2023/04/php%E5%85%A5%E9%97%A8/:6:2","tags":["PHP"],"title":"PHPå…¥é—¨","uri":"/2023/04/php%E5%85%A5%E9%97%A8/"},{"categories":["PHP"],"content":"2.4.3 æµ®ç‚¹å‹ \u003c?php $number = 10.03; var_dump($number); //float(10.03) $number = -88.23; var_dump($number); //float(-88.23) ","date":"2023å¹´04æœˆ27æ—¥","objectID":"/2023/04/php%E5%85%A5%E9%97%A8/:6:3","tags":["PHP"],"title":"PHPå…¥é—¨","uri":"/2023/04/php%E5%85%A5%E9%97%A8/"},{"categories":["PHP"],"content":"2.4.4 å­—ç¬¦ä¸² \u003c?php $str = 'ä½ å¥½'; var_dump($str); //string(6) \"ä½ å¥½\" ä¸€ä¸ªä¸­æ–‡å­—ç¬¦å 3ä¸ªå­—èŠ‚ $str = 'Hello PHP!'; var_dump($str); //string(10) \"Hello PHP!\" ","date":"2023å¹´04æœˆ27æ—¥","objectID":"/2023/04/php%E5%85%A5%E9%97%A8/:6:4","tags":["PHP"],"title":"PHPå…¥é—¨","uri":"/2023/04/php%E5%85%A5%E9%97%A8/"},{"categories":["PHP"],"content":"2.5 phpå¤åˆæ•°æ®ç±»å‹ ç±»å‹ æè¿° array æ•°ç»„ object å¯¹è±¡ callable å¯è°ƒç”¨ iterable å¯è¿­ä»£ ","date":"2023å¹´04æœˆ27æ—¥","objectID":"/2023/04/php%E5%85%A5%E9%97%A8/:7:0","tags":["PHP"],"title":"PHPå…¥é—¨","uri":"/2023/04/php%E5%85%A5%E9%97%A8/"},{"categories":["PHP"],"content":"2.5.1 æ•°ç»„ ç±»å‹ æè¿° æ•°ç»„ Array æ•°ç»„å¯ä»¥åœ¨ä¸€ä¸ªå˜é‡ä¸­å­˜å‚¨å¤šä¸ªå€¼ åˆ›å»ºç©ºæ•°ç»„ \u003c?php $arr = array(); var_dump($arr); //array(0) {} $arrs = []; var_dump($arrs); //array(0) {} åˆ›å»ºç´¢å¼•æ•°ç»„ \u003c?php $arr = array( 'è¶³çƒ', 'ç¯®çƒ', 'æ’çƒ' ); var_dump($arr); /* array(3) { [0]=\u003e string(6) \"è¶³çƒ\" [1]=\u003e string(6) \"ç¯®çƒ\" [2]=\u003e string(6) \"æ’çƒ\" } */ åˆ›å»ºå…³è”æ•°ç»„ \u003c?php $arr = [ 'Football' =\u003e 'è¶³çƒ', 'Basketball' =\u003e 'ç¯®çƒ', 'Volleyball' =\u003e 'æ’çƒ' ]; var_dump($arr); /* array(3) { [\"Football\"]=\u003e string(6) \"è¶³çƒ\" [\"Basketball\"]=\u003e string(6) \"ç¯®çƒ\" [\"Volleyball\"]=\u003e string(6) \"æ’çƒ\" } */ è¾“å‡ºæ•°ç»„å€¼ \u003c?php $arr = array( 'è¶³çƒ', 'ç¯®çƒ', 'æ’çƒ' ); echo $arr[0]; //è¶³çƒ echo $arr[1]; //ç¯®çƒ echo $arr[2]; //æ’çƒ $arr = [ 'Football' =\u003e 'è¶³çƒ', 'Basketball' =\u003e 'ç¯®çƒ', 'Volleyball' =\u003e 'æ’çƒ' ]; echo $arr['Football']; //è¶³çƒ echo $arr['Basketball']; //ç¯®çƒ echo $arr['Volleyball']; //æ’çƒ æ‰“å°æ•°ç»„print_r \u003c?php $arr = array( 'è¶³çƒ', 'ç¯®çƒ', 'æ’çƒ' ); print_r($arr); /* Array ( [0] =\u003e è¶³çƒ [1] =\u003e ç¯®çƒ [2] =\u003e æ’çƒ ) phpè¿æ¥ç¬¦ \u003c?php $var1 = 'Hello'; $var2 = 'World'; var_dump($var1 . $var2); //string(10) \"HelloWorld\" var_dump($var1 . ' ' . $var2); //string(11) \"Hello World\" ","date":"2023å¹´04æœˆ27æ—¥","objectID":"/2023/04/php%E5%85%A5%E9%97%A8/:7:1","tags":["PHP"],"title":"PHPå…¥é—¨","uri":"/2023/04/php%E5%85%A5%E9%97%A8/"},{"categories":["PHP"],"content":"2.5.2 phpå¤šç»´æ•°ç»„ äºŒç»´æ•°ç»„ \u003c?php $arr = array( array( 'name' =\u003e 'Joker', 'age' =\u003e 18 ), array( 'name' =\u003e 'desire', 'age' =\u003e 19 ), array( 'name' =\u003e 'tommy', 'age' =\u003e 20 ) ); var_dump($arr); /* array(3) { [0]=\u003e array(2) { [\"name\"]=\u003e string(5) \"Joker\" [\"age\"]=\u003e int(18) } [1]=\u003e array(2) { [\"name\"]=\u003e string(6) \"desire\" [\"age\"]=\u003e int(19) } [2]=\u003e array(2) { [\"name\"]=\u003e string(5) \"tommy\" [\"age\"]=\u003e int(20) } } */ print_r($arr); /* Array ( [0] =\u003e Array ( [name] =\u003e Joker [age] =\u003e 18 ) [1] =\u003e Array ( [name] =\u003e desire [age] =\u003e 19 ) [2] =\u003e Array ( [name] =\u003e tommy [age] =\u003e 20 ) ) */ ä¸‰ç»´æ•°ç»„ \u003c?php $arr = [ [ 'name' =\u003e 'Joker', 'age' =\u003e 18, 'hobby' =\u003e [ 'çˆ¬å±±', 'è¯»ä¹¦', 'å¾’æ­¥' ] ], [ 'name' =\u003e 'desire', 'age' =\u003e 19, 'hobby' =\u003e [ 'ç¯®çƒ', 'æ”€å²©', 'æ¸¸æ³³' ] ], [ 'name' =\u003e 'tommy', 'age' =\u003e 20, 'hobby' =\u003e [ 'è¶³çƒ', 'æ½œæ°´', 'æ‘„å½±' ] ] ]; var_dump($arr); /* array(3) { [0]=\u003e array(3) { [\"name\"]=\u003e string(5) \"Joker\" [\"age\"]=\u003e int(18) [\"hobby\"]=\u003e array(3) { [0]=\u003e string(6) \"çˆ¬å±±\" [1]=\u003e string(6) \"è¯»ä¹¦\" [2]=\u003e string(6) \"å¾’æ­¥\" } } [1]=\u003e array(3) { [\"name\"]=\u003e string(6) \"desire\" [\"age\"]=\u003e int(19) [\"hobby\"]=\u003e array(3) { [0]=\u003e string(6) \"ç¯®çƒ\" [1]=\u003e string(6) \"æ”€å²©\" [2]=\u003e string(6) \"æ¸¸æ³³\" } } [2]=\u003e array(3) { [\"name\"]=\u003e string(5) \"tommy\" [\"age\"]=\u003e int(20) [\"hobby\"]=\u003e array(3) { [0]=\u003e string(6) \"è¶³çƒ\" [1]=\u003e string(6) \"æ½œæ°´\" [2]=\u003e string(6) \"æ‘„å½±\" } } } */ print_r($arr); /* Array ( [0] =\u003e Array ( [name] =\u003e Joker [age] =\u003e 18 [hobby] =\u003e Array ( [0] =\u003e çˆ¬å±± [1] =\u003e è¯»ä¹¦ [2] =\u003e å¾’æ­¥ ) ) [1] =\u003e Array ( [name] =\u003e desire [age] =\u003e 19 [hobby] =\u003e Array ( [0] =\u003e ç¯®çƒ [1] =\u003e æ”€å²© [2] =\u003e æ¸¸æ³³ ) ) [2] =\u003e Array ( [name] =\u003e tommy [age] =\u003e 20 [hobby] =\u003e Array ( [0] =\u003e è¶³çƒ [1] =\u003e æ½œæ°´ [2] =\u003e æ‘„å½± ) ) ) */ å¤šç»´æ•°ç»„è®¿é—® \u003c?php $arr = [ [ 'name' =\u003e 'Joker', 'age' =\u003e 18, 'hobby' =\u003e [ 'çˆ¬å±±', 'è¯»ä¹¦', 'å¾’æ­¥' ] ], [ 'name' =\u003e 'desire', 'age' =\u003e 19, 'hobby' =\u003e [ 'ç¯®çƒ', 'æ”€å²©', 'æ¸¸æ³³' ] ], [ 'name' =\u003e 'tommy', 'age' =\u003e 20, 'hobby' =\u003e [ 'è¶³çƒ', 'æ½œæ°´', 'æ‘„å½±' ] ] ]; echo $arr[0]['name'] . '----'; //Joker---- echo $arr[0]['age'] . '----'; //18---- echo $arr[0]['hobby'][0] . '----'; //çˆ¬å±±---- echo $arr[0]['hobby'][1] . '----'; //è¯»ä¹¦---- echo $arr[0]['hobby'][2] . '----'; //å¾’æ­¥---- ","date":"2023å¹´04æœˆ27æ—¥","objectID":"/2023/04/php%E5%85%A5%E9%97%A8/:7:2","tags":["PHP"],"title":"PHPå…¥é—¨","uri":"/2023/04/php%E5%85%A5%E9%97%A8/"},{"categories":["PHP"],"content":"2.5.3 phpæ•°ç»„å¾ªç¯ foreach \u003c?php $arr = [ 'Football' =\u003e 'è¶³çƒ', 'Basketball' =\u003e 'ç¯®çƒ', 'Volleyball' =\u003e 'æ’çƒ' ]; foreach ($arr as $v) { echo $v . \"\\n\"; } /* è¶³çƒ ç¯®çƒ æ’çƒ */ keyå’Œvalue \u003c?php $arr = [ 'Football' =\u003e 'è¶³çƒ', 'Basketball' =\u003e 'ç¯®çƒ', 'Volleyball' =\u003e 'æ’çƒ' ]; foreach ($arr as $k =\u003e $v) { echo $k . \"=\u003e\" . $v . \"\\n\"; } /* Football=\u003eè¶³çƒ Basketball=\u003eç¯®çƒ Volleyball=\u003eæ’çƒ */ $arr = array( 'è¶³çƒ', 'ç¯®çƒ', 'æ’çƒ' ); foreach ($arr as $k =\u003e $v) { echo $k . \"=\u003e\" . $v . \"\\n\"; } /* 0=\u003eè¶³çƒ 1=\u003eç¯®çƒ 2=\u003eæ’çƒ */ ","date":"2023å¹´04æœˆ27æ—¥","objectID":"/2023/04/php%E5%85%A5%E9%97%A8/:7:3","tags":["PHP"],"title":"PHPå…¥é—¨","uri":"/2023/04/php%E5%85%A5%E9%97%A8/"},{"categories":["PHP"],"content":"2.6 phpç‰¹æ®Šæ•°æ®ç±»å‹ ç±»å‹ æè¿° æ§åˆ¶ NULL è¡¨ç¤ºå˜é‡æ²¡æœ‰å€¼ resource èµ„æº ","date":"2023å¹´04æœˆ27æ—¥","objectID":"/2023/04/php%E5%85%A5%E9%97%A8/:8:0","tags":["PHP"],"title":"PHPå…¥é—¨","uri":"/2023/04/php%E5%85%A5%E9%97%A8/"},{"categories":["PHP"],"content":"2.6.1 NULL \u003c?php $null; var_dump($null); // NULL ä¼šæœ‰è­¦å‘Š:Warning: Undefined variable $null in /var/www/html/php8/DataType/Data.php on line 25 $null = \"\"; var_dump($null); //string(0) \"\" $null = null; var_dump($null); //NULL ","date":"2023å¹´04æœˆ27æ—¥","objectID":"/2023/04/php%E5%85%A5%E9%97%A8/:8:1","tags":["PHP"],"title":"PHPå…¥é—¨","uri":"/2023/04/php%E5%85%A5%E9%97%A8/"},{"categories":["PHP"],"content":"2.7 æ¡ä»¶åˆ¤æ–­ ","date":"2023å¹´04æœˆ27æ—¥","objectID":"/2023/04/php%E5%85%A5%E9%97%A8/:9:0","tags":["PHP"],"title":"PHPå…¥é—¨","uri":"/2023/04/php%E5%85%A5%E9%97%A8/"},{"categories":["PHP"],"content":"2.7.1 ä¸‰å…ƒè¿ç®—ç¬¦? : \u003c?php $name = 'Joker'; $res = $name ? \"æˆ‘æ˜¯$name\" : 'æˆ‘æ˜¯è°ï¼Ÿ'; var_dump($res); // string(11) \"æˆ‘æ˜¯Joker\" $name = ''; $res = $name ? \"æˆ‘æ˜¯$name\" : 'æˆ‘æ˜¯è°ï¼Ÿ'; var_dump($res); // string(12) \"æˆ‘æ˜¯è°ï¼Ÿ\" ","date":"2023å¹´04æœˆ27æ—¥","objectID":"/2023/04/php%E5%85%A5%E9%97%A8/:9:1","tags":["PHP"],"title":"PHPå…¥é—¨","uri":"/2023/04/php%E5%85%A5%E9%97%A8/"},{"categories":["PHP"],"content":"2.7.2 if \u003c?php $name = 'Joker'; if ($name) { echo \"æˆ‘æ˜¯$name\"; //æˆ‘æ˜¯Joker } ","date":"2023å¹´04æœˆ27æ—¥","objectID":"/2023/04/php%E5%85%A5%E9%97%A8/:9:2","tags":["PHP"],"title":"PHPå…¥é—¨","uri":"/2023/04/php%E5%85%A5%E9%97%A8/"},{"categories":["PHP"],"content":"2.7.3 if else \u003c?php $name = 'Joker'; if ($name) { echo \"æˆ‘æ˜¯$name\"; //æˆ‘æ˜¯Joker } else { echo \"æˆ‘æ˜¯è°ï¼Ÿ\"; } $name = ''; if ($name) { echo \"æˆ‘æ˜¯$name\"; } else { echo \"æˆ‘æ˜¯è°ï¼Ÿ\"; //æˆ‘æ˜¯è°ï¼Ÿ } ","date":"2023å¹´04æœˆ27æ—¥","objectID":"/2023/04/php%E5%85%A5%E9%97%A8/:9:3","tags":["PHP"],"title":"PHPå…¥é—¨","uri":"/2023/04/php%E5%85%A5%E9%97%A8/"},{"categories":["PHP"],"content":"2.7.4 if elseif else \u003c?php $score = 80; if ($score \u003e= 80) { echo \"è‰¯å¥½\"; // è‰¯å¥½ } elseif ($score \u003e= 60) { echo \"åŠæ ¼\"; } else { echo \"å·®\"; } ","date":"2023å¹´04æœˆ27æ—¥","objectID":"/2023/04/php%E5%85%A5%E9%97%A8/:9:4","tags":["PHP"],"title":"PHPå…¥é—¨","uri":"/2023/04/php%E5%85%A5%E9%97%A8/"},{"categories":["PHP"],"content":"2.7.5 switch case default \u003c?php $userID = 1; switch ($userID) { case 1: echo 'Joker'; case 2: echo 'Desire'; case 3: echo 'Tommy'; default: echo 'æœªçŸ¥'; } // ç»“æœï¼šJokerDesireTommyæœªçŸ¥ // å‡ºç°çš„é—®é¢˜ï¼Œä¼šæŠŠæ‰€æœ‰çš„æƒ…å†µæ•°æ®éƒ½æ‰“å°å‡ºæ¥ // è§£å†³ï¼šä½¿ç”¨breakåŒ¹é…åˆ°åè‡ªåŠ¨ç»“æŸæ‰ switch ($userID) { case 1: echo 'Joker'; // Joker break; case 2: echo 'Desire'; break; case 3: echo 'Tommy'; break; default: echo 'æœªçŸ¥'; break; } ","date":"2023å¹´04æœˆ27æ—¥","objectID":"/2023/04/php%E5%85%A5%E9%97%A8/:9:5","tags":["PHP"],"title":"PHPå…¥é—¨","uri":"/2023/04/php%E5%85%A5%E9%97%A8/"},{"categories":["PHP"],"content":"2.7.6 PHP8æ–°ç‰¹æ€§match \u003c?php $userID = 1003; echo match ($userID) { 1001 =\u003e 'Joker', 1002 =\u003e 'Desire', 1003 =\u003e 'Tommy' }; // Tommy $userID = 1004; echo match ($userID) { 1001 =\u003e 'Joker', 1002 =\u003e 'Desire', 1003 =\u003e 'Tommy', default =\u003e 'æœªçŸ¥' }; // æœªçŸ¥ ","date":"2023å¹´04æœˆ27æ—¥","objectID":"/2023/04/php%E5%85%A5%E9%97%A8/:9:6","tags":["PHP"],"title":"PHPå…¥é—¨","uri":"/2023/04/php%E5%85%A5%E9%97%A8/"},{"categories":["PHP"],"content":"2.7.7 switchå’Œmatchå¯¹æ¯” ","date":"2023å¹´04æœˆ27æ—¥","objectID":"/2023/04/php%E5%85%A5%E9%97%A8/:9:7","tags":["PHP"],"title":"PHPå…¥é—¨","uri":"/2023/04/php%E5%85%A5%E9%97%A8/"},{"categories":["PHP"],"content":"è¿ç®—ç¬¦ ","date":"2023å¹´04æœˆ27æ—¥","objectID":"/2023/04/php%E5%85%A5%E9%97%A8/:10:0","tags":["PHP"],"title":"PHPå…¥é—¨","uri":"/2023/04/php%E5%85%A5%E9%97%A8/"},{"categories":["PHP"],"content":"phpè¿ç®—ç¬¦ è¿ç®—ç¬¦ æè¿° +ã€-ã€*ã€/ åŠ å‡ä¹˜é™¤ % å–ä½™ ++ã€-- åŠ åŠ ã€å‡å‡ . è¿æ¥ï¼Œç”¨åœ¨å­—ç¬¦ä¸² \u003c?php var_dump(120 + 3); //int(123) var_dump(120 - 3); //int(117) var_dump(120 - 130); //int(-10) var_dump(120 * 3); //int(360) var_dump(120 / 7); //float(17.142857142857142) var_dump(120 % 7); //int(1) $num = 10; $num++; var_dump($num); //int(11) $num = 10; $num--; var_dump($num); //int(9) $num = 10; ++$num; var_dump($num); //int(11) $num = 10; --$num; var_dump($num); //int(9) // $a1 = 'Hello'; $a2 = 'World'; $num = 10; var_dump($a1 . $a2); //string(10) \"HelloWorld\" var_dump($a1 . $num);//string(7) \"Hello10\" ","date":"2023å¹´04æœˆ27æ—¥","objectID":"/2023/04/php%E5%85%A5%E9%97%A8/:10:1","tags":["PHP"],"title":"PHPå…¥é—¨","uri":"/2023/04/php%E5%85%A5%E9%97%A8/"},{"categories":["PHP"],"content":"phpèµ‹å€¼è¿ç®—ç¬¦ è¿ç®—ç¬¦ æè¿° = èµ‹å€¼è¿ç®—ç¬¦ += å…ˆåŠ å†èµ‹å€¼ -= å…ˆå‡åèµ‹å€¼ *= å…ˆä¹˜åèµ‹å€¼ /= å…ˆé™¤åèµ‹å€¼ %= å…ˆå–ä½™åèµ‹å€¼ .= å…ˆè¿æ¥åèµ‹å€¼ \u003c?php $count = 100; var_dump($count); //int(100) $count = 100; $count += 1; var_dump($count); //int(101) $count = 100; $count -= 1; var_dump($count); //int(99) $count = 100; $count *= 2; var_dump($count); //int(200) $count = 100; $count /= 3; var_dump($count); //float(33.333333333333336) $count = 100; $count %= 3; var_dump($count); //int(1) $count = 100; $count .= 3; var_dump($count); //string(4) \"1003\" ","date":"2023å¹´04æœˆ27æ—¥","objectID":"/2023/04/php%E5%85%A5%E9%97%A8/:10:2","tags":["PHP"],"title":"PHPå…¥é—¨","uri":"/2023/04/php%E5%85%A5%E9%97%A8/"},{"categories":["PHP"],"content":"phpæ¯”è¾ƒè¿ç®—ç¬¦ è¿ç®—ç¬¦ æè¿° \u003e å¤§äº \u003e= å¤§äºç­‰äº \u003c å°äº \u003c= å°äºç­‰äº == ç­‰äº != ä¸ç­‰äº === æ’ç­‰äº !== æ’ä¸ç­‰ \u003c?php // å¤§äº var_dump(100 \u003e 100); //bool(false) var_dump(100 \u003e 90); //bool(true) var_dump(100 \u003e 110); //bool(false) var_dump(true \u003e false); //bool(true) var_dump('php' \u003e 'php'); //bool(false) // å¤§äºç­‰äº var_dump(100 \u003e= 100); //bool(true) var_dump(100 \u003e= 90); //bool(true) var_dump(100 \u003e= 110); //bool(false) var_dump(true \u003e= false); //bool(true) var_dump('php' \u003e= 'php'); //bool(true) // å°äº var_dump(100 \u003c 100); //bool(false) var_dump(100 \u003c 90); //bool(false) var_dump(100 \u003c 110); //bool(true) var_dump(true \u003c false); //bool(false) var_dump('php' \u003c 'php'); //bool(false) // å°äºç­‰äº var_dump(100 \u003c= 100); //bool(true) var_dump(100 \u003c= 90); //bool(false) var_dump(100 \u003c= 110); //bool(true) var_dump(true \u003c= false); //bool(false) var_dump('php' \u003c= 'php'); //bool(true) // ç­‰äº var_dump(100 == 100); //bool(true) var_dump(true == true); //bool(true) var_dump('php' == 'php'); //bool(true) // ä¸ç­‰äº var_dump(100 != 100); //bool(false) var_dump(true != true); //bool(false) var_dump('php' != 'php'); //bool(false) // æ’ç­‰äº var_dump(100 === 100); //bool(true) var_dump(true === 'true'); //bool(false) // æ’ä¸ç­‰ var_dump(100 !== 100); //bool(false) var_dump(true !== 'true'); //bool(true) // php8æ–°ç‰¹æ€§ï¼šå­—ç¬¦ä¸²ä¸æ•°å­—çš„æ¯”è¾ƒ var_dump('ä¸­å›½' \u003e 100); //bool(true) var_dump('ä¸­å›½' == 100); //bool(false) ","date":"2023å¹´04æœˆ27æ—¥","objectID":"/2023/04/php%E5%85%A5%E9%97%A8/:10:3","tags":["PHP"],"title":"PHPå…¥é—¨","uri":"/2023/04/php%E5%85%A5%E9%97%A8/"},{"categories":["PHP"],"content":"phpé€»è¾‘è¿ç®—ç¬¦ è¿ç®—ç¬¦ æè¿° and å’Œ \u0026\u0026 ä¸ or å’Œ ` xor å¼‚æˆ– ! é \u003c?php // and å’Œ \u0026\u0026 // ä¸¤ä¸ªçœŸè¿”å›çœŸï¼Œæœ‰ä¸€ä¸ªå‡åˆ™è¿”å›å‡ var_dump(100 \u0026\u0026 30); //bool(true) var_dump(true \u0026\u0026 true); //bool(true) var_dump(true \u0026\u0026 false); //bool(false) var_dump(false \u0026\u0026 false); //bool(false) // or å’Œ || // ä¸€ä¸ªçœŸè¿”å›çœŸï¼Œä¸¤ä¸ªå‡è¿”å›å‡ var_dump(100 || 30); //bool(true) var_dump(true || true); //bool(true) var_dump(true || false); //bool(true) var_dump(false || false); //bool(false) // xor //ä¸€ä¸ªçœŸã€è¿”å›çœŸã€‚ä¸¤ä¸ªçœŸï¼Œè¿”å›å‡ã€‚ä¸¤ä¸ªå‡ï¼Œä¹Ÿè¿”å›å‡ã€‚ var_dump(0 xor 1); //bool(true) var_dump(true xor true); //bool(false) var_dump(true xor false); //bool(true) var_dump(false xor false); //bool(false) // ! // å–åï¼Œå¦‚æœæ˜¯çœŸï¼Œå°±æ˜¯å‡ã€‚å¦‚æœæ˜¯å‡ï¼Œå°±æ˜¯çœŸã€‚ var_dump(!0); //bool(true) var_dump(!true); //bool(false) var_dump(!false); //bool(true) var_dump(!1); //bool(false) ","date":"2023å¹´04æœˆ27æ—¥","objectID":"/2023/04/php%E5%85%A5%E9%97%A8/:10:4","tags":["PHP"],"title":"PHPå…¥é—¨","uri":"/2023/04/php%E5%85%A5%E9%97%A8/"},{"categories":["PHP"],"content":"å¾ªç¯ ","date":"2023å¹´04æœˆ27æ—¥","objectID":"/2023/04/php%E5%85%A5%E9%97%A8/:11:0","tags":["PHP"],"title":"PHPå…¥é—¨","uri":"/2023/04/php%E5%85%A5%E9%97%A8/"},{"categories":["PHP"],"content":"while \u003c?php // while $int = 1; while ($int \u003c 10) { var_dump($int); $int++; } /* int(1) int(2) int(3) int(4) int(5) int(6) int(7) int(8) int(9) */ ","date":"2023å¹´04æœˆ27æ—¥","objectID":"/2023/04/php%E5%85%A5%E9%97%A8/:11:1","tags":["PHP"],"title":"PHPå…¥é—¨","uri":"/2023/04/php%E5%85%A5%E9%97%A8/"},{"categories":["PHP"],"content":"do while \u003c?php // do while $int = 1; do { var_dump($int); } while ($int \u003c 1); /* int(1) */ ","date":"2023å¹´04æœˆ27æ—¥","objectID":"/2023/04/php%E5%85%A5%E9%97%A8/:11:2","tags":["PHP"],"title":"PHPå…¥é—¨","uri":"/2023/04/php%E5%85%A5%E9%97%A8/"},{"categories":["PHP"],"content":"for \u003c?php // for for ($int = 1; $int \u003c 10; $int++) { var_dump($int); } /* int(1) int(2) int(3) int(4) int(5) int(6) int(7) int(8) int(9) */ ","date":"2023å¹´04æœˆ27æ—¥","objectID":"/2023/04/php%E5%85%A5%E9%97%A8/:11:3","tags":["PHP"],"title":"PHPå…¥é—¨","uri":"/2023/04/php%E5%85%A5%E9%97%A8/"},{"categories":["PHP"],"content":"continue ç»“æŸå½“å‰å¾ªç¯ï¼Œè¿›å…¥ä¸‹æ¬¡å¾ªç¯ åœ¨å¾ªç¯è¯­å¥ä¸­ä½¿ç”¨ while for \u003c?php // continue for ($int = 1; $int \u003c 10; $int++) { if ($int % 2 == 0) { continue; } var_dump($int); } /* int(1) int(3) int(5) int(7) int(9) */ ","date":"2023å¹´04æœˆ27æ—¥","objectID":"/2023/04/php%E5%85%A5%E9%97%A8/:11:4","tags":["PHP"],"title":"PHPå…¥é—¨","uri":"/2023/04/php%E5%85%A5%E9%97%A8/"},{"categories":["PHP"],"content":"break ç»“æŸå¾ªç¯ åœ¨å¾ªç¯è¯­å¥ä¸­ä½¿ç”¨ while for switch å¯ä»¥è·³å‡ºå¤šå±‚å¾ªç¯ \u003c?php // break for ($int = 1; $int \u003c 10; $int++) { if ($int % 2 == 0) { var_dump($int); break; } } /* int(2) */ $score = 80; switch ($score) { case $score == 100: echo 'ç›¸å½“ä¼˜ç§€'; break; case $score \u003e= 80 \u0026\u0026 $score \u003c 100: echo 'ä¼˜ç§€'; break; case $score \u003e= 60 \u0026\u0026 $score \u003c 80: echo 'è‰¯å¥½'; break; case $score \u003c 60: echo 'ä¸åŠæ ¼'; break; default: echo 'å¾—åˆ†æœ‰è¯¯'; break; } ä¸‰ã€å‡½æ•° ","date":"2023å¹´04æœˆ27æ—¥","objectID":"/2023/04/php%E5%85%A5%E9%97%A8/:11:5","tags":["PHP"],"title":"PHPå…¥é—¨","uri":"/2023/04/php%E5%85%A5%E9%97%A8/"},{"categories":["PHP"],"content":"3.1 å‡½æ•°ä»‹ç» ","date":"2023å¹´04æœˆ27æ—¥","objectID":"/2023/04/php%E5%85%A5%E9%97%A8/:12:0","tags":["PHP"],"title":"PHPå…¥é—¨","uri":"/2023/04/php%E5%85%A5%E9%97%A8/"},{"categories":["PHP"],"content":"3.1.1 å‡½æ•°åˆ¤æ–­ \u003c?php // ç›´æ¥åˆ¤æ–­ä¸å­˜åœ¨çš„å˜é‡ï¼Œä¼šæœ‰è­¦å‘Šï¼ˆä¸ä¼šæŠ¥é”™ï¼‰ Warning: Undefined variable $name var_dump($name); //NULL if ($name) { echo \"æˆ‘æ˜¯$name\"; } else { echo \"æˆ‘æ˜¯è°ï¼Ÿ\"; } // ä½¿ç”¨issetå‡½æ•°åˆ¤æ–­ var_dump(isset($name)); //bool(false) if (isset($name)) { echo \"æˆ‘æ˜¯$name\"; } // ä½¿ç”¨emptyå‡½æ•°åˆ¤æ–­,Warning: Undefined variable $name var_dump(empty($name)); //bool(true) if (empty($name)) { echo \"æˆ‘æ˜¯$name\"; } ","date":"2023å¹´04æœˆ27æ—¥","objectID":"/2023/04/php%E5%85%A5%E9%97%A8/:12:1","tags":["PHP"],"title":"PHPå…¥é—¨","uri":"/2023/04/php%E5%85%A5%E9%97%A8/"},{"categories":["PHP"],"content":"3.1.2 å‡½æ•°çš„åˆ†ç±» æ ¹æ®å‡½æ•°çš„æä¾›è€…åˆ†ä¸ºä¸¤ç±»ï¼š ç³»ç»Ÿå‡½æ•°ï¼šç¼–å†™è¯­è¨€å¼€å‘è€…äº‹å…ˆå†™å¥½æä¾›ç»™å¼€å‘è€…ç›´æ¥æ˜¯ç”¨çš„ï¼ˆå†…ç½®å‡½æ•°ï¼‰ è‡ªå®šä¹‰å‡½æ•°ï¼šç”¨æˆ·æ ¹æ®è‡ªèº«éœ€æ±‚ï¼Œå¯¹ç³»ç»ŸåŠŸèƒ½è¿›è¡Œæ‰©å±• ","date":"2023å¹´04æœˆ27æ—¥","objectID":"/2023/04/php%E5%85%A5%E9%97%A8/:12:2","tags":["PHP"],"title":"PHPå…¥é—¨","uri":"/2023/04/php%E5%85%A5%E9%97%A8/"},{"categories":["PHP"],"content":"3.2 ç³»ç»Ÿå‡½æ•° PHPæ‹¥æœ‰è¶…è¿‡1000ä¸ªå†…ç½®å‡½æ•° å‡½æ•°é›†åˆå æè¿° String å­—ç¬¦ä¸²å¤„ç†å‡½æ•° Array æ•°ç»„å‡½æ•°å…è®¸è®¿é—®å’Œæ“ä½œæ•°ç»„ MySQLi å…è®¸è®¿é—®MySQLæ•°æ®åº“æœåŠ¡å™¨ Date æœåŠ¡å™¨ä¸Šè·å–æ—¥æœŸå’Œæ—¶é—´ Filesystem å…è®¸è®¿é—®å’Œæ“ä½œæ–‡ä»¶ç³»ç»Ÿ Mail æ•°å­¦å‡½æ•°èƒ½å¤„ç†integerå’ŒfloatèŒƒå›´å†…çš„å€¼ HTTP å…è®¸åœ¨å…¶ä»–è¾“å‡ºè¢«å‘é€ä¹‹å‰ï¼Œå¯¹ç”±webæœåŠ¡å™¨å‘é€åˆ°æµè§ˆå™¨çš„ä¿¡æ¯è¿›è¡Œæ“ä½œ Calendar æ—¥å†æ‰©å±•åŒ…æ‹¬äº†ç®€åŒ–ä¸åŒæ—¥å†æ ¼å¼é—´è½¬æ¢çš„å‡½æ•° Directory å…è®¸è·å¾—å…³äºç›®å½•åŠå…¶å†…å®¹çš„ä¿¡æ¯ Error å…è®¸å¯¹é”™è¯¯è¿›è¡Œå¤„ç†å’Œè®°å½• Filter è¿›è¡ŒéªŒè¯å’Œè¿‡æ»¤ FTP é€šè¿‡æ–‡ä»¶ä¼ è¾“åè®®(FTP)æä¾›å¯¹æ–‡ä»¶æœåŠ¡å™¨çš„å®¢æˆ·ç«¯è®¿é—® MySQL å…è®¸è®¿é—®MySQLæ•°æ®åº“æœåŠ¡å™¨ SimpleXML å…è®¸æŠŠXMLè½¬æ¢ä¸ºå¯¹è±¡ XML å…è®¸è§£æXMLæ–‡æ¡£ï¼Œä½†æ— æ³•å¯¹å…¶è¿›è¡ŒéªŒè¯ Zip å‹ç¼©æ–‡ä»¶å‡½æ•°å…è®¸è¯»å–å‹ç¼©æ–‡ä»¶ ","date":"2023å¹´04æœˆ27æ—¥","objectID":"/2023/04/php%E5%85%A5%E9%97%A8/:13:0","tags":["PHP"],"title":"PHPå…¥é—¨","uri":"/2023/04/php%E5%85%A5%E9%97%A8/"},{"categories":["PHP"],"content":"3.2.1 Stringå­—ç¬¦ä¸²å‡½æ•° å‡½æ•° æè¿° strtolower() å°†å­—ç¬¦ä¸²è½¬åŒ–ä¸ºå°å†™ strtoupper() å°†å­—ç¬¦ä¸²è½¬åŒ–ä¸ºå¤§å†™ strlen() è·å–å­—ç¬¦ä¸²é•¿åº¦ trim() å»é™¤å­—ç¬¦ä¸²é¦–å°¾å¤„çš„ç©ºç™½å­—ç¬¦ ltrim() å»é™¤å­—ç¬¦ä¸²å¼€å¤´å¤„çš„ç©ºç™½å­—ç¬¦ rtrim() å»é™¤å­—ç¬¦ä¸²ç»“å°¾å¤„çš„ç©ºç™½å­—ç¬¦ str_replace() å­—ç¬¦ä¸²æ›¿æ¢ strpbrk() å­—ç¬¦ä¸²ä¸­æŸ¥æ‰¾ä¸€ç»„å­—ç¬¦æ˜¯å¦å­˜åœ¨ explode() å°†å­—ç¬¦ä¸²åˆ†å‰²ä¸ºæ•°ç»„ md5() å°†å­—ç¬¦ä¸²è¿›è¡Œmd5åŠ å¯† \u003c?php $msg = \"Hello Worldï¼\"; // å°†å­—ç¬¦ä¸²è½¬åŒ–ä¸ºå°å†™ $msgLower = strtolower($msg); var_dump($msgLower); // string(14) \"hello worldï¼\" // å°†å­—ç¬¦ä¸²è½¬ä¸ºå¤§å†™ $msgUpper = strtoupper($msg); var_dump($msgUpper); //string(14) \"HELLO WORLDï¼\"s // è·å–å­—ç¬¦ä¸²é•¿åº¦ $msgLen = strlen($msg); var_dump($msgLen); //int(14) $msg = \" Hello World \"; var_dump($msg); //string(13) \" Hello World \" // å»é™¤å­—ç¬¦ä¸²é¦–å°¾å¤„çš„ç©ºç™½å­—ç¬¦ $msgTrim = trim($msg); var_dump($msgTrim); //string(11) \"Hello World\" $msgTrim = trim(\"Hello World!\", \"!\"); var_dump($msgTrim); //string(11) \"Hello World\" // å»é™¤å­—ç¬¦ä¸²å¼€å¤´çš„ç©ºç™½å­—ç¬¦ $msgLtrim = ltrim($msg); var_dump($msgLtrim); //string(12) \"Hello World \" // å»é™¤å­—ç¬¦ä¸²å°¾éƒ¨çš„ç©ºç™½å­—ç¬¦ $msgRtrim = rtrim($msg); var_dump($msgRtrim); //string(12) \" Hello World\" // å­—ç¬¦ä¸²æ›¿æ¢ $msg2 = str_replace(\"World\", \"PHP\", $msg); var_dump($msg2); //string(11) \" Hello PHP \" // å­—ç¬¦ä¸²ä¸­æŸ¥æ‰¾ä¸€ç»„å­—ç¬¦æ˜¯å¦å­˜åœ¨ $res = strpbrk(\"w\", $msg); var_dump($res); //bool(false) $res = strpbrk('ord', $msg); var_dump($res); //string(3) \"ord\" // å°†å­—ç¬¦ä¸²åˆ†å‰²æˆæ•°ç»„ $msgArr = explode(\",\", \"1,2,3,4\"); var_dump($msgArr); /* array(4) { [0]=\u003e string(1) \"1\" [1]=\u003e string(1) \"2\" [2]=\u003e string(1) \"3\" [3]=\u003e string(1) \"4\" } */ $msgMD5 = md5(\"æˆ‘çˆ±æˆ‘å®¶\"); var_dump($msgMD5); //string(32) \"b7e613a1cb13b29e4e63b9c596c1bb14\" ","date":"2023å¹´04æœˆ27æ—¥","objectID":"/2023/04/php%E5%85%A5%E9%97%A8/:13:1","tags":["PHP"],"title":"PHPå…¥é—¨","uri":"/2023/04/php%E5%85%A5%E9%97%A8/"},{"categories":["PHP"],"content":"3.2.2 Arrayæ•°ç»„å‡½æ•° å‡½æ•° æè¿° count() æ•°ç»„ä¸­å…ƒç´ çš„æ•°é‡ implode() æŠŠæ•°ç»„å…ƒç´ ç»„åˆä¸ºå­—ç¬¦ä¸² array_merge() ä¸¤ä¸ªæ•°ç»„åˆå¹¶ä¸ºä¸€ä¸ªæ•°ç»„ in_array() æ•°ç»„ä¸­æ˜¯å¦å­˜åœ¨æŒ‡å®šçš„å€¼ sort() å¯¹æ•°å€¼æ•°ç»„è¿›è¡Œå‡åºæ’åº rsort() å¯¹æ•°å€¼æ•°ç»„è¿›è¡Œé™åºæ’åº array_unique() ç§»é™¤æ•°ç»„ä¸­çš„é‡å¤çš„å€¼ array_push() å°†ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ æ’å…¥æ•°ç»„çš„æœ«å°¾ array_pop() åˆ é™¤æ•°ç»„ä¸­çš„æœ€åä¸€ä¸ªå…ƒç´  \u003c?php $arr = [ 'Joker', 'Desire', 'Tommy', 'Ann' ]; // æ•°ç»„ä¸­å…ƒç´ çš„æ•°é‡ $count = count($arr); var_dump($count); //int(4) // æŠŠæ•°ç»„å…ƒç´ ç»„åˆä¸ºå­—ç¬¦ä¸² $implode = implode($arr); var_dump($implode); //string(19) \"JokerDesireTommyAnn\" $implode = implode(', ', $arr); var_dump($implode); //string(25) \"Joker, Desire, Tommy, Ann\" // ä¸¤ä¸ªæ•°ç»„åˆå¹¶ä¸ºä¸€ä¸ªæ•°ç»„ $arr2 = [ 'Ming', 'Ning' ]; $arr3 = array_merge($arr, $arr2); var_dump($arr3); // æ•°ç»„ä¸­æ˜¯å¦å­˜åœ¨æŒ‡å®šçš„å€¼ $res = in_array(\"Desire\", $arr); var_dump($res); //bool(true) $res = in_array(\"Desire3\", $arr); var_dump($res); //bool(false) $arr = [1, 3, 4, 2, 23, 56, 14, 8, 9, 74, 3]; // å¯¹æ•°å€¼æ•°ç»„è¿›è¡Œå‡åºæ’åº sort($arr); print_r($arr); /* Array ( [0] =\u003e 1 [1] =\u003e 2 [2] =\u003e 3 [3] =\u003e 3 [4] =\u003e 4 [5] =\u003e 8 [6] =\u003e 9 [7] =\u003e 14 [8] =\u003e 23 [9] =\u003e 56 [10] =\u003e 74 ) */ rsort($arr); print_r($arr); /* Array ( [0] =\u003e 74 [1] =\u003e 56 [2] =\u003e 23 [3] =\u003e 14 [4] =\u003e 9 [5] =\u003e 8 [6] =\u003e 4 [7] =\u003e 3 [8] =\u003e 3 [9] =\u003e 2 [10] =\u003e 1 ) */ $arr = [1, 2, 2, 3, 2, 6, 5, 6, 45, 34, 1]; $arr1 = array_unique($arr); print_r($arr1); /* Array ( [0] =\u003e 1 [1] =\u003e 2 [3] =\u003e 3 [5] =\u003e 6 [6] =\u003e 5 [8] =\u003e 45 [9] =\u003e 34 ) */ $arr = ['Joker']; array_push($arr, 'desire', 'tommy'); print_r($arr); /* Array ( [0] =\u003e Joker [1] =\u003e desire [2] =\u003e tommy ) */ // åˆ é™¤æ•°ç»„ä¸­çš„æœ€åä¸€ä¸ªå…ƒç´  $arr = ['Joker', 'desire', 'tommy', 'Ann']; array_pop($arr); print_r($arr); /* Array ( [0] =\u003e Joker [1] =\u003e desire [2] =\u003e tommy ) */ ","date":"2023å¹´04æœˆ27æ—¥","objectID":"/2023/04/php%E5%85%A5%E9%97%A8/:13:2","tags":["PHP"],"title":"PHPå…¥é—¨","uri":"/2023/04/php%E5%85%A5%E9%97%A8/"},{"categories":["PHP"],"content":"3.3 è‡ªå®šä¹‰å‡½æ•° ","date":"2023å¹´04æœˆ27æ—¥","objectID":"/2023/04/php%E5%85%A5%E9%97%A8/:14:0","tags":["PHP"],"title":"PHPå…¥é—¨","uri":"/2023/04/php%E5%85%A5%E9%97%A8/"},{"categories":["PHP"],"content":"3.3.1 å‡½æ•°çš„åŸºæœ¬è¯­æ³• å¿…é¡»ä½¿ç”¨å…³é”®å­—: functionå£°æ˜ å‡½æ•°åç§°ä¸åŒºåˆ†å¤§å°å†™ function fun_name(å‚æ•°åˆ—è¡¨) { // å‡½æ•°ä½“ï¼Œå¯ä»¥ä¸ºç©º } ","date":"2023å¹´04æœˆ27æ—¥","objectID":"/2023/04/php%E5%85%A5%E9%97%A8/:14:1","tags":["PHP"],"title":"PHPå…¥é—¨","uri":"/2023/04/php%E5%85%A5%E9%97%A8/"},{"categories":["PHP"],"content":"3.3.2 è°ƒç”¨å‡½æ•° function func_name() { return 'a Function'; } // è°ƒç”¨å‡½æ•° $res = func_name(); var_dump($res); //\"a Function\" ","date":"2023å¹´04æœˆ27æ—¥","objectID":"/2023/04/php%E5%85%A5%E9%97%A8/:14:2","tags":["PHP"],"title":"PHPå…¥é—¨","uri":"/2023/04/php%E5%85%A5%E9%97%A8/"},{"categories":["PHP"],"content":"3.3.3 å‡½æ•°å‚æ•° æ–¹æ³•å‚æ•°å¯ä»¥æœ‰é»˜è®¤å€¼ function func_name2($name) { return \"æˆ‘æ˜¯$name\"; } var_dump(func_name2(\"Joker\")); // string(11) \"æˆ‘æ˜¯Joker\" function func_name3($name, $age = 18) { return \"æˆ‘æ˜¯{$name}, ä»Šå¹´{$age}å²!\"; } var_dump(func_name3(\"Joker\")); // string(25) \"æˆ‘æ˜¯Joker, ä»Šå¹´18å²!\" var_dump(func_name3(\"Joker\", 20)); // string(25) \"æˆ‘æ˜¯Joker, ä»Šå¹´20å²!\" ","date":"2023å¹´04æœˆ27æ—¥","objectID":"/2023/04/php%E5%85%A5%E9%97%A8/:14:3","tags":["PHP"],"title":"PHPå…¥é—¨","uri":"/2023/04/php%E5%85%A5%E9%97%A8/"},{"categories":["PHP"],"content":"3.3.4 ä½œç”¨åŸŸ phpä¸­ï¼Œåªæœ‰å‡½æ•°ä½œç”¨åŸŸå’Œå…¨å±€ä½œç”¨åŸŸ æ‰€æœ‰å‡½æ•°ä½œç”¨åŸŸçš„å˜é‡ï¼Œå¤–éƒ¨ä¸å¯è§ å…¨å±€ä½œç”¨åŸŸå£°æ˜å˜é‡ï¼Œåœ¨å‡½æ•°ä¸­æ˜¯å¯è§çš„ $num = 1; function func() { global $num; $num = $num + 1; return $num; } var_dump(func());//int(2) ","date":"2023å¹´04æœˆ27æ—¥","objectID":"/2023/04/php%E5%85%A5%E9%97%A8/:14:4","tags":["PHP"],"title":"PHPå…¥é—¨","uri":"/2023/04/php%E5%85%A5%E9%97%A8/"},{"categories":["PHP"],"content":"3.3.5 PHP8æ–°ç‰¹æ€§ï¼šå‘½åå‚æ•° function func2($a, $b = 0, $c = 0, $d = 0) { return $a . '--' . $b . '--' . $c . '--' . $d; } // php7 var_dump(func2(10, 20, 30, 40)); //string(14) \"10--20--30--40\" // php8 var_dump(func2(10, 20, d: 30, c: 40));//string(14) \"10--20--40--30\" å››ã€ç±»ä¸å¯¹è±¡ ç±»æ˜¯å…·æœ‰ç›¸åŒå±æ€§å’Œæ“ä½œçš„ä¸€ç»„å¯¹è±¡çš„é›†åˆ ","date":"2023å¹´04æœˆ27æ—¥","objectID":"/2023/04/php%E5%85%A5%E9%97%A8/:14:5","tags":["PHP"],"title":"PHPå…¥é—¨","uri":"/2023/04/php%E5%85%A5%E9%97%A8/"},{"categories":["PHP"],"content":"åˆ›å»ºç±» // åˆ›å»ºç±» class People { } ","date":"2023å¹´04æœˆ27æ—¥","objectID":"/2023/04/php%E5%85%A5%E9%97%A8/:15:0","tags":["PHP"],"title":"PHPå…¥é—¨","uri":"/2023/04/php%E5%85%A5%E9%97%A8/"},{"categories":["PHP"],"content":"åˆ›å»ºå¯¹è±¡ // è°ƒç”¨ç±»ï¼ˆå®ä¾‹åŒ–ç±»ï¼‰ $p1 = new People(); $p2 = new People(); $p3 = new People(); ","date":"2023å¹´04æœˆ27æ—¥","objectID":"/2023/04/php%E5%85%A5%E9%97%A8/:16:0","tags":["PHP"],"title":"PHPå…¥é—¨","uri":"/2023/04/php%E5%85%A5%E9%97%A8/"},{"categories":["PHP"],"content":"å¤åˆæ•°æ®ç±»å‹ ç±»å‹ æè¿° object å¯¹è±¡ // å¤åˆæ•°æ®ç±»å‹ï¼ˆobject å¯¹è±¡ï¼‰ var_dump($p1); //object(People)#1 (0) {} var_dump($p2); //object(People)#2 (0) {} var_dump($p3); //object(People)#3 (0) {} var_dump($p1 == $p2); //bool(true) var_dump($p1 == $p3); //bool(true) var_dump($p2 == $p3); //bool(true) var_dump($p1 === $p2); //bool(false) var_dump($p1 === $p3); //bool(false) var_dump($p2 === $p3); //bool(false) ","date":"2023å¹´04æœˆ27æ—¥","objectID":"/2023/04/php%E5%85%A5%E9%97%A8/:17:0","tags":["PHP"],"title":"PHPå…¥é—¨","uri":"/2023/04/php%E5%85%A5%E9%97%A8/"},{"categories":["PHP"],"content":"æˆå‘˜å˜é‡ æˆå‘˜å˜é‡ï¼šç±»å±æ€§ \u003c?php // åˆ›å»ºç±» class People { public $name = 'Joker'; public $job = 'IT'; } // è°ƒç”¨ç±»ï¼ˆå®ä¾‹åŒ–ç±»ï¼‰ $p1 = new People(); // è·å–ç±»å±æ€§ var_dump($p1-\u003ename); //string(5) \"Joker\" var_dump($p1-\u003ejob); //string(2) \"IT\" ","date":"2023å¹´04æœˆ27æ—¥","objectID":"/2023/04/php%E5%85%A5%E9%97%A8/:18:0","tags":["PHP"],"title":"PHPå…¥é—¨","uri":"/2023/04/php%E5%85%A5%E9%97%A8/"},{"categories":["PHP"],"content":"æˆå‘˜æ–¹æ³• \u003c?php // åˆ›å»ºç±» class People { public $name = 'Joker'; public $job = 'IT'; public function fun1() { echo 'æˆ‘æ˜¯Peopleçš„æ²¡æœ‰è¿”å›å€¼çš„fun1æ–¹æ³•ï¼'; } public function fun2() { return 'æˆ‘æ˜¯Peopleçš„æœ‰è¿”å›å€¼çš„fun2æ–¹æ³•ï¼'; } public function fun3() { // åœ¨ç±»ä¸­ä½¿ç”¨ä¼ªå˜é‡:â€œ$thisâ€å¼•ç”¨å½“å‰ç±»çš„æˆå‘˜å˜é‡ return 'fun3æ–¹æ³•è·å–ç±»å±æ€§ï¼Œname=\u003e' . $this-\u003ename . ' job=\u003e' . $this-\u003ejob; } public function fun4() { // åœ¨ç±»ä¸­ä½¿ç”¨ä¼ªå˜é‡:â€œ$thisâ€å¼•ç”¨å½“å‰ç±»çš„æˆå‘˜æ–¹æ³• return $this-\u003efun3(); } } // è°ƒç”¨ç±»ï¼ˆå®ä¾‹åŒ–ç±»ï¼‰ $p1 = new People(); $p1-\u003efun1(); //æˆ‘æ˜¯Peopleçš„æ²¡æœ‰è¿”å›å€¼çš„fun1æ–¹æ³•ï¼ var_dump($p1-\u003efun2()); //string(43) \"æˆ‘æ˜¯Peopleçš„æœ‰è¿”å›å€¼çš„fun2æ–¹æ³•ï¼\" var_dump($p1-\u003efun3()); //string(47) \"fun3æ–¹æ³•è·å–ç±»å±æ€§ï¼Œname=\u003eJoker job=\u003eIT\" var_dump($p1-\u003efun4()); //string(47) \"fun3æ–¹æ³•è·å–ç±»å±æ€§ï¼Œname=\u003eJoker job=\u003eIT\" ","date":"2023å¹´04æœˆ27æ—¥","objectID":"/2023/04/php%E5%85%A5%E9%97%A8/:19:0","tags":["PHP"],"title":"PHPå…¥é—¨","uri":"/2023/04/php%E5%85%A5%E9%97%A8/"},{"categories":["PHP"],"content":"é­”æœ¯æ–¹æ³• æ–¹æ³• æè¿° __construct æ„é€ æ–¹æ³• __destruct ææ„æ–¹æ³• __call åœ¨å¯¹è±¡ä¸­è°ƒç”¨ä¸€ä¸ªä¸å¯è®¿é—®æ–¹æ³•æ—¶è°ƒç”¨ __callStatic åœ¨é™æ€æ–¹å¼ä¸­è°ƒç”¨ä¸€ä¸ªä¸å¯è®¿é—®æ–¹æ³•æ—¶è°ƒç”¨ __get è·å¾—ä¸€ä¸ªç±»çš„æˆå‘˜å˜é‡æ—¶è°ƒç”¨ __set è®¾ç½®ä¸€ä¸ªç±»çš„æˆå‘˜å˜é‡æ—¶è°ƒç”¨ __isset å½“å¯¹ä¸å¯è®¿é—®å±æ€§è°ƒç”¨isset()æˆ–empty()æ—¶è°ƒç”¨ __unset å½“å¯¹ä¸å¯è®¿é—®å±æ€§è°ƒç”¨unset()æ—¶è¢«è°ƒç”¨ __sleep æ‰§è¡Œserialize()æ—¶ï¼Œå…ˆä¼šè°ƒç”¨è¿™ä¸ªå‡½æ•° __wakeup æ‰§è¡Œunserialize()æ—¶ï¼Œå…ˆä¼šè°ƒç”¨è¿™ä¸ªå‡½æ•° __toString ç±»è¢«å½“æˆå­—ç¬¦ä¸²æ—¶çš„å›åº”æ–¹æ³• __invoke è°ƒç”¨å‡½æ•°çš„æ–¹å¼è°ƒç”¨ä¸€ä¸ªå¯¹è±¡æ—¶çš„å›åº”æ–¹æ³• __set_state è°ƒç”¨var_export()å¯¼å‡ºç±»æ—¶ï¼Œæ­¤é™æ€æ–¹æ³•ä¼šè¢«è°ƒç”¨ __clone å½“å¯¹è±¡å¤åˆ¶å®Œæˆæ—¶è°ƒç”¨ __autoload å°è¯•åŠ è½½æœªå®šä¹‰çš„ç±» debugInfo æ‰“å°æ‰€éœ€è°ƒè¯•ä¿¡æ¯ \u003c?php // åˆ›å»ºç±» class People { public $name = 'Joker'; public $job = 'IT'; /** * æ„é€ æ–¹æ³• */ public function __construct($name, $job) { $this-\u003ename = $name; $this-\u003ejob = $job; } /** * ææ„æ–¹æ³• * å½“ç±»è°ƒç”¨æ‰§è¡Œå®Œæ¯•åè¢«æ‰§è¡Œ */ public function __destruct() { echo 'ç±»æ‰§è¡Œå®Œæ¯•ï¼Œè¦å…³é—­äº†'; } public function fun() { return \"å§“åï¼š{$this-\u003ename}, å·¥ä½œï¼š{$this-\u003ejob}\"; } } // è°ƒç”¨ç±»ï¼ˆå®ä¾‹åŒ–ç±»ï¼‰ $obj = new People('Desire', 'teacher'); var_dump($obj-\u003efun()); //string(33) \"å§“åï¼šDesire, å·¥ä½œï¼šteacher\" ","date":"2023å¹´04æœˆ27æ—¥","objectID":"/2023/04/php%E5%85%A5%E9%97%A8/:20:0","tags":["PHP"],"title":"PHPå…¥é—¨","uri":"/2023/04/php%E5%85%A5%E9%97%A8/"},{"categories":["PHP"],"content":"ç±»çš„ä¸‰å¤§ç‰¹æ€§ ç»§æ‰¿ï¼šå¯ä»¥è®©æŸä¸ªç±»å‹çš„å¯¹è±¡è·å¾—å¦ä¸€ä¸ªç±»å‹çš„å¯¹è±¡çš„å±æ€§å’Œæ–¹æ³• å°è£…ï¼šæŒ‡å°†å®¢è§‚äº‹ç‰©æŠ½è±¡æˆç±»ï¼Œæ¯ä¸ªç±»å¯¹è‡ªèº«çš„æ•°æ®å’Œæ–¹æ³•å®è¡Œä¿æŠ¤ å¤šæ€ï¼šæŒ‡åŒä¸€ä¸ªå®ä½“åŒæ—¶å…·æœ‰å¤šç§å½¢å¼ï¼Œå®ƒä¸»è¦ä½“ç°åœ¨ç±»çš„ç»§æ‰¿ä½“ç³»ä¸­ ","date":"2023å¹´04æœˆ27æ—¥","objectID":"/2023/04/php%E5%85%A5%E9%97%A8/:21:0","tags":["PHP"],"title":"PHPå…¥é—¨","uri":"/2023/04/php%E5%85%A5%E9%97%A8/"},{"categories":["PHP"],"content":"ç»§æ‰¿ extendså…³é”®è¯ç»§æ‰¿çˆ¶ç±» \u003c?php // åˆ›å»ºç±» class People { public $name = 'Joker'; public $job = 'IT'; /** * æ„é€ æ–¹æ³• */ public function __construct($name, $job) { $this-\u003ename = $name; $this-\u003ejob = $job; } /** * ææ„æ–¹æ³• * å½“ç±»è°ƒç”¨æ‰§è¡Œå®Œæ¯•åè¢«æ‰§è¡Œ */ public function __destruct() { echo 'ç±»æ‰§è¡Œå®Œæ¯•ï¼Œè¦å…³é—­äº†'; } public function fun() { return \"å§“åï¼š{$this-\u003ename}, å·¥ä½œï¼š{$this-\u003ejob}\"; } } // ç»§æ‰¿Peopleç±» class Teacher extends People { } // è°ƒç”¨ç±»ï¼ˆå®ä¾‹åŒ–ç±»ï¼‰ $obj = new Teacher('Desire', 'teacher'); var_dump($obj-\u003efun()); //string(33) \"å§“åï¼šDesire, å·¥ä½œï¼šteacher\" ","date":"2023å¹´04æœˆ27æ—¥","objectID":"/2023/04/php%E5%85%A5%E9%97%A8/:21:1","tags":["PHP"],"title":"PHPå…¥é—¨","uri":"/2023/04/php%E5%85%A5%E9%97%A8/"},{"categories":["PHP"],"content":"å°è£… public é»˜è®¤ï¼Œå…³é”®è¯å®šä¹‰ï¼Œç±»å†…ã€ç±»å¤–ã€å­ç±»éƒ½å¯è§ protected å…³é”®è¯å®šä¹‰ï¼Œç±»å†…ã€å­ç±»å¯è§ï¼Œç±»å¤–ä¸å¯è§ pricate å…³é”®è¯å®šä¹‰ï¼Œç±»å†…å¯è§ï¼Œå­ç±»ã€ç±»å¤–ä¸å¯è§ \u003c?php // åˆ›å»ºç±» class People { public $name; protected $job; //ç±»å†…ã€å­ç±»å¯è§ï¼Œç±»å¤–ä¸å¯è§ private $age; // ç±»å†…å¯è§ï¼Œå­ç±»ã€ç±»å¤–ä¸å¯è§ /** * æ„é€ æ–¹æ³• */ public function __construct($name, $job, $age) { $this-\u003ename = $name; $this-\u003ejob = $job; $this-\u003eage = $age; } public function fun() { return \"å§“åï¼š{$this-\u003ename}, å·¥ä½œï¼š{$this-\u003ejob}, å¹´é¾„ï¼š{$this-\u003eage}\"; } /** * `protected` å…³é”®è¯å®šä¹‰ï¼Œç±»å†…ã€å­ç±»å¯è§ï¼Œç±»å¤–ä¸å¯è§ */ protected function fun2() { return 'ç±»å†…ã€å­ç±»å¯è§ï¼Œç±»å¤–ä¸å¯è§'; } /** * `pricate` å…³é”®è¯å®šä¹‰ï¼Œç±»å†…å¯è§ï¼Œå­ç±»ã€ç±»å¤–ä¸å¯è§ */ private function fun3() { return 'ç±»å†…å¯è§ï¼Œå­ç±»ã€ç±»å¤–ä¸å¯è§'; } } // ç»§æ‰¿Peopleç±» class Teacher extends People { /** * åœ¨å­ç±»è°ƒç”¨è¢«protectedä¿®é¥°çš„æ–¹æ³•ï¼Œä¸å¯è°ƒç”¨Ã— */ public function tecFunc() { return $this-\u003efunc2(); } /** * åœ¨å­ç±»è°ƒç”¨è¢«privateä¿®é¥°çš„æ–¹æ³•ï¼Œä¸å¯è°ƒç”¨Ã— */ public function tecFunc2() { return $this-\u003efun3(); } public function getName() { return $this-\u003ename; } /** * åœ¨å­ç±»ä¸­è°ƒç”¨è¢«protectedä¿®é¥°çš„ç±»å±æ€§ï¼Œå¯è°ƒç”¨âˆš */ public function getJob() { return $this-\u003ejob; } /** * åœ¨å­ç±»ä¸­è°ƒç”¨è¢«privateä¿®é¥°çš„ç±»å±æ€§ï¼Œä¸å¯è°ƒç”¨Ã— */ public function getAge() { return $this-\u003eage; } } // è°ƒç”¨ç±»ï¼ˆå®ä¾‹åŒ–ç±»ï¼‰ $obj = new People('Desire', 'teacher', 19); var_dump($obj-\u003efun()); //string(33) \"å§“åï¼šDesire, å·¥ä½œï¼šteacher\" // è®¿é—®è¢«privateå®šä¹‰çš„ç±»å±æ€§ï¼Œä¸å¯è®¿é—® // Fatal error: Uncaught Error: Cannot access private property People::$age // var_dump($obj-\u003eage); // è®¿é—®è¢«protectedå®šä¹‰çš„ç±»å±æ€§ï¼Œä¸å¯è®¿é—® // Fatal error: Uncaught Error: Cannot access protected property People::$job // var_dump($obj-\u003ejob); // è®¿é—®è¢«protectedå®šä¹‰çš„ç±»æ–¹æ³•ï¼Œä¸å¯è®¿é—® // Fatal error: Uncaught Error: Call to protected method People::fun2() from global scope in // var_dump($obj-\u003efun2()); // è®¿é—®è¢«privateå®šä¹‰çš„ç±»æ–¹æ³•ï¼Œä¸å¯è®¿é—® //Fatal error: Uncaught Error: Call to private method People::fun3() from global scope in // var_dump($obj-\u003efun3()); // è°ƒç”¨å­ç±» $p1 = new Teacher('Joker', 'Teacher', 19); var_dump($p1-\u003etecFunc()); // var_dump($p1-\u003etecFunc2()); // var_dump($p1-\u003egetName()); var_dump($p1-\u003egetJob()); // string(7) \"Teacher\" // var_dump($p1-\u003egetAge()); ","date":"2023å¹´04æœˆ27æ—¥","objectID":"/2023/04/php%E5%85%A5%E9%97%A8/:21:2","tags":["PHP"],"title":"PHPå…¥é—¨","uri":"/2023/04/php%E5%85%A5%E9%97%A8/"},{"categories":["PHP"],"content":"å¤šæ€ å®ç°å¤šæ€çš„å‰ææ˜¯è¦å…ˆç»§æ‰¿å†é‡å†™çˆ¶ç±»æ–¹æ³• \u003c?php // åˆ›å»ºç±» class People { public $name; protected $job; //ç±»å†…ã€å­ç±»å¯è§ï¼Œç±»å¤–ä¸å¯è§ private $age; // ç±»å†…å¯è§ï¼Œå­ç±»ã€ç±»å¤–ä¸å¯è§ /** * æ„é€ æ–¹æ³• */ public function __construct($name, $job, $age) { $this-\u003ename = $name; $this-\u003ejob = $job; $this-\u003eage = $age; } public function fun() { return \"å§“åï¼š{$this-\u003ename}, å·¥ä½œï¼š{$this-\u003ejob}, å¹´é¾„ï¼š{$this-\u003eage}\"; } /** * `protected` å…³é”®è¯å®šä¹‰ï¼Œç±»å†…ã€å­ç±»å¯è§ï¼Œç±»å¤–ä¸å¯è§ */ protected function fun2() { return 'ç±»å†…ã€å­ç±»å¯è§ï¼Œç±»å¤–ä¸å¯è§'; } /** * `pricate` å…³é”®è¯å®šä¹‰ï¼Œç±»å†…å¯è§ï¼Œå­ç±»ã€ç±»å¤–ä¸å¯è§ */ private function fun3() { return 'ç±»å†…å¯è§ï¼Œå­ç±»ã€ç±»å¤–ä¸å¯è§'; } } class Student extends People { /** * é€šè¿‡é‡å†™çˆ¶ç±»æ–¹æ³•å®ç°å¤šæ€ */ public function fun() { return 'é‡å†™äº†çˆ¶ç±»çš„æ–¹æ³•'; } } $stu = new Student('Tommy', 'student', 16); var_dump($stu-\u003efun()); //string(24) \"é‡å†™äº†çˆ¶ç±»çš„æ–¹æ³•\" ","date":"2023å¹´04æœˆ27æ—¥","objectID":"/2023/04/php%E5%85%A5%E9%97%A8/:21:3","tags":["PHP"],"title":"PHPå…¥é—¨","uri":"/2023/04/php%E5%85%A5%E9%97%A8/"},{"categories":["PHP"],"content":"é™æ€æˆå‘˜ static å…³é”®è¯å®šä¹‰é™æ€æˆå‘˜ \u003c?php class Teacher { public static $name; public static $school; public static $gongfu = 'PHP'; public function fun() { echo 'æ™®é€šæˆå‘˜æ–¹æ³•' . PHP_EOL; } /** * å®šä¹‰é™æ€æ–¹æ³• * è·å–ç±»é™æ€å±æ€§ï¼Œåº”è¯¥ä½¿ç”¨ :: è¿›è¡Œè·å–ï¼Œé™æ€æ–¹æ³•åªèƒ½è·å–é™æ€å±æ€§ */ public static function fun2() { return 'å§“åï¼š' . Teacher::$name . ', å­¦æ ¡ï¼š' . Teacher::$school . PHP_EOL; } } // è·å–é™æ€å±æ€§ echo Teacher::$gongfu . PHP_EOL; //PHP // è·å–é™æ€æ–¹æ³• echo Teacher::fun2(); //å§“åï¼š, å­¦æ ¡ï¼š // å¯ä»¥ä¿®æ”¹é™æ€å±æ€§å€¼ Teacher::$name = 'Joker'; Teacher::$school = 'å®¶é‡Œè¹²å¤§å­¦'; echo Teacher::fun2(); //å§“åï¼šJoker, å­¦æ ¡ï¼šå®¶é‡Œè¹²å¤§å­¦ ","date":"2023å¹´04æœˆ27æ—¥","objectID":"/2023/04/php%E5%85%A5%E9%97%A8/:22:0","tags":["PHP"],"title":"PHPå…¥é—¨","uri":"/2023/04/php%E5%85%A5%E9%97%A8/"},{"categories":["PHP"],"content":"æŠ½è±¡ç±» abstract å…³é”®è¯å®šä¹‰æŠ½è±¡æ–¹æ³•/æŠ½è±¡ç±» \u003c?php abstract class People { public function fun() { return \"æ™®é€šæ–¹æ³•\" . PHP_EOL; } abstract public function fun2(); } // æŠ½è±¡ç±»ä¸å¯è¢«å®ä¾‹åŒ–ï¼Œåªèƒ½è¢«ç»§æ‰¿ // new People(); class Student extends People { public function fun2() { return \"ç»§æ‰¿æŠ½è±¡ç±»ï¼Œå¹¶å®ç°æŠ½è±¡æ–¹æ³•\" . PHP_EOL; } } $stu = new Student(); // è°ƒç”¨æŠ½è±¡ç±»çš„æ™®é€šæ–¹æ³• echo $stu-\u003efun(); //æ™®é€šæ–¹æ³• // è°ƒç”¨å­ç±»å®ç°çš„æŠ½è±¡ç±»çš„æŠ½è±¡æ–¹æ³• echo $stu-\u003efun2(); //ç»§æ‰¿æŠ½è±¡ç±»ï¼Œå¹¶å®ç°æŠ½è±¡æ–¹æ³• ","date":"2023å¹´04æœˆ27æ—¥","objectID":"/2023/04/php%E5%85%A5%E9%97%A8/:23:0","tags":["PHP"],"title":"PHPå…¥é—¨","uri":"/2023/04/php%E5%85%A5%E9%97%A8/"},{"categories":["PHP"],"content":"æ¥å£ interface å…³é”®è¯åˆ›å»ºæ¥å£ã€‚è¦æ±‚ç±»å¿…é¡»å®ç°çš„æ–¹æ³•ï¼Œä½†ä¸éœ€è¦å®šä¹‰æ–¹æ³•çš„å…·ä½“å®ç°è¿‡ç¨‹ã€‚ implements å…³é”®è¯ä½¿ç”¨æ¥å£ã€‚ \u003c?php interface file { public function fly(); public function run(); } class Cat implements file { /** * å®ç°æ¥å£æ–¹æ³• */ function fly() { echo 'é£èµ·æ¥äº†!' . PHP_EOL; } /** * å®ç°æ¥å£æ–¹æ³• */ function run() { echo 'è·‘èµ·æ¥äº†ï¼' . PHP_EOL; } } $cat = new Cat(); $cat-\u003efly(); //é£èµ·æ¥äº†! $cat-\u003erun(); //è·‘èµ·æ¥äº†ï¼ ","date":"2023å¹´04æœˆ27æ—¥","objectID":"/2023/04/php%E5%85%A5%E9%97%A8/:24:0","tags":["PHP"],"title":"PHPå…¥é—¨","uri":"/2023/04/php%E5%85%A5%E9%97%A8/"},{"categories":["PHP"],"content":"æ¥å£å¸¸é‡ conståˆ›å»ºå¸¸é‡ interface config { // ä½¿ç”¨constå®šä¹‰å¸¸é‡ const HOST = 'localhost'; const PORT = 3306; const USER = 'root'; const PWD = 'root'; } class DBConn implements config { private $host = config::HOST; private $port = config::PORT; private $user = config::USER; private $pwd = config::PWD; function database() { return \"mysql -P {$this-\u003eport} -h {$this-\u003ehost} -u {$this-\u003euser} -p {$this-\u003epwd} \" . PHP_EOL; } } $db = new DBConn(); echo $db-\u003edatabase(); //mysql -P 3306 -h localhost -u root -p root ","date":"2023å¹´04æœˆ27æ—¥","objectID":"/2023/04/php%E5%85%A5%E9%97%A8/:25:0","tags":["PHP"],"title":"PHPå…¥é—¨","uri":"/2023/04/php%E5%85%A5%E9%97%A8/"},{"categories":["PHP"],"content":"å¸¸é‡ \u003c?php // åˆ›å»ºå¸¸é‡ // æ–¹å¼ä¸€ define() define('HOST', '127.0.0.1'); echo HOST; // 127.0.0.1 // æ–¹å¼äºŒ const const NAME = 'PHP'; echo NAME; // PHP ","date":"2023å¹´04æœˆ27æ—¥","objectID":"/2023/04/php%E5%85%A5%E9%97%A8/:26:0","tags":["PHP"],"title":"PHPå…¥é—¨","uri":"/2023/04/php%E5%85%A5%E9%97%A8/"},{"categories":["PHP"],"content":"å…³é”®è¯ å…³é”®è¯ ç±»å¤–å£°æ˜ å£°æ˜ç±» å£°æ˜å±æ€§ å£°æ˜æ–¹æ³• è§£é‡Š const âˆš âˆš å®šä¹‰ç±»å¸¸é‡ extends âˆš æ‰©å±•ç±»ï¼Œç”¨ä¸€ä¸ªç±»å»æ‰©å±•å®ƒçš„çˆ¶ç±» public âˆš âˆš å…¬ç”¨å±æ€§æˆ–æ–¹æ³• protected âˆš âˆš ç§æœ‰å±æ€§æˆ–æ–¹æ³• pricate âˆš âˆš å—ä¿æŠ¤çš„å±æ€§æˆ–æ–¹æ³• static âˆš âˆš âˆš é™æ€æˆå‘˜ abstract âˆš âˆš æŠ½è±¡ç±»æˆ–æ–¹æ³• interface âˆš åˆ›å»ºæ¥å£ implements âˆš å®ç°æ¥å£ final âˆš âˆš ç±»ä¸èƒ½è¢«ç»§æ‰¿ parent:: è®¿é—®çˆ¶ç±» $this-\u003e è®¿é—®æœ¬ç±» self:: è®¿é—®æœ¬ç±»é™æ€ namespace âˆš åˆ›å»ºå‘½åç©ºé—´ ","date":"2023å¹´04æœˆ27æ—¥","objectID":"/2023/04/php%E5%85%A5%E9%97%A8/:27:0","tags":["PHP"],"title":"PHPå…¥é—¨","uri":"/2023/04/php%E5%85%A5%E9%97%A8/"},{"categories":["PHP"],"content":"finalç±»ä¸èƒ½è¢«ç»§æ‰¿ \u003c?php final class People { public string $name; public int $age; // æ„é€ æ–¹æ³• public function __construct($name, $age) { $this-\u003ename = $name; $this-\u003eage = $age; } /** * @return string */ public function func(): string { return \"å§“åï¼š{$this-\u003ename}, å¹´é¾„ï¼š{$this-\u003eage}\"; } } // å­ç±»ç»§æ‰¿è¢«finalå®šä¹‰çš„çˆ¶ç±» class Student extends People { } $student = new Student('Joker', 19); echo $student-\u003efunc(); // æ‰§è¡ŒæŠ¥é”™ï¼šFatal error: Class Student cannot extend final class ","date":"2023å¹´04æœˆ27æ—¥","objectID":"/2023/04/php%E5%85%A5%E9%97%A8/:27:1","tags":["PHP"],"title":"PHPå…¥é—¨","uri":"/2023/04/php%E5%85%A5%E9%97%A8/"},{"categories":["PHP"],"content":"parent:: è®¿é—®çˆ¶ç±» \u003c?php class People { public string $name; public int $age; // æ„é€ æ–¹æ³• public function __construct($name, $age) { $this-\u003ename = $name; $this-\u003eage = $age; } /** * @return string */ public function func(): string { return \"å§“åï¼š{$this-\u003ename}, å¹´é¾„ï¼š{$this-\u003eage}\"; } } class Student extends People { /** * é‡å†™çˆ¶ç±»çš„æ–¹æ³•ï¼Œå¹¶ä¸”è°ƒç”¨çˆ¶ç±»çš„æ­¤æ–¹æ³• * @return string */ public function func(): string { return parent::func(); } } $student = new Student('Joker', 19); echo $student-\u003efunc(); // å§“åï¼šJoker, å¹´é¾„ï¼š19 ","date":"2023å¹´04æœˆ27æ—¥","objectID":"/2023/04/php%E5%85%A5%E9%97%A8/:27:2","tags":["PHP"],"title":"PHPå…¥é—¨","uri":"/2023/04/php%E5%85%A5%E9%97%A8/"},{"categories":["PHP"],"content":"å‘½åç©ºé—´ å‘½åç©ºé—´ï¼šè§£å†³å…¨å±€æˆå‘˜çš„å‘½åå†²çªé—®é¢˜ï¼Œå€Ÿé‰´äº†æ–‡ä»¶ç›®å½•çš„æ€æƒ³ ç©ºé—´ï¼šåŒä¸€ç©ºé—´å†…ä¸å…è®¸æˆå‘˜é‡åï¼Œä½†ä¸åŒç©ºé—´å†…ï¼Œå…è®¸åŒåæˆå‘˜å­˜åœ¨ ","date":"2023å¹´04æœˆ27æ—¥","objectID":"/2023/04/php%E5%85%A5%E9%97%A8/:28:0","tags":["PHP"],"title":"PHPå…¥é—¨","uri":"/2023/04/php%E5%85%A5%E9%97%A8/"},{"categories":["PHP"],"content":"åˆ›å»ºå‘½åç©ºé—´ å‘½åç©ºé—´ä½¿ç”¨ namespace å…³é”®å­—å£°æ˜ // ---- æ–¹å¼ä¸€ \u003c?php namespace one { function php() { } } // ---- æ–¹å¼äºŒ \u003c?php namespace space; class demo { } ","date":"2023å¹´04æœˆ27æ—¥","objectID":"/2023/04/php%E5%85%A5%E9%97%A8/:28:1","tags":["PHP"],"title":"PHPå…¥é—¨","uri":"/2023/04/php%E5%85%A5%E9%97%A8/"},{"categories":["PHP"],"content":"å­å‘½åç©ºé—´ \u003c?php namespace one { const NAME = 'one å‘½åç©ºé—´'; function php(): string { return 'å‘½åç©ºé—´oneå®šä¹‰çš„å‡½æ•°'; } } namespace one\\two { function php(): string { return 'oneå­å‘½åç©ºé—´twoå®šä¹‰çš„å‡½æ•°'; } } ","date":"2023å¹´04æœˆ27æ—¥","objectID":"/2023/04/php%E5%85%A5%E9%97%A8/:28:2","tags":["PHP"],"title":"PHPå…¥é—¨","uri":"/2023/04/php%E5%85%A5%E9%97%A8/"},{"categories":["PHP"],"content":"è®¿é—®å‘½åç©ºé—´ use å…³é”®è¯å¼•ç”¨å‘½åç©ºé—´ AS è§£å†³ç±»åè¿‡é•¿ã€é‡åé—®é¢˜ \u003c?php namespace one { const NAME = 'one å‘½åç©ºé—´'; } namespace one\\two { const NAME = 'one\\two å‘½åç©ºé—´'; } namespace two\\one { const NAME = 'two\\one å‘½åç©ºé—´'; } namespace three\\one { const NAME = 'three\\one å‘½åç©ºé—´'; } namespace main { use one; use one\\two; use two\\one as to; use three\\one as tho; echo one\\NAME . PHP_EOL; // one å‘½åç©ºé—´ echo two\\NAME . PHP_EOL; // one\\two å‘½åç©ºé—´ echo to\\NAME . PHP_EOL; // two\\one å‘½åç©ºé—´ echo tho\\NAME . PHP_EOL; // three\\one å‘½åç©ºé—´ } ","date":"2023å¹´04æœˆ27æ—¥","objectID":"/2023/04/php%E5%85%A5%E9%97%A8/:28:3","tags":["PHP"],"title":"PHPå…¥é—¨","uri":"/2023/04/php%E5%85%A5%E9%97%A8/"},{"categories":["è¸©å‘è®°å½•"],"content":"éœ€æ±‚ é€šè¿‡Sqlalchemy ORMè¿›è¡Œæ–°å¢æ•°æ®ï¼Œæœ‰ä¸ªæ–°çš„éœ€æ±‚æ˜¯ï¼šæ–°å¢æ•°æ®åï¼Œéœ€è¦è·å–åˆ°å½“å‰æ•°æ®è‡ªåŠ¨é€’å¢çš„IDã€‚ ","date":"2023å¹´03æœˆ27æ—¥","objectID":"/2023/03/4/:1:0","tags":["Python","sqlalchemy"],"title":"sqlalchemyæ–°å¢æ•°æ®åè·å–é€’å¢IDæŠ¥é”™è§£å†³","uri":"/2023/03/4/"},{"categories":["è¸©å‘è®°å½•"],"content":"å¤„ç† é€šè¿‡sqlacodegenç”ŸæˆModelæ–‡ä»¶ class DailyStatistic(ModelDB2): __tablename__ = 'daily_statistics' id = Column(INTEGER(11), primary_key=True, nullable=False) ... ç¼–å†™æ–°å¢é€»è¾‘ä»£ç  ef add_by_schemas(db: Session, param: DailyStatisticSchemas): daily = DailyStatistic(**dict(param)) db.add(daily) db.commit() # åœ¨commitåï¼Œæ¨¡å‹å¯¹è±¡ä¼šè‡ªåŠ¨è¡¥å……é€’å¢çš„IDï¼Œæ•…å¯ä»¥ç›´æ¥ä½¿ç”¨.idè·å–é€’å¢çš„ID return daily.id ","date":"2023å¹´03æœˆ27æ—¥","objectID":"/2023/03/4/:2:0","tags":["Python","sqlalchemy"],"title":"sqlalchemyæ–°å¢æ•°æ®åè·å–é€’å¢IDæŠ¥é”™è§£å†³","uri":"/2023/03/4/"},{"categories":["è¸©å‘è®°å½•"],"content":"è¿è¡ŒæŠ¥é”™äº†ğŸ˜± ```bash sqlalchemy.orm.exc.ObjectDeletedError: Instance '\u003cDailyStatistic at 0x1376a7b20\u003e' has been deleted, or its row is otherwise not present. ``` æ€ä¹ˆä¼šæç¤ºæ²¡æœ‰è¿™ä¸ªå±æ€§å‘¢ï¼Ÿæˆ‘ä¸æå§ğŸ˜· ","date":"2023å¹´03æœˆ27æ—¥","objectID":"/2023/03/4/:2:1","tags":["Python","sqlalchemy"],"title":"sqlalchemyæ–°å¢æ•°æ®åè·å–é€’å¢IDæŠ¥é”™è§£å†³","uri":"/2023/03/4/"},{"categories":["è¸©å‘è®°å½•"],"content":"æ’æŸ¥é—®é¢˜ æŸ¥çœ‹æ•°æ®è¡¨æ˜¯å¦æ˜¯è‡ªå¢ID CREATE TABLE `daily_statistics` ( `id` int(11) NOT NULL AUTO_INCREMENT, ... ) ENGINE=InnoDB AUTO_INCREMENT=10 DEFAULT CHARSET=latin1 COMMENT='æ—¥æŠ¥ç»Ÿè®¡è¡¨'; æŸ¥çœ‹sqlacodegenç”Ÿæˆçš„Modelæ–‡ä»¶ class DailyStatistic(ModelDB2): __tablename__ = 'daily_statistics' id = Column(INTEGER(11), primary_key=True, nullable=False) ... æ¯”å¯¹ä¸ä¸€æ ·çš„åœ°æ–¹ æ¯”å¯¹å‘ç°ï¼Œåœ¨sqlacodegenç”Ÿæˆçš„Modelæ–‡ä»¶ä¸­ï¼Œå¹¶æ²¡æœ‰è‡ªåŠ¨é€’å¢çš„å±æ€§é…ç½® ","date":"2023å¹´03æœˆ27æ—¥","objectID":"/2023/03/4/:2:2","tags":["Python","sqlalchemy"],"title":"sqlalchemyæ–°å¢æ•°æ®åè·å–é€’å¢IDæŠ¥é”™è§£å†³","uri":"/2023/03/4/"},{"categories":["è¸©å‘è®°å½•"],"content":"è§£å†³é—®é¢˜ æ›´æ”¹è‡ªåŠ¨ç”Ÿæˆçš„Modelæ–‡ä»¶IDå±æ€§ï¼Œå¢åŠ autoincrement=Trueé…ç½® class DailyStatistic(ModelDB2): __tablename__ = 'daily_statistics' id = Column(INTEGER(11), primary_key=True, nullable=False, autoincrement=True, comment='ä¸»é”®id') æ›´æ”¹åï¼Œå†æ¬¡è¿›è¡Œæ·»åŠ ï¼Œæ— æŠ¥é”™âœŒï¸ ","date":"2023å¹´03æœˆ27æ—¥","objectID":"/2023/03/4/:2:3","tags":["Python","sqlalchemy"],"title":"sqlalchemyæ–°å¢æ•°æ®åè·å–é€’å¢IDæŠ¥é”™è§£å†³","uri":"/2023/03/4/"},{"categories":["è¸©å‘è®°å½•"],"content":"æ€»ç»“ ä¸èƒ½å®Œå…¨ç›¸ä¿¡è‡ªåŠ¨ç”Ÿæˆçš„Modelæ–‡ä»¶ å†å¤„ç†è·å–è‡ªå¢å­—æ®µæ—¶ï¼Œè¦ä¼˜å…ˆæ£€æŸ¥ä¸‹Modelæ–‡ä»¶æ˜¯å¦æœ‰autoincrement=Trueé…ç½® ","date":"2023å¹´03æœˆ27æ—¥","objectID":"/2023/03/4/:3:0","tags":["Python","sqlalchemy"],"title":"sqlalchemyæ–°å¢æ•°æ®åè·å–é€’å¢IDæŠ¥é”™è§£å†³","uri":"/2023/03/4/"},{"categories":["çˆ¬è™«","Python"],"content":"èƒŒæ™¯ ","date":"2023å¹´03æœˆ24æ—¥","objectID":"/2023/03/%E4%BD%BF%E7%94%A8mixin%E6%A8%A1%E5%BC%8F%E9%85%8D%E7%BD%AEscrapy%E6%97%A5%E5%BF%97%E8%BE%93%E5%87%BA/:1:0","tags":["çˆ¬è™«","Python"],"title":"ä½¿ç”¨Mixinæ¨¡å¼é…ç½®Scrapyæ—¥å¿—è¾“å‡º","uri":"/2023/03/%E4%BD%BF%E7%94%A8mixin%E6%A8%A1%E5%BC%8F%E9%85%8D%E7%BD%AEscrapy%E6%97%A5%E5%BF%97%E8%BE%93%E5%87%BA/"},{"categories":["çˆ¬è™«","Python"],"content":"ä¸ºä»€ä¹ˆè¦é‡æ–°é…ç½®Scrapyæ—¥å¿—è¾“å‡º åœ¨ä½¿ç”¨kafkaè¿›è¡Œå¤„ç†çˆ¬è™«æ•°æ®åå‡ºç°äº†ä¸€ç§ç°è±¡ï¼šæ—¥å¿—æ‰“å°ä¼šå°†æ•´ä¸ªitemæ•°æ®æ‰“å°å‡ºï¼Œç”±äºä½¿ç”¨kafkaå¤„ç†æ•°æ®ï¼Œéƒ½æ˜¯å°†æ•´ä¸ªé¡µé¢æ•°æ®è¿›è¡Œå­˜å…¥itemçš„ï¼Œæ¯å¤©çš„æ—¥å¿—éƒ½å°†å å¾ˆå¤§çš„å†…å­˜ç©ºé—´ã€‚ä¹‹å‰çš„åšæ³•æ˜¯æé«˜æ•´ä¸ªçˆ¬è™«çš„æ—¥å¿—ç­‰çº§ä¸ºLOG_LEVEL = \"ERROR\" ï¼Œè¿™æ ·å¤„ç†ä¼šå¸¦æ¥ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœæƒ³è¦å†™æ—¥å¿—è¿›è¡Œæ’æŸ¥é—®é¢˜æ—¶ï¼Œå°±åªèƒ½å¾€é¡¹ç›®ä¸­æ·»åŠ logging.error() çº§åˆ«çš„æ—¥å¿—äº†ï¼Œè¿™æ ·ä¼šé€ æˆæ—¥å¿—è¾“å‡ºæ··ä¹±ï¼Œä¸æ˜“æ’æŸ¥é—®é¢˜ã€‚æ‰€ä»¥å°±éœ€è¦æ”¾å¼ƒè¿™ç§å½¢å¼ï¼Œè¿›è¡Œé‡æ–°é…ç½®æ—¥å¿—è¾“å‡ºï¼Œå°†ä¸€äº›ä¸éœ€è¦çš„æ—¥å¿—è¾“å‡ºè¿›è¡Œæ’é™¤æ‰ã€‚ ","date":"2023å¹´03æœˆ24æ—¥","objectID":"/2023/03/%E4%BD%BF%E7%94%A8mixin%E6%A8%A1%E5%BC%8F%E9%85%8D%E7%BD%AEscrapy%E6%97%A5%E5%BF%97%E8%BE%93%E5%87%BA/:1:1","tags":["çˆ¬è™«","Python"],"title":"ä½¿ç”¨Mixinæ¨¡å¼é…ç½®Scrapyæ—¥å¿—è¾“å‡º","uri":"/2023/03/%E4%BD%BF%E7%94%A8mixin%E6%A8%A1%E5%BC%8F%E9%85%8D%E7%BD%AEscrapy%E6%97%A5%E5%BF%97%E8%BE%93%E5%87%BA/"},{"categories":["çˆ¬è™«","Python"],"content":"Mixinæ¨¡å¼ Mixinæ¨¡å¼æ˜¯ä¸€ç§é¢å‘å¯¹è±¡ç¼–ç¨‹çš„è®¾è®¡æ¨¡å¼ï¼Œå®ƒå…è®¸å°†ä¸€ä¸ªç±»çš„æ–¹æ³•å’Œå±æ€§æ··åˆåˆ°å¦ä¸€ä¸ªç±»ä¸­ï¼Œä»è€Œå®ç°ä»£ç çš„å¤ç”¨å’Œçµæ´»æ€§ã€‚ åœ¨Mixinæ¨¡å¼ä¸­ï¼Œä¸€ä¸ªMixinç±»é€šå¸¸åªåŒ…å«ä¸€ç»„ç›¸å…³çš„æ–¹æ³•å’Œå±æ€§ï¼Œè€Œä¸æ˜¯å®Œæ•´çš„ç±»å®šä¹‰ã€‚è¿™äº›Mixinç±»å¯ä»¥è¢«å¤šä¸ªç±»å¼•ç”¨ï¼Œä»è€Œå®ç°ä»£ç çš„å¤ç”¨ã€‚Mixinç±»é€šå¸¸ä¸ä¼šè¢«å•ç‹¬å®ä¾‹åŒ–ï¼Œè€Œæ˜¯è¢«å…¶ä»–ç±»ç»§æ‰¿æˆ–æ··åˆä½¿ç”¨ã€‚ åœ¨ä¸€äº›ç¼–ç¨‹è¯­è¨€ä¸­ï¼Œå¦‚Pythonå’ŒRubyï¼ŒMixinæ¨¡å¼å¯ä»¥é€šè¿‡å¤šé‡ç»§æ‰¿æ¥å®ç°ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¸€ä¸ªç±»å¯ä»¥ç»§æ‰¿å¤šä¸ªMixinç±»ï¼Œå¹¶ä»ä¸­ç»§æ‰¿æ–¹æ³•å’Œå±æ€§ã€‚åœ¨å…¶ä»–ç¼–ç¨‹è¯­è¨€ä¸­ï¼Œå¦‚Javaå’ŒC#ï¼ŒMixinæ¨¡å¼å¯ä»¥é€šè¿‡æ¥å£å’Œå§”æ‰˜æ¥å®ç°ã€‚ Pythonä¸­ä½¿ç”¨Mixinæ¨¡å¼çš„ç¤ºä¾‹ä»£ç : class SayHiMixin: def say(self): print(f\"Hi, {self.name}\") class User(SayHiMixin): def __init__(self, name): self.name = name user = User(\"Tommy\") user.say() # Hi, Tommy ","date":"2023å¹´03æœˆ24æ—¥","objectID":"/2023/03/%E4%BD%BF%E7%94%A8mixin%E6%A8%A1%E5%BC%8F%E9%85%8D%E7%BD%AEscrapy%E6%97%A5%E5%BF%97%E8%BE%93%E5%87%BA/:2:0","tags":["çˆ¬è™«","Python"],"title":"ä½¿ç”¨Mixinæ¨¡å¼é…ç½®Scrapyæ—¥å¿—è¾“å‡º","uri":"/2023/03/%E4%BD%BF%E7%94%A8mixin%E6%A8%A1%E5%BC%8F%E9%85%8D%E7%BD%AEscrapy%E6%97%A5%E5%BF%97%E8%BE%93%E5%87%BA/"},{"categories":["çˆ¬è™«","Python"],"content":"ä½¿ç”¨LogConfigMixinå®ç°Scrapyæ—¥å¿—é…ç½® import logging class LogConfigMixin: def __init__(self, *args, **kwargs): super(LogConfigMixin, self).__init__(*args, **kwargs) # å»æ‰ä¸éœ€è¦çš„log handlerï¼ˆå…ƒç»„æ ¼å¼ï¼‰ remove_handlers = (logging.StreamHandler,) for handler in logging.root.handlers: if isinstance(handler, remove_handlers): logging.root.handlers.remove(handler) # æ·»åŠ è‡ªå®šä¹‰ handler handler = logging.StreamHandler() handler.setLevel(logging.DEBUG) logger_fmt = '{asctime}.{msecs:03.0f} {levelname} ã€{filename}:{funcName}:{lineno}ã€‘: {message}' _format = logging.Formatter(fmt=logger_fmt, style='{', datefmt='%Y-%m-%d %H:%M:%S') handler.setFormatter(fmt=_format) logging.root.addHandler(handler) # è®¾ç½® scrapy æŸäº›ç»„ä»¶çš„æ—¥å¿—çº§åˆ« # æ­¤æ—¥å¿—ä¸­åŒ…å«äº†itemçš„è¾“å‡ºç»“æœï¼Œç”±äºæ˜¯æ•´ä¸ªé¡µé¢æ•°æ®ï¼Œæ•…éœ€è¦è°ƒæ•´æ—¥å¿—çº§åˆ«ï¼Œé˜²æ­¢æ—¥å¿—è¿‡å¤§ logging.getLogger('scrapy.core.scraper').setLevel(logging.WARNING) logging.getLogger('scrapy.core.engine').setLevel(logging.DEBUG) logging.getLogger('scrapy.middleware').setLevel(logging.DEBUG) logging.getLogger('scrapy.utils.log').setLevel(logging.DEBUG) # kafkaç›¸å…³æ—¥å¿—è®¾ç½®çº§åˆ« logging.getLogger(\"kafka.cluster\").setLevel(logging.WARNING) logging.getLogger(\"kafka.producer.sender\").setLevel(logging.WARNING) logging.getLogger(\"kafka.producer.record_accumulator\").setLevel(logging.WARNING) logging.getLogger(\"kafka.protocol.parser\").setLevel(logging.WARNING) logging.getLogger(\"kafka.metrics.metrics\").setLevel(logging.WARNING) logging.getLogger(\"kafka.client\").setLevel(logging.WARNING) logging.getLogger(\"kafka.conn\").setLevel(logging.WARNING) logging.getLogger(\"kafka.send\").setLevel(logging.WARNING) logging.getLogger(\"kafka.close\").setLevel(logging.WARNING) ","date":"2023å¹´03æœˆ24æ—¥","objectID":"/2023/03/%E4%BD%BF%E7%94%A8mixin%E6%A8%A1%E5%BC%8F%E9%85%8D%E7%BD%AEscrapy%E6%97%A5%E5%BF%97%E8%BE%93%E5%87%BA/:3:0","tags":["çˆ¬è™«","Python"],"title":"ä½¿ç”¨Mixinæ¨¡å¼é…ç½®Scrapyæ—¥å¿—è¾“å‡º","uri":"/2023/03/%E4%BD%BF%E7%94%A8mixin%E6%A8%A1%E5%BC%8F%E9%85%8D%E7%BD%AEscrapy%E6%97%A5%E5%BF%97%E8%BE%93%E5%87%BA/"},{"categories":["çˆ¬è™«","Python"],"content":"åœ¨çˆ¬è™«ä¸­è¿›è¡Œä½¿ç”¨ ","date":"2023å¹´03æœˆ24æ—¥","objectID":"/2023/03/%E4%BD%BF%E7%94%A8mixin%E6%A8%A1%E5%BC%8F%E9%85%8D%E7%BD%AEscrapy%E6%97%A5%E5%BF%97%E8%BE%93%E5%87%BA/:4:0","tags":["çˆ¬è™«","Python"],"title":"ä½¿ç”¨Mixinæ¨¡å¼é…ç½®Scrapyæ—¥å¿—è¾“å‡º","uri":"/2023/03/%E4%BD%BF%E7%94%A8mixin%E6%A8%A1%E5%BC%8F%E9%85%8D%E7%BD%AEscrapy%E6%97%A5%E5%BF%97%E8%BE%93%E5%87%BA/"},{"categories":["çˆ¬è™«","Python"],"content":"è‡ªå®šä¹‰Spiderå’ŒRedisSpiderç±» ä½¿ç”¨è‡ªå®šä¹‰çš„Spiderå’ŒRedisSpiderä¸ºå®˜æ–¹çš„Spiderå’ŒRedisSpideråŸºç¡€çˆ¬è™«ç±»å¢åŠ æ—¥å¿—é…ç½®åŠŸèƒ½ from abc import ABC from scrapy import Spider as _Spider from scrapy_redis.spiders import RedisSpider as _RedisSpider class Spider(LogConfigMixin, _Spider, ABC): pass class RedisSpider(LogConfigMixin, _RedisSpider, ABC): pass è¿™æ ·åšçš„å¥½å¤„ï¼šå°±å¯ä»¥åœ¨ä¸æ”¹å˜åŸæœ‰çš„çˆ¬è™«ç¨‹åºï¼Œåªç”¨ä¿®æ”¹å¯¼åŒ…è·¯å¾„å³å¯ï¼Œä¿®æ”¹æˆæœ¬æä½âœŒï¸ ","date":"2023å¹´03æœˆ24æ—¥","objectID":"/2023/03/%E4%BD%BF%E7%94%A8mixin%E6%A8%A1%E5%BC%8F%E9%85%8D%E7%BD%AEscrapy%E6%97%A5%E5%BF%97%E8%BE%93%E5%87%BA/:4:1","tags":["çˆ¬è™«","Python"],"title":"ä½¿ç”¨Mixinæ¨¡å¼é…ç½®Scrapyæ—¥å¿—è¾“å‡º","uri":"/2023/03/%E4%BD%BF%E7%94%A8mixin%E6%A8%A1%E5%BC%8F%E9%85%8D%E7%BD%AEscrapy%E6%97%A5%E5%BF%97%E8%BE%93%E5%87%BA/"},{"categories":["çˆ¬è™«","Python"],"content":"ä¾‹å­ åŸçˆ¬è™«ç¨‹åº from scrapy import Spider from estate.items import HuiLvItem class DemoSpider(Spider): name = \"demo\" custom_settings = { 'ITEM_PIPELINES': { 'estate.pipelines.DemoPipeline': 300 }, } start_urls = [ 'https://www.xxxx.cc/HKD_CNY/', ] def parse(self, response, **kwargs): rate = response.xpath('//div[@class=\"dollar_two\"]/span/text()').extract_first() if rate: rate = rate else: rate = 0.85551 item = HuiLvItem() item['rate'] = rate yield item å¢åŠ æ—¥å¿—é…ç½®åŠŸèƒ½åçˆ¬è™«ç¨‹åº from estate.mixin import Spider from estate.items import HuiLvItem class DemoSpider(Spider): name = \"demo\" custom_settings = { 'ITEM_PIPELINES': { 'estate.pipelines.DemoPipeline': 300 }, } start_urls = [ 'https://www.xxxx.cc/HKD_CNY/', ] def parse(self, response, **kwargs): rate = response.xpath('//div[@class=\"dollar_two\"]/span/text()').extract_first() if rate: rate = rate else: rate = 0.85551 item = HuiLvItem() item['rate'] = rate yield item ä¿®æ”¹æˆæœ¬æä½ åªéœ€å°†å®˜æ–¹å¯¼åŒ…from scrapy import Spider æ›´æ”¹ä¸ºè‡ªå®šä¹‰å¯¼åŒ…è·¯å¾„ from estate.mixin import Spider ","date":"2023å¹´03æœˆ24æ—¥","objectID":"/2023/03/%E4%BD%BF%E7%94%A8mixin%E6%A8%A1%E5%BC%8F%E9%85%8D%E7%BD%AEscrapy%E6%97%A5%E5%BF%97%E8%BE%93%E5%87%BA/:4:2","tags":["çˆ¬è™«","Python"],"title":"ä½¿ç”¨Mixinæ¨¡å¼é…ç½®Scrapyæ—¥å¿—è¾“å‡º","uri":"/2023/03/%E4%BD%BF%E7%94%A8mixin%E6%A8%A1%E5%BC%8F%E9%85%8D%E7%BD%AEscrapy%E6%97%A5%E5%BF%97%E8%BE%93%E5%87%BA/"},{"categories":["Redis","Python"],"content":"Incr Incr å‘½ä»¤å°† key ä¸­å‚¨å­˜çš„æ•°å­—å€¼å¢ä¸€ å¦‚æœ key ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆ key çš„å€¼ä¼šå…ˆè¢«åˆå§‹åŒ–ä¸º 0 ï¼Œç„¶åå†æ‰§è¡Œ INCR æ“ä½œã€‚ å¦‚æœå€¼åŒ…å«é”™è¯¯çš„ç±»å‹ï¼Œæˆ–å­—ç¬¦ä¸²ç±»å‹çš„å€¼ä¸èƒ½è¡¨ç¤ºä¸ºæ•°å­—ï¼Œé‚£ä¹ˆè¿”å›ä¸€ä¸ªé”™è¯¯ã€‚ è¿”å›å€¼ä¸ºæ‰§è¡Œ INCR å‘½ä»¤ä¹‹å key çš„å€¼ã€‚ ","date":"2023å¹´03æœˆ20æ—¥","objectID":"/2023/03/redis-incr%E8%AE%A1%E6%95%B0/:1:0","tags":["Redis","Python"],"title":"Redis-incrè®¡æ•°","uri":"/2023/03/redis-incr%E8%AE%A1%E6%95%B0/"},{"categories":["Redis","Python"],"content":"å‘½ä»¤è¡Œä½¿ç”¨ æ•°å€¼é€’å¢ INCR KEY_NAME è·å–æ•°å€¼ GET KEY_NAME ","date":"2023å¹´03æœˆ20æ—¥","objectID":"/2023/03/redis-incr%E8%AE%A1%E6%95%B0/:2:0","tags":["Redis","Python"],"title":"Redis-incrè®¡æ•°","uri":"/2023/03/redis-incr%E8%AE%A1%E6%95%B0/"},{"categories":["Redis","Python"],"content":"Pythonä½¿ç”¨ from contextlib import contextmanager from redis import Redis @contextmanager def redis_connect() -\u003e Redis: conn = Redis(host=settings.REDIS_HOST, port=settings.REDIS_PORT, db=0) yield conn conn.close() def redis_incr_count(key): with redis_connect() as redis: res = redis.incr(\"incr:count\") return res if __name__ == '__main__': from concurrent.futures import ThreadPoolExecutor # å¤šçº¿ç¨‹æµ‹è¯• with ThreadPoolExecutor(max_workers=200) as executor: for _ in range(200): # æ¨¡æ‹Ÿå¤šä¸ªä»»åŠ¡ future = executor.submit(redis_incr_count, \"incr:count\") print(future.result()) æ‰§è¡Œç»“æœï¼š ","date":"2023å¹´03æœˆ20æ—¥","objectID":"/2023/03/redis-incr%E8%AE%A1%E6%95%B0/:3:0","tags":["Redis","Python"],"title":"Redis-incrè®¡æ•°","uri":"/2023/03/redis-incr%E8%AE%A1%E6%95%B0/"},{"categories":["çˆ¬è™«","Python"],"content":"ä¸€ã€æ€è€ƒ åœ¨ä½¿ç”¨Scrapy-Redisè¿›è¡Œæ•°æ®åˆå§‹åŒ–æ—¶ï¼Œä½ æ˜¯å¦‚ä½•è¿›è¡Œæ•°æ®å†™å…¥Redisé˜Ÿåˆ—çš„ï¼Ÿ æ•°æ®å†™å…¥çš„æ ¼å¼å¦‚æœæ˜¯JSONï¼Œä½ æ˜¯å¦‚ä½•è¿›è¡Œå¤„ç†çš„ï¼Ÿ ","date":"2023å¹´03æœˆ20æ—¥","objectID":"/2023/03/scrapy-redis%E5%88%9D%E5%A7%8B%E5%8C%96%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86/:1:0","tags":["çˆ¬è™«","Python"],"title":"Scrapy-Redisåˆå§‹åŒ–æ•°æ®å¤„ç†","uri":"/2023/03/scrapy-redis%E5%88%9D%E5%A7%8B%E5%8C%96%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86/"},{"categories":["çˆ¬è™«","Python"],"content":"äºŒã€æ•°æ®åˆå§‹åŒ– ","date":"2023å¹´03æœˆ20æ—¥","objectID":"/2023/03/scrapy-redis%E5%88%9D%E5%A7%8B%E5%8C%96%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86/:2:0","tags":["çˆ¬è™«","Python"],"title":"Scrapy-Redisåˆå§‹åŒ–æ•°æ®å¤„ç†","uri":"/2023/03/scrapy-redis%E5%88%9D%E5%A7%8B%E5%8C%96%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86/"},{"categories":["çˆ¬è™«","Python"],"content":"2.1 ä¹‹å‰çš„å†™æ³• 2.1.1 åœ¨Scrapyæ–‡ä»¶å¤´éƒ¨è¿›è¡ŒRedisåˆå§‹åŒ–å†™å…¥ import redis from scrapy.utils.project import get_project_settings # ä»é…ç½®æ–‡ä»¶ä¸­è·å–Redisé…ç½® redis_host = get_project_settings().get('REDIS_HOST') redis_port = get_project_settings().get('REDIS_PORT') conn = redis.Redis(host=redis_host, port=redis_port, db=0) conn.sadd('scrapy:start_urls', 'https://www.xxxx.com/page01', 'https://www.xxxx.com/page02', 'https://www.xxxx.com/page03') 2.1.2 å­˜åœ¨çš„é—®é¢˜ ä¼šåœ¨çˆ¬è™«éƒ¨ç½²æ—¶å°±å¼€å§‹æ‰§è¡ŒRedisæ•°æ®åˆå§‹åŒ– å¦‚æœæ­¤å¤„çš„å¤„ç†è€—æ—¶æ¯”è¾ƒé•¿ï¼Œåˆ™ä¼šå¯¼è‡´éƒ¨ç½²è¶…æ—¶å¤±è´¥ æ³¨ï¼šéƒ¨ç½²ä½¿ç”¨çš„æ˜¯scrapydweb ","date":"2023å¹´03æœˆ20æ—¥","objectID":"/2023/03/scrapy-redis%E5%88%9D%E5%A7%8B%E5%8C%96%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86/:2:1","tags":["çˆ¬è™«","Python"],"title":"Scrapy-Redisåˆå§‹åŒ–æ•°æ®å¤„ç†","uri":"/2023/03/scrapy-redis%E5%88%9D%E5%A7%8B%E5%8C%96%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86/"},{"categories":["çˆ¬è™«","Python"],"content":"2.2 ç°åœ¨çš„å†™æ³• 2.2.1 ä½¿ç”¨ç±»çš„åˆå§‹åŒ–æ–¹æ³•è¿›è¡ŒRedisæ•°æ®åˆå§‹åŒ– class ScrapySpider(RedisSpider): def __init__(self, name=None, **kwargs): redis_host = get_project_settings().get('REDIS_HOST') redis_port = get_project_settings().get('REDIS_PORT') conn = redis.Redis(host=redis_host, port=redis_port, db=0) conn.sadd('scrapy:start_urls', 'https://www.xxxx.com/page01', 'https://www.xxxx.com/page02', 'https://www.xxxx.com/page03') super(ScrapySpider, self).__init__(name, **kwargs) 2.2.2 æ‰§è¡Œå‡ºç°çš„é—®é¢˜ åœ¨éƒ¨ç½²åè¿›è¡Œæ‰§è¡Œï¼Œå‡ºç°äº†æŠ¥é”™ä¿¡æ¯ï¼Œ__init __() å¾—åˆ°äº†ä¸€ä¸ªæ„å¤–çš„å…³é”®å­—å‚æ•°_ job 2.2.3 è§£å†³æ„å¤–å…³é”®å­—å‚æ•°_job ç›´æ¥åœ¨åˆå§‹åŒ–æ—¶åˆ é™¤å³å¯ï¼Œä¸ºäº†ä¿è¯å¯é æ€§ï¼Œå…ˆåˆ¤æ–­æ˜¯å¦å­˜åœ¨ï¼Œç„¶åå†è¿›è¡Œåˆ é™¤ class ScrapySpider(RedisSpider): def __init__(self, name=None, **kwargs): redis_host = get_project_settings().get('REDIS_HOST') redis_port = get_project_settings().get('REDIS_PORT') conn = redis.Redis(host=redis_host, port=redis_port, db=0) conn.sadd('scrapy:start_urls', 'https://www.xxxx.com/page01', 'https://www.xxxx.com/page02', 'https://www.xxxx.com/page03') # åˆ¤æ–­æ˜¯å¦å­˜åœ¨ _jobå…³é”®å­—å‚æ•° if kwargs.get('_job'): # å­˜åœ¨åˆ™åˆ é™¤ kwargs.pop('_job') super(ScrapySpider, self).__init__(name, **kwargs) ","date":"2023å¹´03æœˆ20æ—¥","objectID":"/2023/03/scrapy-redis%E5%88%9D%E5%A7%8B%E5%8C%96%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86/:2:2","tags":["çˆ¬è™«","Python"],"title":"Scrapy-Redisåˆå§‹åŒ–æ•°æ®å¤„ç†","uri":"/2023/03/scrapy-redis%E5%88%9D%E5%A7%8B%E5%8C%96%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86/"},{"categories":["çˆ¬è™«","Python"],"content":"ä¸‰ã€æ•°æ®JSONæ ¼å¼å¤„ç† åœ¨ä¸Šé¢çš„åˆå§‹åŒ–Redisæ•°æ®æ—¶ï¼Œä¼ å…¥çš„æ•°æ®éƒ½æ˜¯å›ºå®šçš„ä¸€ä¸ªé“¾æ¥ï¼Œä½†æ˜¯åœ¨å®é™…çš„ä½¿ç”¨ä¸­ï¼Œé“¾æ¥å¹¶ä¸èƒ½æ»¡è¶³éœ€æ±‚ï¼Œéœ€è¦å­˜å‚¨JSONæ ¼å¼çš„æ•°æ®ï¼Œé‚£ä¹ˆå†å¤„ç†çˆ¬è™«çš„æ—¶å€™ï¼Œå°±è¦åœ¨Redis popå‡ºæ•°æ®åè¿›è¡Œå¤„ç†JSONå­—ç¬¦ä¸²è·å¾—æŒ‡å®šçš„é“¾æ¥è¿›è¡Œå¤„ç†ã€‚ ","date":"2023å¹´03æœˆ20æ—¥","objectID":"/2023/03/scrapy-redis%E5%88%9D%E5%A7%8B%E5%8C%96%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86/:3:0","tags":["çˆ¬è™«","Python"],"title":"Scrapy-Redisåˆå§‹åŒ–æ•°æ®å¤„ç†","uri":"/2023/03/scrapy-redis%E5%88%9D%E5%A7%8B%E5%8C%96%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86/"},{"categories":["çˆ¬è™«","Python"],"content":"3.1 æŸ¥è¯¢æºç ï¼Œæ‰¾åˆ°å¯¹åº”çš„å¤„ç†é€»è¾‘ Scrapy-Redis Â» make_request_from_data : def make_request_from_data(self, data): \"\"\"Returns a Request instance from data coming from Redis. By default, ``data`` is an encoded URL. You can override this method to provide your own message decoding. Parameters ---------- data : bytes Message from redis. ç›´æ¥è¯»å–Redisçš„æ•°æ® \"\"\" # å°†Redis popå‡ºçš„æ•°æ®è½¬æˆå­—ç¬¦ä¸² url = bytes_to_str(data, self.redis_encoding) # è°ƒç”¨Scrapyçš„æ–¹æ³•è¿›è¡Œå‘é€è¯·æ±‚ return self.make_requests_from_url(url) Scrapy Â» make_requests_from_url def make_requests_from_url(self, url): \"\"\" This method is deprecated. \"\"\" warnings.warn( \"Spider.make_requests_from_url method is deprecated: \" \"it will be removed and not be called by the default \" \"Spider.start_requests method in future Scrapy releases. \" \"Please override Spider.start_requests method instead.\" ) # å‘é€è¯·æ±‚ï¼Œå¹¶è¿”å›scrapy.http.Requestå¯¹è±¡ return Request(url, dont_filter=True) ","date":"2023å¹´03æœˆ20æ—¥","objectID":"/2023/03/scrapy-redis%E5%88%9D%E5%A7%8B%E5%8C%96%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86/:3:1","tags":["çˆ¬è™«","Python"],"title":"Scrapy-Redisåˆå§‹åŒ–æ•°æ®å¤„ç†","uri":"/2023/03/scrapy-redis%E5%88%9D%E5%A7%8B%E5%8C%96%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86/"},{"categories":["çˆ¬è™«","Python"],"content":"3.2 è¿›è¡Œé‡å†™ ä»ä¸Šé¢çš„æºç ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥é‡å†™make_request_from_data æ–¹æ³•ï¼Œåœ¨æ–¹æ³•å†…éƒ¨è¿›è¡Œå¤„ç†JSONæ•°æ®ï¼Œå¹¶è¿”å›scrapy.http.Requestå¯¹è±¡å³å¯ã€‚ import json import redis from scrapy import Request from scrapy.utils.project import get_project_settings from scrapy_redis.spiders import RedisSpider class ScrapySpider(RedisSpider): def __init__(self, name=None, **kwargs): redis_host = get_project_settings().get('REDIS_HOST') redis_port = get_project_settings().get('REDIS_PORT') conn = redis.Redis(host=redis_host, port=redis_port, db=0) conn.sadd('scrapy:start_urls', '{\"id\": 9531, \"source\": 1, \"mobile\": \"62196161\", \"url\": \"https://www.xxxx.com/detail001\"}', '{\"id\": 8160, \"source\": 0, \"mobile\": \"60376386\", \"url\": \"https://www.xxxx.com/detail002\"', '{\"id\": 7334, \"source\": 0, \"mobile\": \"62631381\", \"url\": \"https://www.28hse.com/detail003\"') # åˆ¤æ–­æ˜¯å¦å­˜åœ¨ _jobå…³é”®å­—å‚æ•° if kwargs.get('_job'): # å­˜åœ¨åˆ™åˆ é™¤ kwargs.pop('_job') super(ScrapySpider, self).__init__(name, **kwargs) def make_request_from_data(self, data): \"\"\" :param data: ä»reids popåˆ°çš„æ•°æ® :return: \"\"\" # å°†è·å–çš„æ•°æ®è¿›è¡Œè½¬æ¢ req_data = json.loads(data) # è·å–æ‰€éœ€å‚æ•°ä¿¡æ¯ url = req_data['url'] source = req_data['source'] mobile = req_data.get('mobile', '') id = req_data['id'] # å‘é€è¯·æ±‚ï¼Œå¹¶è¿”å› return Request( url, meta={\"id\": id, \"source\": source, \"mobile\": mobile} # å°†å‚æ•°ä½œä¸ºå…ƒæ•°æ®ä¼ é€’ ) ","date":"2023å¹´03æœˆ20æ—¥","objectID":"/2023/03/scrapy-redis%E5%88%9D%E5%A7%8B%E5%8C%96%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86/:3:2","tags":["çˆ¬è™«","Python"],"title":"Scrapy-Redisåˆå§‹åŒ–æ•°æ®å¤„ç†","uri":"/2023/03/scrapy-redis%E5%88%9D%E5%A7%8B%E5%8C%96%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86/"},{"categories":["è¸©å‘è®°å½•"],"content":"æè¿° åœ¨HTMLæ–‡ä»¶ä¸­å¼•ç”¨jsæ–‡ä»¶\u003cscript src=\"{{ url_for('static', path='/js/app.js') }}\"\u003e\u003c/script\u003e ï¼Œåœ¨æœ¬åœ°è°ƒè¯•æ­£å¸¸ï¼Œä¸Šçº¿åå‘ç°ç½‘é¡µæ‰“ä¸å¼€ï¼Œæ‰“å¼€æ§åˆ¶å°çœ‹åˆ°äº†å¦‚ä¸‹æŠ¥é”™ä¿¡æ¯ï¼š ","date":"2023å¹´03æœˆ05æ—¥","objectID":"/2023/03/3/:1:0","tags":["Python","FastApi"],"title":"Mixed Content The page at was loaded over HTTPS but requested an insecure resource This request has been blocked the content must be served over HTTPS","uri":"/2023/03/3/"},{"categories":["è¸©å‘è®°å½•"],"content":"åŸå›  ç”±äºçº¿ä¸Šä½¿ç”¨çš„åè®®æ˜¯httpsåè®®ï¼Œè€Œç”Ÿæˆçš„jsæ–‡ä»¶é“¾æ¥æ˜¯httpçš„ï¼ŒHTMLé»˜è®¤æ˜¯ä¸æ”¯æŒæ··åˆä½¿ç”¨çš„ï¼Œæ‰€ä»¥æ‰å‡ºç°ä¸Šé¢çš„é”™è¯¯ã€‚ ","date":"2023å¹´03æœˆ05æ—¥","objectID":"/2023/03/3/:2:0","tags":["Python","FastApi"],"title":"Mixed Content The page at was loaded over HTTPS but requested an insecure resource This request has been blocked the content must be served over HTTPS","uri":"/2023/03/3/"},{"categories":["è¸©å‘è®°å½•"],"content":"è§£å†³ åœ¨HTMLæ–‡ä»¶ä¸­æ·»åŠ  æ ‡è®°å…è®¸æ··åˆå†…å®¹å³å¯æ­£å¸¸ä½¿ç”¨ã€‚ \u003cmeta http-equiv=\"Content-Security-Policy\" content=\"upgrade-insecure-requests\"\u003e ","date":"2023å¹´03æœˆ05æ—¥","objectID":"/2023/03/3/:3:0","tags":["Python","FastApi"],"title":"Mixed Content The page at was loaded over HTTPS but requested an insecure resource This request has been blocked the content must be served over HTTPS","uri":"/2023/03/3/"},{"categories":["è¸©å‘è®°å½•"],"content":"é™„å½• https://stackoverflow.com/questions/67765238/mixed-content-the-page-at-was-loaded-over-https-but-requested-an-insecure-resour ","date":"2023å¹´03æœˆ05æ—¥","objectID":"/2023/03/3/:4:0","tags":["Python","FastApi"],"title":"Mixed Content The page at was loaded over HTTPS but requested an insecure resource This request has been blocked the content must be served over HTTPS","uri":"/2023/03/3/"},{"categories":["è¸©å‘è®°å½•"],"content":"é—®é¢˜æè¿° åœ¨ä½¿ç”¨Seleniumè¿›è¡ŒæŸä¸€ç½‘ç«™æ•°æ®æŠ“å–çš„æ—¶å€™ï¼Œå‡ºç°ä¸€ç§ç°è±¡ åœ¨é¡µé¢ä¸­éœ€è¦å®šä½ä¸€ä¸ªå…ƒç´ ä¿¡æ¯ï¼špages = driver.find_elements(By.XPATH, \"//button[contains(@class,'page-button')]/span\") æœ¬åœ°è°ƒè¯•çš„æ—¶å€™ï¼Œä¸€åˆ‡æ­£å¸¸ï¼Œä¸€æ”¾åˆ°çº¿ä¸Šå°±æ‰¾ä¸åˆ°æ­¤å…ƒç´ ï¼Œæ—¥å¿—ä¿¡æ¯2023-02-08 12:02:05 [scrapy.utils.log] ERROR: pages = [] çº¿ä¸Šå¼€å¯äº†æ— å¤´æ¨¡å¼ï¼Œå…·ä½“é…ç½®å¦‚ä¸‹ï¼š options = webdriver.ChromeOptions() # æ— ç•Œé¢æ¨¡å¼ options.add_argument('--headless') options.add_argument('--no-sandbox') options.add_argument(\"--disable-blink-features=AutomationControlled\") options.add_experimental_option('excludeSwitches', ['enable-automation']) options.add_experimental_option('useAutomationExtension', False) driver = webdriver.Chrome(options=options) ","date":"2023å¹´02æœˆ08æ—¥","objectID":"/2023/02/2/:1:0","tags":["Python","Selenium"],"title":"Seleniumè®¾ç½®æ— å¤´æ¨¡å¼ï¼Œé¡µé¢è‡ªåŠ¨åˆ‡æ¢H5æ¨¡å¼é—®é¢˜è§£å†³","uri":"/2023/02/2/"},{"categories":["è¸©å‘è®°å½•"],"content":"é—®é¢˜æ’æŸ¥ ä½¿ç”¨driver.page_sourceå°†é¡µé¢æºç æ‰“å°å‡ºæ¥ï¼Œæ‹·è´åˆ°æ–‡æœ¬ä¸­ï¼Œè½¬æˆhtmlè¿›è¡ŒæŸ¥çœ‹åå‘ç°ï¼Œé¡µé¢ç«Ÿç„¶å˜æˆäº†H5çš„é¡µé¢ğŸ˜± é‚£ä¹ˆåˆ°åº•æ˜¯æ€ä¹ˆå›äº‹å‘¢ï¼Œåœ¨åŸç½‘ç«™ä¸Šæˆ‘åˆé‡æ–°è¯•äº†åå‘ç°æ‹–æ‹½ä¸‹ç½‘é¡µçª—å£å¤§å°ï¼Œç½‘ç«™çš„å¸ƒå±€ä¼šéšä¹‹è€Œå˜åŒ–ğŸ˜³ æ‰€ä»¥è¦æƒ³è§£å†³å°±éœ€è¦å…ˆäº‹å…ˆæ§åˆ¶çª—å£çš„å¤§å°ã€‚ ","date":"2023å¹´02æœˆ08æ—¥","objectID":"/2023/02/2/:2:0","tags":["Python","Selenium"],"title":"Seleniumè®¾ç½®æ— å¤´æ¨¡å¼ï¼Œé¡µé¢è‡ªåŠ¨åˆ‡æ¢H5æ¨¡å¼é—®é¢˜è§£å†³","uri":"/2023/02/2/"},{"categories":["è¸©å‘è®°å½•"],"content":"é—®é¢˜è§£å†³ ä¸ºäº†çª—å£å¤§å°æ¥å›å˜åŠ¨ï¼Œå°±ä½¿ç”¨æœ€å¤§åŒ–çª—å£è¿›è¡Œå¤„ç†ï¼šdriver.maximize_window()ï¼Œç„¶è€Œæ”¾åˆ°çº¿ä¸Šå»æ‰§è¡Œçš„æ—¶å€™ï¼Œä¾æ—§ä¼šå‡ºé—®é¢˜ğŸ˜… æˆ‘å°±åœ¨æƒ³æˆ‘éƒ½æœ€å¤§åŒ–çª—å£äº†ï¼Œæ€ä¹ˆè¿˜ä¼šå˜æˆH5å‘¢ï¼Œè®©æˆ‘ç™¾æ€ä¸å¾—å…¶è§£ã€‚åæ¥å°±æƒ³äº†ä¸‹ï¼Œæœ€å¤§åŒ–çª—å£ä¸è¡Œï¼Œé‚£è¦ä¸è¯•ä¸‹è‡ªå®šä¹‰çª—å£å¤§å°å‘¢ï¼Œç„¶åå°±æ”¹æˆäº†ï¼šdriver.set_window_size(1280, 800)ï¼Œä¸Šçº¿-\u003eæ‰§è¡Œï¼Œç«Ÿç„¶æˆåŠŸäº†âœŒï¸ æœ€åæˆ‘çš„ç¨‹åºä»£ç ï¼š options = webdriver.ChromeOptions() # æ— ç•Œé¢æ¨¡å¼ options.add_argument('--headless') options.add_argument('--no-sandbox') options.add_argument(\"--disable-blink-features=AutomationControlled\") options.add_experimental_option('excludeSwitches', ['enable-automation']) options.add_experimental_option('useAutomationExtension', False) driver = webdriver.Chrome(options=options) driver.set_window_size(1280, 800) # è‡ªå®šä¹‰çª—å£å¤§å° ","date":"2023å¹´02æœˆ08æ—¥","objectID":"/2023/02/2/:3:0","tags":["Python","Selenium"],"title":"Seleniumè®¾ç½®æ— å¤´æ¨¡å¼ï¼Œé¡µé¢è‡ªåŠ¨åˆ‡æ¢H5æ¨¡å¼é—®é¢˜è§£å†³","uri":"/2023/02/2/"},{"categories":["è¸©å‘è®°å½•"],"content":"æ€»ç»“ ç”±äºæ˜¯æ— å¤´æ¨¡å¼ï¼Œæœ€å¤§åŒ–çª—å£ï¼ˆdriver.maximize_window()ï¼‰å¹¶ä¸èƒ½ç¡®å®šçª—å£çš„å¤§å°ï¼ˆæœ‰å¯èƒ½æœ€å¤§åŒ–åè¿˜ä¸èƒ½æ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚ï¼Œæ¯”å¦‚æˆ‘è¿™ä¸ªéœ€æ±‚ï¼‰ï¼› æ‰€ä»¥ä¸ºäº†è®©æˆ‘ä»¬ç¨‹åºæ›´åŠ å‡†ç¡®ï¼Œå¯ä»¥ç›´æ¥ä¿®æ”¹çª—å£å¤§å°ï¼ˆdriver.set_window_size(1280, 800)ï¼‰ï¼Œè®¾ç½®æˆæˆ‘ä»¬éœ€è¦çš„å¤§å°ï¼Œè¿™æ ·æ›´åŠ ç²¾å‡†æ— è¯¯ã€‚ ","date":"2023å¹´02æœˆ08æ—¥","objectID":"/2023/02/2/:4:0","tags":["Python","Selenium"],"title":"Seleniumè®¾ç½®æ— å¤´æ¨¡å¼ï¼Œé¡µé¢è‡ªåŠ¨åˆ‡æ¢H5æ¨¡å¼é—®é¢˜è§£å†³","uri":"/2023/02/2/"},{"categories":["è¸©å‘è®°å½•"],"content":"é—®é¢˜ ","date":"2023å¹´01æœˆ31æ—¥","objectID":"/2023/01/1/:1:0","tags":["Python"],"title":"ImportError: cannot import name 'get_distribution' from 'pkg_resources'é—®é¢˜è§£å†³","uri":"/2023/01/1/"},{"categories":["è¸©å‘è®°å½•"],"content":"åŸå›  åœ¨ä½¿ç”¨Dockeréƒ¨ç½²çš„æ—¶å€™ï¼Œé¦–å…ˆè¿›è¡Œäº†æ›´æ–°pipï¼Œæ›´æ–°å‘½ä»¤ï¼š/usr/local/bin/python -m pip install --upgrade pip åœ¨è¿™é‡Œåªç¡®ä¿äº†pipæ˜¯æœ€æ–°çš„ï¼Œä»è€Œå¿½ç•¥äº†setuptoolså’Œwheelï¼Œè™½ç„¶ä»… pip å°±è¶³ä»¥ä»é¢„æ„å»ºçš„äºŒè¿›åˆ¶å­˜æ¡£å®‰è£…ï¼Œä½† setuptools å’Œ wheel é¡¹ç›®çš„æœ€æ–°å‰¯æœ¬æœ‰åŠ©äºç¡®ä¿æ‚¨ä¹Ÿå¯ä»¥ä»æºå­˜æ¡£å®‰è£…ã€‚ã€ŒPythonå®˜æ–¹æ–‡æ¡£è¯´æ˜ã€ ","date":"2023å¹´01æœˆ31æ—¥","objectID":"/2023/01/1/:2:0","tags":["Python"],"title":"ImportError: cannot import name 'get_distribution' from 'pkg_resources'é—®é¢˜è§£å†³","uri":"/2023/01/1/"},{"categories":["è¸©å‘è®°å½•"],"content":"è§£å†³ å°†æ›´æ–°å‘½ä»¤æ›´æ”¹ä¸ºï¼š/usr/local/bin/python -m pip install --upgrade pip setuptools wheel ","date":"2023å¹´01æœˆ31æ—¥","objectID":"/2023/01/1/:3:0","tags":["Python"],"title":"ImportError: cannot import name 'get_distribution' from 'pkg_resources'é—®é¢˜è§£å†³","uri":"/2023/01/1/"},{"categories":["Jenkins"],"content":"æœ‰ä¸€äº›æ„å»ºä»»åŠ¡å¯èƒ½ä¼šç”±äºæŸäº›ä¸å¯æŠ—å› ç´ å¯¼è‡´æ„å»ºå¤±è´¥ï¼Œä½†æ˜¯é‡æ–°æ„å»ºä¸€æ¬¡å°±æ„å»ºæˆåŠŸäº†ï¼Œé’ˆå¯¹è¿™ç§æƒ…å†µï¼Œå¯ä»¥ä½¿ç”¨Jenkinsæ’ä»¶Naginatorè¿›è¡Œæ„å»ºå¤±è´¥é‡è¯• ","date":"2022å¹´08æœˆ05æ—¥","objectID":"/2022/08/jenkins%E6%9E%84%E5%BB%BA%E5%A4%B1%E8%B4%A5%E9%87%8D%E8%AF%95/:0:0","tags":["Jenkins"],"title":"Jenkinsæ„å»ºå¤±è´¥é‡è¯•","uri":"/2022/08/jenkins%E6%9E%84%E5%BB%BA%E5%A4%B1%E8%B4%A5%E9%87%8D%E8%AF%95/"},{"categories":["Jenkins"],"content":"ä½¿ç”¨Naginator ","date":"2022å¹´08æœˆ05æ—¥","objectID":"/2022/08/jenkins%E6%9E%84%E5%BB%BA%E5%A4%B1%E8%B4%A5%E9%87%8D%E8%AF%95/:1:0","tags":["Jenkins"],"title":"Jenkinsæ„å»ºå¤±è´¥é‡è¯•","uri":"/2022/08/jenkins%E6%9E%84%E5%BB%BA%E5%A4%B1%E8%B4%A5%E9%87%8D%E8%AF%95/"},{"categories":["Jenkins"],"content":"å®‰è£…Naginatoræ’ä»¶ ","date":"2022å¹´08æœˆ05æ—¥","objectID":"/2022/08/jenkins%E6%9E%84%E5%BB%BA%E5%A4%B1%E8%B4%A5%E9%87%8D%E8%AF%95/:1:1","tags":["Jenkins"],"title":"Jenkinsæ„å»ºå¤±è´¥é‡è¯•","uri":"/2022/08/jenkins%E6%9E%84%E5%BB%BA%E5%A4%B1%E8%B4%A5%E9%87%8D%E8%AF%95/"},{"categories":["Jenkins"],"content":"ä½¿ç”¨ åœ¨æ„å»ºåæ“ä½œä¸­é€‰æ‹©ï¼šRetry build after failure é…ç½®ä¿¡æ¯ è¿è¡Œç»“æœ æ„å»ºå†å²ï¼Œå¦‚æœæ„å»ºå¤±è´¥ï¼Œåˆ™ä¼šé‡è¯•ä¸‰æ¬¡ æŸ¥çœ‹æœ€åä¸€æ¬¡æ„å»ºå†å²ï¼Œå¯ä»¥çœ‹åˆ°æ˜¯ç”±Naginatorå¯åŠ¨çš„ ","date":"2022å¹´08æœˆ05æ—¥","objectID":"/2022/08/jenkins%E6%9E%84%E5%BB%BA%E5%A4%B1%E8%B4%A5%E9%87%8D%E8%AF%95/:1:2","tags":["Jenkins"],"title":"Jenkinsæ„å»ºå¤±è´¥é‡è¯•","uri":"/2022/08/jenkins%E6%9E%84%E5%BB%BA%E5%A4%B1%E8%B4%A5%E9%87%8D%E8%AF%95/"},{"categories":["Jenkins"],"content":"æ„å»ºåæ‰§è¡Œè„šæœ¬-PostBuildScript åœ¨æ‰§è¡Œå®ŒJenkinsæ„å»ºå¤±è´¥æ—¶ï¼Œæƒ³å‘èµ·æŠ¥è­¦ï¼Œé€šè¿‡shellè„šæœ¬è¿›è¡Œç¼–å†™ï¼Œç„¶è€ŒJenkinsé»˜è®¤åªèƒ½åœ¨æ„å»ºå‰æ‰§è¡Œshellã€‚ å½“æœ‰è¯¥éœ€æ±‚æ—¶ï¼ŒJenkinsçš„PostBuildScriptæ’ä»¶å°±èƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬å®ç°ã€‚ ","date":"2022å¹´08æœˆ05æ—¥","objectID":"/2022/08/jenkins%E6%9E%84%E5%BB%BA%E5%90%8E%E6%89%A7%E8%A1%8C%E8%84%9A%E6%9C%AC/:1:0","tags":["Jenkins"],"title":"Jenkinsæ„å»ºåæ‰§è¡Œè„šæœ¬","uri":"/2022/08/jenkins%E6%9E%84%E5%BB%BA%E5%90%8E%E6%89%A7%E8%A1%8C%E8%84%9A%E6%9C%AC/"},{"categories":["Jenkins"],"content":"ä½¿ç”¨æ­¥éª¤ ","date":"2022å¹´08æœˆ05æ—¥","objectID":"/2022/08/jenkins%E6%9E%84%E5%BB%BA%E5%90%8E%E6%89%A7%E8%A1%8C%E8%84%9A%E6%9C%AC/:2:0","tags":["Jenkins"],"title":"Jenkinsæ„å»ºåæ‰§è¡Œè„šæœ¬","uri":"/2022/08/jenkins%E6%9E%84%E5%BB%BA%E5%90%8E%E6%89%A7%E8%A1%8C%E8%84%9A%E6%9C%AC/"},{"categories":["Jenkins"],"content":"1ã€å®‰è£…PostBuildScriptæ’ä»¶ ","date":"2022å¹´08æœˆ05æ—¥","objectID":"/2022/08/jenkins%E6%9E%84%E5%BB%BA%E5%90%8E%E6%89%A7%E8%A1%8C%E8%84%9A%E6%9C%AC/:2:1","tags":["Jenkins"],"title":"Jenkinsæ„å»ºåæ‰§è¡Œè„šæœ¬","uri":"/2022/08/jenkins%E6%9E%84%E5%BB%BA%E5%90%8E%E6%89%A7%E8%A1%8C%E8%84%9A%E6%9C%AC/"},{"categories":["Jenkins"],"content":"2ã€åœ¨Jobçš„æ„å»ºåæ“ä½œå°±å¯ä»¥çœ‹åˆ°Execute scripts ","date":"2022å¹´08æœˆ05æ—¥","objectID":"/2022/08/jenkins%E6%9E%84%E5%BB%BA%E5%90%8E%E6%89%A7%E8%A1%8C%E8%84%9A%E6%9C%AC/:2:2","tags":["Jenkins"],"title":"Jenkinsæ„å»ºåæ‰§è¡Œè„šæœ¬","uri":"/2022/08/jenkins%E6%9E%84%E5%BB%BA%E5%90%8E%E6%89%A7%E8%A1%8C%E8%84%9A%E6%9C%AC/"},{"categories":["Jenkins"],"content":"3ã€æ”¯æŒå¤šç§æ–¹å¼çš„è„šæœ¬æ‰§è¡Œ Add generic script fileï¼šæ·»åŠ é€šç”¨çš„è„šæœ¬æ–‡ä»¶ Add Groovy script file: æ·»åŠ  Groovy è„šæœ¬æ–‡ä»¶ Add Groovy script: æ·»åŠ Groovyè„šæœ¬ Add post build stepï¼šæ·»åŠ åæœŸæ„å»ºæ­¥éª¤ 4ã€æŒ‡å®šæ„å»ºç»“æœæ‰§è¡Œè„šæœ¬ SUCCESS: æ„å»ºæˆåŠŸ UNSTABLEï¼šæ„å»ºä¸ç¨³å®š FAILUREï¼šæ„å»ºå¤±è´¥ NOT_BUILTï¼šæœªæ„å»º ABORTEDï¼šæ„å»ºè¢«ç»ˆæ­¢ åªæœ‰è¾¾åˆ°é€‰å®šçš„æ„å»ºç»“æœä¹‹ä¸€æ—¶ï¼Œæ‰ä¼šæ‰§è¡Œè„šæœ¬/æ­¥éª¤ã€‚ä½¿ç”¨é”®ç›˜ä¸Šçš„æ§åˆ¶é”®é€‰æ‹©å¤šä¸ªç»“æœã€‚ ","date":"2022å¹´08æœˆ05æ—¥","objectID":"/2022/08/jenkins%E6%9E%84%E5%BB%BA%E5%90%8E%E6%89%A7%E8%A1%8C%E8%84%9A%E6%9C%AC/:2:3","tags":["Jenkins"],"title":"Jenkinsæ„å»ºåæ‰§è¡Œè„šæœ¬","uri":"/2022/08/jenkins%E6%9E%84%E5%BB%BA%E5%90%8E%E6%89%A7%E8%A1%8C%E8%84%9A%E6%9C%AC/"},{"categories":["Jenkins"],"content":"å®è·µä¸€ä¸‹ åœ¨Jenkinsæ‰§è¡Œæ„å»ºå¤±è´¥æ—¶ï¼Œé€šè¿‡shellè„šæœ¬å‘é€æŠ¥è­¦ ","date":"2022å¹´08æœˆ05æ—¥","objectID":"/2022/08/jenkins%E6%9E%84%E5%BB%BA%E5%90%8E%E6%89%A7%E8%A1%8C%E8%84%9A%E6%9C%AC/:3:0","tags":["Jenkins"],"title":"Jenkinsæ„å»ºåæ‰§è¡Œè„šæœ¬","uri":"/2022/08/jenkins%E6%9E%84%E5%BB%BA%E5%90%8E%E6%89%A7%E8%A1%8C%E8%84%9A%E6%9C%AC/"},{"categories":["Jenkins"],"content":"æ„å»ºæ“ä½œ ","date":"2022å¹´08æœˆ05æ—¥","objectID":"/2022/08/jenkins%E6%9E%84%E5%BB%BA%E5%90%8E%E6%89%A7%E8%A1%8C%E8%84%9A%E6%9C%AC/:3:1","tags":["Jenkins"],"title":"Jenkinsæ„å»ºåæ‰§è¡Œè„šæœ¬","uri":"/2022/08/jenkins%E6%9E%84%E5%BB%BA%E5%90%8E%E6%89%A7%E8%A1%8C%E8%84%9A%E6%9C%AC/"},{"categories":["Jenkins"],"content":"æ„å»ºåæ“ä½œ ","date":"2022å¹´08æœˆ05æ—¥","objectID":"/2022/08/jenkins%E6%9E%84%E5%BB%BA%E5%90%8E%E6%89%A7%E8%A1%8C%E8%84%9A%E6%9C%AC/:3:2","tags":["Jenkins"],"title":"Jenkinsæ„å»ºåæ‰§è¡Œè„šæœ¬","uri":"/2022/08/jenkins%E6%9E%84%E5%BB%BA%E5%90%8E%E6%89%A7%E8%A1%8C%E8%84%9A%E6%9C%AC/"},{"categories":["Jenkins"],"content":"æ‰§è¡Œç»“æœ ","date":"2022å¹´08æœˆ05æ—¥","objectID":"/2022/08/jenkins%E6%9E%84%E5%BB%BA%E5%90%8E%E6%89%A7%E8%A1%8C%E8%84%9A%E6%9C%AC/:3:3","tags":["Jenkins"],"title":"Jenkinsæ„å»ºåæ‰§è¡Œè„šæœ¬","uri":"/2022/08/jenkins%E6%9E%84%E5%BB%BA%E5%90%8E%E6%89%A7%E8%A1%8C%E8%84%9A%E6%9C%AC/"},{"categories":["Jenkins"],"content":"æ„å»ºæˆåŠŸçš„æ‰§è¡Œç»“æœ ","date":"2022å¹´08æœˆ05æ—¥","objectID":"/2022/08/jenkins%E6%9E%84%E5%BB%BA%E5%90%8E%E6%89%A7%E8%A1%8C%E8%84%9A%E6%9C%AC/:3:4","tags":["Jenkins"],"title":"Jenkinsæ„å»ºåæ‰§è¡Œè„šæœ¬","uri":"/2022/08/jenkins%E6%9E%84%E5%BB%BA%E5%90%8E%E6%89%A7%E8%A1%8C%E8%84%9A%E6%9C%AC/"},{"categories":["Goç¬”è®°"],"content":"Map mapæ˜¯key-valueæ•°æ®ç»“æ„ï¼Œåˆç§°ä¸ºå­—æ®µæˆ–è€…å…³è”æ•°ç»„ã€‚ ","date":"2022å¹´07æœˆ27æ—¥","objectID":"/2022/07/go-map/:0:0","tags":["Goç¬”è®°"],"title":"Go Map","uri":"/2022/07/go-map/"},{"categories":["Goç¬”è®°"],"content":"åŸºæœ¬è¯­æ³• è¯­æ³•ï¼švar mapå˜é‡å map[keytype]valuetype var a map[string]string var a map[string]int var a map[int]string var a map[string]map[string]string keyçš„ç±»å‹ å¯ä»¥æ˜¯ï¼šboolã€æ•°å­—ã€stringã€æŒ‡é’ˆã€channelï¼Œè¿˜å¯ä»¥å€¼åŒ…å«å‰é¢å‡ ä¸ªç±»å‹çš„æ¥å£ã€ç»“æ„ä½“ã€æ•°ç»„ï¼Œé€šå¸¸ä¸ºintã€string sliceã€mapå’Œfunctionä¸å¯ä»¥å½“åškeyçš„ç±»å‹ï¼Œå› ä¸ºè¿™å‡ ä¸ªæ²¡æ³•ç”¨==æ¥åˆ¤æ–­ valueçš„ç±»å‹ å’ŒkeyåŸºæœ¬ä¸€æ ·ï¼Œé€šå¸¸ä¸ºï¼šæ•°å­—ï¼ˆæ•´æ•°ï¼Œæµ®ç‚¹æ•°ï¼‰ã€stringã€mapã€struct //å£°æ˜ä¸€ä¸ªmap var a map[string]string // åœ¨ä½¿ç”¨mapå‰ï¼Œéœ€è¦å…ˆmakeï¼Œmakeçš„ä½œç”¨ä¸ªå°±æ˜¯ç»™mapåˆ†é…æ•°æ®ç©ºé—´ a = make(map[string]string, 10) a[\"str1\"] = \"ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²\" a[\"str2\"] = \"ç¬¬äºŒä¸ªå­—ç¬¦ä¸²\" a[\"str3\"] = \"ç¬¬ä¸‰ä¸ªå­—ç¬¦ä¸²\" fmt.Println(a) //map[str1:ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸² str2:ç¬¬äºŒä¸ªå­—ç¬¦ä¸² str3:ç¬¬ä¸‰ä¸ªå­—ç¬¦ä¸²] æ³¨æ„ï¼šå£°æ˜æ˜¯ä¸ä¼šåˆ†é…å†…å­˜çš„ï¼Œåˆå§‹åŒ–éœ€è¦makeåˆ†é…å†…å­˜åæ‰èƒ½èµ‹å€¼å’Œä½¿ç”¨ã€‚ æ³¨æ„äº‹é¡¹ mapåœ¨ä½¿ç”¨å‰ä¸€å®šè¦make mapçš„keyæ˜¯ä¸èƒ½é‡å¤ï¼Œå¦‚æœé‡å¤äº†ï¼Œåˆ™ä»¥æœ€åè¿™ä¸ªkey-valueä¸ºå‡† mapçš„valueæ˜¯å¯ä»¥ç›¸åŒçš„ mapçš„key-valueæ˜¯æ— åºçš„ ","date":"2022å¹´07æœˆ27æ—¥","objectID":"/2022/07/go-map/:1:0","tags":["Goç¬”è®°"],"title":"Go Map","uri":"/2022/07/go-map/"},{"categories":["Goç¬”è®°"],"content":"mapçš„ä½¿ç”¨ æ–¹å¼ä¸€ï¼š var cities map[string]string fmt.Println(cities) //map[] // åˆ†é…ä¸€ä¸ªmapç©ºé—´ cities = make(map[string]string, 10) fmt.Println(cities) //map[] æ–¹å¼äºŒï¼š // å£°æ˜ç›´æ¥make var cities = make(map[string]string) fmt.Println(cities) //map[] æ–¹å¼ä¸‰ï¼š // å£°æ˜ç›´æ¥èµ‹å€¼ var cities map[string]string = map[string]string{ \"city1\": \"æˆéƒ½\", } cities[\"city2\"] = \"æ·±åœ³\" fmt.Println(cities) //map[city1:æˆéƒ½ city2:æ·±åœ³] ","date":"2022å¹´07æœˆ27æ—¥","objectID":"/2022/07/go-map/:2:0","tags":["Goç¬”è®°"],"title":"Go Map","uri":"/2022/07/go-map/"},{"categories":["Goç¬”è®°"],"content":"mapçš„æ“ä½œ ","date":"2022å¹´07æœˆ27æ—¥","objectID":"/2022/07/go-map/:3:0","tags":["Goç¬”è®°"],"title":"Go Map","uri":"/2022/07/go-map/"},{"categories":["Goç¬”è®°"],"content":"mapçš„å¢åŠ å’Œæ›´æ–° map[\"key\"] = value å¦‚æœkeyä¸å­˜åœ¨å°±æ˜¯å¢åŠ ï¼Œå­˜åœ¨åˆ™ä¿®æ”¹ã€‚ cities := map[string]string{ \"city1\": \"æˆéƒ½\", } // æ·»åŠ çš„keyä¸å­˜åœ¨ï¼Œåˆ™æ–°å¢ cities[\"city2\"] = \"æ·±åœ³\" fmt.Println(cities) //map[city1:æˆéƒ½ city2:æ·±åœ³] // æ·»åŠ çš„keyå­˜åœ¨ï¼Œåˆ™ä¿®æ”¹ cities[\"city1\"] = \"åŒ—äº¬\" fmt.Println(cities) //map[city1:åŒ—äº¬ city2:æ·±åœ³] ","date":"2022å¹´07æœˆ27æ—¥","objectID":"/2022/07/go-map/:3:1","tags":["Goç¬”è®°"],"title":"Go Map","uri":"/2022/07/go-map/"},{"categories":["Goç¬”è®°"],"content":"mapçš„åˆ é™¤ delete(map, \"key\") deleteæ˜¯ä¸€ä¸ªå†…ç½®å‡½æ•°ï¼Œå¦‚æœkeyå­˜åœ¨ï¼Œåˆ™åˆ é™¤key-valueï¼Œå¦‚æœkeyä¸å­˜åœ¨ï¼Œä¸æ“ä½œï¼Œä¹Ÿä¸ä¼šæŠ¥é”™ã€‚ // åˆ é™¤çš„keyå­˜åœ¨ delete(cities, \"city1\") //åˆ é™¤çš„keyä¸å­˜åœ¨ delete(cities, \"city3\") fmt.Println(cities) //map[city2:æ·±åœ³] å¦‚æœè¦åˆ é™¤mapçš„æ‰€æœ‰keyï¼Œæ²¡æœ‰ä¸“é—¨çš„æ–¹æ³•ä¸€æ¬¡åˆ é™¤ï¼Œå¯ä»¥éå†ä¸€ä¸‹keyï¼Œé€ä¸ªåˆ é™¤ cities := map[string]string{ \"city1\": \"æˆéƒ½\", \"city2\": \"åŒ—äº¬\", \"city3\": \"æ·±åœ³\", } fmt.Println(cities) //map[city1:æˆéƒ½ city2:åŒ—äº¬ city3:æ·±åœ³] for key, _ := range cities { delete(cities, key) } fmt.Println(cities) //map[] æˆ–è€…map = make(...) makeä¸€ä¸ªæ–°çš„ï¼Œè®©åŸæ¥çš„æˆä¸ºåƒåœ¾ï¼Œè¢«gcå›æ”¶ cities := map[string]string{ \"city1\": \"æˆéƒ½\", \"city2\": \"åŒ—äº¬\", \"city3\": \"æ·±åœ³\", } fmt.Println(cities) //map[city1:æˆéƒ½ city2:åŒ—äº¬ city3:æ·±åœ³] cities = make(map[string]string) fmt.Println(cities) //map[] ","date":"2022å¹´07æœˆ27æ—¥","objectID":"/2022/07/go-map/:3:2","tags":["Goç¬”è®°"],"title":"Go Map","uri":"/2022/07/go-map/"},{"categories":["Goç¬”è®°"],"content":"mapæŸ¥æ‰¾ cities[\"city1\"] è·å–mapçš„å€¼æ—¶ï¼Œè¿”å›ç»“æœæœ‰ä¸¤ä¸ªï¼Œç¬¬ä¸€ä¸ªä¸ºå€¼ï¼Œç¬¬äºŒä¸ªä¸ºæ˜¯å¦å­˜åœ¨ï¼Œå­˜åœ¨è¿”å›trueï¼Œåä¹‹falseï¼Œé€šè¿‡åˆ¤æ–­ç¬¬äºŒä¸ªå€¼å¯å¾—åˆ°æ˜¯å¦å­˜åœ¨è¯¥key cities := map[string]string{ \"city1\": \"æˆéƒ½\", \"city2\": \"åŒ—äº¬\", \"city3\": \"æ·±åœ³\", } val, ok := cities[\"city4\"] if ok { fmt.Printf(\"æœ‰ city1 key å€¼ä¸º%v\\n\", val) } else { fmt.Printf(\"æ²¡æœ‰ city1 key \\n\") } ","date":"2022å¹´07æœˆ27æ—¥","objectID":"/2022/07/go-map/:3:3","tags":["Goç¬”è®°"],"title":"Go Map","uri":"/2022/07/go-map/"},{"categories":["Goç¬”è®°"],"content":"mapçš„éå† mapçš„éå†ä½¿ç”¨for-rangeçš„ç»“æœéå† cities := map[string]string{ \"city1\": \"æˆéƒ½\", \"city2\": \"åŒ—äº¬\", \"city3\": \"æ·±åœ³\", } for key, value := range cities { fmt.Println(key, value) } /* ç»“æœï¼š city2 åŒ—äº¬ city3 æ·±åœ³ city1 æˆéƒ½ */ ","date":"2022å¹´07æœˆ27æ—¥","objectID":"/2022/07/go-map/:4:0","tags":["Goç¬”è®°"],"title":"Go Map","uri":"/2022/07/go-map/"},{"categories":["Goç¬”è®°"],"content":"mapçš„é•¿åº¦ ä½¿ç”¨len(map) cities := map[string]string{ \"city1\": \"æˆéƒ½\", \"city2\": \"åŒ—äº¬\", \"city3\": \"æ·±åœ³\", } fmt.Println(len(cities)) //3 ","date":"2022å¹´07æœˆ27æ—¥","objectID":"/2022/07/go-map/:5:0","tags":["Goç¬”è®°"],"title":"Go Map","uri":"/2022/07/go-map/"},{"categories":["Goç¬”è®°"],"content":"mapåˆ‡ç‰‡ ","date":"2022å¹´07æœˆ27æ—¥","objectID":"/2022/07/go-map/:6:0","tags":["Goç¬”è®°"],"title":"Go Map","uri":"/2022/07/go-map/"},{"categories":["Goç¬”è®°"],"content":"åŸºæœ¬ä»‹ç» åˆ‡ç‰‡çš„æ•°æ®ç±»å‹å¦‚æœæ˜¯mapï¼Œåˆ™æˆ‘ä»¬ç§°ä¸ºslice of mapï¼Œmapåˆ‡ç‰‡ï¼Œè¿™æ ·ä½¿ç”¨mapä¸ªæ•°å°±å¯ä»¥åŠ¨æ€å˜åŒ–äº† ","date":"2022å¹´07æœˆ27æ—¥","objectID":"/2022/07/go-map/:6:1","tags":["Goç¬”è®°"],"title":"Go Map","uri":"/2022/07/go-map/"},{"categories":["Goç¬”è®°"],"content":"ä½¿ç”¨ // 1. å£°æ˜ä¸€ä¸ªmapåˆ‡ç‰‡ var monsters []map[string]string monsters = make([]map[string]string, 2) //å‡†å¤‡æ”¾ä¸¤ä¸ªä¿¡æ¯ // 2. æ·»åŠ ç¬¬ä¸€ä¸ªä¿¡æ¯ if monsters[0] == nil { monsters[0] = make(map[string]string, 2) monsters[0][\"name\"] = \"Ronin\" monsters[0][\"age\"] = \"18\" } fmt.Println(monsters) //[map[age:18 name:Ronin] map[]] // æ·»åŠ ç¬¬äºŒä¸ªä¿¡æ¯ if monsters[1] == nil { monsters[1] = make(map[string]string, 2) monsters[1][\"name\"] = \"Tommy\" monsters[1][\"age\"] = \"20\" } fmt.Println(monsters) //[map[age:18 name:Ronin] map[age:20 name:Tommy]] // ä½¿ç”¨appendå‡½æ•°åŠ¨æ€çš„å¢åŠ mapæ•°æ® // 1.å…ˆå®šä¹‰ä¿¡æ¯ monster := map[string]string{ \"name\": \"Desire\", \"age\": \"25\", } monsters = append(monsters, monster) fmt.Println(monsters) //[map[age:18 name:Ronin] map[age:20 name:Tommy] map[age:25 name:Desire]] ","date":"2022å¹´07æœˆ27æ—¥","objectID":"/2022/07/go-map/:6:2","tags":["Goç¬”è®°"],"title":"Go Map","uri":"/2022/07/go-map/"},{"categories":["Goç¬”è®°"],"content":"mapæ’åº å…ˆå°†mapçš„keyæ”¾å…¥åˆ°åˆ‡ç‰‡ä¸­ å¯¹åˆ‡ç‰‡è¿›è¡Œæ’åº éå†åˆ‡ç‰‡ï¼Œç„¶åæŒ‰ç…§keyæ¥è¾“å‡ºmapçš„å€¼ // mapçš„æ’åº map1 := make(map[int]int, 10) map1[10] = 100 map1[2] = 40 map1[5] = 1 map1[3] = 10 map1[9] = 20 // æ‰“å°ç»“æœï¼Œå¯ä»¥çœ‹åˆ°æ¯æ¬¡æ‰“å°çš„ç»“æœé¡ºåºéƒ½ä¸ä¸€æ · for k, _ := range map1 { fmt.Println(k) } // å¦‚æœæŒ‰ç…§mapçš„keyè¿›è¡Œæ’åºè¾“å‡º // 1. å…ˆå°†mapçš„keyæ”¾å…¥åˆ°åˆ‡ç‰‡ä¸­ // 2. å¯¹åˆ‡ç‰‡è¿›è¡Œæ’åº // 3. éå†åˆ‡ç‰‡ï¼Œç„¶åæŒ‰ç…§keyæ¥è¾“å‡ºmapçš„å€¼ var keys []int for k, _ := range map1 { keys = append(keys, k) } fmt.Println(keys) // æ’åº sort.Ints(keys) fmt.Println(keys) for _, k := range keys { fmt.Printf(\"map1[%v]=%v \\n\", k, map1[k]) } ","date":"2022å¹´07æœˆ27æ—¥","objectID":"/2022/07/go-map/:7:0","tags":["Goç¬”è®°"],"title":"Go Map","uri":"/2022/07/go-map/"},{"categories":["Goç¬”è®°"],"content":"mapä½¿ç”¨ç»†èŠ‚ mapæ˜¯å¼•ç”¨ç±»å‹ï¼Œéµå®ˆå¼•ç”¨ç±»å‹ä¼ é€’çš„æœºåˆ¶ï¼Œåœ¨ä¸€ä¸ªå‡½æ•°æ¥æ”¶mapï¼Œä¿®æ”¹åï¼Œä¼šç›´æ¥ä¿®æ”¹åŸæ¥çš„map mapçš„å®¹é‡è¾¾åˆ°åï¼Œå†æƒ³mapå¢åŠ å…ƒç´ ï¼Œä¼šè‡ªåŠ¨æ‰©å®¹ï¼Œå¹¶ä¸ä¼šå‘ç”Ÿpanicï¼Œä¹Ÿå°±æ˜¯è¯´mapèƒ½åŠ¨æ€çš„å¢é•¿é”®å€¼å¯¹ mapçš„valueä¹Ÿç»å¸¸ä½¿ç”¨structç±»å‹ï¼Œæ›´é€‚åˆç®¡ç†å¤æ‚çš„æ•°æ® ","date":"2022å¹´07æœˆ27æ—¥","objectID":"/2022/07/go-map/:8:0","tags":["Goç¬”è®°"],"title":"Go Map","uri":"/2022/07/go-map/"},{"categories":["Goç¬”è®°"],"content":"æ•°ç»„ æ•°ç»„å¯ä»¥å­˜æ”¾å¤šä¸ªåŒä¸€ç±»å‹æ•°æ®ã€‚æ•°æ®ä¹Ÿæ˜¯ä¸€ç§æ•°æ®ç±»å‹ï¼Œåœ¨Goä¸­ï¼Œæ•°ç»„æ˜¯å€¼ç±»å‹ã€‚ ","date":"2022å¹´07æœˆ27æ—¥","objectID":"/2022/07/go%E6%95%B0%E7%BB%84%E5%92%8C%E5%88%87%E7%89%87/:1:0","tags":["Goç¬”è®°"],"title":"Goæ•°ç»„å’Œåˆ‡ç‰‡","uri":"/2022/07/go%E6%95%B0%E7%BB%84%E5%92%8C%E5%88%87%E7%89%87/"},{"categories":["Goç¬”è®°"],"content":"æ•°ç»„çš„å®šä¹‰ è¯­æ³•ï¼švar æ•°ç»„å [æ•°ç»„å¤§å°]æ•°æ®ç±»å‹ æ³¨æ„ï¼šå®šä¹‰å®Œæ•°ç»„åï¼Œå…¶å®æ•°ç»„çš„å„ä¸ªå…ƒç´ éƒ½æ˜¯æœ‰é»˜è®¤å€¼çš„ï¼Œé»˜è®¤å€¼ä¸ºæ•°æ®ç±»å‹çš„é›¶å€¼ var nums [6]int æ•°ç»„çš„åœ°å€å¯ä»¥é€šè¿‡æ•°æ®åæ¥è·å–\u0026nums æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ çš„åœ°å€ï¼Œå°±æ˜¯æ•°ç»„çš„é¦–åœ°å€ æ•°ç»„çš„å„ä¸ªå…ƒç´ çš„åœ°å€é—´éš”æ˜¯ä¾æ®æ•°ç»„çš„ç±»å‹å†³å®šçš„ï¼Œæ¯”å¦‚int64-\u003e8 int32-\u003e4â€¦â€¦ var nums [6]int fmt.Printf(\"numså†…å­˜åœ°å€ï¼š%p \\n\", \u0026nums) //numså†…å­˜åœ°å€ï¼š0xc000018360 fmt.Printf(\"nums[0]å†…å­˜åœ°å€ï¼š%p \\n\", \u0026nums[0]) //numså†…å­˜åœ°å€ï¼š0xc000018360 fmt.Printf(\"nums[1]å†…å­˜åœ°å€ï¼š%p \\n\", \u0026nums[1]) //numså†…å­˜åœ°å€ï¼š0xc000018368 fmt.Printf(\"nums[2]å†…å­˜åœ°å€ï¼š%p \\n\", \u0026nums[2]) //numså†…å­˜åœ°å€ï¼š0xc000018370 fmt.Printf(\"nums[3]å†…å­˜åœ°å€ï¼š%p \\n\", \u0026nums[3]) //numså†…å­˜åœ°å€ï¼š0xc000018378 ","date":"2022å¹´07æœˆ27æ—¥","objectID":"/2022/07/go%E6%95%B0%E7%BB%84%E5%92%8C%E5%88%87%E7%89%87/:1:1","tags":["Goç¬”è®°"],"title":"Goæ•°ç»„å’Œåˆ‡ç‰‡","uri":"/2022/07/go%E6%95%B0%E7%BB%84%E5%92%8C%E5%88%87%E7%89%87/"},{"categories":["Goç¬”è®°"],"content":"æ•°ç»„çš„ä½¿ç”¨ è®¿é—®æ•°ç»„å…ƒç´  è¯­æ³•ï¼šæ•°ç»„å[ä¸‹æ ‡] var nums [6]int fmt.Println(nums[0]) //0 åˆå§‹åŒ–æ•°ç»„ var numsArray01 [3]int = [3]int{1, 2, 3} var numsArray02 = [3]int{4, 5, 6} var numsArray03 = [...]int{7, 8, 9} // å¯ä»¥æŒ‡å®šå…ƒç´ å€¼å¯¹åº”çš„ä¸‹æ ‡ var names = [3]string{1: \"tom\", 0: \"tommy\", 2: \"loss\"} fmt.Println(\"numsArray01ï¼š\", numsArray01) //numsArray01ï¼š [1 2 3] fmt.Println(\"numsArray02ï¼š\", numsArray02) //numsArray02ï¼š [4 5 6] fmt.Println(\"numsArray03ï¼š\", numsArray03) //numsArray03ï¼š [7 8 9] fmt.Println(\"namesï¼š\", names) //namesï¼š [tommy tom loss] æ•°ç»„éå† å¸¸è§„éå† names := [3]string{1: \"tom\", 0: \"tommy\", 2: \"loss\"} for i := 0; i \u003c len(names); i++ { fmt.Printf(\"ç¬¬%dä¸ªå…ƒç´ ï¼š%s\\n\", i, names[i]) } /* éå†ç»“æœï¼š ç¬¬0ä¸ªå…ƒç´ ï¼štommy ç¬¬1ä¸ªå…ƒç´ ï¼štom ç¬¬2ä¸ªå…ƒç´ ï¼šloss */ for-rangeç»“æ„éå† for index, value := range names { fmt.Printf(\"ç¬¬%dä¸ªå…ƒç´ ï¼š%s\\n\", index, value) } ç¬¬ä¸€ä¸ªè¿”å›å€¼indexæ˜¯æ•°ç»„çš„ä¸‹æ ‡ ç¬¬äºŒä¸ªvalueæ˜¯åœ¨è¯¥ä¸‹æ ‡ä½ç½®çš„å€¼ indexå’Œvalue æ˜¯ä»…åœ¨forå¾ªç¯å†…éƒ¨å¯è§çš„å±€éƒ¨å˜é‡ éå†æ•°ç»„å…ƒç´ çš„æ—¶å€™ï¼Œå¦‚æœä¸éœ€è¦ä¸‹æ ‡indexï¼Œå¯ä»¥ä½¿ç”¨_æ›¿ä»£ indexå’Œvalue åç§°ä¸æ˜¯å›ºå®šçš„ï¼Œå¯ä»¥è‡ªè¡ŒæŒ‡å®š ","date":"2022å¹´07æœˆ27æ—¥","objectID":"/2022/07/go%E6%95%B0%E7%BB%84%E5%92%8C%E5%88%87%E7%89%87/:1:2","tags":["Goç¬”è®°"],"title":"Goæ•°ç»„å’Œåˆ‡ç‰‡","uri":"/2022/07/go%E6%95%B0%E7%BB%84%E5%92%8C%E5%88%87%E7%89%87/"},{"categories":["Goç¬”è®°"],"content":"æ•°ç»„çš„æ³¨æ„äº‹é¡¹ æ•°ç»„æ˜¯å¤šä¸ªç›¸åŒç±»å‹æ•°æ®çš„ç»„åˆï¼Œä¸€ä¸ªæ•°ç»„ä¸€æ—¦å£°æ˜/å®šä¹‰ï¼Œå…¶é•¿åº¦æ˜¯å›ºå®šçš„ï¼Œä¸èƒ½åŠ¨æ€å˜åŒ–ã€‚ æ•°ç»„ä¸­çš„å…ƒç´ å¯ä»¥æ˜¯ä»»æ„æ•°æ®ç±»å‹ï¼ŒåŒ…æ‹¬å€¼ç±»å‹å’Œå¼•ç”¨ç±»å‹ï¼Œä½†æ˜¯ä¸èƒ½æ··ç”¨ã€‚ æ•°ç»„åˆ›å»ºåï¼Œå¦‚æœæ²¡æœ‰èµ‹å€¼ï¼Œæœ‰é»˜è®¤å€¼ï¼Œé»˜è®¤å€¼ä¸ºæ•°æ®ç±»å‹çš„é›¶å€¼ã€‚ æ•°ç»„çš„ä¸‹æ ‡æ˜¯ä»0å¼€å§‹çš„ï¼Œä¸‹æ ‡å¿…é¡»åœ¨æŒ‡å®šèŒƒå›´å†…ä½¿ç”¨ã€‚ Goçš„æ•°æ®å±äºå€¼ç±»å‹ï¼Œåœ¨é»˜è®¤æƒ…å†µä¸‹æ˜¯å€¼ä¼ é€’ï¼Œå› æ­¤ä¼šè¿›è¡Œå€¼æ‹·è´ã€‚æ•°æ®é—´ä¸ä¼šç›¸äº’å½±å“ã€‚ å¦‚æœæƒ³åœ¨å…¶ä»–å‡½æ•°ä¸­ï¼Œä¿®æ”¹åŸæ¥çš„æ•°ç»„ï¼Œå¯ä»¥ä½¿ç”¨å¼•ç”¨ä¼ é€’ï¼ˆæŒ‡é’ˆæ–¹å¼ï¼‰ã€‚ é•¿åº¦æ˜¯æ•°ç»„ç±»å‹çš„ä¸€éƒ¨åˆ†ï¼Œåœ¨ä¼ é€’å‡½æ•°å‚æ•°æ—¶ï¼Œéœ€è¦è€ƒè™‘æ•°ç»„çš„é•¿åº¦ã€‚ ","date":"2022å¹´07æœˆ27æ—¥","objectID":"/2022/07/go%E6%95%B0%E7%BB%84%E5%92%8C%E5%88%87%E7%89%87/:1:3","tags":["Goç¬”è®°"],"title":"Goæ•°ç»„å’Œåˆ‡ç‰‡","uri":"/2022/07/go%E6%95%B0%E7%BB%84%E5%92%8C%E5%88%87%E7%89%87/"},{"categories":["Goç¬”è®°"],"content":"åˆ‡ç‰‡ï¼ˆsliceï¼‰ ","date":"2022å¹´07æœˆ27æ—¥","objectID":"/2022/07/go%E6%95%B0%E7%BB%84%E5%92%8C%E5%88%87%E7%89%87/:2:0","tags":["Goç¬”è®°"],"title":"Goæ•°ç»„å’Œåˆ‡ç‰‡","uri":"/2022/07/go%E6%95%B0%E7%BB%84%E5%92%8C%E5%88%87%E7%89%87/"},{"categories":["Goç¬”è®°"],"content":"åŸºæœ¬ä»‹ç» åˆ‡ç‰‡æ˜¯æ•°ç»„çš„ä¸€ä¸ªå¼•ç”¨ï¼Œå› æ­¤åˆ‡ç‰‡æ˜¯å¼•ç”¨ç±»å‹ï¼Œåœ¨è¿›è¡Œä¼ é€’æ—¶ï¼Œéµå®ˆå¼•ç”¨ä¼ é€’çš„æœºåˆ¶ã€‚ åˆ‡ç‰‡çš„ä½¿ç”¨å’Œæ•°ç»„ç±»ä¼¼ï¼Œéå†åˆ‡ç‰‡ã€è®¿é—®åˆ‡ç‰‡çš„å…ƒç´ å’Œæ±‚åˆ‡ç‰‡é•¿åº¦len(slice)éƒ½ä¸€æ ·ã€‚ åˆ‡ç‰‡çš„é•¿åº¦æ˜¯å¯ä»¥å˜åŒ–çš„ï¼Œå› æ­¤åˆ‡ç‰‡æ˜¯ä¸€ä¸ªå¯ä»¥åŠ¨æ€å˜åŒ–çš„æ•°ç»„ã€‚ ","date":"2022å¹´07æœˆ27æ—¥","objectID":"/2022/07/go%E6%95%B0%E7%BB%84%E5%92%8C%E5%88%87%E7%89%87/:2:1","tags":["Goç¬”è®°"],"title":"Goæ•°ç»„å’Œåˆ‡ç‰‡","uri":"/2022/07/go%E6%95%B0%E7%BB%84%E5%92%8C%E5%88%87%E7%89%87/"},{"categories":["Goç¬”è®°"],"content":"åˆ‡ç‰‡å®šä¹‰ è¯­æ³•ï¼švar åˆ‡ç‰‡å []ç±»å‹ var a []int ","date":"2022å¹´07æœˆ27æ—¥","objectID":"/2022/07/go%E6%95%B0%E7%BB%84%E5%92%8C%E5%88%87%E7%89%87/:2:2","tags":["Goç¬”è®°"],"title":"Goæ•°ç»„å’Œåˆ‡ç‰‡","uri":"/2022/07/go%E6%95%B0%E7%BB%84%E5%92%8C%E5%88%87%E7%89%87/"},{"categories":["Goç¬”è®°"],"content":"åˆ‡ç‰‡åœ¨å†…å­˜ä¸­çš„åˆ†å¸ƒ intArr := [...]int{1, 2, 3, 4, 5, 6} // å£°æ˜ä¸€ä¸ªåˆ‡ç‰‡ // å¼•ç”¨intArræ•°ç»„çš„èµ·å§‹ä¸‹æ ‡ä¸º1ï¼Œæœ€åä¸‹æ ‡ä¸º3ï¼ˆä¸åŒ…å«3ï¼‰çš„å€¼ slice := intArr[1:3] fmt.Println(\"intArr=\", intArr) //intArr= [1 2 3 4 5 6] fmt.Println(\"slice çš„å…ƒç´ æ˜¯ï¼š\", slice) //slice çš„å…ƒç´ æ˜¯ï¼š [2 3] fmt.Println(\"slice çš„å…ƒç´ ä¸ªæ•°ï¼š\", len(slice)) //slice çš„å…ƒç´ ä¸ªæ•°ï¼š 2 fmt.Println(\"slice çš„å®¹é‡ï¼š\", cap(slice)) //slice çš„å®¹é‡ï¼š 5 fmt.Printf(\"intArr[0] çš„å†…å­˜åœ°å€: %p\\n\", \u0026intArr[0]) //intArr[0] çš„å†…å­˜åœ°å€: 0xc000018360 fmt.Printf(\"intArr[1] çš„å†…å­˜åœ°å€: %p\\n\", \u0026intArr[1]) //intArr[1] çš„å†…å­˜åœ°å€: 0xc000018368 fmt.Printf(\"intArr[2] çš„å†…å­˜åœ°å€: %p\\n\", \u0026intArr[2]) //intArr[2] çš„å†…å­˜åœ°å€: 0xc000018370 fmt.Printf(\"intArr[3] çš„å†…å­˜åœ°å€: %p\\n\", \u0026intArr[3]) //intArr[3] çš„å†…å­˜åœ°å€: 0xc000018378 fmt.Printf(\"intArr[4] çš„å†…å­˜åœ°å€: %p\\n\", \u0026intArr[4]) //intArr[4] çš„å†…å­˜åœ°å€: 0xc000018380 fmt.Printf(\"intArr[5] çš„å†…å­˜åœ°å€: %p\\n\", \u0026intArr[5]) //intArr[5] çš„å†…å­˜åœ°å€: 0xc000018388 fmt.Printf(\"slice[0] çš„å†…å­˜åœ°å€: %p\\n\", \u0026slice[0]) //slice[0] çš„å†…å­˜åœ°å€: 0xc0000aa068 fmt.Printf(\"slice[1] çš„å†…å­˜åœ°å€: %p\\n\", \u0026slice[1]) //slice[1] çš„å†…å­˜åœ°å€: 0xc000018370 ","date":"2022å¹´07æœˆ27æ—¥","objectID":"/2022/07/go%E6%95%B0%E7%BB%84%E5%92%8C%E5%88%87%E7%89%87/:2:3","tags":["Goç¬”è®°"],"title":"Goæ•°ç»„å’Œåˆ‡ç‰‡","uri":"/2022/07/go%E6%95%B0%E7%BB%84%E5%92%8C%E5%88%87%E7%89%87/"},{"categories":["Goç¬”è®°"],"content":"åˆ‡ç‰‡ä½¿ç”¨ æ–¹å¼ä¸€ å®šä¹‰ä¸€ä¸ªåˆ‡ç‰‡ï¼Œç„¶åè®©åˆ‡ç‰‡å»å¼•ç”¨ä¸€ä¸ªå·²ç»åˆ›å»ºå¥½çš„æ•°ç»„ intArr := [...]int{1, 2, 3, 4, 5, 6} // å£°æ˜ä¸€ä¸ªåˆ‡ç‰‡ // å¼•ç”¨intArræ•°ç»„çš„èµ·å§‹ä¸‹æ ‡ä¸º1ï¼Œæœ€åä¸‹æ ‡ä¸º3ï¼ˆä¸åŒ…å«3ï¼‰çš„å€¼ slice := intArr[1:3] æ–¹å¼äºŒ é€šè¿‡makeæ¥åˆ›å»ºåˆ‡ç‰‡ åŸºæœ¬è¯­æ³•ï¼švar åˆ‡ç‰‡å []type = make([]type, len, [cap]) type: æ˜¯æ•°æ®ç±»å‹ len: å¤§å° cap: æŒ‡å®šåˆ‡ç‰‡å®¹é‡ï¼Œå¯é€‰ é€šè¿‡makeæ–¹å¼åˆ›å»ºçš„åˆ‡ç‰‡å¯¹åº”çš„æ•°ç»„æ˜¯ç”±makeåº•å±‚ç»´æŠ¤ï¼Œå¯¹å¤–ä¸å¯è§ï¼Œå³åªèƒ½é€šè¿‡sliceå»è®¿é—®å„ä¸ªå…ƒç´  var slice2 = make([]int, 4, 10) fmt.Println(\"slice2= \", slice2) //slice2= [0 0 0 0] fmt.Println(\"slice2 çš„å¤§å°ï¼š\", len(slice2)) //slice2 çš„å¤§å°ï¼š 4 fmt.Println(\"slice2 çš„å®¹é‡ï¼š\", cap(slice2)) //slice2 çš„å®¹é‡ï¼š 10 æ–¹å¼ä¸‰ å®šä¹‰ä¸€ä¸ªåˆ‡ç‰‡ï¼Œç›´æ¥å°±æŒ‡å®šå…·ä½“æ•°ç»„ï¼Œä½¿ç”¨åŸç†ç±»ä¼¼makeçš„æ–¹å¼ var slice3 = []int{1, 3, 5} fmt.Println(\"slice3= \", slice3) //slice3= [1 3 5] fmt.Println(\"slice3 çš„å¤§å°ï¼š\", len(slice3)) //slice3 çš„å¤§å°ï¼š 3 fmt.Println(\"slice3 çš„å®¹é‡ï¼š\", cap(slice3)) //slice3 çš„å®¹é‡ï¼š 3 æ–¹å¼ä¸€ã€äºŒçš„åŒºåˆ« æ–¹å¼ä¸€æ˜¯ç›´æ¥å¼•ç”¨æ•°ç»„ï¼Œè¿™ä¸ªæ•°ç»„æ˜¯äº‹å…ˆå­˜åœ¨çš„ï¼Œæ˜¯å¯è§çš„ æ–¹å¼äºŒé€šè¿‡makeæ¥åˆ›å»ºåˆ‡ç‰‡ï¼Œmakeä¹Ÿä¼šåˆ›å»ºä¸€ä¸ªæ•°ç»„ï¼Œæ˜¯ç”±åˆ‡ç‰‡åœ¨åº•å±‚è¿›è¡Œç»´æŠ¤ï¼Œæ˜¯ä¸å¯è§çš„ ","date":"2022å¹´07æœˆ27æ—¥","objectID":"/2022/07/go%E6%95%B0%E7%BB%84%E5%92%8C%E5%88%87%E7%89%87/:2:4","tags":["Goç¬”è®°"],"title":"Goæ•°ç»„å’Œåˆ‡ç‰‡","uri":"/2022/07/go%E6%95%B0%E7%BB%84%E5%92%8C%E5%88%87%E7%89%87/"},{"categories":["Goç¬”è®°"],"content":"åˆ‡ç‰‡éå† å¸¸è§„æ–¹å¼éå† slice4 := []int{1, 2, 3} for i := 0; i \u003c len(slice4); i++ { fmt.Printf(\"ç¬¬%dä¸ªå…ƒç´ ï¼š%d\\n\", i, slice4[i]) } for-rangeéå† for i, v := range slice4 { fmt.Printf(\"ç¬¬%dä¸ªå…ƒç´ ï¼š%d\\n\", i, v) } ","date":"2022å¹´07æœˆ27æ—¥","objectID":"/2022/07/go%E6%95%B0%E7%BB%84%E5%92%8C%E5%88%87%E7%89%87/:2:5","tags":["Goç¬”è®°"],"title":"Goæ•°ç»„å’Œåˆ‡ç‰‡","uri":"/2022/07/go%E6%95%B0%E7%BB%84%E5%92%8C%E5%88%87%E7%89%87/"},{"categories":["Goç¬”è®°"],"content":"åˆ‡ç‰‡åŠ¨æ€è¿½åŠ å…ƒç´  ç”¨appendå†…ç½®å‡½æ•°ï¼Œå¯ä»¥å¯¹åˆ‡ç‰‡è¿›è¡ŒåŠ¨æ€è¿½åŠ  slice5 := []int{1, 2, 3} fmt.Println(\"slice5= \", slice5) //slice5= [1 2 3] fmt.Println(\"slice5 çš„å¤§å°ï¼š\", len(slice5)) //slice5 çš„å¤§å°ï¼š 3 fmt.Println(\"slice5 çš„å®¹é‡ï¼š\", cap(slice5)) //slice5 çš„å®¹é‡ï¼š 3 slice5 = append(slice5, 10, 20, 30) fmt.Println(\"slice5= \", slice5) //slice5= [1 2 3 10 20 30] fmt.Println(\"slice5 çš„å¤§å°ï¼š\", len(slice5)) //slice5 çš„å¤§å°ï¼š 6 fmt.Println(\"slice5 çš„å®¹é‡ï¼š\", cap(slice5)) //slice5 çš„å®¹é‡ï¼š 6 // åœ¨åˆ‡ç‰‡ä¸Šè¿½åŠ åˆ‡ç‰‡ slice6 := []int{1000, 2000} slice5 = append(slice5, slice6...) fmt.Println(\"slice5= \", slice5) //slice5= [1 2 3 10 20 30 1000 2000] fmt.Println(\"slice5 çš„å¤§å°ï¼š\", len(slice5)) //slice5 çš„å¤§å°ï¼š 8 fmt.Println(\"slice5 çš„å®¹é‡ï¼š\", cap(slice5)) //slice5 çš„å®¹é‡ï¼š 12 åˆ‡ç‰‡appendæ“ä½œçš„åº•å±‚åŸç†åˆ†æï¼š åˆ‡ç‰‡appendæ“ä½œçš„æœ¬è´¨å°±æ˜¯å¯¹æ•°ç»„æ‰©å®¹ Goåº•å±‚ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„æ•°ç»„newArrï¼ˆå®‰è£…æ‰©å®¹åçš„å¤§å°ï¼‰ å°†sliceåŸæ¥åŒ…å«çš„å…ƒç´ æ‹·è´åˆ°æ–°çš„æ•°ç»„newArr sliceé‡æ–°å¼•ç”¨åˆ°newArrï¼ˆnewArræ˜¯ç”±åº•å±‚æ¥ç»´æŠ¤çš„ï¼Œä¸å¯è§ï¼‰ ","date":"2022å¹´07æœˆ27æ—¥","objectID":"/2022/07/go%E6%95%B0%E7%BB%84%E5%92%8C%E5%88%87%E7%89%87/:2:6","tags":["Goç¬”è®°"],"title":"Goæ•°ç»„å’Œåˆ‡ç‰‡","uri":"/2022/07/go%E6%95%B0%E7%BB%84%E5%92%8C%E5%88%87%E7%89%87/"},{"categories":["Goç¬”è®°"],"content":"åˆ‡ç‰‡çš„æ‹·è´æ“ä½œ åˆ‡ç‰‡ä½¿ç”¨copyå†…ç½®å‡½æ•°å®Œæˆæ‹·è´ slice7 := []int{1, 2, 3, 4, 5} slice8 := make([]int, 10) fmt.Println(\"slice7 = \", slice7) //slice7 = [1 2 3 4 5] fmt.Println(\"slice8 = \", slice8) //slice8 = [0 0 0 0 0 0 0 0 0 0] copy(slice8, slice7) fmt.Println(\"æ‹·è´åçš„slice8 = \", slice8) //æ‹·è´åçš„slice8 = [1 2 3 4 5 0 0 0 0 0] ","date":"2022å¹´07æœˆ27æ—¥","objectID":"/2022/07/go%E6%95%B0%E7%BB%84%E5%92%8C%E5%88%87%E7%89%87/:2:7","tags":["Goç¬”è®°"],"title":"Goæ•°ç»„å’Œåˆ‡ç‰‡","uri":"/2022/07/go%E6%95%B0%E7%BB%84%E5%92%8C%E5%88%87%E7%89%87/"},{"categories":["Goç¬”è®°"],"content":"åˆ‡ç‰‡çš„æ³¨æ„äº‹é¡¹ åˆ‡ç‰‡åˆå§‹åŒ–æ—¶ï¼švar slice = arr[startIndex:endIndex] è¯´æ˜ï¼šä»arræ•°ç»„ä¸‹æ ‡ä¸ºstartIndexï¼Œå–åˆ°ä¸‹æ ‡ä¸ºendIndexçš„å…ƒç´ ï¼ˆä¸å«arr[endIndex]ï¼‰ åˆ‡ç‰‡åˆå§‹åŒ–æ—¶ï¼Œä¸èƒ½è¶Šç•Œï¼ŒèŒƒå›´åœ¨[0~len(arr)]ä¹‹é—´ï¼Œä½†æ˜¯å¯ä»¥åŠ¨æ€å¢é•¿ capæ˜¯ä¸€ä¸ªå†…ç½®å‡½æ•°ï¼Œç”¨æˆ·ç»Ÿè®¡åˆ‡ç‰‡çš„å®¹é‡ï¼Œå³æœ€å¤§å¯ä»¥å­˜æ”¾å¤šå°‘ä¸ªå…ƒç´  åˆ‡ç‰‡å®šä¹‰å®Œåï¼Œè¿˜ä¸èƒ½ä½¿ç”¨ï¼Œå› ä¸ºæœ¬èº«æ˜¯ä¸€ä¸ªç©ºçš„ï¼Œéœ€è¦è®©å…¶å¼•ç”¨åˆ°ä¸€ä¸ªæ•°ç»„ï¼Œæˆ–è€…makeä¸€ä¸ªç©ºé—´ä¾›åˆ‡ç‰‡æ¥ä½¿ç”¨ åˆ‡ç‰‡å¯ä»¥ç»§ç»­åˆ‡ç‰‡ ç”¨appendå†…ç½®å‡½æ•°ï¼Œå¯ä»¥å¯¹åˆ‡ç‰‡è¿›è¡ŒåŠ¨æ€è¿½åŠ  åˆ‡ç‰‡ä½¿ç”¨copyå†…ç½®å‡½æ•°å®Œæˆæ‹·è´ åˆ‡ç‰‡æ˜¯å¼•ç”¨ç±»å‹ï¼Œæ‰€åœ¨åœ¨ä¼ é€’æ—¶ï¼Œéµå®ˆå¼•ç”¨ä¼ é€’æœºåˆ¶ ","date":"2022å¹´07æœˆ27æ—¥","objectID":"/2022/07/go%E6%95%B0%E7%BB%84%E5%92%8C%E5%88%87%E7%89%87/:2:8","tags":["Goç¬”è®°"],"title":"Goæ•°ç»„å’Œåˆ‡ç‰‡","uri":"/2022/07/go%E6%95%B0%E7%BB%84%E5%92%8C%E5%88%87%E7%89%87/"},{"categories":["Goç¬”è®°"],"content":"stringå’Œslice stringåº•å±‚æ˜¯ä¸€ä¸ªbyteæ•°ç»„ï¼Œå› æ­¤stringä¹Ÿå¯ä»¥è¿›è¡Œåˆ‡ç‰‡å¤„ç† s := \"Hello World\" fmt.Println(\"s = \", s) //s = Hello World fmt.Println(\"s[4:] = \", s[4:]) //s[4:] = o World stringå’Œåˆ‡ç‰‡åœ¨å†…å­˜çš„å½¢å¼ stringæ˜¯ä¸å¯å˜çš„ï¼Œä¸èƒ½é€šè¿‡str[0]='z'æ–¹å¼æ¥ä¿®æ”¹å­—ç¬¦ä¸² å¦‚æœè¦ä¿®æ”¹å­—ç¬¦ä¸²ï¼Œå¯ä»¥ç°å°†stringè½¬æˆ[]byteæˆ–è€…[]runneï¼Œç„¶åå†è¿›è¡Œä¿®æ”¹ï¼Œæœ€åå†è½¬æˆstring s := \"Hello World\" fmt.Println(\"åŸå§‹s = \", s) //åŸå§‹s = Hello World arr := []byte(s) arr[0] = 'z' s = string(arr) fmt.Println(\"æ›´æ”¹åçš„s = \", s) //æ›´æ”¹åçš„s = zello World // ç»†èŠ‚ï¼šè½¬æˆ[]byteåï¼Œå¯ä»¥å¤„ç†è‹±æ–‡å’Œæ•°å­—ï¼Œä½†æ˜¯ä¸èƒ½å¤„ç†ä¸­æ–‡ // åŸå› ï¼š[]byteæ˜¯æŒ‰ç…§å­—èŠ‚æ¥å¤„ç†çš„ï¼Œè€Œä¸€ä¸ªä¸­æ–‡ï¼Œæ˜¯3ä¸ªå­—èŠ‚ï¼Œå› æ­¤ä¼šå‡ºç°ä¹±ç  //arr2 := []byte(s) //arr2[0] = 'ä¸­' // ç¼–è¯‘æŠ¥é”™ï¼šconstant 20013 overflows byte //s = string(arr2) //fmt.Println(\"æ›´æ”¹åçš„s = \", s) // è§£å†³ï¼šå°†stringè½¬æˆ[]runeå³å¯ï¼Œå› ä¸º[]runeæ˜¯æŒ‰å­—ç¬¦å¤„ç†ï¼Œå…¼å®¹æ±‰å­— arr3 := []rune(s) arr3[0] = 'ä¸­' // ç¼–è¯‘æŠ¥é”™ï¼šconstant 20013 overflows byte s = string(arr3) fmt.Println(\"æ›´æ”¹åçš„s = \", s) //æ›´æ”¹åçš„s = ä¸­ello World ","date":"2022å¹´07æœˆ27æ—¥","objectID":"/2022/07/go%E6%95%B0%E7%BB%84%E5%92%8C%E5%88%87%E7%89%87/:3:0","tags":["Goç¬”è®°"],"title":"Goæ•°ç»„å’Œåˆ‡ç‰‡","uri":"/2022/07/go%E6%95%B0%E7%BB%84%E5%92%8C%E5%88%87%E7%89%87/"},{"categories":["Goç¬”è®°"],"content":"åŸºæœ¬è¯´æ˜ é»˜è®¤æƒ…å†µä¸‹ï¼Œå½“å‘ç”Ÿé”™è¯¯ï¼ˆpanicï¼‰ï¼Œç¨‹åºå°±ä¼šé€€å‡ºï¼ˆå´©æºƒï¼‰ Goè¯­è¨€ä¸æ”¯æŒä¼ ç»Ÿçš„tryâ€¦â€¦catchâ€¦â€¦finally Goä¸­å¼•å…¥çš„å¤„ç†æ–¹å¼ä¸ºï¼šdefer panic recover å¤„ç†æµç¨‹ï¼šæŠ›å‡ºpanicå¼‚å¸¸ â€“Â» åœ¨deferä¸­é€šè¿‡recoveræ•è·å¼‚å¸¸ â€“Â» æ­£å¸¸å¤„ç† ","date":"2022å¹´07æœˆ26æ—¥","objectID":"/2022/07/go%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86%E6%9C%BA%E5%88%B6/:1:0","tags":["Goç¬”è®°"],"title":"Goé”™è¯¯å¤„ç†æœºåˆ¶","uri":"/2022/07/go%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86%E6%9C%BA%E5%88%B6/"},{"categories":["Goç¬”è®°"],"content":"ä½¿ç”¨ func test() { // ä½¿ç”¨defer + recover æ•è·å’Œå¤„ç†å¼‚å¸¸ defer func() { err := recover() // recover å†…ç½®å‡½æ•°ï¼Œå¯ä»¥æ•è·åˆ°å¼‚å¸¸ if err != nil { fmt.Println(\"err=\", err) } }() num1 := 10 num2 := 0 res := num1 / num2 fmt.Println(\"res=\", res) } func main() { test() fmt.Printf(\"main()ç»“æŸ\") } ","date":"2022å¹´07æœˆ26æ—¥","objectID":"/2022/07/go%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86%E6%9C%BA%E5%88%B6/:2:0","tags":["Goç¬”è®°"],"title":"Goé”™è¯¯å¤„ç†æœºåˆ¶","uri":"/2022/07/go%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86%E6%9C%BA%E5%88%B6/"},{"categories":["Goç¬”è®°"],"content":"è‡ªå®šä¹‰é”™è¯¯ ä½¿ç”¨errors.Newå’Œpanicå†…ç½®å‡½æ•° errorsNew(\"é”™è¯¯è¯´æ˜\")ï¼Œä¼šè¿”å›ä¸€ä¸ªerrorç±»å‹çš„å€¼ï¼Œè¡¨ç¤ºä¸€ä¸ªé”™è¯¯ panicå†…ç½®å‡½æ•°ï¼Œæ¥æ”¶ä¸€ä¸ªinterface{}ç±»å‹çš„å€¼ï¼ˆä¹Ÿå°±æ˜¯ä»»æ„å€¼ï¼‰ä½œä¸ºå‚æ•°ã€‚å¯ä»¥æ¥å—errorç±»å‹çš„å˜é‡ï¼Œè¾“å‡ºé”™è¯¯ä¿¡æ¯ï¼Œå¹¶é€€å‡ºç¨‹åº package main import ( \"errors\" \"fmt\" ) func readConf(name string) (err error) { if name == \"config.ini\" { return nil } else { return errors.New(\"æ–‡ä»¶åè¾“å…¥æœ‰è¯¯\") } } func main() { err := readConf(\"config.json\") if err != nil { panic(err) // æŠŠå¼‚å¸¸æŠ›å‡ºï¼Œå¦‚æœæœ‰å¼‚å¸¸åˆ™ä¼šæŠ›å‡ºå¼‚å¸¸å¹¶ä¸”ç»ˆæ­¢ç¨‹åº } fmt.Println(\"main()\") // æœ‰å¼‚å¸¸æŠ›å‡ºï¼Œåˆ™ä¸ä¼šæ‰§è¡Œ } ","date":"2022å¹´07æœˆ26æ—¥","objectID":"/2022/07/go%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86%E6%9C%BA%E5%88%B6/:3:0","tags":["Goç¬”è®°"],"title":"Goé”™è¯¯å¤„ç†æœºåˆ¶","uri":"/2022/07/go%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86%E6%9C%BA%E5%88%B6/"},{"categories":["Goç¬”è®°"],"content":"å¹¶è¡Œï¼ˆå¹¶å‘ï¼‰é—®é¢˜ ","date":"2022å¹´07æœˆ24æ—¥","objectID":"/2022/07/go%E5%8D%8F%E7%A8%8B%E5%B9%B6%E5%8F%91%E5%B9%B6%E8%A1%8C%E8%B5%84%E6%BA%90%E7%AB%9E%E4%BA%89%E9%97%AE%E9%A2%98/:1:0","tags":["Goç¬”è®°"],"title":"Goåç¨‹å¹¶å‘(å¹¶è¡Œ)èµ„æºç«äº‰é—®é¢˜","uri":"/2022/07/go%E5%8D%8F%E7%A8%8B%E5%B9%B6%E5%8F%91%E5%B9%B6%E8%A1%8C%E8%B5%84%E6%BA%90%E7%AB%9E%E4%BA%89%E9%97%AE%E9%A2%98/"},{"categories":["Goç¬”è®°"],"content":"ä½¿ç”¨åç¨‹å®ç°æ±‚nçš„é˜¶ä¹˜ // å®šä¹‰ä¸€ä¸ªmapé›†åˆç”¨æ¥å­˜æ”¾æ•°æ® var MyMap = make(map[int]int, 10) // æ±‚nçš„é˜¶ä¹˜ï¼Œå¹¶æŠŠæ•°æ®å­˜æ”¾åˆ°MyMapé›†åˆ func test2(n int) { res := 1 for i := 1; i \u003c= n; i++ { res *= i } MyMap[n] = res } func main() { // å¼€å¯200ä¸ªåç¨‹æ‰§è¡Œ for i := 1; i \u003c= 200; i++ { go test2(i) } // éå†mapé›†åˆ for i, v := range MyMap { fmt.Println(i, v) } } ","date":"2022å¹´07æœˆ24æ—¥","objectID":"/2022/07/go%E5%8D%8F%E7%A8%8B%E5%B9%B6%E5%8F%91%E5%B9%B6%E8%A1%8C%E8%B5%84%E6%BA%90%E7%AB%9E%E4%BA%89%E9%97%AE%E9%A2%98/:1:1","tags":["Goç¬”è®°"],"title":"Goåç¨‹å¹¶å‘(å¹¶è¡Œ)èµ„æºç«äº‰é—®é¢˜","uri":"/2022/07/go%E5%8D%8F%E7%A8%8B%E5%B9%B6%E5%8F%91%E5%B9%B6%E8%A1%8C%E8%B5%84%E6%BA%90%E7%AB%9E%E4%BA%89%E9%97%AE%E9%A2%98/"},{"categories":["Goç¬”è®°"],"content":"æ‰§è¡Œç»“æœ âŒæŠ¥é”™ï¼šå¹¶å‘æ˜ å°„å†™å…¥ fatal error: concurrent map writes fatal error: concurrent map writes ","date":"2022å¹´07æœˆ24æ—¥","objectID":"/2022/07/go%E5%8D%8F%E7%A8%8B%E5%B9%B6%E5%8F%91%E5%B9%B6%E8%A1%8C%E8%B5%84%E6%BA%90%E7%AB%9E%E4%BA%89%E9%97%AE%E9%A2%98/:1:2","tags":["Goç¬”è®°"],"title":"Goåç¨‹å¹¶å‘(å¹¶è¡Œ)èµ„æºç«äº‰é—®é¢˜","uri":"/2022/07/go%E5%8D%8F%E7%A8%8B%E5%B9%B6%E5%8F%91%E5%B9%B6%E8%A1%8C%E8%B5%84%E6%BA%90%E7%AB%9E%E4%BA%89%E9%97%AE%E9%A2%98/"},{"categories":["Goç¬”è®°"],"content":"æ‰§è¡Œå›¾ ","date":"2022å¹´07æœˆ24æ—¥","objectID":"/2022/07/go%E5%8D%8F%E7%A8%8B%E5%B9%B6%E5%8F%91%E5%B9%B6%E8%A1%8C%E8%B5%84%E6%BA%90%E7%AB%9E%E4%BA%89%E9%97%AE%E9%A2%98/:1:3","tags":["Goç¬”è®°"],"title":"Goåç¨‹å¹¶å‘(å¹¶è¡Œ)èµ„æºç«äº‰é—®é¢˜","uri":"/2022/07/go%E5%8D%8F%E7%A8%8B%E5%B9%B6%E5%8F%91%E5%B9%B6%E8%A1%8C%E8%B5%84%E6%BA%90%E7%AB%9E%E4%BA%89%E9%97%AE%E9%A2%98/"},{"categories":["Goç¬”è®°"],"content":"å¦‚ä½•è§£å†³ ","date":"2022å¹´07æœˆ24æ—¥","objectID":"/2022/07/go%E5%8D%8F%E7%A8%8B%E5%B9%B6%E5%8F%91%E5%B9%B6%E8%A1%8C%E8%B5%84%E6%BA%90%E7%AB%9E%E4%BA%89%E9%97%AE%E9%A2%98/:2:0","tags":["Goç¬”è®°"],"title":"Goåç¨‹å¹¶å‘(å¹¶è¡Œ)èµ„æºç«äº‰é—®é¢˜","uri":"/2022/07/go%E5%8D%8F%E7%A8%8B%E5%B9%B6%E5%8F%91%E5%B9%B6%E8%A1%8C%E8%B5%84%E6%BA%90%E7%AB%9E%E4%BA%89%E9%97%AE%E9%A2%98/"},{"categories":["Goç¬”è®°"],"content":"ä¸åŒåç¨‹ä¹‹é—´å¦‚ä½•é€šè®¯ å…¨å±€å˜é‡åŠ é”åŒæ­¥ ä½¿ç”¨channelï¼ˆç®¡é“ï¼‰ ","date":"2022å¹´07æœˆ24æ—¥","objectID":"/2022/07/go%E5%8D%8F%E7%A8%8B%E5%B9%B6%E5%8F%91%E5%B9%B6%E8%A1%8C%E8%B5%84%E6%BA%90%E7%AB%9E%E4%BA%89%E9%97%AE%E9%A2%98/:2:1","tags":["Goç¬”è®°"],"title":"Goåç¨‹å¹¶å‘(å¹¶è¡Œ)èµ„æºç«äº‰é—®é¢˜","uri":"/2022/07/go%E5%8D%8F%E7%A8%8B%E5%B9%B6%E5%8F%91%E5%B9%B6%E8%A1%8C%E8%B5%84%E6%BA%90%E7%AB%9E%E4%BA%89%E9%97%AE%E9%A2%98/"},{"categories":["Goç¬”è®°"],"content":"ä½¿ç”¨å…¨å±€å˜é‡åŠ é”åŒæ­¥è§£å†³ å› ä¸ºæ²¡æœ‰å¯¹å…¨å±€å˜é‡ MyMap åŠ é”ï¼Œå› æ­¤ä¼šå‡ºç°èµ„æºäº‰å¤ºé—®é¢˜ï¼Œä»£ç ä¼šå‡ºç°é”™è¯¯ï¼šconcurrent map writes è§£å†³æ–¹æ¡ˆï¼šåŠ å…¥äº’æ–¥é” var ( MyMap = make(map[int]uint64, 10) // lock æ˜¯ä¸€ä¸ªå…¨å±€äº’æ–¥é” lock sync.Mutex ) func test2(n int) { var res uint64 = 1 for i := 1; i \u003c= n; i++ { res *= uint64(i) } //åŠ é” lock.Lock() MyMap[n] = res //è§£é” lock.Unlock() } func main() { for i := 1; i \u003c= 200; i++ { go test2(i) } // æ·»åŠ ç­‰å¾…æ—¶é—´ï¼Œç­‰åç¨‹æ‰§è¡Œå®Œæ¯• time.Sleep(time.Second * 5) lock.Lock() for i, v := range MyMap { fmt.Println(i, v) } lock.Unlock() } æ‰§è¡Œæµç¨‹ç¤ºæ„å›¾ ","date":"2022å¹´07æœˆ24æ—¥","objectID":"/2022/07/go%E5%8D%8F%E7%A8%8B%E5%B9%B6%E5%8F%91%E5%B9%B6%E8%A1%8C%E8%B5%84%E6%BA%90%E7%AB%9E%E4%BA%89%E9%97%AE%E9%A2%98/:2:2","tags":["Goç¬”è®°"],"title":"Goåç¨‹å¹¶å‘(å¹¶è¡Œ)èµ„æºç«äº‰é—®é¢˜","uri":"/2022/07/go%E5%8D%8F%E7%A8%8B%E5%B9%B6%E5%8F%91%E5%B9%B6%E8%A1%8C%E8%B5%84%E6%BA%90%E7%AB%9E%E4%BA%89%E9%97%AE%E9%A2%98/"},{"categories":["Goç¬”è®°"],"content":"ä½¿ç”¨ç­‰å¾…ç»„ï¼ˆsync.WaitGroupï¼‰ä¸»çº¿ç¨‹ç­‰å¾…åç¨‹æ‰§è¡Œå®Œæ¯• var ( MyMap = make(map[int]uint64, 10) // lock æ˜¯ä¸€ä¸ªå…¨å±€äº’æ–¥é” lock sync.Mutex wg sync.WaitGroup ) func test2(n int) { var res uint64 = 1 for i := 1; i \u003c= n; i++ { res *= uint64(i) } //åŠ é” lock.Lock() MyMap[n] = res //è§£é” lock.Unlock() wg.Done() } func main() { for i := 1; i \u003c= 200; i++ { wg.Add(1) go test2(i) } wg.Wait() lock.Lock() for i, v := range MyMap { fmt.Println(i, v) } lock.Unlock() } ","date":"2022å¹´07æœˆ24æ—¥","objectID":"/2022/07/go%E5%8D%8F%E7%A8%8B%E5%B9%B6%E5%8F%91%E5%B9%B6%E8%A1%8C%E8%B5%84%E6%BA%90%E7%AB%9E%E4%BA%89%E9%97%AE%E9%A2%98/:2:3","tags":["Goç¬”è®°"],"title":"Goåç¨‹å¹¶å‘(å¹¶è¡Œ)èµ„æºç«äº‰é—®é¢˜","uri":"/2022/07/go%E5%8D%8F%E7%A8%8B%E5%B9%B6%E5%8F%91%E5%B9%B6%E8%A1%8C%E8%B5%84%E6%BA%90%E7%AB%9E%E4%BA%89%E9%97%AE%E9%A2%98/"},{"categories":["Goç¬”è®°"],"content":"ä½¿ç”¨channel ä¸ºä»€ä¹ˆéœ€è¦channel ä¸Šé¢ä½¿ç”¨å…¨å±€å˜é‡ç­‰å¾…æ‰€æœ‰åç¨‹å…¨éƒ¨å®Œæˆçš„æ—¶é—´å¾ˆéš¾ç¡®å®š å¦‚æœä¸»çº¿ç¨‹ä¼‘çœ çš„æ—¶é—´é•¿äº†ï¼Œä¼šåŠ é•¿ç­‰å¾…æ—¶é—´ï¼Œå¦‚æœçŸ­äº†ï¼Œå¯èƒ½è¿˜æœ‰åç¨‹å¤„äºå·¥ä½œçŠ¶æ€ï¼Œè¿™æ—¶ä¹Ÿä¼šéšä¸»çº¿ç¨‹çš„é€€å‡ºè€Œé”€æ¯ é€šè¿‡å…¨å±€å˜é‡åŠ é”åŒæ­¥æ¥å®ç°é€šè®¯ï¼Œä¹Ÿå¹¶ä¸åˆ©äºå¤šä¸ªåç¨‹å¯¹å…¨å±€å˜é‡çš„è¯»å†™æ“ä½œ channelå®ç° å®šä¹‰ä¸€ä¸ªç»“æœchannel è®¡ç®—åçš„é˜¶ä¹˜ç»“æœï¼Œæ”¾å…¥åˆ°channelä¸­ æœ€ååœ¨ä»channelå–å‡ºç»“æœæ‰“å°å‡ºæ¥ func main() { type MyMap map[int]uint64 resChan := make(chan MyMap, 200) var wg sync.WaitGroup for i := 1; i \u003c= 200; i++ { wg.Add(1) go func(n int, resChan chan\u003c- MyMap, wg *sync.WaitGroup) { var res uint64 = 1 for i := 1; i \u003c= n; i++ { res *= uint64(i) } resChan \u003c- MyMap{n: res} wg.Done() }(i, resChan, \u0026wg) } wg.Wait() label: for { select { case res := \u003c-resChan: fmt.Println(res) default: fmt.Println(\"æ— æ•°æ®\") break label } } } ","date":"2022å¹´07æœˆ24æ—¥","objectID":"/2022/07/go%E5%8D%8F%E7%A8%8B%E5%B9%B6%E5%8F%91%E5%B9%B6%E8%A1%8C%E8%B5%84%E6%BA%90%E7%AB%9E%E4%BA%89%E9%97%AE%E9%A2%98/:2:4","tags":["Goç¬”è®°"],"title":"Goåç¨‹å¹¶å‘(å¹¶è¡Œ)èµ„æºç«äº‰é—®é¢˜","uri":"/2022/07/go%E5%8D%8F%E7%A8%8B%E5%B9%B6%E5%8F%91%E5%B9%B6%E8%A1%8C%E8%B5%84%E6%BA%90%E7%AB%9E%E4%BA%89%E9%97%AE%E9%A2%98/"},{"categories":["Goç¬”è®°"],"content":"channelä»‹ç» channelæœ¬è´¨å°±æ˜¯ä¸€ä¸ªæ•°æ®ç»“æ„-é˜Ÿåˆ— æ•°æ®æ˜¯å…ˆè¿›å…ˆå‡ºï¼ˆFIFOï¼‰ çº¿ç¨‹å®‰å…¨ï¼Œå¤šgoroutineè®¿é—®æ—¶ï¼Œä¸éœ€è¦åŠ é” channelæ˜¯æœ‰ç±»å‹çš„ï¼Œä¸€ä¸ªstringçš„channelåªèƒ½å­˜æ”¾stringæ•°æ®ç±»å‹ ","date":"2022å¹´07æœˆ23æ—¥","objectID":"/2022/07/go-channel%E7%AE%A1%E9%81%93/:1:0","tags":["Goç¬”è®°"],"title":"Go channelï¼ˆç®¡é“ï¼‰ã€ä»»åŠ¡å’Œsync","uri":"/2022/07/go-channel%E7%AE%A1%E9%81%93/"},{"categories":["Goç¬”è®°"],"content":"channelä½¿ç”¨ ","date":"2022å¹´07æœˆ23æ—¥","objectID":"/2022/07/go-channel%E7%AE%A1%E9%81%93/:2:0","tags":["Goç¬”è®°"],"title":"Go channelï¼ˆç®¡é“ï¼‰ã€ä»»åŠ¡å’Œsync","uri":"/2022/07/go-channel%E7%AE%A1%E9%81%93/"},{"categories":["Goç¬”è®°"],"content":"channelå®šä¹‰/å£°æ˜ var å˜é‡å chan æ•°æ®ç±»å‹ var intChan chan int // intChanç”¨äºå­˜æ”¾intç±»å‹ var mapChan chan map[int]string // mapChanç”¨äºå­˜æ”¾map[int]stringç±»å‹ var perChan chan Person // ç”¨äºå­˜æ”¾ç»“æ„ä½“ç±»å‹ var perChan2 chan *Person // ç”¨äºå­˜æ”¾æŒ‡é’ˆç±»å‹ var allChan chan interface{} // ç”¨äºå­˜æ”¾ä»»æ„æ•°æ®ç±»å‹ channel æ˜¯å¼•ç”¨ç±»å‹ channel å¿…é¡»åˆå§‹åŒ–æ‰èƒ½å†™å…¥æ•°æ®ï¼Œå³makeåæ‰èƒ½ä½¿ç”¨ ç®¡é“æ˜¯æœ‰ç±»å‹çš„ï¼ŒintChan åªèƒ½å†™å…¥æ•´æ•° ","date":"2022å¹´07æœˆ23æ—¥","objectID":"/2022/07/go-channel%E7%AE%A1%E9%81%93/:2:1","tags":["Goç¬”è®°"],"title":"Go channelï¼ˆç®¡é“ï¼‰ã€ä»»åŠ¡å’Œsync","uri":"/2022/07/go-channel%E7%AE%A1%E9%81%93/"},{"categories":["Goç¬”è®°"],"content":"channelåˆå§‹åŒ– ä½¿ç”¨makeè¿›è¡Œåˆå§‹åŒ– var intChan chan int intChan = make(chan int, 10) fmt.Printf(\"intChanå€¼ï¼š%v \\n\", intChan) //intChanå€¼ï¼š0xc0000b4000 fmt.Printf(\"intChanæœ¬èº«åœ°å€ï¼š%p \\n\", \u0026intChan) //intChanæœ¬èº«åœ°å€ï¼š0xc0000ac018 ","date":"2022å¹´07æœˆ23æ—¥","objectID":"/2022/07/go-channel%E7%AE%A1%E9%81%93/:2:2","tags":["Goç¬”è®°"],"title":"Go channelï¼ˆç®¡é“ï¼‰ã€ä»»åŠ¡å’Œsync","uri":"/2022/07/go-channel%E7%AE%A1%E9%81%93/"},{"categories":["Goç¬”è®°"],"content":"å‘channelä¸­å†™å…¥æ•°æ® å½“ç»™channelå†™å…¥æ•°æ®æ—¶ï¼Œå†™å…¥çš„æ•°é‡ä¸èƒ½è¶…è¿‡å…¶å®¹é‡å¤§å°ï¼Œè¶…è¿‡åˆ™æŠ¥é”™ï¼šall goroutines are asleep - deadlock! vat intChan chan int intChan = make(chan int, 3) num:=99 intChan \u003c- 10 intChan \u003c- num // ç®¡é“çš„é•¿åº¦å’Œcapï¼ˆå®¹é‡ï¼‰ fmt.Printf(\"intChançš„é•¿åº¦ï¼š%v\\n\", len(intChan)) // intChançš„é•¿åº¦ï¼š2 fmt.Printf(\"intChançš„å®¹é‡ï¼š%v\\n\", cap(intChan)) // intChançš„å®¹é‡ï¼š3 // å†æ¬¡å‘channelä¸­å†™å…¥æ•°æ® intChan \u003c- 44 intChan \u003c- 11 // æŠ¥é”™ï¼šfatal error: all goroutines are asleep - deadlock! ","date":"2022å¹´07æœˆ23æ—¥","objectID":"/2022/07/go-channel%E7%AE%A1%E9%81%93/:2:3","tags":["Goç¬”è®°"],"title":"Go channelï¼ˆç®¡é“ï¼‰ã€ä»»åŠ¡å’Œsync","uri":"/2022/07/go-channel%E7%AE%A1%E9%81%93/"},{"categories":["Goç¬”è®°"],"content":"ä»channelä¸­è¯»å–æ•°æ® å½“è¯»å–channelæ•°æ®æ—¶ï¼Œå¦‚æœç®¡é“æ•°æ®å·²ç»å…¨éƒ¨å–å‡ºï¼Œå†å–åˆ™ä¼šæŠ¥é”™ï¼šall goroutines are asleep - deadlock! var intChan chan int intChan = make(chan int, 3) num := 99 intChan \u003c- 10 intChan \u003c- num fmt.Printf(\"intChançš„é•¿åº¦ï¼š%v\\n\", len(intChan)) // intChançš„é•¿åº¦ï¼š2 fmt.Printf(\"intChançš„å®¹é‡ï¼š%v\\n\", cap(intChan)) // intChançš„å®¹é‡ï¼š3 // å–æ•°æ®èµ‹å€¼ç»™num2 num2 := \u003c-intChan fmt.Println(\"å–å‡ºçš„æ•°æ®ï¼š\", num2) //å–å‡ºçš„æ•°æ®ï¼š 10 fmt.Printf(\"intChançš„é•¿åº¦ï¼š%v\\n\", len(intChan)) // intChançš„é•¿åº¦ï¼š1 fmt.Printf(\"intChançš„å®¹é‡ï¼š%v\\n\", cap(intChan)) // intChançš„å®¹é‡ï¼š3 // ç»§ç»­å– \u003c-intChan \u003c-intChan //fatal error: all goroutines are asleep - deadlock! ","date":"2022å¹´07æœˆ23æ—¥","objectID":"/2022/07/go-channel%E7%AE%A1%E9%81%93/:2:4","tags":["Goç¬”è®°"],"title":"Go channelï¼ˆç®¡é“ï¼‰ã€ä»»åŠ¡å’Œsync","uri":"/2022/07/go-channel%E7%AE%A1%E9%81%93/"},{"categories":["Goç¬”è®°"],"content":"channelä½¿ç”¨æ³¨æ„äº‹é¡¹ channelä¸­åªèƒ½å­˜æ”¾æŒ‡å®šçš„æ•°æ®ç±»å‹ channelçš„æ•°æ®æ”¾æ»¡åï¼Œå°±ä¸èƒ½å†æ”¾å…¥äº† å¦‚æœä»channelå–å‡ºæ•°æ®åï¼Œå¯ä»¥ç»§ç»­æ”¾å…¥ å¦‚æœchannelæ•°æ®å–å®Œäº†ï¼Œå†å–ï¼Œå°±ä¼šæŠ¥é”™ï¼šdeadlock! ","date":"2022å¹´07æœˆ23æ—¥","objectID":"/2022/07/go-channel%E7%AE%A1%E9%81%93/:2:5","tags":["Goç¬”è®°"],"title":"Go channelï¼ˆç®¡é“ï¼‰ã€ä»»åŠ¡å’Œsync","uri":"/2022/07/go-channel%E7%AE%A1%E9%81%93/"},{"categories":["Goç¬”è®°"],"content":"channelçš„éå†å’Œå…³é—­ ","date":"2022å¹´07æœˆ23æ—¥","objectID":"/2022/07/go-channel%E7%AE%A1%E9%81%93/:3:0","tags":["Goç¬”è®°"],"title":"Go channelï¼ˆç®¡é“ï¼‰ã€ä»»åŠ¡å’Œsync","uri":"/2022/07/go-channel%E7%AE%A1%E9%81%93/"},{"categories":["Goç¬”è®°"],"content":"channelçš„å…³é—­ ä½¿ç”¨å†…ç½®å‡½æ•°closeå¯ä»¥å…³é—­channelï¼Œå½“channelå…³é—­åï¼Œå°±ä¸èƒ½å†å‘channelå†™æ•°æ®äº†ï¼Œä½†æ˜¯ä»ç„¶å¯ä»¥ä»è¯¥channelè¯»å–æ•°æ®ã€‚ intChan := make(chan int, 3) intChan \u003c- 10 intChan \u003c- 20 close(intChan) //å…³é—­ç®¡é“ // å…³é—­ç®¡é“åä¸å¯å†å†™æ•°æ® // intChan \u003c- 30 //panic: send on closed channel n1 := \u003c-intChan // å…³é—­ç®¡é“åï¼Œå¯ä»¥ç»§ç»­è¯» fmt.Println(n1) //10 ","date":"2022å¹´07æœˆ23æ—¥","objectID":"/2022/07/go-channel%E7%AE%A1%E9%81%93/:3:1","tags":["Goç¬”è®°"],"title":"Go channelï¼ˆç®¡é“ï¼‰ã€ä»»åŠ¡å’Œsync","uri":"/2022/07/go-channel%E7%AE%A1%E9%81%93/"},{"categories":["Goç¬”è®°"],"content":"channelçš„éå† channelæ”¯æŒfor-rangeçš„æ–¹å¼è¿›è¡Œéå†ï¼Œéœ€è¦æ³¨æ„ä¸¤ç‚¹ï¼š åœ¨éå†æ—¶ï¼Œå¦‚æœchannelæ²¡æœ‰å…³é—­ï¼Œåˆ™ä¼šå‡ºç°deadlock!é”™è¯¯ intChan := make(chan int, 100) for i := 0; i \u003c 100; i++ { intChan \u003c- i } for v := range intChan { fmt.Println(\"v = \", v) } // å–å®Œåï¼Œä¼šæŠ¥é”™ï¼šfatal error: all goroutines are asleep - deadlock! åœ¨éå†æ—¶ï¼Œå¦‚æœchannelå·²ç»å…³é—­ï¼Œåˆ™ä¼šæ­£å¸¸éå†æ•°æ®ï¼Œéå†å®Œåï¼Œå°±ä¼šé€€å‡ºéå† intChan := make(chan int, 100) for i := 0; i \u003c 100; i++ { intChan \u003c- i } close(intChan) //å…³é—­ç®¡é“ for v := range intChan { fmt.Println(\"v = \", v) } ","date":"2022å¹´07æœˆ23æ—¥","objectID":"/2022/07/go-channel%E7%AE%A1%E9%81%93/:3:2","tags":["Goç¬”è®°"],"title":"Go channelï¼ˆç®¡é“ï¼‰ã€ä»»åŠ¡å’Œsync","uri":"/2022/07/go-channel%E7%AE%A1%E9%81%93/"},{"categories":["Goç¬”è®°"],"content":"å¤šè·¯é€‰æ‹©å’Œè¶…æ—¶ selectï¼šè¿›è¡Œå¤šè·¯é€‰æ‹© \u003c-time.After(time.Microsecond * 100)ï¼šæ£€æµ‹è¶…æ—¶ package main import ( \"fmt\" \"time\" ) func service() string { return fmt.Sprintf(\"%d\", time.Now()) } func AsyncService() chan string { retCh := make(chan string, 1) go func() { ret := service() fmt.Println(\"returned result.\") retCh \u003c- ret fmt.Println(\"service exited.\") }() return retCh } func main() { select { case ret := \u003c-AsyncService(): fmt.Println(ret) case \u003c-time.After(time.Microsecond * 100): fmt.Println(\"è¶…æ—¶\") } } ","date":"2022å¹´07æœˆ23æ—¥","objectID":"/2022/07/go-channel%E7%AE%A1%E9%81%93/:4:0","tags":["Goç¬”è®°"],"title":"Go channelï¼ˆç®¡é“ï¼‰ã€ä»»åŠ¡å’Œsync","uri":"/2022/07/go-channel%E7%AE%A1%E9%81%93/"},{"categories":["Goç¬”è®°"],"content":"goroutineå’Œchannelç»“åˆ ","date":"2022å¹´07æœˆ23æ—¥","objectID":"/2022/07/go-channel%E7%AE%A1%E9%81%93/:5:0","tags":["Goç¬”è®°"],"title":"Go channelï¼ˆç®¡é“ï¼‰ã€ä»»åŠ¡å’Œsync","uri":"/2022/07/go-channel%E7%AE%A1%E9%81%93/"},{"categories":["Goç¬”è®°"],"content":"æ¡ˆä¾‹ä¸€ å¼€å¯ä¸€ä¸ªwriteDataåç¨‹ï¼Œå‘ç®¡é“intChanä¸­å†™å…¥50ä¸ªæ•´æ•° å¼€å¯ä¸€ä¸ªreadDataåç¨‹ï¼Œä»ç®¡é“intChanä¸­è¯»å–writeDataå†™å…¥çš„æ•°æ® writeDataå’ŒreadDataæ“ä½œçš„æ˜¯åŒä¸€ä¸ªç®¡é“ ä¸»çº¿ç¨‹éœ€è¦ç­‰å¾…writeDataå’ŒreadDataåç¨‹éƒ½å®Œæˆå·¥ä½œæ‰èƒ½é€€å‡º func main() { var intChan = make(chan int, 50) var exitChan = make(chan bool, 1) go func(intChan chan int) { for i := 0; i \u003c 50; i++ { intChan \u003c- i fmt.Println(\"write Dataå†™å…¥ç®¡é“ä¿¡æ¯ --\u003e\u003e \", i) } close(intChan) //å…³é—­ }(intChan) go func(intChan chan int, exitChan chan bool) { for { v, ok := \u003c-intChan if !ok { break } fmt.Println(\"read Dataè¯»å–ç®¡é“ä¿¡æ¯ --\u003e\u003e \", v) } // è¯»å–å®Œæ•°æ®ï¼Œå³ä»»åŠ¡å®Œæˆ exitChan \u003c- true close(exitChan) }(intChan, exitChan) for { _, ok := \u003c-exitChan if !ok { break } } fmt.Println(\"ä¸»çº¿ç¨‹ç»“æŸ\") } ","date":"2022å¹´07æœˆ23æ—¥","objectID":"/2022/07/go-channel%E7%AE%A1%E9%81%93/:5:1","tags":["Goç¬”è®°"],"title":"Go channelï¼ˆç®¡é“ï¼‰ã€ä»»åŠ¡å’Œsync","uri":"/2022/07/go-channel%E7%AE%A1%E9%81%93/"},{"categories":["Goç¬”è®°"],"content":"æ¡ˆä¾‹äºŒ å¯åŠ¨ä¸€ä¸ªåç¨‹ï¼Œå°†1~2000çš„æ•°æ”¾å…¥åˆ°ä¸€ä¸ªchannelï¼ˆnumChanï¼‰ä¸­ å¯åŠ¨8ä¸ªåç¨‹ï¼Œä»numChanå–å‡ºæ•°ï¼ˆnï¼‰,å¹¶è®¡ç®—1+â€¦â€¦+nçš„å€¼ï¼Œå¹¶å­˜æ”¾åˆ°resChan æœ€å8ä¸ªåç¨‹ååŒå®Œæˆå·¥ä½œåï¼Œå†éå†resChanï¼Œæ˜¾ç¤ºç»“æœ package main import ( \"fmt\" \"sync\" ) func writeNum(ch chan\u003c- int, wg *sync.WaitGroup) { for i := 1; i \u003c= 2000; i++ { ch \u003c- i } close(ch) wg.Done() } func readNum(ch \u003c-chan int, resChan chan\u003c- map[int]int, wg *sync.WaitGroup) { for num := range ch { res := 0 for i := 0; i \u003c= num; i++ { res += i } resChan \u003c- map[int]int{num: res} } wg.Done() } func main() { numChan := make(chan int, 2000) resChan := make(chan map[int]int, 2000) var wg sync.WaitGroup wg.Add(1) go writeNum(numChan, \u0026wg) for i := 0; i \u003c 8; i++ { wg.Add(1) go readNum(numChan, resChan, \u0026wg) } wg.Wait() label: for { select { case v := \u003c-resChan: fmt.Println(v) default: fmt.Println(\"æ— æ•°æ®\") break label } } } ","date":"2022å¹´07æœˆ23æ—¥","objectID":"/2022/07/go-channel%E7%AE%A1%E9%81%93/:5:2","tags":["Goç¬”è®°"],"title":"Go channelï¼ˆç®¡é“ï¼‰ã€ä»»åŠ¡å’Œsync","uri":"/2022/07/go-channel%E7%AE%A1%E9%81%93/"},{"categories":["Goç¬”è®°"],"content":"æ¡ˆä¾‹ä¸‰ è¦æ±‚ç»Ÿè®¡1~200000çš„æ•°å­—ä¸­ï¼Œå“ªäº›æ˜¯ç´ æ•° package main import ( \"fmt\" \"sync\" ) func IsPrime(n int) bool { if n == 1 { return false } //ä»2éå†åˆ°n-1ï¼Œçœ‹çœ‹æ˜¯å¦æœ‰å› å­ for i := 2; i \u003c n; i++ { if n%i == 0 { //å‘ç°ä¸€ä¸ªå› å­ return false } } return true } func writeNum(ch chan\u003c- int, wg *sync.WaitGroup) { for i := 1; i \u003c= 200000; i++ { ch \u003c- i } close(ch) wg.Done() } func primeNum(ch \u003c-chan int, resChan chan\u003c- int, wg *sync.WaitGroup) { for num := range ch { res := IsPrime(num) if res { resChan \u003c- num } } wg.Done() } func main() { numChan := make(chan int, 200000) primeChan := make(chan int, 200000) var wg sync.WaitGroup wg.Add(1) go writeNum(numChan, \u0026wg) for i := 0; i \u003c 10; i++ { wg.Add(1) go primeNum(numChan, primeChan, \u0026wg) } wg.Wait() label: for { select { case num := \u003c-primeChan: fmt.Println(num) default: break label } } } ","date":"2022å¹´07æœˆ23æ—¥","objectID":"/2022/07/go-channel%E7%AE%A1%E9%81%93/:5:3","tags":["Goç¬”è®°"],"title":"Go channelï¼ˆç®¡é“ï¼‰ã€ä»»åŠ¡å’Œsync","uri":"/2022/07/go-channel%E7%AE%A1%E9%81%93/"},{"categories":["Goç¬”è®°"],"content":"channelä½¿ç”¨ç»†èŠ‚å’Œæ³¨æ„äº‹é¡¹ channelå¯ä»¥å£°æ˜ä¸ºåªè¯»ï¼Œæˆ–è€…åªå†™æ€§è´¨ // 1. é»˜è®¤æƒ…å†µä¸‹ï¼Œç®¡é“æ˜¯åŒå‘çš„ var chan1 chan int // å¯è¯»å¯å†™ // 2. å£°æ˜åªå†™ var chan2 chan\u003c- int //åªå†™ chan2 = make(chan int, 3) chan2 \u003c- 20 //å†™ // 3. å£°æ˜åªè¯» var chan3 \u003c-chan int num2 := \u003c-chan3 // è¯» channelåªè¯»å’Œåªå†™çš„æœ€ä½³æ—¶é—´æ¡ˆä¾‹ // åªå†™ func send(ch chan\u003c- int, exitChan chan struct{}) { for i := 0; i \u003c 10; i++ { ch \u003c- i } close(ch) var a struct{} exitChan \u003c- a } //åªè¯» func recv(ch \u003c-chan int, exitChan chan struct{}) { for { v, ok := \u003c-ch if !ok { break } fmt.Println(v) } var a struct{} exitChan \u003c- a } func main() { var ch chan int ch = make(chan int, 10) exitChan := make(chan struct{}, 2) go send(ch, exitChan) go recv(ch, exitChan) var total = 0 for _ = range exitChan { total++ if total == 2 { break } } fmt.Println(\"ä¸»çº¿ç¨‹ç»“æŸã€‚ã€‚ã€‚\") } ä½¿ç”¨selectå¯ä»¥è§£å†³ä»ç®¡é“å–æ•°æ®çš„é˜»å¡é—®é¢˜ func main() { intChan := make(chan int, 10) for i := 0; i \u003c 10; i++ { intChan \u003c- i } stringChan := make(chan string, 5) for i := 0; i \u003c 5; i++ { stringChan \u003c- \"Hello\" + fmt.Sprintf(\"%d\", i) } // ä¼ ç»Ÿçš„æ–¹æ³•å†éå†ç®¡é“æ—¶ï¼Œå¦‚æœä¸å…³é—­ä¼šé˜»å¡è€Œå¯¼è‡´ deadlock // ä½¿ç”¨selectè§£å†³ä»ç®¡é“å–æ•°æ®çš„é˜»å¡é—®é¢˜ label: for { select { case v := \u003c-intChan: fmt.Println(\"ä»intChanè¯»å–çš„æ•°æ®ï¼š\", v) case v := \u003c-stringChan: fmt.Println(\"ä»stringChanè¯»å–çš„æ•°æ®ï¼š\", v) default: fmt.Println(\"éƒ½å–ä¸åˆ°æ•°æ®\") break label } } } goroutineä¸­ä½¿ç”¨recoverï¼Œè§£å†³åç¨‹ä¸­å‡ºç°panicï¼Œå¯¼è‡´ç¨‹åºå´©æºƒé—®é¢˜ func sayHello() { for i := 0; i \u003c 10; i++ { time.Sleep(time.Second) fmt.Println(\"Hello World\") } } func test() { //å¯æ˜¯ä½¿ç”¨defer + recoveræ•è·å¼‚å¸¸ defer func() { //æ•è·testæŠ›å‡ºçš„panic if err := recover(); err != nil { fmt.Println(\"test() å‘ç”Ÿé”™è¯¯: \", err) } }() var myMap map[int]string myMap[0] = \"golang\" //panic: assignment to entry in nil map } func main() { //goroutineä¸­ä½¿ç”¨recoverï¼Œè§£å†³åç¨‹ä¸­å‡ºç°panicï¼Œå¯¼è‡´ç¨‹åºå´©æºƒé—®é¢˜ go sayHello() go test() for i := 0; i \u003c 10; i++ { fmt.Println(\"main() ok=\", i) time.Sleep(time.Second) } } ä»»åŠ¡ ","date":"2022å¹´07æœˆ23æ—¥","objectID":"/2022/07/go-channel%E7%AE%A1%E9%81%93/:6:0","tags":["Goç¬”è®°"],"title":"Go channelï¼ˆç®¡é“ï¼‰ã€ä»»åŠ¡å’Œsync","uri":"/2022/07/go-channel%E7%AE%A1%E9%81%93/"},{"categories":["Goç¬”è®°"],"content":"ä»»åŠ¡çš„å–æ¶ˆ package main import ( \"fmt\" \"time\" ) func isCancelled(cancelCh chan int) bool { select { case \u003c-cancelCh: return true default: return false } } // å¾€ç®¡é“é‡Œæ·»åŠ ä¸€ä¸ªintæ•°æ®ï¼Œç”±äºåªä¼šè¢«ä¸€ä¸ªä»»åŠ¡è·å–åˆ°å€¼ï¼Œæ•…åªä¼šå–æ¶ˆä¸€ä¸ªä»»åŠ¡ func cancel_1(cancelCh chan int) { cancelCh \u003c- 0 } // å…³é—­ç®¡é“ï¼Œä»¥è¾¾åˆ°å–æ¶ˆå…¨éƒ¨ä»»åŠ¡ä½œç”¨ func cancel_2(cancelCh chan int) { close(cancelCh) } func main() { cancelChan := make(chan int, 0) for i := 0; i \u003c 5; i++ { go func(i int, cancelCh chan int) { for { if isCancelled(cancelCh) { break } time.Sleep(time.Second * 5) } fmt.Println(i, \"Done\") }(i, cancelChan) } //cancel_1(cancelChan) // åªä¼šå–æ¶ˆä¸€ä¸ªä»»åŠ¡ cancel_2(cancelChan) //å…¨éƒ¨å–æ¶ˆ time.Sleep(time.Second) } ","date":"2022å¹´07æœˆ23æ—¥","objectID":"/2022/07/go-channel%E7%AE%A1%E9%81%93/:7:0","tags":["Goç¬”è®°"],"title":"Go channelï¼ˆç®¡é“ï¼‰ã€ä»»åŠ¡å’Œsync","uri":"/2022/07/go-channel%E7%AE%A1%E9%81%93/"},{"categories":["Goç¬”è®°"],"content":"Contextä¸Šä¸‹æ–‡ æ ¹Contextï¼šé€šè¿‡context.Background()åˆ›å»º å­Contextï¼šé€šè¿‡context.WithChancel(parentContext)åˆ›å»º ctx, cancel := context.WithChancel(context.Baceground()) å½“å‰Contextè¢«å–æ¶ˆæ—¶ï¼ŒåŸºäºä»–çš„å­contextéƒ½ä¼šè¢«å–æ¶ˆ æ¥æ”¶å–æ¶ˆé€šçŸ¥\u003c-ctx.Done() package main import ( \"context\" \"fmt\" \"time\" ) func isCancelled(ctx context.Context) bool { select { case \u003c-ctx.Done(): return true default: return false } } func main() { ctx, cancel := context.WithCancel(context.Background()) for i := 0; i \u003c 5; i++ { go func(i int, ctx context.Context) { for { if isCancelled(ctx) { break } time.Sleep(time.Second * 5) } fmt.Println(i, \"Cancelled\") }(i, ctx) } cancel() time.Sleep(time.Second) } ","date":"2022å¹´07æœˆ23æ—¥","objectID":"/2022/07/go-channel%E7%AE%A1%E9%81%93/:8:0","tags":["Goç¬”è®°"],"title":"Go channelï¼ˆç®¡é“ï¼‰ã€ä»»åŠ¡å’Œsync","uri":"/2022/07/go-channel%E7%AE%A1%E9%81%93/"},{"categories":["Goç¬”è®°"],"content":"åªè¿è¡Œä¸€æ¬¡ï¼ˆå•ä¾‹ï¼‰ ç¡®ä¿åœ¨å¤šçº¿ç¨‹çš„æƒ…å†µä¸‹ï¼Œåªè¿è¡Œä¸€æ¬¡ package main import ( \"fmt\" \"sync\" \"unsafe\" ) type Singleton struct { } var singleInstance *Singleton var once sync.Once func GetSingletonObj() *Singleton { once.Do(func() { fmt.Println(\"Create Obj\") singleInstance = new(Singleton) }) return singleInstance } func main() { var wg sync.WaitGroup for i := 0; i \u003c 10; i++ { wg.Add(1) go func() { obj := GetSingletonObj() fmt.Printf(\"%x\\n\", unsafe.Pointer(obj)) wg.Done() }() } wg.Wait() } ","date":"2022å¹´07æœˆ23æ—¥","objectID":"/2022/07/go-channel%E7%AE%A1%E9%81%93/:9:0","tags":["Goç¬”è®°"],"title":"Go channelï¼ˆç®¡é“ï¼‰ã€ä»»åŠ¡å’Œsync","uri":"/2022/07/go-channel%E7%AE%A1%E9%81%93/"},{"categories":["Goç¬”è®°"],"content":"ä»…éœ€ä»»æ„ä»»åŠ¡å®Œæˆ package main import ( \"fmt\" \"runtime\" \"time\" ) func runTask(id int) string { time.Sleep(10 * time.Millisecond) return fmt.Sprintf(\"The result is from %d\", id) } func FirstResponse() string { numOfRunner := 10 ch := make(chan string, numOfRunner)// buffChannelé˜²æ­¢åç¨‹æ³„æ¼ for i := 0; i \u003c numOfRunner; i++ { go func(i int) { ret := runTask(i) ch \u003c- ret }(i) } return \u003c-ch } func main() { fmt.Println(\"Before: \", runtime.NumGoroutine()) response := FirstResponse() fmt.Println(response) time.Sleep(time.Second) fmt.Println(\"After: \", runtime.NumGoroutine()) } ","date":"2022å¹´07æœˆ23æ—¥","objectID":"/2022/07/go-channel%E7%AE%A1%E9%81%93/:10:0","tags":["Goç¬”è®°"],"title":"Go channelï¼ˆç®¡é“ï¼‰ã€ä»»åŠ¡å’Œsync","uri":"/2022/07/go-channel%E7%AE%A1%E9%81%93/"},{"categories":["Goç¬”è®°"],"content":"æ‰€æœ‰ä»»åŠ¡å®Œæˆ æ–¹å¼ä¸€ï¼šsync.WaitGroup æ–¹å¼äºŒï¼šåˆ©ç”¨channelçš„CSPçš„æœºåˆ¶ package main import ( \"fmt\" \"runtime\" \"time\" ) func runTask(id int) string { time.Sleep(10 * time.Millisecond) return fmt.Sprintf(\"The result is from %d\", id) } func AllResponse() string { numOfRunner := 10 ch := make(chan string, numOfRunner) // buffChannelé˜²æ­¢åç¨‹æ³„æ¼ for i := 0; i \u003c numOfRunner; i++ { go func(i int) { ret := runTask(i) ch \u003c- ret }(i) } finalRet := \"\" for j := 0; j \u003c numOfRunner; j++ { finalRet += \u003c-ch + \"\\n\" } return finalRet } func main() { fmt.Println(\"Before: \", runtime.NumGoroutine()) response := AllResponse() fmt.Println(response) time.Sleep(time.Second) fmt.Println(\"After: \", runtime.NumGoroutine()) } ä½¿ç”¨buffered channel å®ç°å¯¹è±¡æ±  package main import ( \"errors\" \"fmt\" \"time\" ) type ReusableObj struct { } type ObjPool struct { bufChan chan *ReusableObj //ç”¨äºç¼“å†²å¯é‡ç”¨å¯¹è±¡ } func NewObjPool(numOfObj int) *ObjPool { objPool := ObjPool{} objPool.bufChan = make(chan *ReusableObj, numOfObj) for i := 0; i \u003c numOfObj; i++ { objPool.bufChan \u003c- \u0026ReusableObj{} } return \u0026objPool } // GetObj ä»å¯¹è±¡æ± ä¸­è·å–å¯¹è±¡ func (p *ObjPool) GetObj(timeout time.Duration) (*ReusableObj, error) { select { case ret := \u003c-p.bufChan: return ret, nil case \u003c-time.After(timeout): //è¶…æ—¶æ§åˆ¶ return nil, errors.New(\"time out\") } } // ReleaseObj æ”¾å›å¯¹è±¡åˆ°å¯¹è±¡æ±  func (p *ObjPool) ReleaseObj(obj *ReusableObj) error { select { case p.bufChan \u003c- obj: return nil default: return errors.New(\"overflow\") } } func main() { pool := NewObjPool(10) for i := 0; i \u003c 11; i++ { if v, err := pool.GetObj(time.Second); err != nil { panic(err) } else { fmt.Printf(\"%T\\n\", v) // å¦‚æœä¸æ”¾å›ï¼Œå½“å¾ªç¯è¾¾åˆ°10æ¬¡åï¼Œå†æ¬¡è·å–å¯¹è±¡åˆ™ä¼šè¶…æ—¶ if err := pool.ReleaseObj(v); err != nil { panic(err) } } } fmt.Println(\"Done\") } sync.Poolå¯¹è±¡ç¼“å­˜ ","date":"2022å¹´07æœˆ23æ—¥","objectID":"/2022/07/go-channel%E7%AE%A1%E9%81%93/:11:0","tags":["Goç¬”è®°"],"title":"Go channelï¼ˆç®¡é“ï¼‰ã€ä»»åŠ¡å’Œsync","uri":"/2022/07/go-channel%E7%AE%A1%E9%81%93/"},{"categories":["Goç¬”è®°"],"content":"sync.Poolå¯¹è±¡è·å– å°è¯•ä»ç§æœ‰å¯¹è±¡è·å– ç§æœ‰å¯¹è±¡ä¸å­˜åœ¨ï¼Œå°è¯•ä»å½“å‰Processorçš„å…±äº«æ± è·å– å¦‚æœå½“å‰Processorå…±äº«æ± ä¹Ÿæ˜¯ç©ºçš„ï¼Œé‚£ä¹ˆå°±å°è¯•å»å…¶ä»–Processorçš„å…±äº«æ± è·å– å¦‚æœæ‰€æœ‰å­æ± éƒ½æ˜¯ç©ºçš„ï¼Œæœ€åå°±ç”¨ç”¨æˆ·æŒ‡å®šçš„Newå‡½æ•°äº§ç”Ÿä¸€ä¸ªæ–°çš„å¯¹è±¡è¿”å› ","date":"2022å¹´07æœˆ23æ—¥","objectID":"/2022/07/go-channel%E7%AE%A1%E9%81%93/:12:0","tags":["Goç¬”è®°"],"title":"Go channelï¼ˆç®¡é“ï¼‰ã€ä»»åŠ¡å’Œsync","uri":"/2022/07/go-channel%E7%AE%A1%E9%81%93/"},{"categories":["Goç¬”è®°"],"content":"sync.Poolå¯¹è±¡çš„æ”¾å› å¦‚æœç§æœ‰å¯¹è±¡ä¸å­˜åœ¨åˆ™ä¿å­˜ä¸ºç§æœ‰å¯¹è±¡ å¦‚æœç§æœ‰å¯¹è±¡å­˜åœ¨ï¼Œæ”¾å…¥åˆ°å½“å‰Processorå­æ± çš„å…±äº«æ± ä¸­ ","date":"2022å¹´07æœˆ23æ—¥","objectID":"/2022/07/go-channel%E7%AE%A1%E9%81%93/:13:0","tags":["Goç¬”è®°"],"title":"Go channelï¼ˆç®¡é“ï¼‰ã€ä»»åŠ¡å’Œsync","uri":"/2022/07/go-channel%E7%AE%A1%E9%81%93/"},{"categories":["Goç¬”è®°"],"content":"sync.Poolä½¿ç”¨ pool := \u0026sync.Pool{ New: func() interface{} { return 100 }, } v := pool.Get().(int) //å–æ•°æ®å¹¶åšæ–­è¨€ ... pool.Put(3) // æ”¾æ•°æ® ","date":"2022å¹´07æœˆ23æ—¥","objectID":"/2022/07/go-channel%E7%AE%A1%E9%81%93/:14:0","tags":["Goç¬”è®°"],"title":"Go channelï¼ˆç®¡é“ï¼‰ã€ä»»åŠ¡å’Œsync","uri":"/2022/07/go-channel%E7%AE%A1%E9%81%93/"},{"categories":["Goç¬”è®°"],"content":"ä½¿ç”¨å®ä¾‹ pool := \u0026sync.Pool{ New: func() interface{} { fmt.Println(\"Create a new object.\") return 100 }, } v := pool.Get().(int) //å–æ•°æ®å¹¶åšæ–­è¨€ fmt.Println(v) pool.Put(3) // æ”¾æ•°æ® runtime.GC() // GC ä¼šæ¸…é™¤sync.poolä¸­ç¼“å­˜çš„å¯¹è±¡ v1, _ := pool.Get().(int) fmt.Println(v1) v2, _ := pool.Get().(int) fmt.Println(v2) /* ä¸ä½¿ç”¨GCæ¸…é™¤ç»“æœï¼š Create a new object. 100 3 Create a new object. 100 ä½¿ç”¨GCæ¸…é™¤sync.poolä¸­ç¼“å­˜çš„å¯¹è±¡ç»“æœï¼š Create a new object. 100 Create a new object. 100 Create a new object. 100 */ åœ¨åç¨‹ä¸­ä½¿ç”¨ pool := \u0026sync.Pool{ New: func() interface{} { fmt.Println(\"Create a new object.\") return 100 }, } pool.Put(100) pool.Put(100) pool.Put(100) var wg sync.WaitGroup for i := 0; i \u003c 10; i++ { wg.Add(1) go func(id int) { fmt.Println(pool.Get()) wg.Done() }(i) } wg.Wait() /* ç»“æœï¼š 100 100 100 Create a new object. 100 Create a new object. 100 Create a new object. 100 Create a new object. 100 Create a new object. 100 Create a new object. 100 Create a new object. 100 */ ","date":"2022å¹´07æœˆ23æ—¥","objectID":"/2022/07/go-channel%E7%AE%A1%E9%81%93/:14:1","tags":["Goç¬”è®°"],"title":"Go channelï¼ˆç®¡é“ï¼‰ã€ä»»åŠ¡å’Œsync","uri":"/2022/07/go-channel%E7%AE%A1%E9%81%93/"},{"categories":["Goç¬”è®°"],"content":"sync.Poolæ€»ç»“ï¼š é€‚ç”¨äºé€šè¿‡å¤ç”¨ï¼Œé™ä½å¤æ‚å¯¹è±¡çš„åˆ›å»ºå’ŒGCä»£ä»· åç¨‹å®‰å…¨ï¼Œä¼šæœ‰é”çš„å¼€é”€ ç”Ÿå‘½å‘¨æœŸå—GCå½±å“ï¼Œä¸é€‚åˆäºåšè¿æ¥æ± ç­‰ï¼Œéœ€è‡ªå·±ç®¡ç†ç”Ÿå‘½å‘¨æœŸçš„èµ„æºçš„æ± åŒ– ","date":"2022å¹´07æœˆ23æ—¥","objectID":"/2022/07/go-channel%E7%AE%A1%E9%81%93/:15:0","tags":["Goç¬”è®°"],"title":"Go channelï¼ˆç®¡é“ï¼‰ã€ä»»åŠ¡å’Œsync","uri":"/2022/07/go-channel%E7%AE%A1%E9%81%93/"},{"categories":["Goç¬”è®°"],"content":"è¿›ç¨‹å’Œçº¿ç¨‹ è¿›ç¨‹å°±æ˜¯ç¨‹åºåœ¨æ“ä½œç³»ç»Ÿä¸­çš„ä¸€æ¬¡æ‰§è¡Œè¿‡ç¨‹ï¼Œæ˜¯ç³»ç»Ÿè¿›è¡Œèµ„æºåˆ†é…å’Œè°ƒåº¦çš„åŸºæœ¬å•ä½ çº¿ç¨‹æ˜¯è¿›ç¨‹çš„ä¸€ä¸ªæ‰§è¡Œå®ä¾‹ï¼Œæ˜¯ç¨‹åºæ‰§è¡Œçš„æœ€å°å•ä½ï¼Œå®ƒæ˜¯æ¯”è¿›ç¨‹æ›´å°çš„èƒ½ç‹¬ç«‹è¿è¡Œçš„åŸºæœ¬å•ä½ ä¸€ä¸ªè¿›ç¨‹å¯ä»¥åˆ›å»ºå’Œé”€æ¯å¤šä¸ªçº¿ç¨‹ï¼ŒåŒä¸€ä¸ªè¿›ç¨‹ä¸­çš„å¤šä¸ªçº¿ç¨‹å¯ä»¥å¹¶å‘æ‰§è¡Œ ä¸€ä¸ªç¨‹åºè‡³å°‘æœ‰ä¸€ä¸ªè¿›ç¨‹ï¼Œä¸€ä¸ªè¿›ç¨‹è‡³å°‘æœ‰ä¸€ä¸ªçº¿ç¨‹ ","date":"2022å¹´07æœˆ22æ—¥","objectID":"/2022/07/goroutine%E5%8D%8F%E7%A8%8B/:1:0","tags":["Goç¬”è®°"],"title":"Go-goroutineåç¨‹","uri":"/2022/07/goroutine%E5%8D%8F%E7%A8%8B/"},{"categories":["Goç¬”è®°"],"content":"å¹¶å‘å’Œå¹¶è¡Œ å¤šçº¿ç¨‹ç¨‹åºåœ¨å•æ ¸ä¸Šè¿è¡Œï¼Œå°±æ˜¯å¹¶å‘ å¤šçº¿ç¨‹ç¨‹åºåœ¨å¤šæ ¸ä¸Šè¿è¡Œï¼Œå°±æ˜¯å¹¶è¡Œ ","date":"2022å¹´07æœˆ22æ—¥","objectID":"/2022/07/goroutine%E5%8D%8F%E7%A8%8B/:2:0","tags":["Goç¬”è®°"],"title":"Go-goroutineåç¨‹","uri":"/2022/07/goroutine%E5%8D%8F%E7%A8%8B/"},{"categories":["Goç¬”è®°"],"content":"å¹¶å‘ å› ä¸ºæ˜¯åœ¨ä¸€ä¸ªCPUä¸Šï¼Œæ¯”å¦‚æœ‰10ä¸ªçº¿ç¨‹ï¼Œæ¯ä¸ªçº¿ç¨‹æ‰§è¡Œ10æ¯«ç§’ï¼ˆè¿›è¡Œè½®è®­æ“ä½œï¼‰ï¼Œä»äººçš„è§’åº¦çœ‹ï¼Œå¥½åƒè¿™10ä¸ªçº¿ç¨‹éƒ½åœ¨è¿è¡Œï¼Œä½†æ˜¯ä»å¾®è§‚ä¸Šçœ‹ï¼Œåœ¨æŸä¸€æ—¶é—´ç‚¹çœ‹ï¼Œå…¶å®åªæœ‰ä¸€ä¸ªçº¿ç¨‹åœ¨æ‰§è¡Œï¼Œè¿™å°±æ˜¯å¹¶å‘ ","date":"2022å¹´07æœˆ22æ—¥","objectID":"/2022/07/goroutine%E5%8D%8F%E7%A8%8B/:2:1","tags":["Goç¬”è®°"],"title":"Go-goroutineåç¨‹","uri":"/2022/07/goroutine%E5%8D%8F%E7%A8%8B/"},{"categories":["Goç¬”è®°"],"content":"å¹¶è¡Œ å› ä¸ºæ˜¯åœ¨å¤šä¸ªCPUä¸Šï¼ˆæ¯”å¦‚æœ‰10ä¸ªCPUï¼‰ï¼Œæ¯”å¦‚æœ‰10ä¸ªçº¿ç¨‹ï¼Œæ¯ä¸ªçº¿ç¨‹æ‰§è¡Œ10æ¯«ç§’ï¼ˆå„è‡ªåœ¨ä¸åŒCPUä¸Šæ‰§è¡Œï¼‰ï¼Œä»äººçš„è§’åº¦çœ‹ï¼Œè¿™10ä¸ªçº¿ç¨‹éƒ½åœ¨è¿è¡Œï¼Œä½†æ˜¯ä»å¾®è§‚ä¸Šçœ‹ï¼Œåœ¨æŸä¸€ä¸ªæ—¶é—´ç‚¹çœ‹ï¼Œä¹ŸåŒæ—¶æœ‰10ä¸ªçº¿ç¨‹åœ¨æ‰§è¡Œï¼Œè¿™å°±æ˜¯å¹¶è¡Œ ","date":"2022å¹´07æœˆ22æ—¥","objectID":"/2022/07/goroutine%E5%8D%8F%E7%A8%8B/:2:2","tags":["Goç¬”è®°"],"title":"Go-goroutineåç¨‹","uri":"/2022/07/goroutine%E5%8D%8F%E7%A8%8B/"},{"categories":["Goç¬”è®°"],"content":"Goåç¨‹å’Œä¸»çº¿ç¨‹ ","date":"2022å¹´07æœˆ22æ—¥","objectID":"/2022/07/goroutine%E5%8D%8F%E7%A8%8B/:3:0","tags":["Goç¬”è®°"],"title":"Go-goroutineåç¨‹","uri":"/2022/07/goroutine%E5%8D%8F%E7%A8%8B/"},{"categories":["Goç¬”è®°"],"content":"Goä¸»çº¿ç¨‹ ä¸€ä¸ªGoçº¿ç¨‹ä¸Šï¼Œå¯ä»¥èµ·å¤šä¸ªåç¨‹ï¼Œå¯ä»¥ç†è§£ä¸ºï¼Œåç¨‹æ˜¯è½»é‡çº§çš„çº¿ç¨‹ï¼ˆç¼–è¯‘å™¨åšçš„ä¼˜åŒ–ï¼‰ ","date":"2022å¹´07æœˆ22æ—¥","objectID":"/2022/07/goroutine%E5%8D%8F%E7%A8%8B/:3:1","tags":["Goç¬”è®°"],"title":"Go-goroutineåç¨‹","uri":"/2022/07/goroutine%E5%8D%8F%E7%A8%8B/"},{"categories":["Goç¬”è®°"],"content":"Goåç¨‹çš„ç‰¹ç‚¹ æœ‰ç‹¬ç«‹çš„æ ˆç©ºé—´ å…±äº«ç¨‹åºå †ç©ºé—´ è°ƒåº¦ç”±ç”¨æˆ·æ§åˆ¶ åç¨‹æ˜¯è½»é‡çº§çš„çº¿ç¨‹ ","date":"2022å¹´07æœˆ22æ—¥","objectID":"/2022/07/goroutine%E5%8D%8F%E7%A8%8B/:3:2","tags":["Goç¬”è®°"],"title":"Go-goroutineåç¨‹","uri":"/2022/07/goroutine%E5%8D%8F%E7%A8%8B/"},{"categories":["Goç¬”è®°"],"content":"ç¤ºä¾‹ // æ¯éš”1ç§’è¾“å‡º func test() { for i := 1; i \u003c= 5; i++ { fmt.Println(\"Hello,World\" + strconv.Itoa(i)) time.Sleep(time.Second) } } func main() { go test() //å¼€å¯äº†ä¸€ä¸ªåç¨‹ for i := 1; i \u003c= 5; i++ { fmt.Println(\"ï¼ˆmainï¼‰Hello,World\" + strconv.Itoa(i)) time.Sleep(time.Second) } } ç»“æœ ï¼ˆmainï¼‰Hello,World1 Hello,World1 Hello,World2 ï¼ˆmainï¼‰Hello,World2 ï¼ˆmainï¼‰Hello,World3 Hello,World3 ï¼ˆmainï¼‰Hello,World4 Hello,World4 Hello,World5 ï¼ˆmainï¼‰Hello,World5 ","date":"2022å¹´07æœˆ22æ—¥","objectID":"/2022/07/goroutine%E5%8D%8F%E7%A8%8B/:3:3","tags":["Goç¬”è®°"],"title":"Go-goroutineåç¨‹","uri":"/2022/07/goroutine%E5%8D%8F%E7%A8%8B/"},{"categories":["Goç¬”è®°"],"content":"æ‰§è¡Œæµç¨‹å›¾ ","date":"2022å¹´07æœˆ22æ—¥","objectID":"/2022/07/goroutine%E5%8D%8F%E7%A8%8B/:3:4","tags":["Goç¬”è®°"],"title":"Go-goroutineåç¨‹","uri":"/2022/07/goroutine%E5%8D%8F%E7%A8%8B/"},{"categories":["Goç¬”è®°"],"content":"ç»“è®º ä¸»çº¿ç¨‹æ˜¯ä¸€ä¸ªç‰©ç†çº¿ç¨‹ï¼Œç›´æ¥ä½œç”¨åœ¨CPUä¸Šï¼Œæ˜¯é‡é‡çº§çš„ï¼Œéå¸¸è€—è´¹CPUèµ„æºã€‚ åç¨‹ä»ä¸»çº¿ç¨‹å¼€å¯çš„ï¼Œæ˜¯è½»é‡çº§çš„çº¿ç¨‹ï¼Œæ˜¯é€»è¾‘æ€ã€‚å¯¹èµ„æºæ¶ˆè€—ç›¸å¯¹å°ã€‚ Goçš„åç¨‹æœºåˆ¶æ˜¯é‡è¦çš„ç‰¹ç‚¹ï¼Œå¯ä»¥è½»æ¾çš„å¼€å¯ä¸Šä¸‡ä¸ªåç¨‹ã€‚ ","date":"2022å¹´07æœˆ22æ—¥","objectID":"/2022/07/goroutine%E5%8D%8F%E7%A8%8B/:3:5","tags":["Goç¬”è®°"],"title":"Go-goroutineåç¨‹","uri":"/2022/07/goroutine%E5%8D%8F%E7%A8%8B/"},{"categories":["Goç¬”è®°"],"content":"MPGæ¨¡å¼ ","date":"2022å¹´07æœˆ22æ—¥","objectID":"/2022/07/goroutine%E5%8D%8F%E7%A8%8B/:4:0","tags":["Goç¬”è®°"],"title":"Go-goroutineåç¨‹","uri":"/2022/07/goroutine%E5%8D%8F%E7%A8%8B/"},{"categories":["Goç¬”è®°"],"content":"MPGæ¨¡å¼åŸºæœ¬ä»‹ç» M: æ“ä½œç³»ç»Ÿçš„ä¸»çº¿ç¨‹ï¼ˆç‰©ç†çº¿ç¨‹ï¼‰ P: åç¨‹æ‰§è¡Œéœ€è¦çš„ä¸Šä¸‹æ–‡ G: åç¨‹ ","date":"2022å¹´07æœˆ22æ—¥","objectID":"/2022/07/goroutine%E5%8D%8F%E7%A8%8B/:4:1","tags":["Goç¬”è®°"],"title":"Go-goroutineåç¨‹","uri":"/2022/07/goroutine%E5%8D%8F%E7%A8%8B/"},{"categories":["Goç¬”è®°"],"content":"MPGæ¨¡å¼è¿è¡Œçš„çŠ¶æ€1 å½“å‰ç¨‹åºæœ‰ä¸‰ä¸ªMï¼Œå¦‚æœä¸‰ä¸ªMéƒ½åœ¨ä¸€ä¸ªCPUè¿è¡Œï¼Œå°±æ˜¯å¹¶å‘ï¼Œå¦‚æœåœ¨ä¸åŒçš„CPUè¿è¡Œå°±æ˜¯å¹¶è¡Œ M1ã€M2ã€M3æ­£åœ¨æ‰§è¡Œä¸€ä¸ªGï¼ŒM1çš„åç¨‹é˜Ÿåˆ—æœ‰3ä¸ªï¼ŒM2çš„åç¨‹é˜Ÿåˆ—æœ‰3ä¸ªï¼ŒM3åç¨‹é˜Ÿåˆ—æœ‰2ä¸ª ä»ä¸Šå›¾å¯ä»¥çœ‹åˆ°ï¼šGoçš„åç¨‹æ˜¯è½»é‡çº§çš„çº¿ç¨‹ï¼Œæ˜¯é€»è¾‘æ€çš„ï¼ŒGoå¯ä»¥å®¹æ˜“çš„èµ·ä¸Šä¸‡ä¸ªåç¨‹ ","date":"2022å¹´07æœˆ22æ—¥","objectID":"/2022/07/goroutine%E5%8D%8F%E7%A8%8B/:4:2","tags":["Goç¬”è®°"],"title":"Go-goroutineåç¨‹","uri":"/2022/07/goroutine%E5%8D%8F%E7%A8%8B/"},{"categories":["Goç¬”è®°"],"content":"MPGæ¨¡å¼è¿è¡Œçš„çŠ¶æ€2 åˆ†ä¸¤éƒ¨åˆ†çœ‹ åŸæ¥çš„æƒ…å†µæ˜¯M0ä¸»çº¿ç¨‹æ­£åœ¨æ‰§è¡ŒG0åç¨‹ï¼Œå¦å¤–æœ‰ä¸‰ä¸ªåç¨‹åœ¨é˜Ÿåˆ—ç­‰å¾… å¦‚æœG0åç¨‹é˜»å¡ï¼Œæ¯”å¦‚è¯»å–æ–‡ä»¶æˆ–è€…æ•°æ®åº“æ“ä½œç­‰ è¿™æ—¶å°±ä¼šåˆ›å»ºM1ä¸»çº¿ç¨‹ï¼ˆä¹Ÿå¯èƒ½æ˜¯ä»å·²æœ‰çš„çº¿ç¨‹æ± ä¸­å–å‡ºM1ï¼‰ï¼Œå¹¶ä¸”å°†ç­‰å¾…çš„3ä¸ªåç¨‹æŒ‚åˆ°M1ä¸‹å¼€å§‹æ‰§è¡Œï¼ŒM0çš„ä¸»çº¿ç¨‹ä¸‹çš„G0ä»»ç„¶ç»§ç»­æ‰§è¡Œ è¿™æ ·çš„MPGè°ƒåº¦æ¨¡å¼ï¼Œæ—¢å¯ä»¥è®©G0æ‰§è¡Œï¼ŒåŒæ ·ä¹Ÿä¸ä¼šè®©é˜Ÿåˆ—çš„å…¶ä»–åç¨‹ä¸€ç›´é˜»å¡ï¼Œä»ç„¶å¯ä»¥å¹¶å‘/å¹¶è¡Œæ‰§è¡Œ ç­‰åˆ°G0ä¸é˜»å¡çš„ï¼ŒM0ä¼šè¢«æ”¾åˆ°ç©ºé—²çš„ä¸»çº¿ç¨‹ç»§ç»­æ‰§è¡Œï¼ˆä»å·²æœ‰çš„çº¿ç¨‹æ± ä¸­å–ï¼‰ï¼ŒåŒæ—¶G0åˆä¼šè¢«å”¤é†’ ","date":"2022å¹´07æœˆ22æ—¥","objectID":"/2022/07/goroutine%E5%8D%8F%E7%A8%8B/:4:3","tags":["Goç¬”è®°"],"title":"Go-goroutineåç¨‹","uri":"/2022/07/goroutine%E5%8D%8F%E7%A8%8B/"},{"categories":["Goç¬”è®°"],"content":"è®¾ç½®Goè¿è¡Œçš„CPUæ•° ä¸ºäº†å……åˆ†åˆ©ç”¨CPUä¼˜åŠ¿ï¼Œå¯ä»¥åœ¨Golangç¨‹åºä¸­ï¼Œè®¾ç½®è¿è¡Œçš„CPUæ•°ç›® // è·å–å½“å‰ç³»ç»Ÿçš„CPUæ•°é‡ num := runtime.NumCPU() // è®¾ç½®è¿è¡Œgoç¨‹åºå¯åŒæ—¶æ‰§è¡Œçš„æœ€å¤§CPUæ•° runtime.GOMAXPROCS(num) fmt.Println(\"å½“å‰ç³»ç»ŸCPUæ•°é‡ï¼š\", num) //å½“å‰ç³»ç»ŸCPUæ•°é‡ï¼š 8 go1.8åï¼Œé»˜è®¤ç¨‹åºè¿è¡Œåœ¨å¤šä¸ªæ ¸ä¸Šï¼Œå¯ä»¥ä¸ç”¨è®¾ç½® go1.8å‰ï¼Œéœ€è¦è®¾ç½®ï¼Œå¯ä»¥æ›´é«˜æ•ˆçš„åˆ©ç”¨CPU ","date":"2022å¹´07æœˆ22æ—¥","objectID":"/2022/07/goroutine%E5%8D%8F%E7%A8%8B/:5:0","tags":["Goç¬”è®°"],"title":"Go-goroutineåç¨‹","uri":"/2022/07/goroutine%E5%8D%8F%E7%A8%8B/"},{"categories":["Jenkins"],"content":"å‰è¨€ ğŸ“pipenvæ˜¯Pythonå®˜æ–¹æ¨èçš„åŒ…ç®¡ç†å·¥å…·ã€‚ ğŸ“åœ¨ä½¿ç”¨Pythonç¯å¢ƒï¼ŒåŸºæœ¬ä¸Šéƒ½æ˜¯ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒè¿›è¡Œå¤„ç†çš„ã€‚ ğŸ“åœ¨Jenkinsä»»åŠ¡shellä¸­ä½¿ç”¨å¸¸ç”¨çš„æ–¹å¼å´æ— æ³•ä½¿ç”¨pipenvè™šæ‹Ÿç¯å¢ƒğŸ˜¤ ğŸ©¸é‚£ä¹ˆå¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜å‘¢â“ ","date":"2022å¹´07æœˆ15æ—¥","objectID":"/2022/07/jenkins%E4%BB%BB%E5%8A%A1%E4%B8%AD%E4%BD%BF%E7%94%A8pipenv/:1:0","tags":["Jenkins"],"title":"Jenkinsä»»åŠ¡ä¸­ä½¿ç”¨Pipenv","uri":"/2022/07/jenkins%E4%BB%BB%E5%8A%A1%E4%B8%AD%E4%BD%BF%E7%94%A8pipenv/"},{"categories":["Jenkins"],"content":"æ¢ç´¢åœ¨æœ¬åœ°pipenvä½¿ç”¨æµç¨‹ âœï¸pipenvä½¿ç”¨æŒ‡å— å®‰è£…pipenvåŒ… pip3 install pipenv åˆ›å»ºpipenvè™šæ‹Ÿç¯å¢ƒ # æŒ‡å®šPythonç‰ˆæœ¬ pipenv --python 3.10 è¿›å…¥è™šæ‹Ÿç¯å¢ƒ # æ¿€æ´»å½“å‰é¡¹ç›®çš„è™šæ‹Ÿç¯å¢ƒ pipenv shell è™šæ‹Ÿç¯å¢ƒå­˜æ”¾è·¯å¾„ /Users/`USER`/.local/share/virtualenvs/ è™šæ‹Ÿç¯å¢ƒæ–‡ä»¶å¤¹è§„åˆ™ å‰ç¼€ä¸ºåˆ›å»ºè™šæ‹Ÿç¯å¢ƒæ—¶çš„æ–‡ä»¶å¤¹åï¼Œåé¢éƒ¨åˆ†ä¸ºéšæœºç”Ÿæˆï¼špython_file-ZSRTT-ad æŸ¥æ‰¾æ­¤æ–‡ä»¶å¤¹å¯ä½¿ç”¨ # é€šè¿‡å½“å‰ä»»åŠ¡åï¼ŒæŸ¥è¯¢è™šæ‹Ÿç¯å¢ƒæ–‡ä»¶å¤¹åç§° âœ ~ echo $(ls $HOME/.local/share/virtualenvs | grep \"python_file-\") python_file-ZSRTT-ad è¿›å…¥åˆ°è™šæ‹Ÿç¯å¢ƒåï¼ŒæŸ¥çœ‹å½“å‰ç³»ç»Ÿç¯å¢ƒå˜é‡ï¼šenv PATHç¯å¢ƒå˜é‡ï¼šPATH=/Users/USER/.local/share/virtualenvs/python_file-ZSRTT-ad/bin:... VIRTUAL_ENVå˜é‡ï¼ˆå¯åŠ¨è™šæ‹Ÿç¯å¢ƒå˜é‡åæ–°å¢çš„ï¼‰ï¼šVIRTUAL_ENV=/Users/USER/.local/share/virtualenvs/python_file-ZSRTT-ad é€šè¿‡æŸ¥çœ‹ç³»ç»Ÿç¯å¢ƒå˜é‡ï¼Œå¯ä»¥å¾—åˆ°ç»“è®º ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒåï¼Œä¼šè‡ªåŠ¨åœ¨ç¯å¢ƒå˜é‡ä¸­å¢åŠ ä¸€ä¸ªå˜é‡VIRTUAL_ENVï¼Œå€¼ä¸ºè™šæ‹Ÿç¯å¢ƒå˜é‡è·¯å¾„ åœ¨PATHç¯å¢ƒå˜é‡ä¸­ï¼Œå¢åŠ äº†è™šæ‹Ÿç¯å¢ƒçš„binç›®å½• VIRTUAL_ENV=\"è™šæ‹Ÿç¯å¢ƒè·¯å¾„\" PATH=$VIRTUAL_ENV:$PATH ","date":"2022å¹´07æœˆ15æ—¥","objectID":"/2022/07/jenkins%E4%BB%BB%E5%8A%A1%E4%B8%AD%E4%BD%BF%E7%94%A8pipenv/:2:0","tags":["Jenkins"],"title":"Jenkinsä»»åŠ¡ä¸­ä½¿ç”¨Pipenv","uri":"/2022/07/jenkins%E4%BB%BB%E5%8A%A1%E4%B8%AD%E4%BD%BF%E7%94%A8pipenv/"},{"categories":["Jenkins"],"content":"åœ¨Jenkinsä¸­å®è·µ åˆ›å»ºä¸€ä¸ªåä¸ºpy3.10çš„ä»»åŠ¡ åœ¨æ„å»ºæ­¥éª¤ä¸­æ·»åŠ shell # åˆå§‹åŒ–è™šæ‹Ÿç¯å¢ƒ pipenv --python 3.10 # è·å–å½“å‰ä»»åŠ¡çš„è™šæ‹Ÿç¯å¢ƒè·¯å¾„ virName=$(ls $HOME/.local/share/virtualenvs | grep \"$JOB_NAME-\") # è®¾ç½®è™šæ‹Ÿç¯å¢ƒä¸´æ—¶ç¯å¢ƒå˜é‡ export VIRTUAL_ENV=$HOME/.local/share/virtualenvs/$virName # æŠŠbinåŠ å…¥åˆ°pathç¯å¢ƒå˜é‡ä¸­ export PATH=${VIRTUAL_ENV}/bin:$PATH # æ£€æŸ¥å½“å‰pythonç‰ˆæœ¬ python3 --version æ„å»ºï¼ŒæŸ¥çœ‹æ‰“å°çš„pythonç‰ˆæœ¬æ˜¯å¦ä¸º3.10 æˆåŠŸäº†âœŒï¸ ","date":"2022å¹´07æœˆ15æ—¥","objectID":"/2022/07/jenkins%E4%BB%BB%E5%8A%A1%E4%B8%AD%E4%BD%BF%E7%94%A8pipenv/:3:0","tags":["Jenkins"],"title":"Jenkinsä»»åŠ¡ä¸­ä½¿ç”¨Pipenv","uri":"/2022/07/jenkins%E4%BB%BB%E5%8A%A1%E4%B8%AD%E4%BD%BF%E7%94%A8pipenv/"},{"categories":["Jenkins"],"content":"ä¼˜åŒ–æ„å»ºæ­¥éª¤ä¸­çš„shell ä»ä¸Šé¢çš„shellå¯ä»¥çœ‹åˆ°ï¼Œæ¯æ¬¡æ„å»ºä¸€ä¸ªæ–°çš„é¡¹ç›®ï¼Œéƒ½éœ€è¦å†™äº”è¡Œshellè„šæœ¬ï¼Œæ€»æ˜¯åšé‡å¤æ€§çš„å·¥ä½œï¼Œå¯¹äºè¿™ä¸€å—è¿›è¡Œäº†ä¼˜åŒ–ï¼Œå¦‚ä¸‹ï¼š æŠŠé‡å¤æ€§çš„shellå•ç‹¬å­˜æ”¾åœ¨ä¸€ä¸ªæ–‡ä»¶(initPipenv.sh)ä¸­ï¼Œå­˜æ”¾åœ¨/tmpæ–‡ä»¶å¤¹ä¸‹ï¼Œé€šè¿‡ä¼ é€’å‚æ•°æ‰§è¡Œ #! /bin/bash # Author: Joker-desire # Date: 2022-07-15 initPipfile() { echo \"Init python virtual env\" # å‚æ•°1ï¼špythonç‰ˆæœ¬ if [ -f \"Pipfile\" ]; then echo \"Python virtual env is existed\" else echo \"Start build python virtual env\" pipenv --python $1 fi } getVirtName() { # å‚æ•°1: è™šæ‹Ÿç¯å¢ƒåç§°ï¼Œå®é™…å°±æ˜¯Jenkinsä»»åŠ¡å # é€šè¿‡å½“å‰ä»»åŠ¡åï¼ŒæŸ¥è¯¢è™šæ‹Ÿç¯å¢ƒæ–‡ä»¶å¤¹åç§° echo $(ls $HOME/.local/share/virtualenvs | grep \"$1-\") } addEnv() { echo \"Add temporary system env variables\" # è®¾ç½®è™šæ‹Ÿç¯å¢ƒä¸´æ—¶ç¯å¢ƒå˜é‡ export VIRTUAL_ENV=$HOME/.local/share/virtualenvs/$1 # æŠŠbinåŠ å…¥åˆ°pathç¯å¢ƒå˜é‡ä¸­ export PATH=${VIRTUAL_ENV}/bin:$PATH } main() { echo \"come into workspace\" cd $3 py=$1 jobName=$2 initPipfile $py virtName=`getVirtName $jobName` addEnv $virtName # æ£€æŸ¥å½“å‰pythonç‰ˆæœ¬ python3 --version } # å‚æ•°1 pythonç‰ˆæœ¬ # å‚æ•°2 Jenkinsä»»åŠ¡åç§° $JOB_NAME # å‚æ•°3 Jenkins Jobæ–‡ä»¶å¤¹è·¯å¾„ main $1 $2 $3 åœ¨æ„å»ºshellä¸­ï¼Œç›´æ¥æ‰§è¡Œæ­¤shellè„šæœ¬å³å¯ # å‚æ•°1ï¼špythonç‰ˆæœ¬ # å‚æ•°2ï¼šå½“å‰Jenkinsä»»åŠ¡åç§° # å‚æ•°3ï¼šå½“å‰çš„è·¯å¾„ . /tmp/initPipenv.sh \"3.10\" $JOB_NAME `pwd` æ„å»ºï¼Œè¾“å‡ºç»“æœå’Œä¸Šé¢ä¸€æ · æ¯æ¬¡å¦‚æœæœ‰æ–°çš„Jenkins pyä»»åŠ¡ï¼Œå°±å¯ä»¥ç›´æ¥åœ¨æ„å»ºshellä¸­åŠ ä¸€è¡Œæ‰§è¡ŒinitPipenv.shå³å¯ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒ â€¼ï¸éœ€è¦æ³¨æ„æ‰§è¡Œshellè„šæœ¬çš„æ–¹å¼ï¼Œéœ€è¦ä½¿ç”¨.æ‰§è¡Œshell ","date":"2022å¹´07æœˆ15æ—¥","objectID":"/2022/07/jenkins%E4%BB%BB%E5%8A%A1%E4%B8%AD%E4%BD%BF%E7%94%A8pipenv/:4:0","tags":["Jenkins"],"title":"Jenkinsä»»åŠ¡ä¸­ä½¿ç”¨Pipenv","uri":"/2022/07/jenkins%E4%BB%BB%E5%8A%A1%E4%B8%AD%E4%BD%BF%E7%94%A8pipenv/"},{"categories":["Goç¬”è®°"],"content":"Goè¯­è¨€æ ‡å‡†åº“æ–‡æ¡£ä¸­æ–‡ç‰ˆ ","date":"2022å¹´07æœˆ14æ—¥","objectID":"/2022/07/go%E5%B8%B8%E7%94%A8%E7%9A%84%E5%87%BD%E6%95%B0/:0:0","tags":["Goç¬”è®°"],"title":"Goå¸¸ç”¨çš„å‡½æ•°","uri":"/2022/07/go%E5%B8%B8%E7%94%A8%E7%9A%84%E5%87%BD%E6%95%B0/"},{"categories":["Goç¬”è®°"],"content":"å­—ç¬¦ä¸²ä¸­å¸¸ç”¨çš„å‡½æ•° ç»Ÿè®¡å­—ç¬¦ä¸²çš„é•¿åº¦ï¼ŒæŒ‰å­—èŠ‚ï¼šlen(str) //ç»Ÿè®¡å­—ç¬¦ä¸²çš„é•¿åº¦ï¼ŒæŒ‰å­—èŠ‚ s1 := \"Hello World\" t.Logf(\"s1çš„é•¿åº¦ä¸ºï¼š%v\", len(s1)) //s1çš„é•¿åº¦ä¸ºï¼š11 s2 := \"Hello å°æ˜\" // golangçš„ç¼–ç ç»Ÿä¸€ä¸ºutf-8(ASCIIçš„å­—ç¬¦ï¼ˆå­—æ¯å’Œæ•°å­—ï¼‰å ä¸€ä¸ªå­—èŠ‚ï¼Œæ±‰å­—å 3ä¸ªå­—èŠ‚) t.Logf(\"s2çš„é•¿åº¦ä¸ºï¼š%v\", len(s2)) // s2çš„é•¿åº¦ä¸ºï¼š12 å­—ç¬¦ä¸²éå†ï¼ŒåŒæ—¶å¤„ç†æœ‰ä¸­æ–‡çš„é—®é¢˜ï¼šr := []rune(str) //å­—ç¬¦ä¸²éå†ï¼ŒåŒæ—¶å¤„ç†æœ‰ä¸­æ–‡çš„é—®é¢˜ s3 := \"Hello Worldï¼\" for _,v := range []rune(s3) { t.Log(string(v)) } /* æ‰“å°ç»“æœ function_test.go:15: H function_test.go:15: e function_test.go:15: l function_test.go:15: l function_test.go:15: o function_test.go:15: function_test.go:15: W function_test.go:15: o function_test.go:15: r function_test.go:15: l function_test.go:15: d function_test.go:15: ï¼ */ å­—ç¬¦ä¸²è½¬æ•´æ•°ï¼ši := strconv.Atoi(\"12\") // å­—ç¬¦ä¸²è½¬æ•´æ•° i, _ := strconv.Atoi(\"12\") t.Logf(\"i:çš„å€¼ä¸ºï¼š%v, ç±»å‹ä¸º%T\", i, i) //i:çš„å€¼ä¸ºï¼š12, ç±»å‹ä¸ºint æ•´æ•°è½¬å­—ç¬¦ä¸²ï¼šstr = strconv.Itoa(12345) //æ•´æ•°è½¬å­—ç¬¦ä¸² s4 := strconv.Itoa(12345) t.Logf(\"s4çš„å€¼ä¸ºï¼š%v, ç±»å‹ä¸º%T\", s4, s4) //s4çš„å€¼ä¸ºï¼š12345, ç±»å‹ä¸ºstring å­—ç¬¦ä¸²è½¬[]byteï¼švar bytes = []byte(\"hello go\") // å­—ç¬¦ä¸²è½¬[]byte var bytes = []byte(\"Hello go\") t.Logf(\"bytesçš„å€¼ä¸ºï¼š%v, ç±»å‹ä¸º%T\", bytes, bytes) //bytesçš„å€¼ä¸ºï¼š[72 101 108 108 111 32 103 111], ç±»å‹ä¸º[]uint8 []byteè½¬å­—ç¬¦ä¸²ï¼šstr := string([]byte{97, 98, 99}) //[]byteè½¬å­—ç¬¦ä¸² s5 := string([]byte{72, 101, 108, 108, 111, 32, 103, 111}) t.Logf(\"s5çš„å€¼ä¸ºï¼š%v, ç±»å‹ä¸º%T\", s5, s5) //s5çš„å€¼ä¸ºï¼šHello go, ç±»å‹ä¸ºstring 10è¿›åˆ¶è½¬2,8,16è¿›åˆ¶ï¼šstr := strconv.FormatInt(123, 2) // 10è¿›åˆ¶è½¬2,8,16è¿›åˆ¶ s6 := strconv.FormatInt(123, 2) t.Logf(\"123è½¬2è¿›åˆ¶ï¼š%v\", s6) //123è½¬2è¿›åˆ¶ï¼š1111011 s7 := strconv.FormatInt(123, 8) t.Logf(\"123è½¬8è¿›åˆ¶ï¼š%v\", s7) //123è½¬8è¿›åˆ¶ï¼š173 s8 := strconv.FormatInt(123, 16) t.Logf(\"123è½¬16è¿›åˆ¶ï¼š%v\", s8) //123è½¬16è¿›åˆ¶ï¼š7b æŸ¥æ‰¾å­ä¸²æ˜¯å¦åœ¨æŒ‡å®šçš„å­—ç¬¦ä¸²ä¸­ï¼šstrings.Contains(\"Hello World!\", \"ll\") // æŸ¥æ‰¾å­ä¸²æ˜¯å¦åœ¨æŒ‡å®šçš„å­—ç¬¦ä¸²ä¸­ res := strings.Contains(\"Hello World!\", \"ll\") t.Log(res) // true ç»Ÿè®¡ä¸€ä¸ªå­—ç¬¦ä¸²æœ‰å‡ ä¸ªæŒ‡å®šçš„å­ä¸²ï¼šstrings.Count(\"ceheese\", \"e\") //ç»Ÿè®¡ä¸€ä¸ªå­—ç¬¦ä¸²æœ‰å‡ ä¸ªæŒ‡å®šçš„å­ä¸² count := strings.Count(\"Hello World!\", \"l\") t.Log(count) //3 ä¸åŒºåˆ†å¤§å°å†™çš„å­—ç¬¦ä¸²æ¯”è¾ƒï¼ˆ==æ˜¯åŒºåˆ†å¤§å°å†™çš„ï¼‰ï¼šfmt.Println(strings.EqualFold(\"abc\", \"ABC\")) // ä¸åŒºåˆ†å¤§å°å†™çš„å­—ç¬¦ä¸²æ¯”è¾ƒï¼ˆ==æ˜¯åŒºåˆ†å¤§å°å†™çš„ï¼‰ fmt.Println(strings.EqualFold(\"abc\", \"ABC\")) //true è¿”å›å­ä¸²åœ¨å­—ç¬¦ä¸²ç¬¬ä¸€æ¬¡å‡ºç°çš„indexå€¼ï¼Œå¦‚æœæ²¡æœ‰è¿”å›-1ï¼šstrings.index(\"NLT_abc\", \"abc\") //è¿”å›å­ä¸²åœ¨å­—ç¬¦ä¸²ç¬¬ä¸€æ¬¡å‡ºç°çš„indexå€¼ï¼Œå¦‚æœæ²¡æœ‰è¿”å›-1 fmt.Println(strings.Index(\"NLT_abc\", \"abc\")) //4 è¿”å›å­ä¸²åœ¨å­—ç¬¦ä¸²æœ€åä¸€æ¬¡å‡ºç°çš„indexï¼Œå¦‚æœæ²¡æœ‰è¿”å›-1ï¼šstrings.LastIndex(\"go golang\", \"go\") //è¿”å›å­ä¸²åœ¨å­—ç¬¦ä¸²æœ€åä¸€æ¬¡å‡ºç°çš„indexï¼Œå¦‚æœæ²¡æœ‰è¿”å›-1 fmt.Println(strings.LastIndex(\"go golang\", \"go\")) //3 å°†æŒ‡å®šçš„å­ä¸²æ›¿æ¢æˆå¦å¤–ä¸€ä¸ªå­ä¸²ï¼šstrings.Replace(\"go go hell\", \"go\", \"golang\", n) n: å¯ä»¥æŒ‡å®šå¸Œæœ›æ›¿æ¢å‡ ä¸ªï¼Œå¦‚æœn=-1è¡¨ç¤ºå…¨éƒ¨æ›¿æ¢ //å°†æŒ‡å®šçš„å­ä¸²æ›¿æ¢æˆå¦å¤–ä¸€ä¸ªå­ä¸² fmt.Println(strings.Replace(\"go go hell\", \"go\", \"golang\", -1)) //golang golang hell æŒ‰ç…§æŒ‡å®šçš„æŸä¸ªå­—ç¬¦ï¼Œä¸ºåˆ†å‰²æ ‡è¯†ï¼Œå°†ä¸€ä¸ªå­—ç¬¦ä¸²æ‹†åˆ†æˆå­—ç¬¦ä¸²æ•°ç»„ï¼šstrings.Split(\"hello, work, ok\", \",\") //æŒ‰ç…§æŒ‡å®šçš„æŸä¸ªå­—ç¬¦ï¼Œä¸ºåˆ†å‰²æ ‡è¯†ï¼Œå°†ä¸€ä¸ªå­—ç¬¦ä¸²æ‹†åˆ†æˆå­—ç¬¦ä¸²æ•°ç»„ fmt.Println(strings.Split(\"hello, work, ok\", \",\")) //[hello work ok] å°†å­—ç¬¦ä¸²çš„å­—æ¯è¿›è¡Œå¤§å°å†™çš„è½¬æ¢ï¼šè½¬å°å†™ï¼šstrings.ToLower(\"Go\") è½¬å¤§å†™ï¼š strings.ToUpper(\"Go\") //å°†å­—ç¬¦ä¸²çš„å­—æ¯è¿›è¡Œå¤§å°å†™çš„è½¬æ¢ fmt.Println(strings.ToLower(\"Go\")) //go fmt.Println(strings.ToUpper(\"Go\")) //GO å°†å­—ç¬¦ä¸²å·¦å³ä¸¤è¾¹çš„ç©ºæ ¼å»æ‰ï¼šstrings.TrimSpace(\" tn \") //å°†å­—ç¬¦ä¸²å·¦å³ä¸¤è¾¹çš„ç©ºæ ¼å»æ‰ fmt.Println(strings.TrimSpace(\" tn \")) //tn å°†å­—ç¬¦ä¸²å·¦å³ä¸¤è¾¹æŒ‡å®šçš„å­—ç¬¦å»æ‰ï¼šstrings.Trim(\"! hello !\", \"!\") //å°†å­—ç¬¦ä¸²å·¦å³ä¸¤è¾¹æŒ‡å®šçš„å­—ç¬¦å»æ‰ fmt.Println(strings.Trim(\"!hello!\", \"!\")) //hello å°†å­—ç¬¦ä¸²å·¦è¾¹æŒ‡å®šçš„å­—ç¬¦å»æ‰ï¼šstrings.TrimLeft(\"! hello !\", \"!\") //å°†å­—ç¬¦ä¸²å·¦è¾¹æŒ‡å®šçš„å­—ç¬¦å»æ‰ fmt.Println(strings.TrimLeft(\"!hello!\", \"!\")) //hello! å°†å­—ç¬¦ä¸²å³è¾¹æŒ‡å®šçš„å­—ç¬¦å»æ‰ï¼šstrings.TrimRight(\"! hello !\", \"!\") //å°†å­—ç¬¦ä¸²å³è¾¹æŒ‡å®šçš„å­—ç¬¦å»æ‰ fmt.Println(strings.TrimRight(\"!hello!\", \"!\")) //!hello åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ä»¥æŒ‡å®šçš„å­—ç¬¦ä¸²å¼€å¤´ï¼šstrings.HasPrefix(\"ftp://192.168.0.0.1\", \"ftp\") //åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ä»¥æŒ‡å®šçš„å­—ç¬¦ä¸²å¼€å¤´ fmt.Println(strings.HasPrefix(\"ftp://192.168.0.0.1\", \"ftp\")) //true åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ä»¥æŒ‡å®šçš„å­—ç¬¦ä¸²ç»“æŸï¼šstrings.HasSuffix(\"NLT_ABC.png\", \".png\") // åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ä»¥æŒ‡å®šçš„å­—ç¬¦ä¸²ç»“æŸ fmt.Println(strings.HasSuffix(\"NLT_ABC.png\", \".png\")) //true ","date":"2022å¹´07æœˆ14æ—¥","objectID":"/2022/07/go%E5%B8%B8%E7%94%A8%E7%9A%84%E5%87%BD%E6%95%B0/:1:0","tags":["Goç¬”è®°"],"title":"Goå¸¸ç”¨çš„å‡½æ•°","uri":"/2022/07/go%E5%B8%B8%E7%94%A8%E7%9A%84%E5%87%BD%E6%95%B0/"},{"categories":["Goç¬”è®°"],"content":"æ—¶é—´å’Œæ—¥æœŸç›¸å…³å‡½æ•° time.Timeç±»å‹ï¼Œç”¨äºè¡¨ç¤ºæ—¶é—´ now := time.Now() fmt.Printf(\"type: %Tï¼Œval = %v\\n\", now, now) //type: time.Timeï¼Œval = 2022-07-14 17:00:12.930889 +0800 CST m=+0.001793251 è·å–å½“å‰æ—¶é—´çš„æ–¹æ³•ï¼štime.Now() fmt.Println(time.Now()) //2022-07-14 17:01:01.243621 +0800 CST m=+0.002719584 è·å–å…¶ä»–çš„æ—¥æœŸä¿¡æ¯ now := time.Now() fmt.Println(\"å½“å‰å¹´ï¼š\", now.Year()) // å½“å‰å¹´ï¼š 2022 fmt.Println(\"å½“å‰æœˆï¼š\", now.Month()) //å½“å‰æœˆï¼š July fmt.Println(\"å½“å‰æ—¥ï¼š\", now.Day()) //å½“å‰æ—¥ï¼š 14 fmt.Println(\"å½“å‰æ˜ŸæœŸï¼š\", now.Weekday()) //å½“å‰æ˜ŸæœŸï¼š Thursday fmt.Println(\"å½“å‰å°æ—¶ï¼š\", now.Hour()) //å½“å‰å°æ—¶ï¼š 17 fmt.Println(\"å½“å‰åˆ†é’Ÿï¼š\", now.Minute()) //å½“å‰åˆ†é’Ÿï¼š 4 fmt.Println(\"å½“å‰ç§’ï¼š\", now.Second()) //å½“å‰ç§’ï¼š 58 æ ¼å¼åŒ–æ—¥æœŸæ—¶é—´ æ–¹å¼ä¸€ï¼šä½¿ç”¨Printf or SPrintf æ—¥æœŸå­—ç¬¦ä¸²å„ä¸ªæ•°å­—æ˜¯å›ºå®šçš„ï¼Œå¿…é¡»è¿™æ ·å†™ //å½“å‰å¹´æœˆæ—¥ 2022-7-14 17:17:16 fmt.Printf(\"å½“å‰å¹´æœˆæ—¥ %d-%d-%d %d:%d:%d \\n\", now.Year(), now.Month(), now.Day(), now.Hour(), now.Minute(), now.Second()) dateStr := fmt.Sprintf(\"å½“å‰å¹´æœˆæ—¥ %d-%d-%d %d:%d:%d \\n\", now.Year(), now.Month(), now.Day(), now.Hour(), now.Minute(), now.Second()) fmt.Println(dateStr) //å½“å‰å¹´æœˆæ—¥ 2022-7-14 17:17:16 æ–¹å¼äºŒï¼šä½¿ç”¨Formatæ ¼å¼åŒ– æ—¥æœŸå­—ç¬¦ä¸²å„ä¸ªæ•°å­—å¯ä»¥è‡ªç”±çš„ç»„åˆ fmt.Println(now.Format(\"2006/01/02 15:04:05\")) //2022/07/14 17:21:12 fmt.Println(now.Format(\"2006-01-02\")) //2022-07-14 fmt.Println(now.Format(\"20060102\")) //20220714 fmt.Println(now.Format(\"15:04:05\")) //17:21:12 å†…ç½®çš„å¸¸é‡ // timeå†…ç½®çš„æ—¶é—´å¸¸é‡ const ( Nanosecond Duration = 1 Microsecond = 1000 * Nanosecond Millisecond = 1000 * Microsecond Second = 1000 * Millisecond Minute = 60 * Second Hour = 60 * Minute ) // æ˜ŸæœŸå¸¸é‡ const ( Sunday Weekday = iota Monday Tuesday Wednesday Thursday Friday Saturday ) // æœˆä»½å¸¸é‡ const ( January Month = 1 + iota February March April May June July August September October November December ) ä¼‘çœ ï¼štime.Sleep time.Sleep(time.Millisecond * 1500) //ä¼‘çœ 1.5s è·å–å½“å‰Unixæ—¶é—´æˆ³å’ŒUnixNanoæ—¶é—´æˆ³ ä½œç”¨ï¼šå¯ä»¥è·å–éšæœºæ•°å­— fmt.Printf(\"unixæ—¶é—´æˆ³=%v unixnanoæ—¶é—´æˆ³=%v \\n\", now.Unix(), now.UnixNano()) //unixæ—¶é—´æˆ³=1657790593 unixnanoæ—¶é—´æˆ³=1657790593798028000 ","date":"2022å¹´07æœˆ14æ—¥","objectID":"/2022/07/go%E5%B8%B8%E7%94%A8%E7%9A%84%E5%87%BD%E6%95%B0/:2:0","tags":["Goç¬”è®°"],"title":"Goå¸¸ç”¨çš„å‡½æ•°","uri":"/2022/07/go%E5%B8%B8%E7%94%A8%E7%9A%84%E5%87%BD%E6%95%B0/"},{"categories":["Goç¬”è®°"],"content":"å†…ç½®å‡½æ•° lenï¼šç”¨æ¥æ±‚é•¿åº¦ï¼Œæ¯”å¦‚stringã€arrayã€sliceã€mapã€channel newï¼šç”¨æ¥åˆ†é…å†…å­˜ï¼Œä¸»è¦ç”¨æ¥åˆ†é…å€¼ç±»å‹ï¼Œæ¯”å¦‚ï¼šintã€float32ã€structâ€¦â€¦è¿”å›çš„æ˜¯æŒ‡é’ˆ makeï¼šç”¨æ¥åˆ†é…å†…å­˜ï¼Œä¸»è¦ç”¨æ¥åˆ†é…å¼•ç”¨ç±»å‹ï¼Œæ¯”å¦‚ï¼šchanã€mapã€slice ","date":"2022å¹´07æœˆ14æ—¥","objectID":"/2022/07/go%E5%B8%B8%E7%94%A8%E7%9A%84%E5%87%BD%E6%95%B0/:3:0","tags":["Goç¬”è®°"],"title":"Goå¸¸ç”¨çš„å‡½æ•°","uri":"/2022/07/go%E5%B8%B8%E7%94%A8%E7%9A%84%E5%87%BD%E6%95%B0/"},{"categories":["Jenkins"],"content":"Jenkinså‚æ•°åŒ–æ„å»º ","date":"2022å¹´07æœˆ13æ—¥","objectID":"/2022/07/jenkins%E5%8F%82%E6%95%B0%E5%8C%96%E6%9E%84%E5%BB%BA%E4%B8%8E%E8%A7%A6%E5%8F%91/:1:0","tags":["Jenkins"],"title":"Jenkinså‚æ•°åŒ–æ„å»ºä¸è§¦å‘","uri":"/2022/07/jenkins%E5%8F%82%E6%95%B0%E5%8C%96%E6%9E%84%E5%BB%BA%E4%B8%8E%E8%A7%A6%E5%8F%91/"},{"categories":["Jenkins"],"content":"åˆ›å»ºä¸€ä¸ªå¸¦å‚æ•°çš„ä»»åŠ¡ å‹¾é€‰å‚æ•°åŒ–æ„å»º æ·»åŠ é€‰é¡¹å‚æ•° å­—ç¬¦å‚æ•° æ–‡æœ¬å‚æ•° æ–‡ä»¶å‚æ•° ","date":"2022å¹´07æœˆ13æ—¥","objectID":"/2022/07/jenkins%E5%8F%82%E6%95%B0%E5%8C%96%E6%9E%84%E5%BB%BA%E4%B8%8E%E8%A7%A6%E5%8F%91/:1:1","tags":["Jenkins"],"title":"Jenkinså‚æ•°åŒ–æ„å»ºä¸è§¦å‘","uri":"/2022/07/jenkins%E5%8F%82%E6%95%B0%E5%8C%96%E6%9E%84%E5%BB%BA%E4%B8%8E%E8%A7%A6%E5%8F%91/"},{"categories":["Jenkins"],"content":"è·å–å‚æ•°ä¿¡æ¯ ","date":"2022å¹´07æœˆ13æ—¥","objectID":"/2022/07/jenkins%E5%8F%82%E6%95%B0%E5%8C%96%E6%9E%84%E5%BB%BA%E4%B8%8E%E8%A7%A6%E5%8F%91/:1:2","tags":["Jenkins"],"title":"Jenkinså‚æ•°åŒ–æ„å»ºä¸è§¦å‘","uri":"/2022/07/jenkins%E5%8F%82%E6%95%B0%E5%8C%96%E6%9E%84%E5%BB%BA%E4%B8%8E%E8%A7%A6%E5%8F%91/"},{"categories":["Jenkins"],"content":"æ„å»ºå¸¦å‚æ•°åŒ–çš„ä»»åŠ¡ ","date":"2022å¹´07æœˆ13æ—¥","objectID":"/2022/07/jenkins%E5%8F%82%E6%95%B0%E5%8C%96%E6%9E%84%E5%BB%BA%E4%B8%8E%E8%A7%A6%E5%8F%91/:1:3","tags":["Jenkins"],"title":"Jenkinså‚æ•°åŒ–æ„å»ºä¸è§¦å‘","uri":"/2022/07/jenkins%E5%8F%82%E6%95%B0%E5%8C%96%E6%9E%84%E5%BB%BA%E4%B8%8E%E8%A7%A6%E5%8F%91/"},{"categories":["Jenkins"],"content":"æ„å»ºç»“æœ æ³¨ï¼šæ–‡ä»¶å‚æ•°ï¼Œåˆ™ä¼šä¸Šä¼ åˆ°å½“å‰çš„å·¥ä½œç©ºé—´ ","date":"2022å¹´07æœˆ13æ—¥","objectID":"/2022/07/jenkins%E5%8F%82%E6%95%B0%E5%8C%96%E6%9E%84%E5%BB%BA%E4%B8%8E%E8%A7%A6%E5%8F%91/:1:4","tags":["Jenkins"],"title":"Jenkinså‚æ•°åŒ–æ„å»ºä¸è§¦å‘","uri":"/2022/07/jenkins%E5%8F%82%E6%95%B0%E5%8C%96%E6%9E%84%E5%BB%BA%E4%B8%8E%E8%A7%A6%E5%8F%91/"},{"categories":["Jenkins"],"content":"Jenkinsä»»åŠ¡è§¦å‘ åœ¨å®é™…å·¥ä½œæ€»ç»“ï¼Œç»å¸¸ä¼šé‡åˆ°ï¼Œæ‰§è¡Œå®Œä»»åŠ¡1ï¼Œç„¶åå†æ‰§è¡Œä»»åŠ¡2ã€‚ åƒè¿™ç§çš„è¿ç»­è§¦å‘ä»»åŠ¡ï¼Œå¯ä»¥åœ¨ä»»åŠ¡1ä¸­æ·»åŠ æ„å»ºåæ“ä½œ-\u003eæ„å»ºå…¶ä»–å·¥ç¨‹ ","date":"2022å¹´07æœˆ13æ—¥","objectID":"/2022/07/jenkins%E5%8F%82%E6%95%B0%E5%8C%96%E6%9E%84%E5%BB%BA%E4%B8%8E%E8%A7%A6%E5%8F%91/:2:0","tags":["Jenkins"],"title":"Jenkinså‚æ•°åŒ–æ„å»ºä¸è§¦å‘","uri":"/2022/07/jenkins%E5%8F%82%E6%95%B0%E5%8C%96%E6%9E%84%E5%BB%BA%E4%B8%8E%E8%A7%A6%E5%8F%91/"},{"categories":["Jenkins"],"content":"æ„å»ºå…¶ä»–å·¥ç¨‹é…ç½® å¡«å†™è¦æ„å»ºçš„é¡¹ç›®åç§° é€‰æ‹©ä»€ä¹ˆæ—¶å€™è§¦å‘ ","date":"2022å¹´07æœˆ13æ—¥","objectID":"/2022/07/jenkins%E5%8F%82%E6%95%B0%E5%8C%96%E6%9E%84%E5%BB%BA%E4%B8%8E%E8%A7%A6%E5%8F%91/:2:1","tags":["Jenkins"],"title":"Jenkinså‚æ•°åŒ–æ„å»ºä¸è§¦å‘","uri":"/2022/07/jenkins%E5%8F%82%E6%95%B0%E5%8C%96%E6%9E%84%E5%BB%BA%E4%B8%8E%E8%A7%A6%E5%8F%91/"},{"categories":["Jenkins"],"content":"ä»»åŠ¡è¯¦æƒ…å±•ç¤ºæ•ˆæœ ","date":"2022å¹´07æœˆ13æ—¥","objectID":"/2022/07/jenkins%E5%8F%82%E6%95%B0%E5%8C%96%E6%9E%84%E5%BB%BA%E4%B8%8E%E8%A7%A6%E5%8F%91/:2:2","tags":["Jenkins"],"title":"Jenkinså‚æ•°åŒ–æ„å»ºä¸è§¦å‘","uri":"/2022/07/jenkins%E5%8F%82%E6%95%B0%E5%8C%96%E6%9E%84%E5%BB%BA%E4%B8%8E%E8%A7%A6%E5%8F%91/"},{"categories":["Jenkins"],"content":"æ„å»ºæ•ˆæœ æ„å»ºä»»åŠ¡1 ä»»åŠ¡1æ„å»ºå®Œæˆåï¼Œå¦‚æœæ„å»ºç¨³å®šåˆ™è‡ªåŠ¨æ„å»ºä»»åŠ¡2 åœ¨ä»»åŠ¡1çš„æ—¥å¿—ä¸­ï¼Œå¯ä»¥çœ‹åˆ°æˆåŠŸçš„è§¦å‘æ–°æ„å»º åœ¨ä»»åŠ¡2çš„æ—¥å¿—ä¸­ï¼Œç¬¬ä¸€è¡Œå¯ä»¥çœ‹åˆ°ä»»åŠ¡2æ˜¯ç”±ä¸Šæ¸¸é¡¹ç›®ç¬¬2æ¬¡æ„å»ºå¯åŠ¨çš„ ","date":"2022å¹´07æœˆ13æ—¥","objectID":"/2022/07/jenkins%E5%8F%82%E6%95%B0%E5%8C%96%E6%9E%84%E5%BB%BA%E4%B8%8E%E8%A7%A6%E5%8F%91/:2:3","tags":["Jenkins"],"title":"Jenkinså‚æ•°åŒ–æ„å»ºä¸è§¦å‘","uri":"/2022/07/jenkins%E5%8F%82%E6%95%B0%E5%8C%96%E6%9E%84%E5%BB%BA%E4%B8%8E%E8%A7%A6%E5%8F%91/"},{"categories":["Jenkins"],"content":"Jenkinså‚æ•°åŒ–ä»»åŠ¡è§¦å‘ å½“ä»»åŠ¡1ä¸­æœ‰æ„å»ºåéœ€è¦ä¼ é€’ç»™ä»»åŠ¡2çš„å‚æ•°æ—¶ï¼ˆæˆ–è€…ä»»åŠ¡2éœ€è¦ä¼ é€’å‚æ•°æ—¶ï¼‰ï¼Œè¦æƒ³å®ç°å¸¦å‚æ•°æ„å»ºï¼Œéœ€è¦å€ŸåŠ©ä¸€ä¸ªJenkinsæ’ä»¶ï¼šParameterized Trigger åœ¨ä»»åŠ¡1ä¸­ï¼Œå°†æ‰§è¡Œå®Œæ¯•çš„å‚æ•°ä¿å­˜åœ¨profile.txtæ–‡ä»¶ä¸­ å› ä¸ºç»ˆç«¯shellæ‰§è¡Œå®Œæ¯•åå˜é‡éƒ½ä¼šå›æ”¶ï¼Œæ‰€ä»¥ä¸èƒ½å¤Ÿå°†å˜é‡ç›´æ¥ä¼ é€’ç»™ä»»åŠ¡2ï¼Œéœ€è¦å°†å…¶å†™å…¥åˆ°æ–‡ä»¶ä¸­ç„¶åä»¥æ–‡ä»¶çš„å½¢å¼ä¼ é€’ï¼Œåœ¨æ„å»ºçš„shellè„šæœ¬ä¸­ï¼Œæ·»åŠ ä¸€è¡Œå†™å…¥æ–‡ä»¶ echo \"env=$env\" \u003e profile.txt åœ¨ä»»åŠ¡1ä¸­è¿›è¡Œæ›´æ”¹æ„å»ºå…¶ä»–å·¥ç¨‹çš„æ–¹å¼ï¼Œé€‰æ‹©Trigger parameterized build on other projects è¿›è¡Œé…ç½®å‚æ•° åœ¨ä»»åŠ¡2ä¸­æ¥æ”¶å‚æ•° è¿è¡Œä»»åŠ¡1 ä»»åŠ¡2è‡ªåŠ¨è§¦å‘ï¼Œè·å–åˆ°å‚æ•° ","date":"2022å¹´07æœˆ13æ—¥","objectID":"/2022/07/jenkins%E5%8F%82%E6%95%B0%E5%8C%96%E6%9E%84%E5%BB%BA%E4%B8%8E%E8%A7%A6%E5%8F%91/:3:0","tags":["Jenkins"],"title":"Jenkinså‚æ•°åŒ–æ„å»ºä¸è§¦å‘","uri":"/2022/07/jenkins%E5%8F%82%E6%95%B0%E5%8C%96%E6%9E%84%E5%BB%BA%E4%B8%8E%E8%A7%A6%E5%8F%91/"},{"categories":["Goç¬”è®°"],"content":"GoåŒ… ","date":"2022å¹´07æœˆ09æ—¥","objectID":"/2022/07/go%E5%87%BD%E6%95%B0%E5%92%8C%E6%96%B9%E6%B3%95/:1:0","tags":["Goç¬”è®°"],"title":"Goå‡½æ•°å’Œæ–¹æ³•","uri":"/2022/07/go%E5%87%BD%E6%95%B0%E5%92%8C%E6%96%B9%E6%B3%95/"},{"categories":["Goç¬”è®°"],"content":"åŒ…çš„åŸºæœ¬æ¦‚å¿µ goçš„æ¯ä¸€ä¸ªæ–‡ä»¶éƒ½æ˜¯å±äºä¸€ä¸ªåŒ…çš„ï¼Œä¹Ÿå°±æ˜¯è¯´goæ˜¯ä»¥åŒ…çš„å½¢å¼æ¥ç®¡ç†æ–‡ä»¶å’Œé¡¹ç›®ç›®å½•ç»“æ„çš„ ","date":"2022å¹´07æœˆ09æ—¥","objectID":"/2022/07/go%E5%87%BD%E6%95%B0%E5%92%8C%E6%96%B9%E6%B3%95/:1:1","tags":["Goç¬”è®°"],"title":"Goå‡½æ•°å’Œæ–¹æ³•","uri":"/2022/07/go%E5%87%BD%E6%95%B0%E5%92%8C%E6%96%B9%E6%B3%95/"},{"categories":["Goç¬”è®°"],"content":"åŒ…çš„ä¸‰å¤§ä½œç”¨ åŒºåˆ†ç›¸åŒåå­—çš„å‡½æ•°ã€å˜é‡ç­‰æ ‡è¯†ç¬¦ å½“ç¨‹åºæ–‡ä»¶å¾ˆå¤šæ—¶ï¼Œå¯ä»¥å¾ˆå¥½çš„ç®¡ç†é¡¹ç›® æ§åˆ¶å‡½æ•°ã€å˜é‡ç­‰è®¿é—®èŒƒå›´ï¼Œå³ä½œç”¨åŸŸ ","date":"2022å¹´07æœˆ09æ—¥","objectID":"/2022/07/go%E5%87%BD%E6%95%B0%E5%92%8C%E6%96%B9%E6%B3%95/:1:2","tags":["Goç¬”è®°"],"title":"Goå‡½æ•°å’Œæ–¹æ³•","uri":"/2022/07/go%E5%87%BD%E6%95%B0%E5%92%8C%E6%96%B9%E6%B3%95/"},{"categories":["Goç¬”è®°"],"content":"åŒ…çš„ä½¿ç”¨ æ‰“åŒ…åŸºæœ¬è¯­æ³• package util å¯¼åŒ…åŸºæœ¬è¯­æ³• import \"åŒ…çš„è·¯å¾„\" æ³¨æ„äº‹é¡¹ åœ¨ç»™ä¸€ä¸ªæ–‡ä»¶æ‰“åŒ…æ—¶ï¼Œè¯¥åŒ…å¯¹åº”ä¸€ä¸ªæ–‡ä»¶å¤¹ å½“ä¸€ä¸ªæ–‡ä»¶è¦ä½¿ç”¨å…¶ä»–åŒ…å‡½æ•°æˆ–å˜é‡æ—¶ï¼Œéœ€è¦å…ˆå¼•å…¥å¯¹åº”çš„åŒ… ä¸ºäº†è®©å…¶ä»–åŒ…çš„æ–‡ä»¶ï¼Œå¯ä»¥è®¿é—®åˆ°æœ¬åŒ…çš„å‡½æ•°ï¼Œåˆ™è¯¥å‡½æ•°åçš„é¦–å­—æ¯éœ€è¦å¤§å†™ func Call(...){ ... } packageæŒ‡ä»¤åœ¨æ–‡ä»¶ç¬¬ä¸€è¡Œï¼Œç„¶åæ˜¯importæŒ‡ä»¤ package error import ( \"errors\" \"fmt\" \"strconv\" \"testing\" ) åœ¨è®¿é—®å…¶ä»–åŒ…å‡½æ•°å˜é‡æ—¶ï¼Œå…¶è¯­æ³•æ˜¯ï¼šåŒ…å.å‡½æ•°å m := cm.CreateConcurrentMap(99) m.Set(cm.StrKey(\"key\"), 10) t.Log(m.Get(cm.StrKey(\"key\"))) å¦‚æœåŒ…åè¾ƒé•¿ï¼ŒGoæ”¯æŒç»™åŒ…å–åˆ«åï¼Œæ³¨æ„ç»†èŠ‚ï¼šå–åˆ«ååï¼ŒåŸæ¥çš„åŒ…åå°±ä¸èƒ½ä½¿ç”¨äº† import ( cm \"github.com/easierway/concurrent_map\" \"testing\" ) åœ¨åŒä¸€åŒ…ä¸‹ï¼Œä¸èƒ½æœ‰ç›¸åŒçš„å‡½æ•°åã€‚ å¦‚æœè¦ç¼–è¯‘æˆä¸€ä¸ªå¯æ‰§è¡Œç¨‹åºæ–‡ä»¶ï¼Œå°±éœ€è¦å°†è¿™ä¸ªåŒ…å£°æ˜ä¸ºmainï¼Œå³package mainè¿™ä¸ªå°±æ˜¯ä¸€ä¸ªè¯­æ³•è§„èŒƒï¼Œå¦‚æœæ˜¯å†™ä¸€ä¸ªåº“ï¼ŒåŒ…åå¯ä»¥è‡ªå®šä¹‰ ","date":"2022å¹´07æœˆ09æ—¥","objectID":"/2022/07/go%E5%87%BD%E6%95%B0%E5%92%8C%E6%96%B9%E6%B3%95/:1:3","tags":["Goç¬”è®°"],"title":"Goå‡½æ•°å’Œæ–¹æ³•","uri":"/2022/07/go%E5%87%BD%E6%95%B0%E5%92%8C%E6%96%B9%E6%B3%95/"},{"categories":["Goç¬”è®°"],"content":"Goå‡½æ•° ä¸ºå®ŒæˆæŸä¸€åŠŸèƒ½çš„ç¨‹åºæ‰§è¡Œï¼ˆè¯­å¥ï¼‰çš„é›†åˆï¼Œç§°ä¸ºå‡½æ•°ã€‚ åœ¨Goä¸­ï¼Œå‡½æ•°åˆ†ä¸ºï¼šè‡ªå®šä¹‰å‡½æ•°ã€ç³»ç»Ÿå‡½æ•° ","date":"2022å¹´07æœˆ09æ—¥","objectID":"/2022/07/go%E5%87%BD%E6%95%B0%E5%92%8C%E6%96%B9%E6%B3%95/:2:0","tags":["Goç¬”è®°"],"title":"Goå‡½æ•°å’Œæ–¹æ³•","uri":"/2022/07/go%E5%87%BD%E6%95%B0%E5%92%8C%E6%96%B9%E6%B3%95/"},{"categories":["Goç¬”è®°"],"content":"åŸºæœ¬è¯­æ³• func å‡½æ•°å (å½¢å‚åˆ—è¡¨) (è¿”å›å€¼åˆ—è¡¨) { æ‰§è¡Œè¯­å¥... return è¿”å›å€¼åˆ—è¡¨ } å½¢å‚åˆ—è¡¨ï¼šè¡¨ç¤ºå‡½æ•°çš„è¾“å…¥ å‡½æ•°ä¸­çš„è¯­å¥ï¼šè¡¨ç¤ºä¸ºäº†å®ç°æŸä¸€åŠŸèƒ½ä»£ç å— å‡½æ•°å¯ä»¥æœ‰è¿”å›å€¼ï¼Œä¹Ÿå¯ä»¥æ²¡æœ‰ ","date":"2022å¹´07æœˆ09æ—¥","objectID":"/2022/07/go%E5%87%BD%E6%95%B0%E5%92%8C%E6%96%B9%E6%B3%95/:2:1","tags":["Goç¬”è®°"],"title":"Goå‡½æ•°å’Œæ–¹æ³•","uri":"/2022/07/go%E5%87%BD%E6%95%B0%E5%92%8C%E6%96%B9%E6%B3%95/"},{"categories":["Goç¬”è®°"],"content":"ç¤ºä¾‹ func compute(a int, b int, operator string) int { var result int switch operator { case \"+\": result = a + b case \"-\": result = a - b case \"*\": result = a * b case \"/\": result = a / b default: panic(\"è¿ç®—ç¬¦é”™è¯¯\") } return result } ","date":"2022å¹´07æœˆ09æ—¥","objectID":"/2022/07/go%E5%87%BD%E6%95%B0%E5%92%8C%E6%96%B9%E6%B3%95/:2:2","tags":["Goç¬”è®°"],"title":"Goå‡½æ•°å’Œæ–¹æ³•","uri":"/2022/07/go%E5%87%BD%E6%95%B0%E5%92%8C%E6%96%B9%E6%B3%95/"},{"categories":["Goç¬”è®°"],"content":"å‡½æ•°å‚æ•°çš„ä¼ é€’æ–¹å¼ å€¼ä¼ é€’ï¼šåŸºæœ¬æ•°æ®ç±»å‹intç³»åˆ—ã€floatç³»åˆ—ã€boolã€stringã€æ•°ç»„å’Œç»“æ„ä½“struct å¼•ç”¨ä¼ é€’ï¼šæŒ‡é’ˆã€sliceåˆ‡ç‰‡ã€mapã€ç®¡é“chanã€interfaceç­‰ ä¸ç®¡æ˜¯å€¼ä¼ é€’è¿˜æ˜¯å¼•ç”¨ä¼ é€’ï¼Œä¼ é€’ç»™å‡½æ•°çš„éƒ½æ˜¯å˜é‡çš„å‰¯æœ¬ï¼Œä¸åŒçš„æ˜¯ï¼Œå€¼ä¼ é€’çš„æ˜¯å€¼çš„æ‹·è´ï¼Œå¼•ç”¨ä¼ é€’çš„æ˜¯åœ°å€çš„æ‹·è´ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œåœ°å€æ‹·è´æ•ˆç‡é«˜ï¼Œå› ä¸ºæ•°æ®é‡å°ï¼Œè€Œå€¼æ‹·è´å†³å®šæ‹·è´çš„æ•°æ®å¤§å°ï¼Œæ•°æ®è¶Šå¤§ï¼Œæ•ˆç‡è¶Šä½ã€‚ ","date":"2022å¹´07æœˆ09æ—¥","objectID":"/2022/07/go%E5%87%BD%E6%95%B0%E5%92%8C%E6%96%B9%E6%B3%95/:2:3","tags":["Goç¬”è®°"],"title":"Goå‡½æ•°å’Œæ–¹æ³•","uri":"/2022/07/go%E5%87%BD%E6%95%B0%E5%92%8C%E6%96%B9%E6%B3%95/"},{"categories":["Goç¬”è®°"],"content":"å˜é‡ä½œç”¨åŸŸ å‡½æ•°å†…éƒ¨å£°æ˜/å®šä¹‰çš„å˜é‡å«å±€éƒ¨å˜é‡ï¼Œä½œç”¨åŸŸä»…é™äºå‡½æ•°å†…éƒ¨ å‡½æ•°å¤–éƒ¨å£°æ˜/å®šä¹‰çš„å˜é‡å«å…¨å±€å˜é‡ï¼Œä½œç”¨åŸŸåœ¨æ•´ä¸ªåŒ…éƒ½æœ‰æ•ˆï¼Œå¦‚æœå…¶é¦–å­—æ¯ä¸ºå¤§å†™ï¼Œåˆ™ä½œç”¨åŸŸåœ¨æ•´ä¸ªç¨‹åºæœ‰æ•ˆ å¦‚æœå˜é‡æ˜¯åœ¨ä¸€ä¸ªä»£ç å—ï¼Œæ¯”å¦‚for/ifä¸­ï¼Œé‚£ä¹ˆè¿™ä¸ªå˜é‡çš„ä½œç”¨åŸŸå°±åœ¨æ”¹ä»£ç å— ","date":"2022å¹´07æœˆ09æ—¥","objectID":"/2022/07/go%E5%87%BD%E6%95%B0%E5%92%8C%E6%96%B9%E6%B3%95/:2:4","tags":["Goç¬”è®°"],"title":"Goå‡½æ•°å’Œæ–¹æ³•","uri":"/2022/07/go%E5%87%BD%E6%95%B0%E5%92%8C%E6%96%B9%E6%B3%95/"},{"categories":["Goç¬”è®°"],"content":"å‡½æ•°æ³¨æ„äº‹é¡¹ å‡½æ•°çš„å½¢å‚åˆ—è¡¨å¯ä»¥æ˜¯å¤šä¸ªï¼Œè¿”å›å€¼åˆ—è¡¨ä¹Ÿå¯ä»¥æ˜¯å¤šä¸ª å½¢å‚åˆ—è¡¨å’Œè¿”å›å€¼åˆ—è¡¨çš„æ•°æ®ç±»å‹å¯ä»¥æ˜¯å€¼ç±»å‹å’Œå¼•ç”¨ç±»å‹ å‡½æ•°çš„å‘½åéµå¾ªæ ‡è¯†ç¬¦å‘½åè§„èŒƒï¼Œé¦–å­—æ¯ä¸èƒ½æ˜¯æ•°å­—ï¼Œé¦–å­—æ¯å¤§å†™è¯¥å‡½æ•°å¯ä»¥è¢«æœ¬åŒ…æ–‡ä»¶å’Œå…¶ä»–åŒ…æ–‡ä»¶ä½¿ç”¨ï¼Œç±»ä¼¼publicï¼Œé¦–å­—æ¯å°å†™ï¼Œåªèƒ½è¢«æœ¬åŒ…æ–‡ä»¶ä½¿ç”¨ï¼Œå…¶ä»–åŒ…æ–‡ä»¶ä¸èƒ½ä½¿ç”¨ï¼Œç±»ä¼¼private å‡½æ•°ä¸­çš„å˜é‡æ˜¯å±€éƒ¨çš„ï¼Œå‡½æ•°å¤–ä¸ç”Ÿæ•ˆ åŸºæœ¬æ•°æ®ç±»å‹å’Œæ•°ç»„é»˜è®¤éƒ½æ˜¯å€¼ä¼ é€’çš„ï¼Œå³è¿›è¡Œå€¼æ‹·è´ã€‚åœ¨å‡½æ•°å†…ä¿®æ”¹ï¼Œä¸ä¼šå½±å“åˆ°åŸæ¥çš„å€¼ å¦‚æœå¸Œæœ›å‡½æ•°å†…çš„å˜é‡èƒ½ä¿®æ”¹å‡½æ•°å¤–çš„å˜é‡ï¼Œå¯ä»¥ä¼ å…¥å˜é‡çš„åœ°å€\u0026ï¼Œå‡½æ•°å†…ä»¥æŒ‡é’ˆçš„æ–¹å¼æ“ä½œå˜é‡ã€‚ä»æ•ˆæœä¸Šçœ‹ç±»ä¼¼å¼•ç”¨ã€‚ Goå‡½æ•°ä¸æ”¯æŒé‡è½½ åœ¨Goä¸­ï¼Œå‡½æ•°ä¹Ÿæ˜¯ä¸€ç§æ•°æ®ç±»å‹ï¼Œå¯ä»¥èµ‹å€¼ç»™ä¸€ä¸ªå˜é˜¿ç²ï¼Œåˆ™è¯¥å˜é‡å°±æ˜¯ä¸€ä¸ªå‡½æ•°ç±»å‹çš„å˜é‡äº†ã€‚é€šè¿‡è¯¥å˜é‡å¯ä»¥å¯¹å‡½æ•°è°ƒç”¨ã€‚ å‡½æ•°æ—¢ç„¶æ˜¯ä¸€ç§æ•°æ®ç±»å‹ï¼Œå› æ­¤åœ¨Goä¸­ï¼Œå‡½æ•°å¯ä»¥ä½œä¸ºå½¢å‚ï¼Œå¹¶ä¸”è°ƒç”¨ ä¸ºäº†ç®€åŒ–æ•°æ®ç±»å‹å®šä¹‰ï¼ŒGoæ”¯æŒè‡ªå®šä¹‰æ•°æ®ç±»å‹ åŸºæœ¬è¯­æ³•ï¼štype è‡ªå®šä¹‰æ•°æ®ç±»å‹å æ•°æ®ç±»å‹ // ç›¸å½“äºä¸€ä¸ªåˆ«å æ”¯æŒå‡½æ•°è¿”å›å€¼å‘½å func call(n1 int, n2 int) (sum int, sub int) { sum = n1 + n2 sub = n1 - n2 return } ä½¿ç”¨_è¡¨ç¤ºç¬¦ï¼Œå¿½ç•¥è¿”å›å€¼ func TestFunc(t *testing.T) { sum, _ := call(1, 2) fmt.Println(sum) } Goæ”¯æŒå¯å˜å‚æ•° argsæ˜¯sliceï¼Œé€šè¿‡args[index]å¯ä»¥è®¿é—®åˆ°å„ä¸ªå€¼ å¦‚æœä¸€ä¸ªå‡½æ•°çš„å½¢å‚åˆ—è¡¨ä¸­æœ‰å¯å˜å‚æ•°ï¼Œåˆ™å¯å˜å‚æ•°éœ€è¦æ”¾åœ¨å½¢å‚åˆ—è¡¨æœ€å // æ”¯æŒ0åˆ°å¤šä¸ªå‚æ•° func call2(args ...int) int { sum := 0 for _, arg := range args { sum += arg } return sum } // æ”¯æŒ1åˆ°å¤šä¸ªå‚æ•° func call3(n1 int, args ...int) int { sum := n1 for _, arg := range args { sum += arg } return sum } func TestFunc(t *testing.T) { println(call2(1, 2, 3, 4)) println(call3(10, 1, 2, 3, 4)) } ","date":"2022å¹´07æœˆ09æ—¥","objectID":"/2022/07/go%E5%87%BD%E6%95%B0%E5%92%8C%E6%96%B9%E6%B3%95/:2:5","tags":["Goç¬”è®°"],"title":"Goå‡½æ•°å’Œæ–¹æ³•","uri":"/2022/07/go%E5%87%BD%E6%95%B0%E5%92%8C%E6%96%B9%E6%B3%95/"},{"categories":["Goç¬”è®°"],"content":"initå‡½æ•° æ¯ä¸€ä¸ªæºæ–‡ä»¶éƒ½å¯ä»¥åŒ…å«ä¸€ä¸ªinitå‡½æ•°ï¼Œè¯¥å‡½æ•°ä¼šåœ¨mainå‡½æ•°æ‰§è¡Œå‰ï¼Œè¢«Goè¿è¡Œæ¡†æ¶è°ƒç”¨ï¼Œä¹Ÿå°±æ˜¯è¯´initä¼šåœ¨mainå‡½æ•°å‰è¢«è°ƒç”¨ package main import \"fmt\" func init() { fmt.Println(\"main init...\") } func main() { fmt.Println(\"main ...\") } ","date":"2022å¹´07æœˆ09æ—¥","objectID":"/2022/07/go%E5%87%BD%E6%95%B0%E5%92%8C%E6%96%B9%E6%B3%95/:3:0","tags":["Goç¬”è®°"],"title":"Goå‡½æ•°å’Œæ–¹æ³•","uri":"/2022/07/go%E5%87%BD%E6%95%B0%E5%92%8C%E6%96%B9%E6%B3%95/"},{"categories":["Goç¬”è®°"],"content":"æ³¨æ„ç»†èŠ‚ å¦‚æœä¸€ä¸ªæ–‡ä»¶åŒæ—¶åŒ…å«å…¨å±€å˜é‡å®šä¹‰ï¼Œinitå‡½æ•°å’Œmainå‡½æ•°ï¼Œåˆ™æ‰§è¡Œçš„æµç¨‹æ˜¯å˜é‡å®šä¹‰-\u003einitå‡½æ•°-\u003emainå‡½æ•° initå‡½æ•°æœ€ä¸»è¦çš„ä½œç”¨ï¼Œå°±æ˜¯å®Œæˆä¸€äº›åˆå§‹åŒ–çš„å·¥ä½œ ","date":"2022å¹´07æœˆ09æ—¥","objectID":"/2022/07/go%E5%87%BD%E6%95%B0%E5%92%8C%E6%96%B9%E6%B3%95/:3:1","tags":["Goç¬”è®°"],"title":"Goå‡½æ•°å’Œæ–¹æ³•","uri":"/2022/07/go%E5%87%BD%E6%95%B0%E5%92%8C%E6%96%B9%E6%B3%95/"},{"categories":["Goç¬”è®°"],"content":"åŒ¿åå‡½æ•° Goæ”¯æŒåŒ¿åå‡½æ•°ï¼Œå¦‚æœæˆ‘ä»¬æŸä¸ªå‡½æ•°åªæ˜¯å¸Œæœ›ä½¿ç”¨ä¸€æ¬¡ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨åŒ¿åå‡½æ•°ï¼ŒåŒ¿åå‡½æ•°ä¹Ÿå¯ä»¥å®ç°å¤šæ¬¡è°ƒç”¨ã€‚ ","date":"2022å¹´07æœˆ09æ—¥","objectID":"/2022/07/go%E5%87%BD%E6%95%B0%E5%92%8C%E6%96%B9%E6%B3%95/:4:0","tags":["Goç¬”è®°"],"title":"Goå‡½æ•°å’Œæ–¹æ³•","uri":"/2022/07/go%E5%87%BD%E6%95%B0%E5%92%8C%E6%96%B9%E6%B3%95/"},{"categories":["Goç¬”è®°"],"content":"ä½¿ç”¨æ–¹å¼1 åœ¨å®šä¹‰åŒ¿åå‡½æ•°æ—¶å°±ç›´æ¥è°ƒç”¨ result := func(a int, b int) int { return a + b }(1, 2) fmt.Println(result) ","date":"2022å¹´07æœˆ09æ—¥","objectID":"/2022/07/go%E5%87%BD%E6%95%B0%E5%92%8C%E6%96%B9%E6%B3%95/:4:1","tags":["Goç¬”è®°"],"title":"Goå‡½æ•°å’Œæ–¹æ³•","uri":"/2022/07/go%E5%87%BD%E6%95%B0%E5%92%8C%E6%96%B9%E6%B3%95/"},{"categories":["Goç¬”è®°"],"content":"ä½¿ç”¨æ–¹å¼2 å°†åŒ¿åå‡½æ•°èµ‹ç»™ä¸€ä¸ªå˜é‡ï¼ˆå‡½æ•°å˜é‡ï¼‰ï¼Œåœ¨é€šè¿‡è¯¥å˜é‡æ¥è°ƒç”¨åŒ¿åå‡½æ•° sum := func(a int, b int) int { return a + b } fmt.Println(sum(1, 2)) ","date":"2022å¹´07æœˆ09æ—¥","objectID":"/2022/07/go%E5%87%BD%E6%95%B0%E5%92%8C%E6%96%B9%E6%B3%95/:4:2","tags":["Goç¬”è®°"],"title":"Goå‡½æ•°å’Œæ–¹æ³•","uri":"/2022/07/go%E5%87%BD%E6%95%B0%E5%92%8C%E6%96%B9%E6%B3%95/"},{"categories":["Goç¬”è®°"],"content":"å…¨å±€åŒ¿åå‡½æ•° å¦‚æœå°†åŒ¿åå‡½æ•°èµ‹ç»™ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œé‚£ä¹ˆè¿™ä¸ªåŒ¿åå‡½æ•°ï¼Œå°±æˆä¸ºä¸€ä¸ªå…¨å±€åŒ¿åå‡½æ•°ï¼Œå¯ä»¥åœ¨ç¨‹åºæœ‰æ•ˆ ","date":"2022å¹´07æœˆ09æ—¥","objectID":"/2022/07/go%E5%87%BD%E6%95%B0%E5%92%8C%E6%96%B9%E6%B3%95/:4:3","tags":["Goç¬”è®°"],"title":"Goå‡½æ•°å’Œæ–¹æ³•","uri":"/2022/07/go%E5%87%BD%E6%95%B0%E5%92%8C%E6%96%B9%E6%B3%95/"},{"categories":["Goç¬”è®°"],"content":"é—­åŒ… é—­åŒ…å°±æ˜¯ä¸€ä¸ªå‡½æ•°å’Œä¸å…¶ç›¸å…³çš„å¼•ç”¨ç¯å¢ƒç»„åˆçš„ä¸€ä¸ªæ•´ä½“ï¼ˆå®ä½“ï¼‰ func AddUpper() func(int) int { var n int = 30 return func(x int) int { n = n + x return n } } func main() { f := AddUpper() //è¿”å›ä¸€ä¸ªé—­åŒ… fmt.Println(f(1)) //31 fmt.Println(f(2)) //33 fmt.Println(f(3)) //36 } ","date":"2022å¹´07æœˆ09æ—¥","objectID":"/2022/07/go%E5%87%BD%E6%95%B0%E5%92%8C%E6%96%B9%E6%B3%95/:5:0","tags":["Goç¬”è®°"],"title":"Goå‡½æ•°å’Œæ–¹æ³•","uri":"/2022/07/go%E5%87%BD%E6%95%B0%E5%92%8C%E6%96%B9%E6%B3%95/"},{"categories":["Goç¬”è®°"],"content":"deferå»¶æ—¶æœºåˆ¶ åœ¨å‡½æ•°ä¸­ï¼Œç¨‹åºå‘˜ç»å¸¸éœ€è¦åˆ›å»ºèµ„æºï¼ˆæ¯”å¦‚ï¼šæ•°æ®åº“è¿æ¥ã€æ–‡ä»¶å¥æŸ„ã€é”ç­‰ï¼‰ï¼Œä¸ºäº†åœ¨å‡½æ•°æ‰§è¡Œå®Œæ¯•åï¼ŒåŠæ—¶çš„é‡Šæ”¾èµ„æºï¼ŒGoçš„è®¾è®¡è€…æä¾›äº†deferï¼ˆå»¶æ—¶æœºåˆ¶ï¼‰ï¼Œç±»ä¼¼äºfinallyã€‚ func TestDefer(t *testing.T) { defer func() { //åŒ¿åå‡½æ•° t.Log(\"Clear resources.\") }() fmt.Println(\"Started\") panic(\"Fatal error\") //æŠ›å‡ºå¼‚å¸¸ï¼Œdeferä»ä¼šæ‰§è¡Œ } ","date":"2022å¹´07æœˆ09æ—¥","objectID":"/2022/07/go%E5%87%BD%E6%95%B0%E5%92%8C%E6%96%B9%E6%B3%95/:6:0","tags":["Goç¬”è®°"],"title":"Goå‡½æ•°å’Œæ–¹æ³•","uri":"/2022/07/go%E5%87%BD%E6%95%B0%E5%92%8C%E6%96%B9%E6%B3%95/"},{"categories":["Goç¬”è®°"],"content":"ç»†èŠ‚è¯´æ˜ å½“goæ‰§è¡Œåˆ°ä¸€ä¸ªdeferæ—¶ï¼Œä¸ä¼šç«‹å³æ‰§è¡Œdeferåçš„è¯­å¥ï¼Œè€Œæ˜¯å°†deferåçš„è¯­å¥å‹å…¥åˆ°ä¸€ä¸ªæ ˆä¸­ï¼Œç„¶åç»§ç»­æ‰§è¡Œå‡½æ•°ä¸‹ä¸€ä¸ªè¯­å¥ å½“å‡½æ•°æ‰§è¡Œå®Œæ¯•åï¼ˆæˆ–è€…æŠ›å‡ºå¼‚å¸¸åï¼‰ï¼Œåœ¨ä»deferæ ˆä¸­ï¼Œä¸€æ¬¡ä»æ ˆé¡¶å–å‡ºè¯­å¥æ‰§è¡Œï¼ˆæ³¨ï¼šéµå®ˆæ ˆå…ˆå…¥åå‡ºçš„æœºåˆ¶ï¼‰ åœ¨deferå°†è¯­å¥æ”¾å…¥åˆ°æ ˆæ—¶ï¼Œä¹Ÿä¼šå°†ç›¸å…³çš„å€¼æ‹·è´åŒæ—¶å…¥æ ˆ ","date":"2022å¹´07æœˆ09æ—¥","objectID":"/2022/07/go%E5%87%BD%E6%95%B0%E5%92%8C%E6%96%B9%E6%B3%95/:6:1","tags":["Goç¬”è®°"],"title":"Goå‡½æ•°å’Œæ–¹æ³•","uri":"/2022/07/go%E5%87%BD%E6%95%B0%E5%92%8C%E6%96%B9%E6%B3%95/"},{"categories":["Goç¬”è®°"],"content":"é¡ºåºæ§åˆ¶ ç¨‹åºä»ä¸Šåˆ°ä¸‹é€è¡Œåœ°æ‰§è¡Œï¼Œä¸­é—´æ²¡æœ‰ä»»ä½•åˆ¤æ–­å’Œè·³è½¬ã€‚ ","date":"2022å¹´07æœˆ09æ—¥","objectID":"/2022/07/go%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6/:1:0","tags":["Goç¬”è®°"],"title":"Goæµç¨‹æ§åˆ¶","uri":"/2022/07/go%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6/"},{"categories":["Goç¬”è®°"],"content":"åˆ†æ”¯æ§åˆ¶ åˆ†æ”¯æ§åˆ¶æœ‰ä¸‰ç§ï¼šå•åˆ†æ”¯ã€åŒåˆ†æ”¯å’Œå¤šåˆ†æ”¯ ","date":"2022å¹´07æœˆ09æ—¥","objectID":"/2022/07/go%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6/:2:0","tags":["Goç¬”è®°"],"title":"Goæµç¨‹æ§åˆ¶","uri":"/2022/07/go%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6/"},{"categories":["Goç¬”è®°"],"content":"å•åˆ†æ”¯ var age int fmt.Println(\"è¯·è¾“å…¥å¹´é¾„ï¼š\") fmt.Scanln(\u0026age) if age \u003e 18{ fmt.Println(\"ä½ å·²æˆå¹´\") } ","date":"2022å¹´07æœˆ09æ—¥","objectID":"/2022/07/go%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6/:2:1","tags":["Goç¬”è®°"],"title":"Goæµç¨‹æ§åˆ¶","uri":"/2022/07/go%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6/"},{"categories":["Goç¬”è®°"],"content":"åŒåˆ†æ”¯ if age \u003e 18{ fmt.Println(\"ä½ å·²æˆå¹´\") } else { fmt.Println(\"æœªæˆå¹´\") } ","date":"2022å¹´07æœˆ09æ—¥","objectID":"/2022/07/go%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6/:2:2","tags":["Goç¬”è®°"],"title":"Goæµç¨‹æ§åˆ¶","uri":"/2022/07/go%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6/"},{"categories":["Goç¬”è®°"],"content":"å¤šåˆ†æ”¯ if score == 100{ fmt.Println(\"å¾ˆä¼˜ç§€\") } else if score \u003e=80 \u0026\u0026 score \u003c100 { fmt.Println(\"ä¼˜ç§€\") } else if score \u003e=60 \u0026\u0026 score \u003c80 { fmt.Println(\"è‰¯å¥½\") } else{ fmt.Println(\"ä¸åŠæ ¼\") } ","date":"2022å¹´07æœˆ09æ—¥","objectID":"/2022/07/go%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6/:2:3","tags":["Goç¬”è®°"],"title":"Goæµç¨‹æ§åˆ¶","uri":"/2022/07/go%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6/"},{"categories":["Goç¬”è®°"],"content":"å¾ªç¯æ§åˆ¶ ","date":"2022å¹´07æœˆ09æ—¥","objectID":"/2022/07/go%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6/:3:0","tags":["Goç¬”è®°"],"title":"Goæµç¨‹æ§åˆ¶","uri":"/2022/07/go%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6/"},{"categories":["Goç¬”è®°"],"content":"switchåˆ†æ”¯ç»“æ„ switchè¯­å¥ç”¨äºåŸºäºä¸åŒæ¡ä»¶æ‰§è¡Œä¸åŒåŠ¨ä½œï¼Œæ¯ä¸€ä¸ªcaseåˆ†æ”¯éƒ½æ˜¯å”¯ä¸€çš„ï¼Œä»ä¸Šåˆ°ä¸‹é€ä¸€æµ‹è¯•ï¼Œç›´åˆ°åŒ¹é…åˆ°ä¸ºæ­¢ã€‚ caseåæ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼ˆå³ï¼šå¸¸é‡å€¼ã€å˜é‡ã€ä¸€ä¸ªæœ‰è¿”å›å€¼çš„å‡½æ•°ç­‰ï¼‰ caseåçš„å„ä¸ªè¡¨è¾¾å¼çš„å€¼çš„æ•°æ®ç±»å‹ï¼Œå¿…é¡»å’Œswitchçš„è¡¨è¾¾å¼æ•°æ®ç±»å‹ä¸€è‡´ caseåé¢å¯ä»¥å¸¦å¤šä¸ªè¡¨è¾¾å¼ï¼Œä½¿ç”¨é€—å·é—´éš”ï¼Œ caseåçš„è¡¨è¾¾å¼å¦‚æœæ˜¯å¸¸é‡å€¼ï¼ˆå­—é¢é‡ï¼‰ï¼Œåˆ™è¦æ±‚ä¸èƒ½é‡å¤ åŒ¹é…é¡¹åé¢ä¸éœ€è¦å†åŠ break defaultè¯­å¥ä¸æ˜¯å¿…é¡»çš„ Type Switch: switchè¯­å¥è¿˜å¯ä»¥è¢«ç”¨äºtype-switchæ¥åˆ¤æ–­æŸä¸ªinterfaceå˜é‡ä¸­å®é™…æŒ‡å‘çš„å˜é‡ç±»å‹ var x interface{} var y = 10.0 x = y switch i := x.(type) { case nil: fmt.Printf(\"x çš„ç±»å‹ï¼š%T\", i) case int: fmt.Printf(\"x çš„ç±»å‹ï¼šint\") case float32: fmt.Printf(\"x çš„ç±»å‹ï¼šfloat32\") case float64: fmt.Printf(\"x çš„ç±»å‹ï¼šfloat64\") default: fmt.Printf(\"æœªçŸ¥\") } ","date":"2022å¹´07æœˆ09æ—¥","objectID":"/2022/07/go%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6/:3:1","tags":["Goç¬”è®°"],"title":"Goæµç¨‹æ§åˆ¶","uri":"/2022/07/go%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6/"},{"categories":["Goç¬”è®°"],"content":"forå¾ªç¯æ§åˆ¶ for i := 0; i \u003c= 10; i++ { fmt.Println(i) } for-range å¯ä»¥æ–¹ä¾¿çš„éå†å­—ç¬¦ä¸²å’Œæ•°ç»„ arr1 := [4]int{1, 2, 3, 4} for index, val := range arr1 { fmt.Println(index, \"-\", val) } â€œwhile\"å¾ªç¯ åœ¨Goè¯­è¨€ä¸­æ˜¯æ²¡æœ‰whileå¾ªç¯çš„ï¼Œå¯ä»¥ä½¿ç”¨forå¾ªç¯è¿›è¡Œæ›¿æ¢ breakè·³å‡ºå¾ªç¯ continueè·³è¿‡å½“å¾ªç¯ï¼Œè¿›å…¥ä¸‹ä¸€æ¬¡å¾ªç¯ for { fmt.Println(\"whileå¾ªç¯\") } ","date":"2022å¹´07æœˆ09æ—¥","objectID":"/2022/07/go%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6/:3:2","tags":["Goç¬”è®°"],"title":"Goæµç¨‹æ§åˆ¶","uri":"/2022/07/go%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6/"},{"categories":["Goç¬”è®°"],"content":"goto Goè¯­è¨€çš„gotoè¯­å¥å¯ä»¥æ— æ¡ä»¶åœ°è½¬ç§»åˆ°ç¨‹åºä¸­æŒ‡å®šçš„è¡Œ gotoè¯­å¥é€šå¸¸ä¸æ¡ä»¶è¯­å¥é…åˆä½¿ç”¨ã€‚å¯ç”¨æ¥å®ç°æ¡ä»¶è½¬ç§»ï¼Œè·³å‡ºå¾ªç¯ä½“ç­‰åŠŸèƒ½ã€‚ åœ¨Goç¨‹åºè®¾è®¡ä¸­ä¸€èˆ¬ä¸ä¸»å¼ ä½¿ç”¨gotoè¯­å¥ï¼Œä»¥å…é€ æˆç¨‹åºæµç¨‹çš„æ··ä¹±ï¼Œä½¿ç†è§£å’Œè°ƒè¯•ç¨‹åºéƒ½äº§ç”Ÿå›°éš¾ã€‚ fmt.Println(\"run 001\") fmt.Println(\"run 002\") goto label1 fmt.Println(\"run 003\") // ä¸ä¼šè¢«æ‰“å° fmt.Println(\"run 004\") // ä¸ä¼šè¢«æ‰“å° fmt.Println(\"run 005\") // ä¸ä¼šè¢«æ‰“å° label1: fmt.Println(\"run 006\") ","date":"2022å¹´07æœˆ09æ—¥","objectID":"/2022/07/go%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6/:4:0","tags":["Goç¬”è®°"],"title":"Goæµç¨‹æ§åˆ¶","uri":"/2022/07/go%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6/"},{"categories":["Goç¬”è®°"],"content":"è¿ç®—ç¬¦åˆ†ç±» è¿ç®—ç¬¦æ˜¯ä¸€ç§ç‰¹æ®Šçš„ç¬¦å·ï¼Œç”¨ä»¥è¡¨ç¤ºæ•°æ®çš„è¿ç®—ã€èµ‹å€¼å’Œæ¯”è¾ƒç­‰ã€‚ ç®—æœ¯è¿ç®—ç¬¦ èµ‹å€¼è¿ç®—ç¬¦ æ¯”è¾ƒè¿ç®—ç¬¦/å…³ç³»è¿ç®—ç¬¦ é€»è¾‘è¿ç®—ç¬¦ ä½è¿ç®—ç¬¦ å…¶ä»–è¿ç®—ç¬¦ ","date":"2022å¹´06æœˆ30æ—¥","objectID":"/2022/06/go%E8%BF%90%E7%AE%97%E7%AC%A6/:1:0","tags":["Goç¬”è®°"],"title":"Goè¿ç®—ç¬¦","uri":"/2022/06/go%E8%BF%90%E7%AE%97%E7%AC%A6/"},{"categories":["Goç¬”è®°"],"content":"ç®—æœ¯è¿ç®—ç¬¦ ","date":"2022å¹´06æœˆ30æ—¥","objectID":"/2022/06/go%E8%BF%90%E7%AE%97%E7%AC%A6/:2:0","tags":["Goç¬”è®°"],"title":"Goè¿ç®—ç¬¦","uri":"/2022/06/go%E8%BF%90%E7%AE%97%E7%AC%A6/"},{"categories":["Goç¬”è®°"],"content":"ä»‹ç» ç®—æœ¯è¿ç®—ç¬¦æ˜¯å¯¹æ•°å€¼ç±»å‹çš„å˜é‡è¿›è¡Œè¿ç®—çš„ï¼Œæ¯”å¦‚ï¼šåŠ å‡ä¹˜é™¤ã€‚ è¿ç®—ç¬¦ è¿ç®— ç¤ºä¾‹ ç»“æœ + æ­£å¥½ +3 3 - è´Ÿå· -4 -4 + åŠ  5 + 5 10 - å‡ 6 - 4 2 * ä¹˜ 3 * 4 12 / é™¤ 5 / 5 1 % å–æ¨¡ï¼ˆå–ä½™ï¼‰ 7 % 5 è®¡ç®—å…¬å¼ï¼ša%b = a - a/b *b 2 ++ è‡ªå¢ a := 2;a++ a=3 â€“ è‡ªå‡ a :=2;aâ€“ a=1 + å­—ç¬¦ä¸²ç›¸åŠ  â€œHeâ€ + â€œlloâ€ â€œHelloâ€ ","date":"2022å¹´06æœˆ30æ—¥","objectID":"/2022/06/go%E8%BF%90%E7%AE%97%E7%AC%A6/:2:1","tags":["Goç¬”è®°"],"title":"Goè¿ç®—ç¬¦","uri":"/2022/06/go%E8%BF%90%E7%AE%97%E7%AC%A6/"},{"categories":["Goç¬”è®°"],"content":"ç¤ºä¾‹ // å¦‚æœè¿ç®—çš„æ•°éƒ½æ˜¯æ•´æ•°ï¼Œé‚£ä¹ˆé™¤åï¼Œå»æ‰å°æ•°éƒ¨åˆ†ï¼Œä¿ç•™æ•´æ•°éƒ¨åˆ† fmt.Println(10 / 4) //2 var n1 float32 = 10 / 4 fmt.Println(n1) //2 // å¦‚æœå¸Œæœ›ä¿ç•™å°æ•°éƒ¨åˆ†ï¼Œåˆ™éœ€è¦æœ‰æµ®ç‚¹æ•°å‚ä¸è¿ç®— var n2 float32 = 10.0 / 4 fmt.Println(n2) //2.5 // % è®¡ç®—å…¬å¼ï¼ša % b = a - a / b * b fmt.Println(\"10%3=\", 10%3) //10%3= 1 fmt.Println(\"-10%3=\", -10%3) //-10%3= -1 fmt.Println(\"10%-3=\", 10%-3) //10%-3= 1 fmt.Println(\"-10%-3=\", -10%-3) //-10%-3= -1 //++å’Œ-- var i int = 10 i++ //ç­‰ä»·äº i = i + 1 fmt.Println(\"i=\", i) //i= 11 i-- //ç­‰ä»·äº i = i - 1 fmt.Println(\"i=\", i) //i= 10 ","date":"2022å¹´06æœˆ30æ—¥","objectID":"/2022/06/go%E8%BF%90%E7%AE%97%E7%AC%A6/:2:2","tags":["Goç¬”è®°"],"title":"Goè¿ç®—ç¬¦","uri":"/2022/06/go%E8%BF%90%E7%AE%97%E7%AC%A6/"},{"categories":["Goç¬”è®°"],"content":"ç»†èŠ‚ å¯¹äºé™¤å·/ï¼Œå®ƒçš„æ•´æ•°é™¤å’Œå°æ•°é™¤æ˜¯æœ‰åŒºåˆ«çš„ï¼šæ•´æ•°ä¹‹é—´åšé™¤æ³•æ—¶ï¼Œåªä¿ç•™æ•´æ•°éƒ¨åˆ†è€Œèˆå¼ƒå°æ•°éƒ¨åˆ†ã€‚ä¾‹å¦‚x:=19/5ï¼Œç»“æœæ˜¯3 å½“å¯¹ä¸€ä¸ªæ•°å–æ¨¡æ—¶ï¼Œå¯ä»¥ç­‰ä»·a%b=a-a/b*bï¼Œè¿™æ ·å¯ä»¥çœ‹åˆ°å–æ¨¡çš„ä¸€ä¸ªæœ¬è´¨è¿ç®—ã€‚ Goçš„è‡ªå¢è‡ªå‡åªèƒ½å½“åšä¸€ä¸ªç‹¬ç«‹è¯­è¨€ä½¿ç”¨ï¼Œä¸èƒ½è¿™æ ·ä½¿ç”¨ï¼šb := a++æˆ–è€…b := a-- Goçš„++å’Œ--åªèƒ½å¸è½½å˜é‡çš„åé¢ï¼Œä¸èƒ½å†™åœ¨å‰é¢ï¼Œåªæœ‰a++,a--ï¼Œæ²¡æœ‰++a,--a ","date":"2022å¹´06æœˆ30æ—¥","objectID":"/2022/06/go%E8%BF%90%E7%AE%97%E7%AC%A6/:2:3","tags":["Goç¬”è®°"],"title":"Goè¿ç®—ç¬¦","uri":"/2022/06/go%E8%BF%90%E7%AE%97%E7%AC%A6/"},{"categories":["Goç¬”è®°"],"content":"å…³ç³»è¿ç®—ç¬¦ï¼ˆæ¯”è¾ƒè¿ç®—ç¬¦ï¼‰ ","date":"2022å¹´06æœˆ30æ—¥","objectID":"/2022/06/go%E8%BF%90%E7%AE%97%E7%AC%A6/:3:0","tags":["Goç¬”è®°"],"title":"Goè¿ç®—ç¬¦","uri":"/2022/06/go%E8%BF%90%E7%AE%97%E7%AC%A6/"},{"categories":["Goç¬”è®°"],"content":"ä»‹ç» å…³ç³»è¿ç®—ç¬¦çš„ç»“æœéƒ½æ˜¯boolå‹ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼šè¦ä¹ˆæ˜¯trueï¼Œè¦ä¹ˆæ˜¯false å…³ç³»è¡¨è¾¾å¼ç»å¸¸ç”¨åœ¨ifç»“æ„çš„æ¡ä»¶ä¸­æˆ–forå¾ªç¯ç»“æ„çš„æ¡ä»¶ä¸­ è¿ç®—ç¬¦ è¿ç®— ç¤ºä¾‹ ç»“æœ == ç›¸ç­‰äº 4==3 false != ä¸ç­‰äº 4!=3 true \u003c å°äº 4\u003c3 false \u003e å¤§äº 4\u003e3 true \u003c= å°äºç­‰äº 4\u003c=3 false \u003e= å¤§äºç­‰äº 4\u003e=3 True ","date":"2022å¹´06æœˆ30æ—¥","objectID":"/2022/06/go%E8%BF%90%E7%AE%97%E7%AC%A6/:3:1","tags":["Goç¬”è®°"],"title":"Goè¿ç®—ç¬¦","uri":"/2022/06/go%E8%BF%90%E7%AE%97%E7%AC%A6/"},{"categories":["Goç¬”è®°"],"content":"ç¤ºä¾‹ var ( a int = 9 b int = 8 ) fmt.Println(\"a\u003eb=\", a \u003e b) //a\u003eb= true fmt.Println(\"a\u003e=b=\", a \u003e= b) //a\u003e=b= true fmt.Println(\"a\u003c=b=\", a \u003c= b) //a\u003c=b= false fmt.Println(\"a\u003cb=\", a \u003c b) //a\u003cb= false fmt.Println(\"a==b=\", a == b) //a==b= false fmt.Println(\"a!=b=\", a != b) //a!=b= true ","date":"2022å¹´06æœˆ30æ—¥","objectID":"/2022/06/go%E8%BF%90%E7%AE%97%E7%AC%A6/:3:2","tags":["Goç¬”è®°"],"title":"Goè¿ç®—ç¬¦","uri":"/2022/06/go%E8%BF%90%E7%AE%97%E7%AC%A6/"},{"categories":["Goç¬”è®°"],"content":"ç»†èŠ‚ å…³ç³»è¿ç®—ç¬¦çš„ç»“æœéƒ½æ˜¯boolå‹ å…³ç³»è¿ç®—ç¬¦ç»„æˆçš„è¡¨è¾¾å¼ï¼Œç§°ä¸ºå…³ç³»è¡¨è¾¾å¼ æ¯”è¾ƒè¿ç®—ç¬¦==ä¸èƒ½è¯¯å†™æˆ= â— ","date":"2022å¹´06æœˆ30æ—¥","objectID":"/2022/06/go%E8%BF%90%E7%AE%97%E7%AC%A6/:3:3","tags":["Goç¬”è®°"],"title":"Goè¿ç®—ç¬¦","uri":"/2022/06/go%E8%BF%90%E7%AE%97%E7%AC%A6/"},{"categories":["Goç¬”è®°"],"content":"é€»è¾‘è¿ç®—ç¬¦ ","date":"2022å¹´06æœˆ30æ—¥","objectID":"/2022/06/go%E8%BF%90%E7%AE%97%E7%AC%A6/:4:0","tags":["Goç¬”è®°"],"title":"Goè¿ç®—ç¬¦","uri":"/2022/06/go%E8%BF%90%E7%AE%97%E7%AC%A6/"},{"categories":["Goç¬”è®°"],"content":"ä»‹ç» ç”¨äºè¿æ¥å¤šä¸ªæ¡ä»¶ï¼ˆä¸€èˆ¬æ¥è®²å°±æ˜¯å…³ç³»è¡¨è¾¾å¼ï¼‰ï¼Œæœ€ç»ˆçš„ç»“æœä¹Ÿæ˜¯ä¸€ä¸ª boolå€¼ è¿ç®—ç¬¦ æè¿° ç¤ºä¾‹(A:True,B:False) \u0026\u0026 é€»è¾‘ä¸è¿ç®—ç¬¦ã€‚ å¦‚æœä¸¤è¾¹çš„æ“ä½œéƒ½æ˜¯Trueï¼Œåˆ™ä¸ºTrueï¼Œå¦åˆ™ä¸ºFalse (A \u0026\u0026 B)ä¸ºFalse || é€»è¾‘æˆ–è¿ç®—ç¬¦ã€‚ å¦‚æœä¸¤è¾¹çš„æ“ä½œæ•°æœ‰ä¸€ä¸ªTrueï¼Œåˆ™ä¸ºTrueï¼Œå¦åˆ™ä¸ºFalse (A || B)ä¸ºTrue ! é€»è¾‘éè¿ç®—ç¬¦ã€‚ å¦‚æœæ¡ä»¶ä¸ºTrueï¼Œåˆ™é€»è¾‘ä¸ºFalseï¼Œå¦åˆ™ä¸ºTrue !(A \u0026\u0026 B)ä¸ºTrue ","date":"2022å¹´06æœˆ30æ—¥","objectID":"/2022/06/go%E8%BF%90%E7%AE%97%E7%AC%A6/:4:1","tags":["Goç¬”è®°"],"title":"Goè¿ç®—ç¬¦","uri":"/2022/06/go%E8%BF%90%E7%AE%97%E7%AC%A6/"},{"categories":["Goç¬”è®°"],"content":"ç¤ºä¾‹ fmt.Println(true \u0026\u0026 false) //false fmt.Println(false \u0026\u0026 true) //false fmt.Println(false || true) //true fmt.Println(true || false) //true fmt.Println(!(true \u0026\u0026 false)) //true ","date":"2022å¹´06æœˆ30æ—¥","objectID":"/2022/06/go%E8%BF%90%E7%AE%97%E7%AC%A6/:4:2","tags":["Goç¬”è®°"],"title":"Goè¿ç®—ç¬¦","uri":"/2022/06/go%E8%BF%90%E7%AE%97%E7%AC%A6/"},{"categories":["Goç¬”è®°"],"content":"ç»†èŠ‚ \u0026\u0026ä¹Ÿå«çŸ­è·¯ä¸ï¼›å¦‚æœç¬¬ä¸€ä¸ªæ¡ä»¶ä¸ºfalseï¼Œåˆ™ç¬¬äºŒä¸ªæ¡ä»¶ä¸ä¼šåˆ¤æ–­ï¼Œæœ€ç»ˆç»“æœä¸ºfalse fmt.Println(false \u0026\u0026 true) //false ||ä¹Ÿå«çŸ­è·¯æˆ–ï¼›å¦‚æœç¬¬ä¸€ä¸ªæ¡ä»¶ä¸ºtrueï¼Œåˆ™ç¬¬äºŒä¸ªæ¡ä»¶ä¸ä¼šåˆ¤æ–­ï¼Œæœ€ç»ˆç»“æœä¸ºtrue fmt.Println(true || false) //true ","date":"2022å¹´06æœˆ30æ—¥","objectID":"/2022/06/go%E8%BF%90%E7%AE%97%E7%AC%A6/:4:3","tags":["Goç¬”è®°"],"title":"Goè¿ç®—ç¬¦","uri":"/2022/06/go%E8%BF%90%E7%AE%97%E7%AC%A6/"},{"categories":["Goç¬”è®°"],"content":"èµ‹å€¼è¿ç®—ç¬¦ ","date":"2022å¹´06æœˆ30æ—¥","objectID":"/2022/06/go%E8%BF%90%E7%AE%97%E7%AC%A6/:5:0","tags":["Goç¬”è®°"],"title":"Goè¿ç®—ç¬¦","uri":"/2022/06/go%E8%BF%90%E7%AE%97%E7%AC%A6/"},{"categories":["Goç¬”è®°"],"content":"ä»‹ç» èµ‹å€¼è¿ç®—ç¬¦å°±æ˜¯å°†æŸä¸ªè¿ç®—åçš„å€¼ï¼Œèµ‹ç»™æŒ‡å®šçš„å˜é‡ã€‚ è¿ç®—ç¬¦ æè¿° ç¤ºä¾‹ = ç®€å•çš„èµ‹å€¼è¿ç®—ç¬¦ï¼Œå°†ä¸€ä¸ªè¡¨è¾¾å¼çš„å€¼èµ‹ç»™å˜é‡ C = A + B += ç›¸åŠ åå†èµ‹å€¼ C += A -= ç›¸å‡åå†èµ‹å€¼ C -= A *= ç›¸ä¹˜åå†èµ‹å€¼ C *= A /= ç›¸é™¤åå†èµ‹å€¼ C /= A %= æ±‚ä½™(å–æ¨¡)åå†èµ‹å€¼ C %= A ","date":"2022å¹´06æœˆ30æ—¥","objectID":"/2022/06/go%E8%BF%90%E7%AE%97%E7%AC%A6/:5:1","tags":["Goç¬”è®°"],"title":"Goè¿ç®—ç¬¦","uri":"/2022/06/go%E8%BF%90%E7%AE%97%E7%AC%A6/"},{"categories":["Goç¬”è®°"],"content":"ç¤ºä¾‹ var a int = 20 var b int = 10 var c int c = a + b fmt.Println(c) //30 = 20 + 10 c += a fmt.Println(c) //50 = 30 + 20 c -= a fmt.Println(c) //30 = 50 - 20 c *= a fmt.Println(c) // 600 = 30 * 20 c /= a fmt.Println(c) //30 = 600 / 20 c %= a fmt.Println(c) //10 = 30 % 20 ","date":"2022å¹´06æœˆ30æ—¥","objectID":"/2022/06/go%E8%BF%90%E7%AE%97%E7%AC%A6/:5:2","tags":["Goç¬”è®°"],"title":"Goè¿ç®—ç¬¦","uri":"/2022/06/go%E8%BF%90%E7%AE%97%E7%AC%A6/"},{"categories":["Goç¬”è®°"],"content":"ç»†èŠ‚ è¿ç®—é¡ºåºä»å³å¾€å·¦ èµ‹å€¼è¿ç®—ç¬¦çš„å·¦è¾¹ï¼Œåªèƒ½æ˜¯å˜é‡ï¼Œå³è¾¹å¯ä»¥æ˜¯å˜é‡ã€è¡¨è¾¾å¼ã€å¸¸é‡å€¼ å¤åˆèµ‹å€¼è¿ç®—ç­‰ä»·äºä¸‹é¢çš„æ•ˆæœ:a += 3 ç­‰ä»·äº a = a + 3 ","date":"2022å¹´06æœˆ30æ—¥","objectID":"/2022/06/go%E8%BF%90%E7%AE%97%E7%AC%A6/:5:3","tags":["Goç¬”è®°"],"title":"Goè¿ç®—ç¬¦","uri":"/2022/06/go%E8%BF%90%E7%AE%97%E7%AC%A6/"},{"categories":["Goç¬”è®°"],"content":"ä½è¿ç®—ç¬¦ è¿ç®—ç¬¦ æè¿° \u0026 æŒ‰ä½ä¸è¿ç®—ç¬¦\u0026æ˜¯åŒç›®è¿ç®—ç¬¦ã€‚å…¶åŠŸèƒ½æ˜¯å‚ä¸è¿ç®—çš„ä¸¤æ•°å„å¯¹åº”çš„äºŒè¿›ä½ç›¸ä¸ã€‚ è¿ç®—è§„åˆ™ï¼šåŒæ—¶ä¸º1ï¼Œç»“æœä¸º1ï¼Œå¦åˆ™ä¸º0 | æŒ‰ä½æˆ–è¿ç®—ç¬¦|æ˜¯åŒç›®è¿ç®—ç¬¦ã€‚å…¶åŠŸèƒ½æ˜¯å‚ä¸è¿ç®—çš„ä¸¤æ•°å„å¯¹åº”çš„äºŒè¿›ä½ç›¸æˆ–ã€‚ è¿ç®—è§„åˆ™ï¼šæœ‰ä¸€ä¸ªä¸º1ï¼Œç»“æœä¸º1ï¼Œå¦åˆ™ä¸º0 ^ æŒ‰ä½å¼‚æˆ–è¿ç®—ç¬¦^æ˜¯åŒç›®è¿ç®—ç¬¦ã€‚å…¶åŠŸèƒ½æ˜¯å‚ä¸è¿ç®—çš„ä¸¤æ•°ç›¸å¯¹åº”çš„äºŒè¿›ä½ç›¸å¼‚æˆ–ã€‚ è¿ç®—è§„åˆ™ï¼šå½“äºŒè¿›åˆ¶ä½ä¸åŒæ—¶ï¼Œç»“æœä¸º1ï¼Œå¦åˆ™ä¸º0 Â« å·¦ç§»è¿ç®—ç¬¦\u003c\u003cæ˜¯åŒç›®è¿ç®—ç¬¦ã€‚å…¶åŠŸèƒ½æŠŠ\u003c\u003cå·¦è¾¹çš„è¿ç®—æ•°çš„å„äºŒè¿›åˆ¶ä½å…¨éƒ¨å·¦ç§»è‹¥å¹²ä½ï¼Œé«˜ä½ä¸¢å¼ƒï¼Œä½ä½è¡¥0. å·¦ç§»nä½å°±æ˜¯ä¹˜ä»¥2çš„næ¬¡æ–¹ã€‚ Â» å³ç§»è¿ç®—ç¬¦\u003e\u003eæ˜¯åŒç›®è¿ç®—ç¬¦ã€‚å…¶åŠŸèƒ½æŠŠ\u003e\u003eå·¦è¾¹çš„è¿ç®—æ•°çš„å„äºŒè¿›åˆ¶ä½å…¨éƒ¨å³ç§»è‹¥å¹²ä½ã€‚ å³ç§»nä½å°±æ˜¯é™¤ä»¥2çš„næ¬¡æ–¹ã€‚ var num1 int = 25 //11001 var num2 int = 20 // 10100 //äºŒè¿›åˆ¶ä½ï¼ŒåŒæ—¶ä¸º1ï¼Œç»“æœä¸º1ï¼Œå¦åˆ™ä¸º0 fmt.Println(num1 \u0026 num2) // 16 10000 //äºŒè¿›åˆ¶ä½ï¼Œæœ‰ä¸€ä¸ªä¸º1ï¼Œç»“æœä¸º1ï¼Œå¦åˆ™ä¸º0 fmt.Println(num1 | num2) // 29 11101 //äºŒè¿›åˆ¶ä½ï¼Œå½“äºŒè¿›åˆ¶ä½ä¸åŒæ—¶ï¼Œç»“æœä¸º1ï¼Œå¦åˆ™ä¸º0 fmt.Println(num1 ^ num2) // 13 01101 //å„äºŒè¿›åˆ¶ä½å…¨éƒ¨å·¦ç§»è‹¥å¹²ä½ï¼Œé«˜ä½ä¸¢å¼ƒï¼Œä½ä½è¡¥0 fmt.Println(num1 \u003c\u003c 2) //100 1100100 25*2^2=100 //å„äºŒè¿›åˆ¶ä½å…¨éƒ¨å³ç§»è‹¥å¹²ä½ fmt.Println(num1 \u003e\u003e 2) // 6 110 25/2^2=6 ","date":"2022å¹´06æœˆ30æ—¥","objectID":"/2022/06/go%E8%BF%90%E7%AE%97%E7%AC%A6/:6:0","tags":["Goç¬”è®°"],"title":"Goè¿ç®—ç¬¦","uri":"/2022/06/go%E8%BF%90%E7%AE%97%E7%AC%A6/"},{"categories":["Goç¬”è®°"],"content":"å…¶ä»–è¿ç®—ç¬¦ è¿ç®—ç¬¦ æè¿° ç¤ºä¾‹ \u0026 è¿”å›å˜é‡å­˜å‚¨åœ°å€ \u0026a å°†ç»™å‡ºå˜é‡çš„å­˜å‚¨åœ°å€ * æŒ‡é’ˆå˜é‡ *a æ˜¯ä¸€ä¸ªæŒ‡é’ˆå˜é‡ var name string = \"Joker\" var prt *string = \u0026name fmt.Printf(\"nameçš„å†…å­˜åœ°å€ï¼š%v\\n\", \u0026name) //nameçš„å†…å­˜åœ°å€ï¼š0xc00004a530 fmt.Println(\"prt=\", prt) //prt= 0xc00004a530 fmt.Printf(\"prtæŒ‡é’ˆå˜é‡çš„å€¼ä¸ºï¼š%v\\n\", *prt) //prtæŒ‡é’ˆå˜é‡çš„å€¼ä¸ºï¼šJoker ","date":"2022å¹´06æœˆ30æ—¥","objectID":"/2022/06/go%E8%BF%90%E7%AE%97%E7%AC%A6/:7:0","tags":["Goç¬”è®°"],"title":"Goè¿ç®—ç¬¦","uri":"/2022/06/go%E8%BF%90%E7%AE%97%E7%AC%A6/"},{"categories":["Goç¬”è®°"],"content":"è¿ç®—ç¬¦ä¼˜å…ˆçº§ ä¼˜å…ˆçº§ åˆ†ç±» è¿ç®—ç¬¦ ç»“åˆæ€§ 1 é€—å·è¿ç®—ç¬¦ , ä»å·¦åˆ°å³ 2 èµ‹å€¼è¿ç®—ç¬¦ =ã€+=ã€-=ã€*=ã€/=ã€ %=ã€ \u003e=ã€ Â«=ã€\u0026=ã€^=ã€|= ä»å³åˆ°å·¦ 3 é€»è¾‘æˆ– || ä»å·¦åˆ°å³ 4 é€»è¾‘ä¸ \u0026\u0026 ä»å·¦åˆ°å³ 5 æŒ‰ä½æˆ– | ä»å·¦åˆ°å³ 6 æŒ‰ä½å¼‚æˆ– ^ ä»å·¦åˆ°å³ 7 æŒ‰ä½ä¸ \u0026 ä»å·¦åˆ°å³ 8 ç›¸ç­‰/ä¸ç­‰ ==ã€!= ä»å·¦åˆ°å³ 9 å…³ç³»è¿ç®—ç¬¦ \u003cã€\u003c=ã€\u003eã€\u003e= ä»å·¦åˆ°å³ 10 ä½ç§»è¿ç®—ç¬¦ Â«ã€Â» ä»å·¦åˆ°å³ 11 åŠ æ³•/å‡æ³• +ã€- ä»å·¦åˆ°å³ 12 ä¹˜æ³•/é™¤æ³•/å–ä½™ *ï¼ˆä¹˜å·ï¼‰ã€/ã€% ä»å·¦åˆ°å³ 13 å•ç›®è¿ç®—ç¬¦ !ã€*ï¼ˆæŒ‡é’ˆï¼‰ã€\u0026 ã€++ã€â€“ã€+ï¼ˆæ­£å·ï¼‰ã€-ï¼ˆè´Ÿå·ï¼‰ ä»å³åˆ°å·¦ 14 åç¼€è¿ç®—ç¬¦ ( )ã€[ ]ã€-\u003e ä»å·¦åˆ°å³ â£ï¸æ³¨æ„ï¼šä¼˜å…ˆçº§å€¼è¶Šå¤§ï¼Œè¡¨ç¤ºä¼˜å…ˆçº§è¶Šé«˜ã€‚ ","date":"2022å¹´06æœˆ30æ—¥","objectID":"/2022/06/go%E8%BF%90%E7%AE%97%E7%AC%A6/:8:0","tags":["Goç¬”è®°"],"title":"Goè¿ç®—ç¬¦","uri":"/2022/06/go%E8%BF%90%E7%AE%97%E7%AC%A6/"},{"categories":["Goç¬”è®°"],"content":"Goæ ‡è¯†ç¬¦çš„å‘½åè§„èŒƒ ","date":"2022å¹´06æœˆ30æ—¥","objectID":"/2022/06/go%E6%A0%87%E8%AF%86%E7%AC%A6/:1:0","tags":["Goç¬”è®°"],"title":"Goæ ‡è¯†ç¬¦","uri":"/2022/06/go%E6%A0%87%E8%AF%86%E7%AC%A6/"},{"categories":["Goç¬”è®°"],"content":"æ ‡è¯†ç¬¦æ¦‚å¿µ Goå¯¹å„ç§å˜é‡ã€æ–¹æ³•ã€å‡½æ•°ç­‰å‘½åæ—¶ä½¿ç”¨çš„å­—ç¬¦åºåˆ—ç§°ä¸ºæ ‡è¯†ç¬¦ å‡¡æ˜¯è‡ªå·±å¯ä»¥èµ·åå­—çš„åœ°æ–¹éƒ½å«æ ‡è¯†ç¬¦ ","date":"2022å¹´06æœˆ30æ—¥","objectID":"/2022/06/go%E6%A0%87%E8%AF%86%E7%AC%A6/:1:1","tags":["Goç¬”è®°"],"title":"Goæ ‡è¯†ç¬¦","uri":"/2022/06/go%E6%A0%87%E8%AF%86%E7%AC%A6/"},{"categories":["Goç¬”è®°"],"content":"æ ‡è¯†ç¬¦çš„å‘½åè§„åˆ™ ç”±26ä¸ªè‹±æ–‡å­—æ¯å¤§å°å†™ï¼Œ0-9ï¼Œ_ç»„æˆ æ•°å­—ä¸å¯ä»¥å¼€å¤´ Goä¸­ä¸¥æ ¼åŒºåˆ†å¤§å°å†™ æ ‡è¯†ç¬¦ä¸èƒ½åŒ…å«ç©ºæ ¼ ä¸‹åˆ’çº¿æœ¬èº«åœ¨Goä¸­æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æ ‡è¯†ç¬¦ï¼Œç§°ä¸ºç©ºæ ‡è¯†ç¬¦ã€‚å¯ä»¥ä»£è¡¨ä»»ä½•å…¶å®ƒçš„æ ‡è¯†ç¬¦ï¼Œä½†æ˜¯å®ƒå¯¹åº”çš„å€¼ä¼šè¢«å¿½ç•¥ï¼ˆæ¯”å¦‚ï¼šå¿½ç•¥æŸä¸ªè¿”å›å€¼ï¼‰ã€‚æ‰€ä»¥ä»…èƒ½è¢«ä½œä¸ºå ä½ç¬¦ä½¿ç”¨ï¼Œä¸èƒ½ä½œä¸ºæ ‡è¯†ç¬¦ä½¿ç”¨ ä¸èƒ½ä»¥ç³»ç»Ÿä¿ç•™å…³é”®å­—ä½œä¸ºæ ‡è¯†ç¬¦ï¼Œæ¯”å¦‚ï¼šbreak, ifç­‰â€¦â€¦ ","date":"2022å¹´06æœˆ30æ—¥","objectID":"/2022/06/go%E6%A0%87%E8%AF%86%E7%AC%A6/:1:2","tags":["Goç¬”è®°"],"title":"Goæ ‡è¯†ç¬¦","uri":"/2022/06/go%E6%A0%87%E8%AF%86%E7%AC%A6/"},{"categories":["Goç¬”è®°"],"content":"æ ‡è¯†ç¬¦å‘½åæ³¨æ„äº‹é¡¹ åŒ…åï¼šä¿æŒpackageçš„åå­—å’Œç›®å½•ä¿æŒä¸€è‡´ï¼Œå°½é‡é‡‡å–æœ‰æ„ä¹‰çš„åŒ…åï¼Œç®€çŸ­ï¼Œæœ‰æ„ä¹‰ï¼Œä¸è¦å’Œæ ‡å‡†åº“å†²çª å˜é‡åã€å‡½æ•°åã€å¸¸é‡åï¼šé‡‡ç”¨é©¼å³°æ³• å¦‚æœå˜é‡åã€å‡½æ•°åã€å¸¸é‡åé¦–å­—æ¯å¤§å†™ï¼Œåˆ™å¯ä»¥è¢«å…¶ä»–çš„åŒ…è®¿é—®ï¼›å¦‚æœé¦–å­—æ¯å°å†™ï¼Œåˆ™åªèƒ½åœ¨æœ¬åŒ…ä¸­ä½¿ç”¨ï¼ˆæ³¨ï¼šé¦–å­—æ¯å¤§å†™æ˜¯å…±æœ‰çš„ï¼Œé¦–å­—æ¯å°å†™æ˜¯ç§æœ‰çš„ ","date":"2022å¹´06æœˆ30æ—¥","objectID":"/2022/06/go%E6%A0%87%E8%AF%86%E7%AC%A6/:1:3","tags":["Goç¬”è®°"],"title":"Goæ ‡è¯†ç¬¦","uri":"/2022/06/go%E6%A0%87%E8%AF%86%E7%AC%A6/"},{"categories":["Goç¬”è®°"],"content":"ç³»ç»Ÿä¿ç•™å…³é”®å­— åœ¨Goä¸­ï¼Œä¸ºäº†ç®€åŒ–ä»£ç ç¼–è¯‘è¿‡ç¨‹ä¸­å¯¹ä»£ç çš„è§£æï¼Œå…¶å®šä¹‰çš„ä¿ç•™å…³é”®å­—åªæœ‰25ä¸ª å…³é”®å­— å…³é”®å­— å…³é”®å­— å…³é”®å­— å…³é”®å­— break default func interface select case defer go map struct chan else goto package switch const fallthrough if range type continue for import return var ","date":"2022å¹´06æœˆ30æ—¥","objectID":"/2022/06/go%E6%A0%87%E8%AF%86%E7%AC%A6/:2:0","tags":["Goç¬”è®°"],"title":"Goæ ‡è¯†ç¬¦","uri":"/2022/06/go%E6%A0%87%E8%AF%86%E7%AC%A6/"},{"categories":["Goç¬”è®°"],"content":"é¢„å®šä¹‰æ ‡è¯†ç¬¦ Goæä¾›äº†36ä¸ªé¢„å®šä¹‰çš„æ ‡è¯†ç¬¦ï¼Œå…¶åŒ…æ‹¬åŸºç¡€æ•°æ®ç±»å‹å’Œç³»ç»Ÿå†…åµŒå‡½æ•° æ ‡è¯†ç¬¦ æ ‡è¯†ç¬¦ æ ‡è¯†ç¬¦ æ ‡è¯†ç¬¦ æ ‡è¯†ç¬¦ æ ‡è¯†ç¬¦ append bool byte cap close complex complex64 complex128 uint16 copy false float32 float64 imag int int8 int16 uint32 int32 int64 iota len make new nil panic uint64 print println real recover string true uint uint8 uintprt ","date":"2022å¹´06æœˆ30æ—¥","objectID":"/2022/06/go%E6%A0%87%E8%AF%86%E7%AC%A6/:3:0","tags":["Goç¬”è®°"],"title":"Goæ ‡è¯†ç¬¦","uri":"/2022/06/go%E6%A0%87%E8%AF%86%E7%AC%A6/"},{"categories":["Goç¬”è®°"],"content":"è¯´æ˜ å€¼ç±»å‹ï¼šåŸºæœ¬æ•°æ®ç±»å‹ intç³»åˆ—ã€floatç³»åˆ—ã€boolã€stringã€æ•°ç»„å’Œç»“æ„ä½“struct å¼•ç”¨ç±»å‹ï¼šæŒ‡é’ˆã€sliceåˆ‡ç‰‡ã€mapã€ç®¡é“chanã€interfaceç­‰éƒ½æ˜¯å¼•ç”¨ç±»å‹ ","date":"2022å¹´06æœˆ30æ—¥","objectID":"/2022/06/go%E5%80%BC%E7%B1%BB%E5%9E%8B%E5%92%8C%E5%BC%95%E7%94%A8%E7%B1%BB%E5%9E%8B/:1:0","tags":["Goç¬”è®°"],"title":"Goå€¼ç±»å‹å’Œå¼•ç”¨ç±»å‹","uri":"/2022/06/go%E5%80%BC%E7%B1%BB%E5%9E%8B%E5%92%8C%E5%BC%95%E7%94%A8%E7%B1%BB%E5%9E%8B/"},{"categories":["Goç¬”è®°"],"content":"ç‰¹ç‚¹ å€¼ç±»å‹ï¼šå˜é‡ç›´æ¥å­˜å‚¨å€¼ï¼Œå†…å­˜é€šå¸¸åœ¨æ ˆä¸­åˆ†é… å¼•ç”¨ç±»å‹ï¼šå˜é‡å­˜å‚¨çš„æ˜¯ä¸€ä¸ªåœ°å€ï¼Œè¿™ä¸ªåœ°å€å¯¹åº”çš„ç©ºé—´æ‰çœŸæ­£å­˜å‚¨æ•°æ®ï¼ˆå€¼ï¼‰ã€‚å†…å­˜é€šå¸¸åœ¨å¯¹ä¸Šåˆ†é…ï¼Œå½“æ²¡æœ‰ä»»ä½•å˜é‡å¼•ç”¨è¿™ä¸ªåœ°å€æ—¶ï¼Œè¯¥åœ°å€å¯¹åº”çš„æ•°æ®ç©ºé—´å°±æˆä¸ºä¸€ä¸ªåƒåœ¾ï¼Œç”±GCæ¥å›æ”¶ã€‚ å†…å­˜çš„æ ˆåŒºå’Œå †åŒºç¤ºæ„å›¾ï¼š ","date":"2022å¹´06æœˆ30æ—¥","objectID":"/2022/06/go%E5%80%BC%E7%B1%BB%E5%9E%8B%E5%92%8C%E5%BC%95%E7%94%A8%E7%B1%BB%E5%9E%8B/:2:0","tags":["Goç¬”è®°"],"title":"Goå€¼ç±»å‹å’Œå¼•ç”¨ç±»å‹","uri":"/2022/06/go%E5%80%BC%E7%B1%BB%E5%9E%8B%E5%92%8C%E5%BC%95%E7%94%A8%E7%B1%BB%E5%9E%8B/"},{"categories":["Goç¬”è®°"],"content":"åŸºæœ¬ä»‹ç» åŸºæœ¬æ•°æ®ç±»å‹ï¼Œå˜é‡å­˜çš„å°±æ˜¯å€¼ï¼Œä¹Ÿå«å€¼ç±»å‹ è·å–å˜é‡çš„åœ°å€ï¼Œç”¨\u0026 var i int = 10 fmt.Println(\"içš„åœ°å€ï¼š\", \u0026i) //içš„åœ°å€ï¼š 0xc0000162d8 æŒ‡é’ˆç±»å‹ï¼ŒæŒ‡é’ˆå˜é‡å­˜çš„æ˜¯ä¸€ä¸ªåœ°å€ï¼Œè¿™ä¸ªåœ°å€æŒ‡å‘çš„ç©ºé—´å­˜çš„æ‰æ˜¯å€¼ // ptræ˜¯ä¸€ä¸ªæŒ‡é’ˆå˜é‡ // ptrçš„ç±»å‹ *int // ptræœ¬èº«çš„å€¼æ˜¯\u0026i var ptr *int = \u0026i fmt.Printf(\"ptr=%v\\n\", ptr) //ptr=0xc00011c1b0 fmt.Printf(\"ptrçš„åœ°å€ï¼š%v\\n\", \u0026ptr) //ptrçš„åœ°å€ï¼š0xc000114028 è·å–æŒ‡é’ˆç±»å‹æ‰€æŒ‡å‘çš„å€¼ï¼Œç”¨* fmt.Printf(\"ptræŒ‡å‘çš„å€¼=%v\\n\", *ptr) //ptræŒ‡å‘çš„å€¼=10 ","date":"2022å¹´06æœˆ30æ—¥","objectID":"/2022/06/go%E6%8C%87%E9%92%88/:1:0","tags":["Goç¬”è®°"],"title":"GoæŒ‡é’ˆ","uri":"/2022/06/go%E6%8C%87%E9%92%88/"},{"categories":["Goç¬”è®°"],"content":"å˜é‡åœ¨å†…å­˜ä¸­çš„åˆ†å¸ƒï¼š ","date":"2022å¹´06æœˆ30æ—¥","objectID":"/2022/06/go%E6%8C%87%E9%92%88/:2:0","tags":["Goç¬”è®°"],"title":"GoæŒ‡é’ˆ","uri":"/2022/06/go%E6%8C%87%E9%92%88/"},{"categories":["Goç¬”è®°"],"content":"æŒ‡é’ˆåœ¨å†…å­˜ä¸­çš„åˆ†å¸ƒï¼š ","date":"2022å¹´06æœˆ30æ—¥","objectID":"/2022/06/go%E6%8C%87%E9%92%88/:3:0","tags":["Goç¬”è®°"],"title":"GoæŒ‡é’ˆ","uri":"/2022/06/go%E6%8C%87%E9%92%88/"},{"categories":["Goç¬”è®°"],"content":"æŒ‡é’ˆç»†èŠ‚è¯´æ˜ å€¼ç±»å‹ï¼Œéƒ½æœ‰å¯¹åº”çš„æŒ‡é’ˆç±»å‹ï¼Œå½¢å¼ä¸º*æ•°æ®ç±»å‹,æ¯”å¦‚ï¼šintå¯¹åº”çš„æŒ‡é’ˆå°±æ˜¯*intï¼Œfloat32å¯¹åº”çš„æŒ‡é’ˆç±»å‹å°±æ˜¯*float å€¼ç±»å‹åŒ…æ‹¬ï¼šåŸºæœ¬æ•°æ®ç±»å‹intç³»åˆ—ã€floatç³»åˆ—ã€boolã€stringã€æ•°ç»„å’Œç»“æ„ä½“struct ","date":"2022å¹´06æœˆ30æ—¥","objectID":"/2022/06/go%E6%8C%87%E9%92%88/:4:0","tags":["Goç¬”è®°"],"title":"GoæŒ‡é’ˆ","uri":"/2022/06/go%E6%8C%87%E9%92%88/"},{"categories":["Goç¬”è®°"],"content":"ä»‹ç» Goåœ¨ä¸åŒç±»å‹çš„å˜é‡ä¹‹é—´èµ‹å€¼æ—¶éœ€è¦æ˜¾å¼è½¬æ¢ã€‚Goä¸­æ•°æ®ç±»å‹ä¸èƒ½è‡ªåŠ¨è½¬æ¢ã€‚ ","date":"2022å¹´06æœˆ30æ—¥","objectID":"/2022/06/go%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E7%9A%84%E8%BD%AC%E6%8D%A2/:0:1","tags":["Goç¬”è®°"],"title":"GoåŸºæœ¬æ•°æ®ç±»å‹çš„è½¬æ¢","uri":"/2022/06/go%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E7%9A%84%E8%BD%AC%E6%8D%A2/"},{"categories":["Goç¬”è®°"],"content":"åŸºæœ¬è¯­æ³• è¡¨è¾¾å¼T(v) å°†å€¼vè½¬æ¢ä¸ºç±»å‹T T: å°±æ˜¯æ•°æ®ç±»å‹ï¼Œæ¯”å¦‚ï¼šint32/int64/float32ç­‰ v: å°±æ˜¯éœ€è¦è½¬æ¢çš„å˜é‡ ","date":"2022å¹´06æœˆ30æ—¥","objectID":"/2022/06/go%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E7%9A%84%E8%BD%AC%E6%8D%A2/:0:2","tags":["Goç¬”è®°"],"title":"GoåŸºæœ¬æ•°æ®ç±»å‹çš„è½¬æ¢","uri":"/2022/06/go%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E7%9A%84%E8%BD%AC%E6%8D%A2/"},{"categories":["Goç¬”è®°"],"content":"ç¤ºä¾‹ var i int = 42 var f float64 = float64(i) var u uint8 = uint8(f) fmt.Println(i, f, u) //42 42 42 ","date":"2022å¹´06æœˆ30æ—¥","objectID":"/2022/06/go%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E7%9A%84%E8%BD%AC%E6%8D%A2/:0:3","tags":["Goç¬”è®°"],"title":"GoåŸºæœ¬æ•°æ®ç±»å‹çš„è½¬æ¢","uri":"/2022/06/go%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E7%9A%84%E8%BD%AC%E6%8D%A2/"},{"categories":["Goç¬”è®°"],"content":"ç»†èŠ‚è¯´æ˜ Goä¸­ï¼Œæ•°æ®ç±»å‹çš„è½¬æ¢å¯ä»¥æ˜¯ä»è¡¨ç¤ºèŒƒå›´å°-\u003eè¡¨ç¤ºèŒƒå›´å¤§ï¼Œä¹Ÿå¯ä»¥ èŒƒå›´å¤§-\u003eèŒƒå›´å° è¢«è½¬æ¢çš„æ˜¯å˜é‡å­˜å‚¨çš„æ•°æ®ï¼ˆå³å€¼ï¼‰ï¼Œå˜é‡æœ¬èº«çš„æ•°æ®ç±»å‹å¹¶æ²¡æœ‰å˜åŒ– åœ¨è½¬æ¢ä¸­ï¼Œæ¯”å¦‚å°†int64è½¬æˆint8ï¼Œç¼–è¯‘æ—¶ä¸ä¼šæŠ¥é”™ï¼Œåªæ˜¯è½¬æ¢çš„ç»“æœæ˜¯æŒ‰æº¢å‡ºå¤„ç†ï¼Œå’ŒæœŸæœ›ç»“æœä¸ä¸€æ · var num int64 = 999999 var num2 int8 = int8(num) fmt.Println(num2) //63 è½¬æ¢çš„ç»“æœè¢«æŒ‰ç…§æº¢å‡ºå¤„ç†ï¼Œè·Ÿé¢„æœŸç»“æœä¸ä¸€è‡´ ","date":"2022å¹´06æœˆ30æ—¥","objectID":"/2022/06/go%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E7%9A%84%E8%BD%AC%E6%8D%A2/:0:4","tags":["Goç¬”è®°"],"title":"GoåŸºæœ¬æ•°æ®ç±»å‹çš„è½¬æ¢","uri":"/2022/06/go%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E7%9A%84%E8%BD%AC%E6%8D%A2/"},{"categories":["Goç¬”è®°"],"content":"åŸºæœ¬æ•°æ®ç±»å‹å’Œstringçš„è½¬æ¢ ","date":"2022å¹´06æœˆ30æ—¥","objectID":"/2022/06/go%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E7%9A%84%E8%BD%AC%E6%8D%A2/:1:0","tags":["Goç¬”è®°"],"title":"GoåŸºæœ¬æ•°æ®ç±»å‹çš„è½¬æ¢","uri":"/2022/06/go%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E7%9A%84%E8%BD%AC%E6%8D%A2/"},{"categories":["Goç¬”è®°"],"content":"åŸºæœ¬æ•°æ®ç±»å‹è½¬string æ–¹å¼ä¸€ï¼šfmt.Sprintf(\"%å‚æ•°\", è¡¨è¾¾å¼) å‚æ•°éœ€è¦å’Œè¡¨è¾¾å¼çš„æ•°æ®ç±»å‹ç›¸åŒ¹é… fmt.Sprintf(...)ä¼šè¿”å›è½¬æ¢åçš„å­—ç¬¦ä¸² var ( num1 int = 99 num2 float64 = 23.34 isChecked bool = true myChar byte = 'h' str string // ç©ºå­—ç¬¦ä¸² ) // int -\u003e string str = fmt.Sprintf(\"%d\", num1) fmt.Printf(\"str type %T str=%q\\n\\n\", str, str) //str type string str=\"99\" // float -\u003e string str = fmt.Sprintf(\"%f\", num2) fmt.Printf(\"str type %T str=%q\\n\\n\", str, str) //str type string str=\"23.340000\" // bool -\u003e string str = fmt.Sprintf(\"%t\", isChecked) fmt.Printf(\"str type %T str=%q\\n\\n\", str, str) //str type string str=\"true\" // char -\u003e string str = fmt.Sprintf(\"%c\", myChar) fmt.Printf(\"str type %T str=%q\\n\\n\", str, str) //str type string str=\"h\" æ–¹å¼äºŒï¼šä½¿ç”¨strconvåŒ…çš„å‡½æ•° var ( num1 int = 99 num2 float64 = 23.34 isChecked bool = true str string // ç©ºå­—ç¬¦ä¸² ) // int -\u003e string str = strconv.FormatInt(int64(num1), 10) fmt.Printf(\"str type %T str=%q\\n\\n\", str, str) //str type string str=\"99\" str = strconv.Itoa(num1) fmt.Printf(\"str type %T str=%q\\n\\n\", str, str) //str type string str=\"99\" // float -\u003e string // å‚æ•°è¯´æ˜ï¼š'f'ï¼šæ ¼å¼ 10ï¼šè¡¨ç¤ºå°æ•°ä½ä¿ç•™10ä½ 64ï¼šè¡¨ç¤ºfloat64 str = strconv.FormatFloat(num2, 'f', 10, 64) fmt.Printf(\"str type %T str=%q\\n\\n\", str, str) //str type string str=\"23.3400000000\" // bool -\u003e string str = strconv.FormatBool(isChecked) fmt.Printf(\"str type %T str=%q\\n\\n\", str, str) //str type string str=\"true\" ","date":"2022å¹´06æœˆ30æ—¥","objectID":"/2022/06/go%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E7%9A%84%E8%BD%AC%E6%8D%A2/:1:1","tags":["Goç¬”è®°"],"title":"GoåŸºæœ¬æ•°æ®ç±»å‹çš„è½¬æ¢","uri":"/2022/06/go%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E7%9A%84%E8%BD%AC%E6%8D%A2/"},{"categories":["Goç¬”è®°"],"content":"stringç±»å‹è½¬åŸºæœ¬æ•°æ®ç±»å‹ ä½¿ç”¨strconvåŒ…çš„å‡½æ•° var str string = \"true\" var b bool b, _ = strconv.ParseBool(str) fmt.Printf(\"b type %T b=%v\\n\", b, b) //b type bool b=true var str1 string = \"10\" var b1 int64 b1, _ = strconv.ParseInt(str1, 10, 64) fmt.Printf(\"b1 type %T b1=%v\\n\", b1, b1) //b1 type int64 b1=10 var str2 string = \"10.0000001\" var b2 float64 b2, _ = strconv.ParseFloat(str2, 64) fmt.Printf(\"b2 type %T b2=%v\\n\", b2, b2) //b2 type float64 b2=10.0000001 var str3 string = \"10\" var b3 uint64 b3, _ = strconv.ParseUint(str3, 10, 64) fmt.Printf(\"b3 type %T b3=%v\\n\", b3, b3) ","date":"2022å¹´06æœˆ30æ—¥","objectID":"/2022/06/go%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E7%9A%84%E8%BD%AC%E6%8D%A2/:1:2","tags":["Goç¬”è®°"],"title":"GoåŸºæœ¬æ•°æ®ç±»å‹çš„è½¬æ¢","uri":"/2022/06/go%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E7%9A%84%E8%BD%AC%E6%8D%A2/"},{"categories":["Goç¬”è®°"],"content":"æ³¨æ„äº‹é¡¹ åœ¨å°†stringè½¬æˆåŸºæœ¬æ•°æ®ç±»å‹æ—¶ï¼Œè¦ç¡®ä¿stringç±»å‹èƒ½å¤Ÿè½¬æˆæœ‰æ•ˆçš„æ•°æ®ï¼Œå¦åˆ™ä¼šå°†å…¶è½¬æˆé›¶å€¼ var str4 string = \"hello\" // æŠŠæ­¤å­—ç¬¦ä¸²è½¬æˆæ•´æ•°ï¼ŒGoä¼šç›´æ¥å°†å…¶è½¬æˆ0 var num int64 num, _ = strconv.ParseInt(str4, 10, 64) fmt.Printf(\"num type %T num=%v\\n\", num, num) // num type int64 num=0 ","date":"2022å¹´06æœˆ30æ—¥","objectID":"/2022/06/go%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E7%9A%84%E8%BD%AC%E6%8D%A2/:1:3","tags":["Goç¬”è®°"],"title":"GoåŸºæœ¬æ•°æ®ç±»å‹çš„è½¬æ¢","uri":"/2022/06/go%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E7%9A%84%E8%BD%AC%E6%8D%A2/"},{"categories":["Goç¬”è®°"],"content":"Goå˜é‡ ","date":"2022å¹´06æœˆ30æ—¥","objectID":"/2022/06/go%E5%8F%98%E9%87%8F%E5%92%8C%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/:1:0","tags":["Goç¬”è®°"],"title":"Goå˜é‡å’ŒåŸºæœ¬æ•°æ®ç±»å‹","uri":"/2022/06/go%E5%8F%98%E9%87%8F%E5%92%8C%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/"},{"categories":["Goç¬”è®°"],"content":"æ¦‚å¿µ å˜é‡ç›¸å½“äºå†…å­˜ä¸­ä¸€ä¸ªæ•°æ®å­˜å‚¨ç©ºé—´çš„è¡¨ç¤ºã€‚é€šè¿‡å˜é‡åå¯ä»¥è®¿é—®åˆ°å˜é‡ï¼ˆå€¼ï¼‰ã€‚ ","date":"2022å¹´06æœˆ30æ—¥","objectID":"/2022/06/go%E5%8F%98%E9%87%8F%E5%92%8C%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/:1:1","tags":["Goç¬”è®°"],"title":"Goå˜é‡å’ŒåŸºæœ¬æ•°æ®ç±»å‹","uri":"/2022/06/go%E5%8F%98%E9%87%8F%E5%92%8C%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/"},{"categories":["Goç¬”è®°"],"content":"å˜é‡ä½¿ç”¨çš„åŸºæœ¬æ­¥éª¤ å£°æ˜å˜é‡ï¼ˆå®šä¹‰å˜é‡ï¼‰ èµ‹å€¼ ä½¿ç”¨ var name string //å£°æ˜å˜é‡ name = \"Joker\" //èµ‹å€¼ fmt.Println(\"name: \", name) //ä½¿ç”¨ ","date":"2022å¹´06æœˆ30æ—¥","objectID":"/2022/06/go%E5%8F%98%E9%87%8F%E5%92%8C%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/:1:2","tags":["Goç¬”è®°"],"title":"Goå˜é‡å’ŒåŸºæœ¬æ•°æ®ç±»å‹","uri":"/2022/06/go%E5%8F%98%E9%87%8F%E5%92%8C%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/"},{"categories":["Goç¬”è®°"],"content":"å˜é‡ä½¿ç”¨æ³¨æ„äº‹é¡¹ å˜é‡è¡¨ç¤ºå†…å­˜ä¸­çš„ä¸€ä¸ªå­˜å‚¨åŒºåŸŸ è¯¥åŒºåŸŸæœ‰è‡ªå·±çš„åç§°ï¼ˆå˜é‡åï¼‰å’Œç±»å‹ï¼ˆæ•°æ®ç±»å‹ï¼‰ Goå˜é‡ä½¿ç”¨çš„ä¸‰ç§æ–¹å¼ æŒ‡å®šå˜é‡ç±»å‹ï¼Œå£°æ˜åè‹¥ä¸èµ‹å€¼ï¼Œä½¿ç”¨é»˜è®¤å€¼ var i int var name string fmt.Println(\"i: \", i) //i: 0 fmt.Println(\"name: \", name) //name: æ ¹æ®å€¼è‡ªè¡Œåˆ¤å®šå˜é‡ç±»å‹ï¼ˆç±»å‹æ¨å¯¼ï¼‰ i := 100 fmt.Printf(\"i: %d, içš„ç±»å‹ï¼š%T\\n\", i, i) //i: 100, içš„ç±»å‹ï¼šint çœç•¥varï¼Œæ³¨æ„ï¼š:= å·¦ä¾§çš„å˜é‡ä¸åº”è¯¥æ˜¯å·²ç»å£°æ˜è¿‡çš„ï¼Œå¦åˆ™ä¼šå¯¼è‡´ç¼–è¯‘é”™è¯¯ å¤šå˜é‡å£°æ˜ var a, b, c, d int fmt.Println(a, b, c, d) //0 0 0 0 a1, b1, c1, d1 := 1, 2, 3, 4 fmt.Println(a1, b1, c1, d1) //1 2 3 4 var a2, b2, c2, d2 = \"a2\", 2, \"c2\", 23.09 fmt.Println(a2, b2, c2, d2) //a2 2 c2 23.09 è¯¥åŒºåŸŸçš„æ•°æ®å€¼å¯ä»¥åœ¨åŒä¸€ç±»å‹èŒƒå›´å†…ä¸æ–­å˜åŒ– var name = \"Joker\" fmt.Println(name) //Joker name = \"Tom\" fmt.Println(name) //Tom name = \"Sony\" fmt.Println(name) //Sony // name = 10 //cannot use 10 (type untyped int) as type string in assignment å˜é‡åœ¨åŒä¸€ä½œç”¨åŸŸï¼ˆåœ¨ä¸€ä¸ªå‡½æ•°æˆ–è€…åœ¨ä»£ç å—ï¼‰å†…ä¸èƒ½é‡å var name = \"Joker\" fmt.Println(name) //Joker // å˜é‡ä¸èƒ½å†åŒä¸€ä½œç”¨åŸŸä¸‹é‡å var name = \"Tom\" //previous declaration å˜é‡=å˜é‡å+å€¼+æ•°æ®ç±»å‹ Goçš„å˜é‡å¦‚æœæ²¡æœ‰èµ‹åˆå§‹å€¼ï¼Œç¼–è¯‘å™¨ä¼šä½¿ç”¨é»˜è®¤å€¼ï¼Œæ¯”å¦‚:inté»˜è®¤å€¼æ˜¯0ï¼Œstringé»˜è®¤å€¼ä¸ºç©ºï¼Œfloaté»˜è®¤å€¼ä¹Ÿæ˜¯0 var ( name string //é»˜è®¤å€¼ä¸ºç©º age int //é»˜è®¤å€¼ä¸º0 score float64//é»˜è®¤å€¼ä¸º0.0 ) fmt.Printf(\"name: %s,age:%d,score:%f\\n\", name, age, score) //name:,age:0,score:0.000000 ","date":"2022å¹´06æœˆ30æ—¥","objectID":"/2022/06/go%E5%8F%98%E9%87%8F%E5%92%8C%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/:1:3","tags":["Goç¬”è®°"],"title":"Goå˜é‡å’ŒåŸºæœ¬æ•°æ®ç±»å‹","uri":"/2022/06/go%E5%8F%98%E9%87%8F%E5%92%8C%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/"},{"categories":["Goç¬”è®°"],"content":"ç¨‹åºä¸­+å·çš„ä½¿ç”¨ å½“å·¦å³ä¸¤è¾¹éƒ½æ˜¯æ•°å€¼å‹æ—¶ï¼Œåˆ™åšåŠ æ³•è¿ç®— var ( n1 = 100 n2 = 200 ) fmt.Println(\"n1 + n2 = \", n1+n2) //n1 + n2 = 300 å½“å·¦å³ä¸¤è¾¹éƒ½æ˜¯å­—ç¬¦ä¸²ï¼Œåˆ™åšå­—ç¬¦ä¸²æ‹¼æ¥ var ( n3 = \"Hello\" n4 = \"World!\" ) fmt.Println(\"n3 + n4 = \", n3+n4) //n3 + n4 = HelloWorld! ","date":"2022å¹´06æœˆ30æ—¥","objectID":"/2022/06/go%E5%8F%98%E9%87%8F%E5%92%8C%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/:1:4","tags":["Goç¬”è®°"],"title":"Goå˜é‡å’ŒåŸºæœ¬æ•°æ®ç±»å‹","uri":"/2022/06/go%E5%8F%98%E9%87%8F%E5%92%8C%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/"},{"categories":["Goç¬”è®°"],"content":"å˜é‡çš„æ•°æ®ç±»å‹ æ¯ä¸€ç§æ•°æ®éƒ½å®šä¹‰äº†æ˜ç¡®çš„æ•°æ®ç±»å‹ï¼Œåœ¨å†…å­˜ä¸­åˆ†é…äº†ä¸åŒå¤§å°çš„å†…å­˜ç©ºé—´ã€‚ ","date":"2022å¹´06æœˆ30æ—¥","objectID":"/2022/06/go%E5%8F%98%E9%87%8F%E5%92%8C%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/:2:0","tags":["Goç¬”è®°"],"title":"Goå˜é‡å’ŒåŸºæœ¬æ•°æ®ç±»å‹","uri":"/2022/06/go%E5%8F%98%E9%87%8F%E5%92%8C%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/"},{"categories":["Goç¬”è®°"],"content":"æ•´æ•°ç±»å‹ åŸºæœ¬ä»‹ç» ç”¨äºå­˜æ”¾æ•´æ•°å€¼ï¼Œæ¯”å¦‚0,-1,233ç­‰ ç¤ºä¾‹ var a int = 8900 fmt.Println(\"a = \", a) var b uint = 1 fmt.Println(\"b = \", b) var c byte = 255 fmt.Println(\"c = \", c) var d rune = 1000 fmt.Println(\"d = \", d) æ•´å‹çš„ç±»å‹ ç±»å‹ æœ‰æ— ç¬¦å· å ç”¨å­˜å‚¨ç©ºé—´ æ•°å€¼èŒƒå›´ å¤‡æ³¨ int8 æœ‰ 1å­—èŠ‚ -128~127 int16 æœ‰ 2å­—èŠ‚ -2^15~2^15-1 int32 æœ‰ 4å­—èŠ‚ -2^31~2^31-1 int64 æœ‰ 8å­—èŠ‚ -2^63~2^63-1 int æœ‰ 32ä½ç³»ç»Ÿ4ä¸ªå­—èŠ‚ 64ä½ç³»ç»Ÿ8ä¸ªå­—èŠ‚ -2^312^31-1 -2^632^63-1 uint æ—  32ä½ç³»ç»Ÿ4ä¸ªå­—èŠ‚ 64ä½ç³»ç»Ÿ8ä¸ªå­—èŠ‚ 02^32-1 02^64-1 rune æœ‰ ä¸int32ä¸€æ · -2^31~2^31-1 ç­‰ä»·int32ï¼Œè¡¨ç¤ºä¸€ä¸ªUnicodeç  byte æ—  ä¸uint8ç­‰ä»· 0~255 å½“è¦å­˜å‚¨å­—ç¬¦æ—¶ï¼Œé€‰ç”¨byte æ•´å‹çš„ä½¿ç”¨ç»†èŠ‚ Goå„æ•´æ•°ç±»å‹åˆ†ç±»ï¼šæœ‰ç¬¦å·å’Œæ— ç¬¦å·ï¼Œint uintçš„å¤§å°å’Œç³»ç»Ÿæœ‰å…³ Goçš„æ•´å‹é»˜è®¤å£°æ˜ä¸ºintå‹ num := 100 fmt.Printf(\"num=%d, numçš„ç±»å‹ï¼š%T\\n\", num, num) //num=100, numçš„ç±»å‹ï¼šint Goç¨‹åºä¸­æ•´å‹å˜é‡åœ¨ä½¿ç”¨æ—¶ï¼Œéµå®ˆä¿å°ä¸ä¿å¤§çš„åŸåˆ™ï¼Œå³ï¼šåœ¨ä¿è¯ç¨‹åºæ­£ç¡®è¿è¡Œä¸‹ï¼Œå°½é‡ä½¿ç”¨å ç”¨ç©ºé—´å°çš„æ•°æ®ç±»å‹ï¼Œæ¯”å¦‚ï¼šå¹´é¾„ bit: è®¡ç®—æœºä¸­çš„æœ€å°å­˜å‚¨å•ä½ã€‚byte: è®¡ç®—æœºä¸­åŸºæœ¬å­˜å‚¨å•å…ƒ ","date":"2022å¹´06æœˆ30æ—¥","objectID":"/2022/06/go%E5%8F%98%E9%87%8F%E5%92%8C%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/:2:1","tags":["Goç¬”è®°"],"title":"Goå˜é‡å’ŒåŸºæœ¬æ•°æ®ç±»å‹","uri":"/2022/06/go%E5%8F%98%E9%87%8F%E5%92%8C%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/"},{"categories":["Goç¬”è®°"],"content":"æµ®ç‚¹å‹ åŸºæœ¬ä»‹ç» æµ®ç‚¹å‹å°±æ˜¯ç”¨äºå­˜æ”¾å°æ•°çš„ï¼Œæ¯”å¦‚ï¼š1.2, 0.3, -1.293 ç¤ºä¾‹ var price float32 = 89.02 fmt.Println(\"price = \", price) //price = 89.02 var ( num1 float32 = -0.00089 num2 float64 = -7890976.09 ) fmt.Println(\"num1 = \", num1, \"ï¼Œnum2 = \", num2) //num1 = -0.00089 ï¼Œnum2 = -7.89097609e+06 æµ®ç‚¹ç±»å‹çš„åˆ†ç±» ç±»å‹ å ç”¨å­˜å‚¨ç©ºé—´ æ•°å€¼èŒƒå›´ å•ç²¾åº¦ float32 4å­—èŠ‚ -3.403E38~3.403E38 åŒç²¾åº¦ float64 8å­—èŠ‚ -1.798E308~1.798E308 è¯´æ˜ï¼š æµ®ç‚¹å‹çš„å­˜å‚¨åˆ†ä¸ºä¸‰éƒ¨åˆ†ï¼šç¬¦å·ä½+æŒ‡æ•°ä½+å°¾æ•°ä½ï¼Œåœ¨å­˜å‚¨è¿‡ç¨‹ä¸­ï¼Œç²¾åº¦ä¼šæœ‰ä¸¢å¤± var ( n1 float32 = -123.0000901 n2 float64 = -123.0000901 ) fmt.Println(\"n1 = \", n1, \" n2 = \", n2) //n1 = -123.00009 n2 = -123.0000901 float64çš„ç²¾åº¦æ¯”float32çš„è¦å‡†ç¡® å¦‚æœéœ€è¦ä¿å­˜ä¸€ä¸ªç²¾åº¦é«˜çš„æ•°ï¼Œåˆ™åº”è¯¥é€‰ç”¨float64 æµ®ç‚¹å‹çš„ä½¿ç”¨ç»†èŠ‚ Goæµ®ç‚¹ç±»å‹æœ‰å›ºå®šçš„èŒƒå›´å’Œå­—æ®µé•¿åº¦ï¼Œä¸å—å…·ä½“OSçš„å½±å“ Goçš„æµ®ç‚¹å‹é»˜è®¤å£°æ˜ä¸ºfloat64ç±»å‹ num3 := 12.09 fmt.Printf(\"num3çš„ç±»å‹ï¼š%T\\n\", num3) //num3çš„ç±»å‹ï¼šfloat64 æµ®ç‚¹å‹å¸¸é‡æœ‰ä¸¤ç§è¡¨ç¤ºå½¢å¼ åè¿›åˆ¶å½¢å¼ï¼šå¦‚ï¼š num4 := 5.12 num5 := .123 //0.123 fmt.Println(\"num4 = \", num4, \" num5 = \", num5) //num4 = 5.12 num5 = 0.123 ç§‘å­¦è®¡æ•°æ³•å½¢å¼ï¼šå¦‚ï¼š num6 := 5.12e2 num7 := 5.12e-2 fmt.Println(\"num6 = \", num6, \" num7 = \", num7) //num6 = 512 num7 = 0.0512 é€šå¸¸æƒ…å†µä¸‹ï¼Œåº”è¯¥ä½¿ç”¨float64ï¼Œå› ä¸ºå®ƒæ¯”float32æ›´ç²¾å‡† ","date":"2022å¹´06æœˆ30æ—¥","objectID":"/2022/06/go%E5%8F%98%E9%87%8F%E5%92%8C%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/:2:2","tags":["Goç¬”è®°"],"title":"Goå˜é‡å’ŒåŸºæœ¬æ•°æ®ç±»å‹","uri":"/2022/06/go%E5%8F%98%E9%87%8F%E5%92%8C%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/"},{"categories":["Goç¬”è®°"],"content":"å­—ç¬¦ç±»å‹ï¼ˆcharï¼‰ åŸºæœ¬ä»‹ç» Goä¸­æ²¡æœ‰ä¸“é—¨çš„å­—ç¬¦ç±»å‹ï¼Œå¦‚æœè¦å­˜å‚¨å•ä¸ªå­—ç¬¦ï¼ˆå­—æ¯ï¼‰ï¼Œä¸€èˆ¬ä½¿ç”¨byteæ¥ä¿å­˜ã€‚ å­—ç¬¦ä¸²å°±æ˜¯ä¸€ä¸²å›ºå®šé•¿åº¦çš„å­—ç¬¦è¿æ¥èµ·æ¥çš„å­—ç¬¦åºåˆ—ã€‚Goçš„å­—ç¬¦ä¸²æ˜¯ç”±å•ä¸ªå­—èŠ‚è¿æ¥èµ·æ¥çš„ï¼Œä¹Ÿå°±æ˜¯è¯´å¯¹äºä¼ ç»Ÿçš„å­—ç¬¦ä¸²æ˜¯ç”±å­—ç¬¦ç»„æˆçš„ï¼Œè€ŒGoçš„å­—ç¬¦ä¸²ä¸åŒï¼Œå®ƒæ˜¯ç”±å­—èŠ‚ç»„æˆçš„ï¼ˆå®˜æ–¹å°†stringå½’å±åˆ°åŸºæœ¬æ•°æ®ç±»å‹ä¸­ï¼‰ã€‚ ç¤ºä¾‹ var ( c1 byte = 'a' c2 byte = '0' //å­—ç¬¦çš„0 ) // å½“æˆ‘ä»¬ç›´æ¥è¾“å‡ºbyteå€¼ï¼Œå°±æ˜¯è¾“å‡ºäº†å¯¹åº”çš„å­—ç¬¦çš„ç å€¼ fmt.Println(\"c1 = \", c1) //c1 = 97 fmt.Println(\"c2 = \", c2) //c2 = 48 // å¦‚æœå¸Œæœ›è¾“å‡ºå¯¹åº”çš„å­—ç¬¦ï¼Œåˆ™éœ€è¦ä½¿ç”¨æ ¼å¼åŒ–è¾“å‡ºï¼Œ%c fmt.Printf(\"c1 = %c, c2 = %c\\n\", c1, c2) //c1 = a, c2 = 0 //var c3 byte = 'åŒ—' //constant 21271 overflows byte var c3 int = 'åŒ—' // ç”±äºä¸Šé¢ä¸€è¡Œå®šä¹‰çš„å­—ç¬¦ç±»å‹ï¼Œå¯¹åº”ç å¤§äº255ï¼Œå»ºè®®å¤§äº255çš„è€ƒè™‘ä½¿ç”¨intç±»å‹ä¿å­˜ fmt.Printf(\"c3 = %c, c3å¯¹åº”ç å€¼=%d\\n\", c3, c3) //c3 = åŒ—, c3å¯¹åº”ç å€¼=21271 è¯´æ˜ï¼š å¦‚æœæˆ‘ä»¬ä¿å­˜çš„å­—ç¬¦åœ¨ASCIIè¡¨ä¸­ï¼Œé‚£ä¹ˆå¯ä»¥ç›´æ¥ä¿å­˜åˆ°byte å¦‚æœæˆ‘ä»¬ä¿å­˜çš„å­—ç¬¦å¯¹åº”ç å¤§äº255ï¼Œè¿™æ—¶æˆ‘ä»¬å¯ä»¥è€ƒè™‘ä½¿ç”¨intç±»å‹ä¿å­˜ å¦‚æœæˆ‘ä»¬éœ€è¦æŒ‰ç…§å­—ç¬¦çš„æ–¹å¼è¾“å‡ºï¼Œè¿™æ—¶æˆ‘ä»¬éœ€è¦æ ¼å¼åŒ–è¾“å‡ºfmt.Printf(\"%c å¯¹åº”çš„ç å€¼ï¼š%d\", c, c) å­—ç¬¦ç±»å‹çš„ä½¿ç”¨ç»†èŠ‚ å­—ç¬¦å¸¸é‡æ˜¯ç”¨å•å¼•å·ï¼ˆâ€™â€™ï¼‰æ‹¬èµ·æ¥çš„å•ä¸ªå­—ç¬¦ã€‚ä¾‹å¦‚ï¼š var c1 byte = 'a' var c2 byte = 'ä¸­' var c3 byte = '9' Goä¸­å…è®¸ä½¿ç”¨è½¬ä¹‰å­—ç¬¦\\æ¥è¡¨ç¤ºå°†å…¶åçš„å­—ç¬¦è½¬å˜ä¸ºç‰¹æ®Šå­—ç¬¦å‹å¸¸é‡ï¼Œä¾‹å¦‚: var c3 char = '\\n' //'\\n'è¡¨ç¤ºæ¢è¡Œç¬¦ Goè¯­è¨€çš„å­—ç¬¦ä½¿ç”¨UTF-8ç¼–ç ï¼› åœ¨Goä¸­ï¼Œå­—ç¬¦çš„æœ¬è´¨æ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œç›´æ¥è¾“å‡ºæ—¶ï¼Œæ˜¯è¯¥å­—ç¬¦å¯¹åº”çš„UTF-8ç¼–ç çš„ç å€¼ï¼› var ( c1 byte = 'a' c2 byte = '0' //å­—ç¬¦çš„0 ) // å½“æˆ‘ä»¬ç›´æ¥è¾“å‡ºbyteå€¼ï¼Œå°±æ˜¯è¾“å‡ºäº†å¯¹åº”çš„å­—ç¬¦çš„ç å€¼ fmt.Println(\"c1 = \", c1) //c1 = 97 fmt.Println(\"c2 = \", c2) //c2 = 48 å¯ä»¥ç›´æ¥ç»™æŸä¸ªå˜é‡èµ‹ä¸€ä¸ªæ•°å­—ï¼Œç„¶åæŒ‰æ ¼å¼åŒ–è¾“å‡ºæ—¶ä½¿ç”¨%cä¼šè¾“å‡ºè¯¥æ•°å­—å¯¹åº”çš„unicodeå­—ç¬¦ï¼› //å¯ä»¥ç›´æ¥ç»™æŸä¸ªå˜é‡èµ‹ä¸€ä¸ªæ•°å­—ï¼Œç„¶åæŒ‰ç…§æ ¼å¼åŒ–è¾“å‡ºä½¿ç”¨%cï¼Œä¼šè¾“å‡ºè¯¥æ•°å­—å¯¹åº”çš„Unicodeå­—ç¬¦ var c4 int = 22269 fmt.Printf(\"c4=%c\\n\", c4) //c4=å›½ å­—ç¬¦ç±»å‹æ˜¯å¯ä»¥è¿›è¡Œè¿ç®—çš„ï¼Œç›¸å½“äºä¸€ä¸ªæ•´æ•°ï¼Œå› ä¸ºå®ƒéƒ½å¯¹åº”çš„æœ‰Unicodeç ã€‚ //å­—ç¬¦ç±»å‹æ˜¯å¯ä»¥è¿›è¡Œè¿ç®—çš„ï¼Œç›¸å½“äºä¸€ä¸ªæ•´æ•°ï¼Œè¿ç®—æ—¶æŒ‰ç…§ç å€¼è¿è¡Œ var n1 = 10 + 'a' // 10 + 97 fmt.Println(\"n1 = \", n1) // n1 = 107 å­—ç¬¦ç±»å‹çš„æœ¬è´¨ å­—ç¬¦å‹ å­˜å‚¨åˆ°è®¡ç®—æœºä¸­ï¼Œéœ€è¦å°†å­—ç¬¦å¯¹åº”çš„ç å€¼ï¼ˆæ•´æ•°ï¼‰æ‰¾å‡ºæ¥ å­˜å‚¨ï¼šå­—ç¬¦ -\u003e å¯¹åº”ç å€¼ -\u003e äºŒè¿›åˆ¶ -\u003e å­˜å‚¨ è¯»å–ï¼šäºŒè¿›åˆ¶ -\u003e ç å€¼ -\u003e å­—ç¬¦ -\u003e è¯»å– å­—ç¬¦å’Œç å€¼çš„å¯¹åº”å…³ç³»æ˜¯é€šè¿‡å­—ç¬¦ç¼–ç è¡¨æ¥å†³å®šçš„ï¼ˆæ˜¯å·²ç»è§„å®šå¥½çš„ï¼‰ Goè¯­è¨€çš„ç¼–ç éƒ½ç»Ÿä¸€æˆäº†utf-8ï¼Œå†ä¹Ÿæ²¡æœ‰ç¼–ç çš„å›°æ‰°äº† ","date":"2022å¹´06æœˆ30æ—¥","objectID":"/2022/06/go%E5%8F%98%E9%87%8F%E5%92%8C%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/:2:3","tags":["Goç¬”è®°"],"title":"Goå˜é‡å’ŒåŸºæœ¬æ•°æ®ç±»å‹","uri":"/2022/06/go%E5%8F%98%E9%87%8F%E5%92%8C%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/"},{"categories":["Goç¬”è®°"],"content":"å¸ƒå°”ç±»å‹ï¼ˆboolï¼‰ åŸºæœ¬ä»‹ç» å¸ƒå°”ç±»å‹ä¹Ÿå«boolç±»å‹ï¼Œboolç±»å‹æ•°æ®åªå…è®¸å–å€¼trueå’Œfalse boolç±»å‹å 1ä¸ªå­—èŠ‚ boolç±»å‹é€‚ç”¨äºé€»è¾‘è¿ç®—ï¼Œä¸€èˆ¬ç”¨äºç¨‹åºæµç¨‹æ§åˆ¶ ç¤ºä¾‹ var b = false fmt.Println(\"b=\", b) //b= false fmt.Println(\"bçš„å ç”¨ç©ºé—´ = \", unsafe.Sizeof(b)) //bçš„å ç”¨ç©ºé—´ = 1 å¸ƒå°”ç±»å‹çš„ä½¿ç”¨ç»†èŠ‚ ä¸å¯ä»¥0æˆ–é0çš„æ•´æ•°æ›¿ä»£falseå’Œtrue ","date":"2022å¹´06æœˆ30æ—¥","objectID":"/2022/06/go%E5%8F%98%E9%87%8F%E5%92%8C%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/:2:4","tags":["Goç¬”è®°"],"title":"Goå˜é‡å’ŒåŸºæœ¬æ•°æ®ç±»å‹","uri":"/2022/06/go%E5%8F%98%E9%87%8F%E5%92%8C%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/"},{"categories":["Goç¬”è®°"],"content":"å­—ç¬¦ä¸²ç±»å‹ï¼ˆstringï¼‰ åŸºæœ¬ä»‹ç» å­—ç¬¦ä¸²å°±æ˜¯ä¸€ä¸²å›ºå®šé•¿åº¦çš„å­—ç¬¦è¿æ¥èµ·æ¥çš„å­—ç¬¦åºåˆ—ã€‚Goçš„å­—ç¬¦ä¸²æ˜¯ç”±å•ä¸ªå­—èŠ‚è¿æ¥èµ·æ¥çš„ã€‚Goè¯­è¨€çš„å­—ç¬¦ä¸²çš„å­—èŠ‚ä½¿ç”¨UTF-8ç¼–ç æ ‡è¯†Unicodeæ–‡æœ¬ ç¤ºä¾‹ var name string // æ˜¾ç¤ºå£°æ˜stringå˜é‡ name = \"Joker\" fmt.Println(name) //Joker address := \"æ·±åœ³\"//éšå¼å£°æ˜stringå˜é‡ fmt.Printf(\"address=%s type=%T\", address, address) //address=æ·±åœ³ type=string å­—ç¬¦ä¸²ç±»å‹çš„ä½¿ç”¨ç»†èŠ‚ Goè¯­è¨€çš„å­—ç¬¦ä¸²çš„å­—èŠ‚ä½¿ç”¨UTF-8ç¼–ç æ ‡è¯†Unicodeæ–‡æœ¬ï¼› å­—ç¬¦ä¸²ä¸€æ—¦èµ‹å€¼äº†ï¼Œå­—ç¬¦ä¸²å°±ä¸èƒ½ä¿®æ”¹äº†ï¼šåœ¨Goä¸­å­—ç¬¦ä¸²æ˜¯ä¸å¯å˜çš„ å­—ç¬¦ä¸²çš„ä¸¤ç§è¡¨ç¤ºå½¢å¼ åŒå¼•å·ï¼Œä¼šè¯†åˆ«è½¬ä¹‰å­—ç¬¦ åå¼•å·ï¼Œä»¥å­—ç¬¦ä¸²çš„åŸç”Ÿå½¢å¼è¾“å‡ºï¼ŒåŒ…æ‹¬æ¢è¡Œå’Œç‰¹æ®Šå­—ç¬¦ï¼Œå¯ä»¥å®ç°é˜²æ­¢æ”»å‡»ã€è¾“å‡ºæºä»£ç ç­‰æ•ˆæœ å­—ç¬¦ä¸²æ‹¼æ¥æ–¹å¼ var str string str = \"hello \" + \"world!\" fmt.Println(str) //hello world! str += \"ok\" //+=ç­‰ä»·äº str = str + \"ok\" fmt.Println(str) //hello world!ok å½“ä¸€è¡Œå­—ç¬¦ä¸²å¤ªé•¿æ—¶ï¼Œéœ€è¦ä½¿ç”¨åˆ°å¤šè¡Œå­—ç¬¦ä¸² str2 := \"hello \" + // ä½¿ç”¨å¤šè¡Œå­—ç¬¦ä¸²ï¼Œ+å·å¿…é¡»åœ¨ç»“å°¾ \"world!\" fmt.Println(str2) //hello world! ","date":"2022å¹´06æœˆ30æ—¥","objectID":"/2022/06/go%E5%8F%98%E9%87%8F%E5%92%8C%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/:2:5","tags":["Goç¬”è®°"],"title":"Goå˜é‡å’ŒåŸºæœ¬æ•°æ®ç±»å‹","uri":"/2022/06/go%E5%8F%98%E9%87%8F%E5%92%8C%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/"},{"categories":["Goç¬”è®°"],"content":"åŸºæœ¬æ•°æ®ç±»å‹é»˜è®¤å€¼ åœ¨Goä¸­ï¼Œæ•°æ®ç±»å‹éƒ½æœ‰ä¸€ä¸ªé»˜è®¤å€¼ï¼Œå½“æ²¡æœ‰èµ‹å€¼æ—¶ï¼Œå°±ä¼šä¿ç•™é»˜è®¤å€¼ï¼Œåœ¨Goä¸­é»˜è®¤å€¼åˆå«é›¶å€¼ã€‚ æ•°æ®ç±»å‹ é»˜è®¤å€¼ æ•´å‹ 0 æµ®ç‚¹å‹ 0 å­—ç¬¦ä¸² \"\" å¸ƒå°”ç±»å‹ false var ( a int b float32 c float64 isMarried bool name string ) // %vï¼šè¡¨ç¤ºæŒ‰ç…§å˜é‡çš„å€¼è¾“å‡º fmt.Printf(\"a=%d,b=%v,c=%v,isMarried=%v,name=%v\\n\", a, b, c, isMarried, name) //è¾“å‡ºç»“æœï¼ša=0,b=0,c=0,isMarried=false,name= ","date":"2022å¹´06æœˆ30æ—¥","objectID":"/2022/06/go%E5%8F%98%E9%87%8F%E5%92%8C%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/:2:6","tags":["Goç¬”è®°"],"title":"Goå˜é‡å’ŒåŸºæœ¬æ•°æ®ç±»å‹","uri":"/2022/06/go%E5%8F%98%E9%87%8F%E5%92%8C%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/"},{"categories":["Goç¬”è®°"],"content":"Goæ”¯æŒCè¯­è¨€é£æ ¼çš„/* */å—æ³¨é‡Šï¼Œä¹Ÿæ”¯æŒC++é£æ ¼çš„//è¡Œæ³¨é‡Šã€‚ è¡Œæ³¨é‡Šæ›´é€šç”¨ï¼Œå—æ³¨é‡Šè¦å‹‡äºé’ˆå¯¹åŒ…çš„è¯¦ç»†è¯´æ˜æˆ–è€…å±è”½å¤§å—çš„ä»£ç ã€‚ ","date":"2022å¹´06æœˆ29æ—¥","objectID":"/2022/06/go%E8%AF%AD%E8%A8%80%E6%B3%A8%E9%87%8A/:0:0","tags":["Goç¬”è®°"],"title":"Goè¯­è¨€æ³¨é‡Š","uri":"/2022/06/go%E8%AF%AD%E8%A8%80%E6%B3%A8%E9%87%8A/"},{"categories":["Goç¬”è®°"],"content":"1ï¼‰è¡Œæ³¨é‡Š æ ¼å¼ï¼š//æ³¨é‡Šæ–‡å­— ç¤ºä¾‹ï¼š fmt.Println(\"Hello World!\")//è¾“å‡ºï¼šHello World! ","date":"2022å¹´06æœˆ29æ—¥","objectID":"/2022/06/go%E8%AF%AD%E8%A8%80%E6%B3%A8%E9%87%8A/:0:1","tags":["Goç¬”è®°"],"title":"Goè¯­è¨€æ³¨é‡Š","uri":"/2022/06/go%E8%AF%AD%E8%A8%80%E6%B3%A8%E9%87%8A/"},{"categories":["Goç¬”è®°"],"content":"2ï¼‰å—æ³¨é‡Šï¼ˆå¤šè¡Œæ³¨é‡Šï¼‰ æ ¼å¼ï¼š/* æ³¨é‡Šæ–‡å­— */ ç¤ºä¾‹ï¼š /* Multipart/Urlencoded è¡¨å• ä¸¤ä¸ªå‚æ•°éƒ½ä¼ ï¼š curl -v --form message=msg --form nick=nick2 http://localhost:8080/v1/form_post ç»“æœï¼š{\"message\":\"msg\",\"nick\":\"nick2\",\"status\":\"posted\"} åªä¼ ä¸€ä¸ªå‚æ•°ï¼Œå¦ä¸€ä¸ªä½¿ç”¨é»˜è®¤å€¼ï¼š curl -v --form message=msg http://localhost:8080/v1/form_post ç»“æœï¼š{\"message\":\"msg\",\"nick\":\"anonymous\",\"status\":\"posted\"} */ v1.POST(\"/form_post\", fast_started.Form_post) ","date":"2022å¹´06æœˆ29æ—¥","objectID":"/2022/06/go%E8%AF%AD%E8%A8%80%E6%B3%A8%E9%87%8A/:0:2","tags":["Goç¬”è®°"],"title":"Goè¯­è¨€æ³¨é‡Š","uri":"/2022/06/go%E8%AF%AD%E8%A8%80%E6%B3%A8%E9%87%8A/"},{"categories":["Goç¬”è®°"],"content":"ä½¿ç”¨ç»†èŠ‚ å¯¹äºè¡Œæ³¨é‡Šå’Œå—æ³¨é‡Šï¼Œè¢«æ³¨é‡Šçš„æ–‡å­—ï¼Œä¸ä¼šè¢«Goç¼–è¯‘å™¨è§£é‡Šæ‰§è¡Œ å—æ³¨é‡Šé‡Œé¢ä¸å…è®¸æœ‰å—æ³¨é‡ŠåµŒå¥— ","date":"2022å¹´06æœˆ29æ—¥","objectID":"/2022/06/go%E8%AF%AD%E8%A8%80%E6%B3%A8%E9%87%8A/:0:3","tags":["Goç¬”è®°"],"title":"Goè¯­è¨€æ³¨é‡Š","uri":"/2022/06/go%E8%AF%AD%E8%A8%80%E6%B3%A8%E9%87%8A/"},{"categories":["Goç¬”è®°"],"content":"Goå¸¸ç”¨çš„è½¬ä¹‰å­—ç¬¦ï¼ˆescape charï¼‰ \\t : ä¸€ä¸ªåˆ¶è¡¨ä½ï¼Œå®ç°å¯¹é½çš„åŠŸèƒ½ \\n : æ¢è¡Œç¬¦ \\\\ : ä¸€ä¸ª\\ \\\" : ä¸€ä¸ª\" \\r : ä¸€ä¸ªå›è½¦ ï¼Œä»å½“å‰è¡Œçš„æœ€å‰é¢å¼€å§‹è¾“å‡ºï¼Œè¦†ç›–æ‰ä»¥å‰å†…å®¹ ","date":"2022å¹´06æœˆ29æ—¥","objectID":"/2022/06/go%E8%AF%AD%E8%A8%80%E8%BD%AC%E4%B9%89%E5%AD%97%E7%AC%A6/:1:0","tags":["Goç¬”è®°"],"title":"Goè¯­è¨€è½¬ä¹‰å­—ç¬¦","uri":"/2022/06/go%E8%AF%AD%E8%A8%80%E8%BD%AC%E4%B9%89%E5%AD%97%E7%AC%A6/"},{"categories":["Goç¬”è®°"],"content":"ç¤ºä¾‹ package escaptechar import ( \"fmt\" \"testing\" ) func TestEscapteChar(t *testing.T) { // \\tåˆ¶è¡¨ç¬¦ fmt.Println(\"tom\\tjack\") //tom jack // \\næ¢è¡Œ fmt.Println(\"hello\\nword\") // \\\\ fmt.Println(\"c:\\\\Users\\\\Administrator\\\\Desktop\\\\Goè¯­è¨€\") //c:\\Users\\Administrator\\Desktop\\Goè¯­è¨€ // \\\" fmt.Println(\"Joker say \\\"Welcome to China!\\\"\") // Joker say \"Welcome to China!\" // \\rå›è½¦ï¼Œä»å½“å‰è¡Œçš„æœ€å‰é¢å¼€å§‹è¾“å‡ºï¼Œè¦†ç›–æ‰ä»¥å‰çš„å†…å®¹ fmt.Println(\"å¤©é¾™å…«éƒ¨é›ªå±±é£ç‹\\rå¼ é£\") //å¼ é£ } === RUN TestEscapteChar tom jack hello word c:\\Users\\Administrator\\Desktop\\Goè¯­è¨€ Joker say \"Welcome to China!\" å¼ é£ --- PASS: TestEscapteChar (0.00s) ","date":"2022å¹´06æœˆ29æ—¥","objectID":"/2022/06/go%E8%AF%AD%E8%A8%80%E8%BD%AC%E4%B9%89%E5%AD%97%E7%AC%A6/:1:1","tags":["Goç¬”è®°"],"title":"Goè¯­è¨€è½¬ä¹‰å­—ç¬¦","uri":"/2022/06/go%E8%AF%AD%E8%A8%80%E8%BD%AC%E4%B9%89%E5%AD%97%E7%AC%A6/"},{"categories":["Goç¬”è®°"],"content":" Goæºæ–‡ä»¶ä»¥goä¸ºæ‰©å±•å Goåº”ç”¨ç¨‹åºçš„æ‰§è¡Œå…¥å£æ˜¯main()æ–¹æ³• Goè¯­è¨€ä¸¥æ ¼åŒºåˆ†å¤§å°å†™ Goæ–¹æ³•ç”±ä¸€æ¡æ¡è¯­å¥æ„æˆï¼Œæ¯ä¸ªè¯­å¥åä¸éœ€è¦åˆ†å·ï¼ˆGoè¯­è¨€ä¼šåœ¨æ¯è¡Œåè‡ªåŠ¨åŠ åˆ†å·ï¼‰ï¼Œè¿™ä¹Ÿä½“ç°äº†Golangçš„ç®€æ´æ€§ Goç¼–è¯‘å™¨æ˜¯ä¸€è¡Œè¡Œè¿›è¡Œç¼–è¯‘çš„ï¼Œå› æ­¤æˆ‘ä»¬ä¸€è¡Œå°±å†™ä¸€æ¡è¯­å¥ï¼Œä¸èƒ½æŠŠå¤šæ¡è¯­å¥å†™åœ¨åŒä¸€ä¸ªï¼Œå¦åˆ™æŠ¥é”™ Goè¯­è¨€å®šä¹‰çš„å˜é‡æˆ–è€…importçš„åŒ…ï¼Œå¦‚æœæ²¡æœ‰ä½¿ç”¨åˆ°ï¼Œä»£ç ä¸èƒ½ç¼–è¯‘é€šè¿‡ å¤§æ‹¬å·éƒ½æ˜¯æˆå¯¹å‡ºç°çš„ï¼Œç¼ºä¸€ä¸å¯ ","date":"2022å¹´06æœˆ29æ—¥","objectID":"/2022/06/go%E7%A8%8B%E5%BA%8F%E7%BC%96%E5%86%99%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9/:0:0","tags":["Goç¬”è®°"],"title":"Goç¨‹åºç¼–å†™æ³¨æ„äº‹é¡¹","uri":"/2022/06/go%E7%A8%8B%E5%BA%8F%E7%BC%96%E5%86%99%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9/"},{"categories":["Goç¬”è®°"],"content":"å¯¹æºç ç¼–è¯‘åï¼Œå†æ‰§è¡Œ Goçš„æ‰§è¡Œæµç¨‹å¦‚ä¸‹ ","date":"2022å¹´06æœˆ29æ—¥","objectID":"/2022/06/go%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B%E5%88%86%E6%9E%90/:1:0","tags":["Goç¬”è®°"],"title":"Goæ‰§è¡Œæµç¨‹åˆ†æ","uri":"/2022/06/go%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B%E5%88%86%E6%9E%90/"},{"categories":["Goç¬”è®°"],"content":"å¯¹æºç ç›´æ¥æ‰§è¡Œ ä½¿ç”¨ go run æºç è¿›è¡Œæ‰§è¡Œ ","date":"2022å¹´06æœˆ29æ—¥","objectID":"/2022/06/go%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B%E5%88%86%E6%9E%90/:2:0","tags":["Goç¬”è®°"],"title":"Goæ‰§è¡Œæµç¨‹åˆ†æ","uri":"/2022/06/go%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B%E5%88%86%E6%9E%90/"},{"categories":["Goç¬”è®°"],"content":"ä¸¤ç§æ‰§è¡Œæµç¨‹çš„æ–¹å¼åŒºåˆ« å¦‚æœæˆ‘ä»¬å…ˆç¼–è¯‘ç”Ÿæˆäº†å¯æ‰§è¡Œæ–‡ä»¶ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥å°†è¯¥å¯æ‰§è¡Œæ–‡ä»¶æ‹·è´åˆ°æ²¡æœ‰goå¼€å‘ç¯å¢ƒçš„æœºå™¨ä¸Šï¼Œä»ç„¶å¯ä»¥è¿è¡Œ å¦‚æœæˆ‘ä»¬æ˜¯ç›´æ¥go run æºç ï¼Œé‚£ä¹ˆå¦‚æœè¦åœ¨å¦å¤–ä¸€ä¸ªæœºå™¨ä¸Šè¿™ä¹ˆè¿è¡Œï¼Œä¹Ÿéœ€è¦goå¼€å‘ç¯å¢ƒï¼Œå¦åˆ™æ— æ³•æ‰§è¡Œ åœ¨ç¼–è¯‘æ—¶ï¼Œç¼–è¯‘å™¨ä¼šå°†ç¨‹åºè¿è¡Œä¾èµ–çš„åº“æ–‡ä»¶åŒ…å«åœ¨å¯æ‰§è¡Œæ–‡ä»¶ä¸­ï¼Œæ‰€ä»¥ï¼Œå¯æ‰§è¡Œæ–‡ä»¶å˜å¤§äº†å¾ˆå¤š ","date":"2022å¹´06æœˆ29æ—¥","objectID":"/2022/06/go%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B%E5%88%86%E6%9E%90/:3:0","tags":["Goç¬”è®°"],"title":"Goæ‰§è¡Œæµç¨‹åˆ†æ","uri":"/2022/06/go%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B%E5%88%86%E6%9E%90/"},{"categories":["Python"],"content":"ä¸€ã€ä¸ºä»€ä¹ˆè¦é‡æ„ ä¹‹å‰çš„æ–¹å¼ï¼Œæ¯”è¾ƒlow äºŒã€Dynaconfæ˜¯ä»€ä¹ˆ Dynaconf æ˜¯ä¸€ä¸ªæ—¨åœ¨æˆä¸º Python ä¸­ç®¡ç†é…ç½®çš„æœ€ä½³é€‰æ‹©çš„åº“ã€‚ å®ƒå¯ä»¥ä»å„ç§æ¥æºè¯»å–è®¾ç½®ï¼ŒåŒ…æ‹¬ç¯å¢ƒå˜é‡ã€æ–‡ä»¶ã€é…ç½®æœåŠ¡å™¨ã€ä¿é™©åº“ç­‰ã€‚ å®ƒé€‚ç”¨äºä»»ä½•ç±»å‹çš„ Python ç¨‹åºï¼ŒåŒ…æ‹¬ Flask å’Œ Django æ‰©å±•ã€‚ å®ƒæ˜¯é«˜åº¦å¯å®šåˆ¶ä¸”ç»è¿‡å¤§é‡æµ‹è¯•çš„ã€‚ ä¸‰ã€æ€ä¹ˆä½¿ç”¨Dynaconf ","date":"2022å¹´04æœˆ06æ—¥","objectID":"/2022/04/%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E9%87%8D%E6%9E%84/:0:0","tags":["Python"],"title":"é…ç½®æ–‡ä»¶é‡æ„","uri":"/2022/04/%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E9%87%8D%E6%9E%84/"},{"categories":["Python"],"content":"3.1ã€å®‰è£…Dynaconf pip install dynaconf ","date":"2022å¹´04æœˆ06æ—¥","objectID":"/2022/04/%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E9%87%8D%E6%9E%84/:1:0","tags":["Python"],"title":"é…ç½®æ–‡ä»¶é‡æ„","uri":"/2022/04/%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E9%87%8D%E6%9E%84/"},{"categories":["Python"],"content":"3.2ã€Dynaconfåˆå§‹åŒ–æ–‡æ¡£è¯´æ˜ ","date":"2022å¹´04æœˆ06æ—¥","objectID":"/2022/04/%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E9%87%8D%E6%9E%84/:2:0","tags":["Python"],"title":"é…ç½®æ–‡ä»¶é‡æ„","uri":"/2022/04/%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E9%87%8D%E6%9E%84/"},{"categories":["Python"],"content":"3.3ã€åˆå§‹åŒ–ä¸€ä¸ªé…ç½® dynaconf init -f toml è‡ªåŠ¨ç”Ÿæˆæ–‡ä»¶â†“ ","date":"2022å¹´04æœˆ06æ—¥","objectID":"/2022/04/%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E9%87%8D%E6%9E%84/:3:0","tags":["Python"],"title":"é…ç½®æ–‡ä»¶é‡æ„","uri":"/2022/04/%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E9%87%8D%E6%9E%84/"},{"categories":["Python"],"content":"3.4ã€æ–‡ä»¶è¯´æ˜ .gitignore: git è¦å¿½ç•¥çš„æ–‡ä»¶æ¨¡å¼ # Ignore dynaconf secret files .secrets.* .secrets.toml: å¯†ç å’Œä»¤ç‰Œç­‰æ•æ„Ÿæ•°æ®(å¯é€‰) TOKEN = xxxx config.py: å¯¼å…¥è®¾ç½®å¯¹è±¡çš„åœ°æ–¹(å¿…éœ€çš„) from dynaconf import Dynaconf settings = Dynaconf( envvar_prefix=\"DYNACONF\", settings_files=['settings.toml', '.secrets.toml'], # åœ¨é¡¹ç›®ä¸­æ­¤åˆ—è¡¨å…ƒç´ è¦å¡«å†™æ–‡ä»¶åŸºäºé¡¹ç›®çš„ç›¸å¯¹è·¯å¾„ environments=True, ENV_FOR_DYNACONF=\"develop\" # ä¿®æ”¹é»˜è®¤ä½¿ç”¨çš„ç¯å¢ƒï¼Œé»˜è®¤ä¸ºï¼š[development] ) # `envvar_prefix` = export envvars with `export DYNACONF_FOO=bar`. # `settings_files` = Load these files in the order. settings.toml: åº”ç”¨setttings(å¯é€‰) åˆ†ä¸ºä¸‰éƒ¨åˆ†ï¼š[default] [develop] [master] é€šè¿‡è®¾ç½®ç¯å¢ƒå˜é‡ ã€ENV_FOR_DYNACONFã€‘è¿›è¡Œæ§åˆ¶ [develop] [master] å¦‚æœæ²¡æœ‰è®¾ç½®ç¯å¢ƒå˜é‡ï¼Œåˆ™æ ¹æ® config.pyæ–‡ä»¶ä¸­è®¾ç½®çš„é»˜è®¤ä½¿ç”¨ç¯å¢ƒè¿›è¡Œä½¿ç”¨ [default] ALGORITHM = \"HS256\" ACCESS_TOKEN_EXPIRE_MINUTES = 44640 # ä¸€ä¸ªæœˆè¿‡æœŸ SQLALCHEMY_DATABASE_URL_1 = \"@format mysql+pymysql://{this.DB_USER}:{this.DB_PASSWORD}@{this.DB_HOST}:3306/xxx?charset=utf8\" SQLALCHEMY_DATABASE_URL_2 = \"@format mysql+pymysql://{this.DB_USER}:{this.DB_PASSWORD}@{this.DB_HOST}:3306/xxx_ddd?charset=utf8\" SQLALCHEMY_DATABASE_URL_3 = \"@format mysql+pymysql://{this.DB_USER}:{this.DB_PASSWORD}@{this.DB_HOST}:3306/xxx_lll?charset=utf8\" [develop] BASE_URL = \"https://fastapi.debug.com.hk/\" SECRET_KEY = \"xxxxxx\" DB_HOST = \"192.00.00.00\" DB_USER = \"xxxx\" DB_PASSWORD = \"xxxxxxxx\" REDIS_HOST = '192.22.22.22' REDIS_PORT = 6380 [master] BASE_URL = \"https://fastapi.com.hk/\" SECRET_KEY = \"zzzzzzzzz\" DB_HOST = \"192.00.1.12\" DB_USER = \"eeee\" DB_PASSWORD = \"ddxrrr\" REDIS_HOST = '192.00.00.100' REDIS_PORT = 6381 ","date":"2022å¹´04æœˆ06æ—¥","objectID":"/2022/04/%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E9%87%8D%E6%9E%84/:4:0","tags":["Python"],"title":"é…ç½®æ–‡ä»¶é‡æ„","uri":"/2022/04/%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E9%87%8D%E6%9E%84/"},{"categories":["Python"],"content":"3.5ã€ç®€å•ä½¿ç”¨ ","date":"2022å¹´04æœˆ06æ—¥","objectID":"/2022/04/%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E9%87%8D%E6%9E%84/:5:0","tags":["Python"],"title":"é…ç½®æ–‡ä»¶é‡æ„","uri":"/2022/04/%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E9%87%8D%E6%9E%84/"},{"categories":["Python"],"content":"3.5.1. å¯¼åŒ… from config.config import settings ","date":"2022å¹´04æœˆ06æ—¥","objectID":"/2022/04/%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E9%87%8D%E6%9E%84/:5:1","tags":["Python"],"title":"é…ç½®æ–‡ä»¶é‡æ„","uri":"/2022/04/%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E9%87%8D%E6%9E%84/"},{"categories":["Python"],"content":"3.5.2. è·å–é…ç½®é¡¹ # default print(f\"{'*'*10}==\u003e\u003edefault\") print(f\"{settings.ALGORITHM=}\") print(f\"{settings.ACCESS_TOKEN_EXPIRE_MINUTES=}\") # ç¯å¢ƒåŒºåˆ† print(f\"{'*'*10}==\u003e\u003eç¯å¢ƒåŒºåˆ†: {settings.ENV_FOR_DYNACONF}\") print(f\"{settings.BASE_URL=}\") print(f\"{settings.SECRET_KEY=}\") print(f\"{settings.DB_HOST=}\") print(f\"{settings.DB_USER=}\") print(f\"{settings.DB_PASSWORD=}\") print(f\"{settings.REDIS_HOST=}\") print(f\"{settings.REDIS_PORT=}\") # åœ¨defaultä¸­ä½¿ç”¨é€šè¿‡ç¯å¢ƒåŒºåˆ†çš„å˜é‡ print(f\"{'*'*10}==\u003e\u003eåœ¨defaultä¸­ä½¿ç”¨é€šè¿‡ç¯å¢ƒåŒºåˆ†çš„å˜é‡\") print(f\"{settings.SQLALCHEMY_DATABASE_URL_1=}\") print(f\"{settings.SQLALCHEMY_DATABASE_URL_2=}\") print(f\"{settings.SQLALCHEMY_DATABASE_URL_3=}\") 1ï¼‰ä½¿ç”¨é»˜è®¤æƒ…å†µï¼ˆæˆ–è€… ENV_FOR_DYNACONF=developï¼‰çš„é…ç½®é¡¹ 2ï¼‰ä½¿ç”¨ ENV_FOR_DYNACONF=masterçš„è‡ªå®šä¹‰é…ç½®é¡¹ â‘  è®¾ç½®ç¯å¢ƒå˜é‡ export ENV_FOR_DYNACONF=master â‘¡ ç»“æœ ","date":"2022å¹´04æœˆ06æ—¥","objectID":"/2022/04/%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E9%87%8D%E6%9E%84/:5:2","tags":["Python"],"title":"é…ç½®æ–‡ä»¶é‡æ„","uri":"/2022/04/%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E9%87%8D%E6%9E%84/"},{"categories":["Python"],"content":"3.6ã€ä½¿ç”¨ç³»ç»Ÿç¯å¢ƒå˜é‡å€¼ ","date":"2022å¹´04æœˆ06æ—¥","objectID":"/2022/04/%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E9%87%8D%E6%9E%84/:6:0","tags":["Python"],"title":"é…ç½®æ–‡ä»¶é‡æ„","uri":"/2022/04/%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E9%87%8D%E6%9E%84/"},{"categories":["Python"],"content":"3.6.1. è‡ªå®šä¹‰ç³»ç»Ÿç¯å¢ƒå˜é‡å‰ç¼€ è®¾ç½®çš„ç³»ç»Ÿç¯å¢ƒå˜é‡éœ€è¦ä»¥æŒ‡å®šçš„å‰ç¼€å‘½å settings = Dynaconf( envvar_prefix=\"DYNACONF\", # è¯»å–ç³»ç»Ÿç¯å¢ƒå˜é‡çš„å‰ç¼€ï¼ˆå¯è‡ªå®šä¹‰ï¼‰ settings_files=['settings.toml', '.secrets.toml'], environments=True, ENV_FOR_DYNACONF=\"develop\" # ä¿®æ”¹é»˜è®¤ä½¿ç”¨çš„ç¯å¢ƒï¼Œé»˜è®¤ä¸ºï¼š[development] ) ","date":"2022å¹´04æœˆ06æ—¥","objectID":"/2022/04/%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E9%87%8D%E6%9E%84/:6:1","tags":["Python"],"title":"é…ç½®æ–‡ä»¶é‡æ„","uri":"/2022/04/%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E9%87%8D%E6%9E%84/"},{"categories":["Python"],"content":"3.6.2. è®¾ç½®ç¯å¢ƒå˜é‡ export DYNACONF_USER=Desire export DYNACONF_PWD=123456 export DYNACONF_ACCESS_TOKEN_EXPIRE_MINUTES=60 # è¿™ä¸€ä¸ªç¯å¢ƒå˜é‡å’Œé…ç½®æ–‡ä»¶ä¸­çš„åç§°ã€ACCESS_TOKEN_EXPIRE_MINUTESã€‘ä¸€æ · ","date":"2022å¹´04æœˆ06æ—¥","objectID":"/2022/04/%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E9%87%8D%E6%9E%84/:6:2","tags":["Python"],"title":"é…ç½®æ–‡ä»¶é‡æ„","uri":"/2022/04/%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E9%87%8D%E6%9E%84/"},{"categories":["Python"],"content":"3.6.3. è¯»å–ç³»ç»Ÿç¯å¢ƒå˜é‡ æŒ‰ç…§æŒ‡å®šçš„å‰ç¼€æ·»åŠ ç³»ç»Ÿç¯å¢ƒå˜é‡ï¼Œè¯»å–çš„æ—¶å€™ç›´æ¥å¿½ç•¥å‰ç¼€å³å¯ å¦‚æœè¯»å–ä¸å­˜åœ¨çš„ç³»ç»Ÿç¯å¢ƒå˜é‡åˆ™ä¼šæŠ›å‡ºå¼‚å¸¸ å¦‚æœè®¾ç½®çš„ç³»ç»Ÿç¯å¢ƒå˜é‡å’Œé…ç½®æ–‡ä»¶ä¸­çš„åŒåï¼Œåˆ™ä¼šä¼˜å…ˆè¯»å–ç³»ç»Ÿç¯å¢ƒå˜é‡çš„å€¼ print(f\"{settings.USER=}\") print(f\"{settings.PWD=}\") print(f\"{settings.ACCESS_TOKEN_EXPIRE_MINUTES=}\") å››ã€é¡¹ç›®ä¸­åº”ç”¨ ","date":"2022å¹´04æœˆ06æ—¥","objectID":"/2022/04/%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E9%87%8D%E6%9E%84/:6:3","tags":["Python"],"title":"é…ç½®æ–‡ä»¶é‡æ„","uri":"/2022/04/%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E9%87%8D%E6%9E%84/"},{"categories":["Python"],"content":"4.1ã€é…ç½®æ–‡ä»¶è·¯å¾„ç»“æ„ï¼ˆfast_api/app/core/configï¼‰ ","date":"2022å¹´04æœˆ06æ—¥","objectID":"/2022/04/%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E9%87%8D%E6%9E%84/:7:0","tags":["Python"],"title":"é…ç½®æ–‡ä»¶é‡æ„","uri":"/2022/04/%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E9%87%8D%E6%9E%84/"},{"categories":["Python"],"content":"4.2ã€config.pyé…ç½®é¡¹ä¸­ä¿®æ”¹ settings_filesä½¿ç”¨åŸºäºé¡¹ç›®çš„ç›¸å¯¹è·¯å¾„ å¦‚æœæ­¤å¤„ç›´æ¥ä½¿ç”¨ settings_files=['settings.toml','.secrets.toml']åœ¨ fast_api/app/core/configæ–‡ä»¶å¤¹ä¹‹å¤–çš„æ¨¡å—ä¸­ä½¿ç”¨åˆ™ä¼šæŠ¥é”™æ‰¾ä¸åˆ°é…ç½®æ–‡ä»¶ä½ç½® ","date":"2022å¹´04æœˆ06æ—¥","objectID":"/2022/04/%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E9%87%8D%E6%9E%84/:8:0","tags":["Python"],"title":"é…ç½®æ–‡ä»¶é‡æ„","uri":"/2022/04/%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E9%87%8D%E6%9E%84/"},{"categories":["Python"],"content":"4.3ã€æ·»åŠ  __init__.pyæ–‡ä»¶ from app.core.config.config import settings åœ¨ __init__.pyæ–‡ä»¶ä¸­å°±ä¸€è¡Œå¯¼åŒ…è¯­å¥ï¼Œé‚£ä¹ˆæˆ‘ä¸ºä»€ä¹ˆè¦å¤šæ­¤ä¸€ä¸¾å‘¢ï¼Œæ˜¯ä¸ºäº†åœ¨è¿›è¡Œé…ç½®é¡¹å¯¼åŒ…çš„æ—¶å€™å¯ä»¥å°‘å¯¼ä¸€å±‚ï¼Œè¿™æ ·å¯¼åŒ…çœ‹èµ·æ¥ä¹Ÿæ¯”è¾ƒæ•´æ´ ","date":"2022å¹´04æœˆ06æ—¥","objectID":"/2022/04/%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E9%87%8D%E6%9E%84/:9:0","tags":["Python"],"title":"é…ç½®æ–‡ä»¶é‡æ„","uri":"/2022/04/%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E9%87%8D%E6%9E%84/"},{"categories":["Python"],"content":"æ·»åŠ ä¹‹å‰ä½¿ç”¨é…ç½®æ–‡ä»¶ # å¯¼åŒ… from app.core.config.config import settings ","date":"2022å¹´04æœˆ06æ—¥","objectID":"/2022/04/%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E9%87%8D%E6%9E%84/:9:1","tags":["Python"],"title":"é…ç½®æ–‡ä»¶é‡æ„","uri":"/2022/04/%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E9%87%8D%E6%9E%84/"},{"categories":["Python"],"content":"æ·»åŠ ä¹‹åä½¿ç”¨é…ç½®æ–‡ä»¶ # å¯¼åŒ… from app.core.config import settings ","date":"2022å¹´04æœˆ06æ—¥","objectID":"/2022/04/%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E9%87%8D%E6%9E%84/:9:2","tags":["Python"],"title":"é…ç½®æ–‡ä»¶é‡æ„","uri":"/2022/04/%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E9%87%8D%E6%9E%84/"},{"categories":["Python"],"content":"4.4ã€æ–°å¢é…ç½®é¡¹ï¼ˆæœ‰ä»£ç å—çš„é…ç½®é¡¹ï¼‰ å¯ä»¥æ”¾åœ¨ __init__.pyæ–‡ä»¶ä¸­ï¼Œä¹Ÿå¯ä»¥æ”¾åœ¨ settings.pyæ–‡ä»¶ä¸­ã€‚ # é¡¹ç›®ç»å¯¹è·¯å¾„é…ç½®é¡¹ settings.BASE_APP_DIR = os.path.dirname(os.path.dirname(os.path.dirname(__file__))) # or ä¹Ÿå¯ä»¥é€šè¿‡__setattr__()è¿›è¡Œæ·»åŠ  # settings.__setattr__(\"BASE_APP_DIR\", os.path.dirname(os.path.dirname(os.path.dirname(__file__)))) # or é€šè¿‡å­—å…¸æ·»åŠ é”®å€¼å¯¹çš„æ–¹å¼è¿›è¡Œæ·»åŠ  # settings[\"BASE_APP_DIR\"] = os.path.dirname(os.path.dirname(os.path.dirname(__file__))) é™„ä»¶ ã€Dynaconfå®˜æ–¹æ–‡æ¡£ã€‘ ","date":"2022å¹´04æœˆ06æ—¥","objectID":"/2022/04/%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E9%87%8D%E6%9E%84/:10:0","tags":["Python"],"title":"é…ç½®æ–‡ä»¶é‡æ„","uri":"/2022/04/%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E9%87%8D%E6%9E%84/"},{"categories":["Python"],"content":"ä¹‹å‰çš„å‘½ä»¤è¡Œç¼–å†™æ–¹å¼ ","date":"2022å¹´03æœˆ08æ—¥","objectID":"/2022/03/%E7%AE%80%E6%B4%81%E6%98%93%E7%94%A8%E7%9A%84%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%AE%9E%E8%B7%B5/:1:0","tags":["Allure","Python"],"title":"ç®€æ´æ˜“ç”¨çš„å‘½ä»¤è¡Œå®è·µ","uri":"/2022/03/%E7%AE%80%E6%B4%81%E6%98%93%E7%94%A8%E7%9A%84%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%AE%9E%E8%B7%B5/"},{"categories":["Python"],"content":"getoptå®ç°æ–¹å¼ï¼ˆä¸è®¨è®ºå…·ä½“ä»£ç å®ç°ï¼‰ğŸ‘‡ğŸ» class ALSRun(object): def __init__(self, in_file, out_file=None): self.csv = in_file self.out_file = out_file def recommend(self): ...... if not self.out_file: self.out_file = f'{time.strftime(\"%Y%m%d%H%M%S\")}.csv' nrecommendations.coalesce(1).write.csv(self.out_file) print(\"ğŸ—£æ‰§è¡Œå®Œæ¯•ğŸ¤ğŸ¤ğŸ¤\") if __name__ == '__main__': # è·å–æ–‡ä»¶å file_name = sys.argv[0] usage = f'ç”¨æ³•ï¼š{file_name} -i \u003cinputfile\u003e -o \u003coutputfile\u003e\\nå‚æ•°è§£é‡Š \\n\\t-i|--ifile: æ‰§è¡Œï¼ˆå¿…å¡«ï¼‰\\n\\t\u003cinputfile\u003e: è¡¨ç¤ºè¦æ‰§è¡Œçš„csvæ–‡ä»¶\\n\\t-o|--ofile:è¾“å‡ºï¼ˆéå¿…å¡«ï¼‰ \\n\\t\u003coutputfile\u003e: è¡¨ç¤ºè¦è¾“å‡ºçš„csvæ–‡ä»¶,é»˜è®¤ä»¥å½“å‰æ—¶é—´ä¸ºæ–‡ä»¶å' try: opts, args = getopt.getopt(sys.argv[1:], \"hi:o:\", [\"ifile=\", \"ofile=\"]) except getopt.GetoptError: print(f'{file_name} -i \u003cinputfile\u003e -o \u003coutputfile\u003e') sys.exit(2) inputfile = None outputfile = None if len(opts) == 0: print(usage) sys.exit() for opt, arg in opts: if opt == '-h': print(usage) sys.exit() elif opt in (\"-i\", \"--ifile\"): inputfile = arg elif opt in (\"-o\", \"--ofile\"): outputfile = arg if inputfile.endswith(\".csv\") and (outputfile is None or outputfile.endswith(\".csv\")): print(\"==========å¼€å§‹æ‰§è¡ŒALS==========\") als = ALSRun(in_file=inputfile, out_file=outputfile) als.recommend() else: print(\"é”™è¯¯çš„ä¼ å‚ï¼Œè¯·çœ‹å¦‚ä¸‹ç”¨æ³•â†“\") print(usage) ","date":"2022å¹´03æœˆ08æ—¥","objectID":"/2022/03/%E7%AE%80%E6%B4%81%E6%98%93%E7%94%A8%E7%9A%84%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%AE%9E%E8%B7%B5/:1:1","tags":["Allure","Python"],"title":"ç®€æ´æ˜“ç”¨çš„å‘½ä»¤è¡Œå®è·µ","uri":"/2022/03/%E7%AE%80%E6%B4%81%E6%98%93%E7%94%A8%E7%9A%84%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%AE%9E%E8%B7%B5/"},{"categories":["Python"],"content":"ä¸è¶³ä¹‹å¤„ å¤ªç¹çï¼Œä¸ç®€æ´ï¼ˆä»…ä»…å°±æ˜¯ä¸ºäº†å®ç°ä¸€ä¸ª python3 100als.py -i article.csv -o t.csvå‘½ä»¤å°±è¦å¤šå†™20+è¡Œï¼‰ ä¸æ˜“æ‡‚ï¼ˆå•¥ç©æ„å„¿ï¼Œè¿‡æ®µæ—¶é—´å†çœ‹å°±è´¹åŠ²äº†ï¼‰ å¦‚ä½•è§£å†³å‘½ä»¤è¡Œçš„é—®é¢˜å‘¢ï¼Ÿ ","date":"2022å¹´03æœˆ08æ—¥","objectID":"/2022/03/%E7%AE%80%E6%B4%81%E6%98%93%E7%94%A8%E7%9A%84%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%AE%9E%E8%B7%B5/:1:2","tags":["Allure","Python"],"title":"ç®€æ´æ˜“ç”¨çš„å‘½ä»¤è¡Œå®è·µ","uri":"/2022/03/%E7%AE%80%E6%B4%81%E6%98%93%E7%94%A8%E7%9A%84%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%AE%9E%E8%B7%B5/"},{"categories":["Python"],"content":"ä½¿ç”¨Clickå¤„ç†å‘½ä»¤è¡Œ ","date":"2022å¹´03æœˆ08æ—¥","objectID":"/2022/03/%E7%AE%80%E6%B4%81%E6%98%93%E7%94%A8%E7%9A%84%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%AE%9E%E8%B7%B5/:2:0","tags":["Allure","Python"],"title":"ç®€æ´æ˜“ç”¨çš„å‘½ä»¤è¡Œå®è·µ","uri":"/2022/03/%E7%AE%80%E6%B4%81%E6%98%93%E7%94%A8%E7%9A%84%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%AE%9E%E8%B7%B5/"},{"categories":["Python"],"content":"ä»€ä¹ˆæ˜¯Click Clickæ˜¯ä¸€ä¸ªPythonåŒ…ï¼Œç”¨äºä»¥å¯ç»„åˆçš„æ–¹å¼ä½¿ç”¨å°½å¯èƒ½å°‘çš„ä»£ç åˆ›å»ºæ¼‚äº®çš„å‘½ä»¤è¡Œç•Œé¢ï¼Œæ˜¯ å‘½ä»¤è¡Œç•Œé¢åˆ›å»ºå·¥å…·ã€æ˜¯é«˜åº¦å¯é…ç½®çš„ï¼Œä½†å¸¦æœ‰å¼€ç®±å³ç”¨çš„åˆç†é»˜è®¤å€¼ã€‚ å®ƒæ—¨åœ¨ä½¿ç¼–å†™å‘½ä»¤è¡Œå·¥å…·çš„è¿‡ç¨‹å˜å¾—å¿«é€Ÿè€Œæœ‰è¶£ï¼ŒåŒæ—¶è¿˜é˜²æ­¢å› æ— æ³•å®ç°é¢„æœŸçš„ CLI API è€Œå¯¼è‡´çš„ä»»ä½•æŒ«è´¥æ„Ÿã€‚ ","date":"2022å¹´03æœˆ08æ—¥","objectID":"/2022/03/%E7%AE%80%E6%B4%81%E6%98%93%E7%94%A8%E7%9A%84%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%AE%9E%E8%B7%B5/:2:1","tags":["Allure","Python"],"title":"ç®€æ´æ˜“ç”¨çš„å‘½ä»¤è¡Œå®è·µ","uri":"/2022/03/%E7%AE%80%E6%B4%81%E6%98%93%E7%94%A8%E7%9A%84%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%AE%9E%E8%B7%B5/"},{"categories":["Python"],"content":"Clickçš„ä¼˜ç‚¹ å‘½ä»¤çš„ä»»æ„åµŒå¥— è‡ªåŠ¨å¸®åŠ©é¡µé¢ç”Ÿæˆ æ”¯æŒåœ¨è¿è¡Œæ—¶å»¶è¿ŸåŠ è½½å­å‘½ä»¤ ","date":"2022å¹´03æœˆ08æ—¥","objectID":"/2022/03/%E7%AE%80%E6%B4%81%E6%98%93%E7%94%A8%E7%9A%84%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%AE%9E%E8%B7%B5/:2:2","tags":["Allure","Python"],"title":"ç®€æ´æ˜“ç”¨çš„å‘½ä»¤è¡Œå®è·µ","uri":"/2022/03/%E7%AE%80%E6%B4%81%E6%98%93%E7%94%A8%E7%9A%84%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%AE%9E%E8%B7%B5/"},{"categories":["Python"],"content":"Clickå®‰è£… pip install click ","date":"2022å¹´03æœˆ08æ—¥","objectID":"/2022/03/%E7%AE%80%E6%B4%81%E6%98%93%E7%94%A8%E7%9A%84%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%AE%9E%E8%B7%B5/:2:3","tags":["Allure","Python"],"title":"ç®€æ´æ˜“ç”¨çš„å‘½ä»¤è¡Œå®è·µ","uri":"/2022/03/%E7%AE%80%E6%B4%81%E6%98%93%E7%94%A8%E7%9A%84%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%AE%9E%E8%B7%B5/"},{"categories":["Python"],"content":"ç®€å•çš„ä¾‹å­ import click @click.command() @click.option('--count', default=1, help='Number of greetings.') @click.option('--name', prompt='Your name', help='The person to greet.') def hello(count, name): \"\"\"Simple program that greets NAME for a total of COUNT times.\"\"\" for x in range(count): click.echo(f\"Hello {name}!\") if __name__ == '__main__': hello() ä»ä¸Šé¢çš„ä¾‹å­å¯ä»¥çœ‹åˆ°ï¼Œå°±ä»…ä»…çš„ä½¿ç”¨äº†ä¸‰ä¸ªè£…é¥°å™¨ï¼Œå°±æŠŠå‘½ä»¤è¡Œå®ç°äº†ï¼ˆå¹¶ä¸”è‡ªå¸¦â€“helpï¼‰ğŸ‘ğŸ» ","date":"2022å¹´03æœˆ08æ—¥","objectID":"/2022/03/%E7%AE%80%E6%B4%81%E6%98%93%E7%94%A8%E7%9A%84%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%AE%9E%E8%B7%B5/:2:4","tags":["Allure","Python"],"title":"ç®€æ´æ˜“ç”¨çš„å‘½ä»¤è¡Œå®è·µ","uri":"/2022/03/%E7%AE%80%E6%B4%81%E6%98%93%E7%94%A8%E7%9A%84%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%AE%9E%E8%B7%B5/"},{"categories":["Python"],"content":"ç®€å•çš„ä½¿ç”¨è¯´æ˜ @click.command()ï¼šç”¨æ¥å£°æ˜è¢«è£…é¥°çš„ç±»/æ–¹æ³•æ˜¯ä¸€ä¸ªå‘½ä»¤è¡Œ @click.option()ï¼šç»™å‘½ä»¤æ·»åŠ é€‰é¡¹ @click.option('--count', default=1, help='Number of greetings.') ä»¥ä¸Šé¢ä¸ºä¾‹ å‚æ•°1ï¼šå‘½ä»¤è¡Œé€‰é¡¹å defaultå‚æ•°ï¼šé»˜è®¤å€¼ helpï¼šå¸®åŠ©ä¿¡æ¯ promptï¼šæç¤ºä¿¡æ¯ï¼ˆåœ¨æ²¡æœ‰ä¼ é€’é€‰é¡¹çš„æ—¶å€™ï¼Œä¼šåœ¨æ§åˆ¶å°æç¤ºè¾“å…¥ï¼‰ å‡½æ•°æ¥æ”¶çš„å€¼å…·ä½“è§„åˆ™å¦‚ä¸‹ï¼š é€‰æ‹©åç§°çš„é¡ºåºï¼š å¦‚æœåç§°æ²¡æœ‰å‰ç¼€ï¼Œåˆ™å°†å…¶ç”¨ä½œPythonå‚æ•°åç§°ï¼Œè€Œä¸å°†å…¶è§†ä¸ºå‘½ä»¤è¡Œä¸Šçš„é€‰é¡¹åç§° @click.command() @click.option(\"-f\", \"--filename\", \"dest\") # åç§°ä¸º dest def echo(dest): print(f\"{dest=}\") 2. å¦‚æœè‡³å°‘æœ‰ä¸€ä¸ªåç§°ä»¥ä¸¤ä¸ªç ´æŠ˜å·ä¸ºå‰ç¼€ï¼Œåˆ™å°†ç»™å®šçš„ç¬¬ä¸€ä¸ªåç§°ç”¨ä½œåç§° @click.command() @click.option(\"--f\", \"--foo-bar\") # åç§°ä¸ºf def echo(f): print(f\"{f=}\") 3. å¦åˆ™ä½¿ç”¨ä»¥ä¸€ä¸ªç ´æŠ˜å·ä¸ºå‰ç¼€çš„åå­— @click.command() @click.option(\"-f\", \"-fb\") # åç§°ä¸º f def echo(f): print(f\"{f=}\") ","date":"2022å¹´03æœˆ08æ—¥","objectID":"/2022/03/%E7%AE%80%E6%B4%81%E6%98%93%E7%94%A8%E7%9A%84%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%AE%9E%E8%B7%B5/:2:5","tags":["Allure","Python"],"title":"ç®€æ´æ˜“ç”¨çš„å‘½ä»¤è¡Œå®è·µ","uri":"/2022/03/%E7%AE%80%E6%B4%81%E6%98%93%E7%94%A8%E7%9A%84%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%AE%9E%E8%B7%B5/"},{"categories":["Python"],"content":"è§£å†³é—®é¢˜ ","date":"2022å¹´03æœˆ08æ—¥","objectID":"/2022/03/%E7%AE%80%E6%B4%81%E6%98%93%E7%94%A8%E7%9A%84%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%AE%9E%E8%B7%B5/:3:0","tags":["Allure","Python"],"title":"ç®€æ´æ˜“ç”¨çš„å‘½ä»¤è¡Œå®è·µ","uri":"/2022/03/%E7%AE%80%E6%B4%81%E6%98%93%E7%94%A8%E7%9A%84%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%AE%9E%E8%B7%B5/"},{"categories":["Python"],"content":"è§£å†³æ­¥éª¤ æ¸…é™¤æ‰ä¹‹å‰ä½¿ç”¨getoptç¼–å†™å‘½ä»¤è¡Œæ–¹å¼çš„ä»£ç  å®šä¹‰ä¸€ä¸ªå‡½æ•° def run(infile, outfile):ï¼Œç”¨æ¥å¤„ç†å‘½ä»¤è¡Œï¼ˆä¹Ÿå¯ä»¥ç›´æ¥åœ¨åŸæœ‰ç±»ä¸Šä½¿ç”¨ï¼Œä½†æ˜¯ä¸å»ºè®®ä½¿ç”¨ï¼Œä¼šç ´ååŸæœ‰é€»è¾‘ï¼‰ åœ¨ __main__ä¸­è°ƒç”¨å‡½æ•° run() åœ¨æ§åˆ¶å°ä½¿ç”¨å‘½ä»¤è¡Œæ‰§è¡Œç¨‹åº python3 als.py -i article.csv ","date":"2022å¹´03æœˆ08æ—¥","objectID":"/2022/03/%E7%AE%80%E6%B4%81%E6%98%93%E7%94%A8%E7%9A%84%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%AE%9E%E8%B7%B5/:3:1","tags":["Allure","Python"],"title":"ç®€æ´æ˜“ç”¨çš„å‘½ä»¤è¡Œå®è·µ","uri":"/2022/03/%E7%AE%80%E6%B4%81%E6%98%93%E7%94%A8%E7%9A%84%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%AE%9E%E8%B7%B5/"},{"categories":["Python"],"content":"ä»£ç å±•ç¤º @click.command() @click.option(\"-i\", \"--in\", \"infile\", prompt=\"è¾“å…¥æ–‡ä»¶\", help=\"è¾“å…¥æ–‡ä»¶ï¼ˆä»¥.csvä¸ºåç¼€ï¼‰\") @click.option(\"-o\", \"--out\", \"outfile\", default=None, help=\"è¾“å‡ºæ–‡ä»¶ï¼ˆé»˜è®¤ä¸ºå½“å‰æ—¶é—´æˆ³ï¼Œä»¥.csvä¸ºåç¼€ï¼‰\") def run(infile, outfile): if infile.endswith(\".csv\") and (outfile is None or outfile.endswith(\".csv\")): ALSRun(infile=infile, outfile=outfile) else: print(\"å‚æ•°æ ¼å¼æœ‰è¯¯ï¼ï¼ï¼\") class ALSRun(object): def __init__(self, infile, outfile): ... if __name__ == '__main__': run() ","date":"2022å¹´03æœˆ08æ—¥","objectID":"/2022/03/%E7%AE%80%E6%B4%81%E6%98%93%E7%94%A8%E7%9A%84%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%AE%9E%E8%B7%B5/:3:2","tags":["Allure","Python"],"title":"ç®€æ´æ˜“ç”¨çš„å‘½ä»¤è¡Œå®è·µ","uri":"/2022/03/%E7%AE%80%E6%B4%81%E6%98%93%E7%94%A8%E7%9A%84%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%AE%9E%E8%B7%B5/"},{"categories":["Python"],"content":"ç»“æœå±•ç¤º $ python3 100als.py --help Usage: als.py [OPTIONS] Options: -i, --in TEXT è¾“å…¥æ–‡ä»¶ï¼ˆä»¥.csvä¸ºåç¼€ï¼‰ -o, --out TEXT è¾“å‡ºæ–‡ä»¶ï¼ˆé»˜è®¤ä¸ºå½“å‰æ—¶é—´æˆ³ï¼Œä»¥.csvä¸ºåç¼€ï¼‰ --help Show this message and exit. $ python3 100als.py -i article.csv è¾“å…¥æ–‡ä»¶ï¼šarticle.csv è¾“å‡ºæ–‡ä»¶ï¼š20220308175307.csv ==========å¼€å§‹æ‰§è¡ŒALS========== ... ","date":"2022å¹´03æœˆ08æ—¥","objectID":"/2022/03/%E7%AE%80%E6%B4%81%E6%98%93%E7%94%A8%E7%9A%84%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%AE%9E%E8%B7%B5/:3:3","tags":["Allure","Python"],"title":"ç®€æ´æ˜“ç”¨çš„å‘½ä»¤è¡Œå®è·µ","uri":"/2022/03/%E7%AE%80%E6%B4%81%E6%98%93%E7%94%A8%E7%9A%84%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%AE%9E%E8%B7%B5/"},{"categories":["Python"],"content":"ä¼˜ç‚¹è¯´æ˜ ç®€æ´ã€æ˜“ç”¨ã€æ˜“è¯» ä¸æ±¡æŸ“åŸé€»è¾‘ åŠŸèƒ½å¼ºå¤§ã€æ‹“å±•æ€§å¼º ","date":"2022å¹´03æœˆ08æ—¥","objectID":"/2022/03/%E7%AE%80%E6%B4%81%E6%98%93%E7%94%A8%E7%9A%84%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%AE%9E%E8%B7%B5/:3:4","tags":["Allure","Python"],"title":"ç®€æ´æ˜“ç”¨çš„å‘½ä»¤è¡Œå®è·µ","uri":"/2022/03/%E7%AE%80%E6%B4%81%E6%98%93%E7%94%A8%E7%9A%84%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%AE%9E%E8%B7%B5/"},{"categories":["Python"],"content":"æ€»ç»“ ","date":"2022å¹´03æœˆ08æ—¥","objectID":"/2022/03/%E7%AE%80%E6%B4%81%E6%98%93%E7%94%A8%E7%9A%84%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%AE%9E%E8%B7%B5/:3:5","tags":["Allure","Python"],"title":"ç®€æ´æ˜“ç”¨çš„å‘½ä»¤è¡Œå®è·µ","uri":"/2022/03/%E7%AE%80%E6%B4%81%E6%98%93%E7%94%A8%E7%9A%84%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%AE%9E%E8%B7%B5/"},{"categories":["Python"],"content":"é™„ä»¶ å…·ä½“Clickç”¨æ³•è¯·å‚è€ƒå®˜æ–¹æ–‡æ¡£ã€Œé“¾æ¥ã€ ","date":"2022å¹´03æœˆ08æ—¥","objectID":"/2022/03/%E7%AE%80%E6%B4%81%E6%98%93%E7%94%A8%E7%9A%84%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%AE%9E%E8%B7%B5/:4:0","tags":["Allure","Python"],"title":"ç®€æ´æ˜“ç”¨çš„å‘½ä»¤è¡Œå®è·µ","uri":"/2022/03/%E7%AE%80%E6%B4%81%E6%98%93%E7%94%A8%E7%9A%84%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%AE%9E%E8%B7%B5/"},{"categories":["Python"],"content":"ä¸€ã€ç»“æ„æ¨¡å¼åŒ¹é…ï¼ˆæ–°å¢PEP 635ï¼‰ å¦‚æœä½ ç†Ÿæ‚‰åˆ«çš„è¯­è¨€ï¼Œä½ è‚¯å®šçŸ¥é“ switch-\u003ecaseè¯­å¥ï¼Œpython3.10ä¹‹å‰çš„ç‰ˆæœ¬æ˜¯ä¸€ç›´æ²¡æœ‰è¿™ç§è¯­æ³•çš„ï¼Œä½†æ˜¯è¿™ä¸€æ¬¡çš„æ›´æ–°ä¸­3.10+ç‰ˆæœ¬ï¼ˆ20211004ï¼‰å¼€å§‹æ”¯æŒè¿™ç§ç»“æ„æ¨¡å¼åŒ¹é…çš„è¯­æ³•ä¹¦å†™äº†â€“match-\u003ecase ","date":"2021å¹´11æœˆ10æ—¥","objectID":"/2021/11/python3.10%E6%96%B0%E7%89%B9%E6%80%A7%E5%88%9D%E4%BD%93%E9%AA%8C/:1:0","tags":["Python"],"title":"Python3.10æ–°ç‰¹æ€§åˆä½“éªŒ","uri":"/2021/11/python3.10%E6%96%B0%E7%89%B9%E6%80%A7%E5%88%9D%E4%BD%93%E9%AA%8C/"},{"categories":["Python"],"content":"1ã€åŸºæœ¬è¯­æ³• match expression: # æ¡ä»¶ï¼Œå¯ä¸ºä»»æ„è¡¨è¾¾å¼ã€å˜é‡ case pattern_1: # æ¨¡å¼ï¼Œå¾…åŒ¹é…çš„æ¡ä»¶1 ... # éœ€è¦æ‰§è¡Œçš„ä»£ç å— case pattern_2: # æ¨¡å¼ï¼Œå¾…åŒ¹é…çš„æ¡ä»¶2 ... # éœ€è¦æ‰§è¡Œçš„ä»£ç å— case _: # æ¨¡å¼ï¼Œè¡¨ç¤ºdefault ... # éœ€è¦æ‰§è¡Œçš„ä»£ç å— ","date":"2021å¹´11æœˆ10æ—¥","objectID":"/2021/11/python3.10%E6%96%B0%E7%89%B9%E6%80%A7%E5%88%9D%E4%BD%93%E9%AA%8C/:1:1","tags":["Python"],"title":"Python3.10æ–°ç‰¹æ€§åˆä½“éªŒ","uri":"/2021/11/python3.10%E6%96%B0%E7%89%B9%E6%80%A7%E5%88%9D%E4%BD%93%E9%AA%8C/"},{"categories":["Python"],"content":"2ã€æ¨¡å¼ 1. asæ¨¡å¼(AS) def simplify_expr(tokens): match tokens: case [('(' | '[') as l, *expr, (')' | ']') as r] if (l + r) in ('()', '[]'): # ç¬¬ä¸€ä¸ªå‚æ•°å¾—ä¸º('(' | '['),å–åˆ«åä¸ºl # æœ€åä¸€ä¸ªå‚æ•°å¾—ä¸º('(' | '['),å–åˆ«åä¸ºr # å¹¶ä¸”éœ€åˆ¤æ–­(l + r) in ('()', '[]')ä¸ºTrueæ‰ä¼šè¿›å…¥æ­¤ä»£ç å—æ‰§è¡Œ print(expr) case [0, ('+' | '-') as op, right]: # ç¬¬ä¸€ä¸ªå‚æ•°å¿…é¡»ä¸º0 # ç¬¬äºŒä¸ªå‚æ•°å¾—ä¸º('+' | '-'),å–åˆ«åä¸ºop # ç¬¬ä¸‰ä¸ªå‚æ•°ä¸ºä»»æ„æ•° # åºåˆ—çš„é•¿åº¦å¿…é¡»ä¸º3ä¸ª print(op, right) case [(int() | float()) as value]: # åºåˆ—çš„é•¿åº¦åªèƒ½æœ‰1ä¸ª # å¹¶ä¸”ï¼Œç±»å‹åªèƒ½æ˜¯intæˆ–è€…float print(value) case _: # åŒ¹é…ä¸åˆ°åˆ™èµ°è¿™é‡Œ print(\"æœªåŒ¹é…åˆ°\") simplify_expr(['(', \"aaa\", \"bbb\", \")\"]) # ['aaa', 'bbb'] simplify_expr(['[', \"aaa\", \"bbb\", \"]\"]) # ['aaa', 'bbb'] simplify_expr(['[', \"aaa\", \"bbb\", \")\"]) # æœªåŒ¹é…åˆ° simplify_expr(['[', \"]\"]) # [] simplify_expr(['bbb', '[', \"]\"]) # æœªåŒ¹é…åˆ° simplify_expr([0, \"+\", 3]) # + 3 simplify_expr([0, \"-\", 3]) # - 3 simplify_expr([0, \"-\", 3, 34]) # æœªåŒ¹é…åˆ° simplify_expr([1]) # 1 simplify_expr([1.0]) # 1.0 simplify_expr([1.0, 1]) # æœªåŒ¹é…åˆ° simplify_expr([\"aaaa\"]) # æœªåŒ¹é…åˆ° 2. oræ¨¡å¼(|) def demo(code): match code: case 200: print(\"200æˆåŠŸäº†\") case 400 | 404: print(\"å‡ºé—®é¢˜äº†\") case (1002 | 1006, 200): # æŠŠä¸¤ä¸ªå€¼ç»„ç»‡èµ·æ¥ï¼ˆç»„ç»‡æ¨¡å¼ï¼‰ print(\"æ¥å£è¯·æ±‚æˆåŠŸ\") case _: print(\"åŒ¹é…ä¸åˆ°\") demo(200) # 200æˆåŠŸäº† demo(400) # å‡ºé—®é¢˜äº† demo(404) # å‡ºé—®é¢˜äº† demo((1006, 200)) # æ¥å£è¯·æ±‚æˆåŠŸ demo(502) # åŒ¹é…ä¸åˆ° 3. æ–‡å­—æ¨¡å¼(Literal) def simplify(expr): match expr: case ('+', 0, x): return x case ('+' | '-', x, 0): return x case ('and', True, x): return x case ('and', False, x): return False case ('or', False, x): return x case ('or', True, x): return True case ('not', ('not', x)): return x return expr print(simplify(('+', 0, 12))) # 12 print(simplify(('+', 13, 0))) # 13 print(simplify(('-', 13, 0))) # 13 print(simplify(('and', True, 0))) # 0 print(simplify(('and', False, 0))) # False print(simplify(('or', False, 1))) # 1 print(simplify(('or', True, 1))) # True print(simplify(('not', ('not', 23)))) # 23 4. æ•è·æ¨¡å¼(Capture) def average(*args): match args: case [x, y]: return (x + y) / 2 case [x]: return x case []: return 0 case [x, y, z]: return x + y + z case a: return sum(a) / len(a) print(average(1, 2, 3, 4)) # 2.5 ==\u003e a ==\u003e sum(a) / len(a)==\u003e (1+2+3+4)/4 = 2.5 print(average(1, 2)) # 1.5 ==\u003e [x, y] ==\u003e (x+y)/2 ==\u003e (1+2)/2=1.5 print(average(1)) # 1 ==\u003e [x] ==\u003e x=1 print(average()) # 0 ==\u003e [] ==\u003e 0 # å¦‚æœä¼ é€’çš„æ˜¯ä¸‰ä¸ªå…ƒç´ ï¼Œåˆ™ä¼šæŒ‰ç…§é•¿åº¦è¿›è¡ŒåŒ¹é…ï¼Œè·Ÿä¼ å­—å…¸ç±»å‹ä¸åŒ print(average(1, 2, 3)) # 6 ==\u003e [x, y, z] ==\u003e 1+2+3=6 5. é€šé…ç¬¦æ¨¡å¼(Wildcard) _ï¼šåœ¨å‰é¢å°±è¡¨ç¤ºä»»æ„å­—ç¬¦ case __ï¼šè¿™é‡Œçš„__åœ¨æœ«å°¾ï¼Œè¡¨ç¤ºdefaulté»˜è®¤ def is_closed(sequence): match sequence: case [_]: # åªæœ‰ä¸€ä¸ªå…ƒç´ çš„åºåˆ— return True case [start, *_, end]: # è‡³å°‘å«æœ‰ä¸¤ä¸ªå…ƒç´ çš„åºåˆ— return start == end case _: # åŒ¹é…ä»»æ„ç±»å‹ return False print(is_closed(1)) # False ==\u003e _ ==\u003e False print(is_closed([1])) # True ==\u003e [_] ==\u003e True print(is_closed([1, 2, 3])) # False ==\u003e [start, *_, end] ==\u003e\u003e1 ==3 ==\u003eFalse 6. å€¼æ¨¡å¼(value) class HttpStatus(object): OK = 200 MOVED_PERMANENTLY = 301 NOT_FOUND = 404 class MimeType(object): TEXT = \"text\" APPL_ZIP = \"appl_zip\" def handle_reply(reply): match reply: case (HttpStatus.OK, MimeType.TEXT, body): print(f\"è¯·æ±‚æˆåŠŸï¼Œç±»å‹æ˜¯TEXT,body==\u003e{body}\") case (HttpStatus.OK, MimeType.APPL_ZIP, body): print(f\"è¯·æ±‚æˆåŠŸï¼Œç±»å‹æ˜¯APPL_ZIP,body==\u003e{body}\") case (HttpStatus.MOVED_PERMANENTLY, new_URI): print(f\"301äº†ï¼Œèµ¶ç´§æ£€æŸ¥ä¸‹URI==\u003e{new_URI}\") case (HttpStatus.NOT_FOUND): print(\"ç½‘ç«™æŒ‚äº†ã€‚ã€‚ã€‚\") handle_reply([200, \"text\", \"dddddd\"]) # è¯·æ±‚æˆåŠŸï¼Œç±»å‹æ˜¯TEXT,body==\u003edddddd handle_reply([200, \"appl_zip\", \"dddddd\"]) # è¯·æ±‚æˆåŠŸï¼Œç±»å‹æ˜¯APPL_ZIP,body==\u003edddddd handle_reply([200, \"appl_zip\", \"dddddd\"]) # è¯·æ±‚æˆåŠŸï¼Œç±»å‹æ˜¯APPL_ZIP,body==\u003edddddd handle_reply([301, \"sip:smith@zte.com.cn\"]) # 301äº†ï¼Œèµ¶ç´§æ£€æŸ¥ä¸‹URI==\u003esip:smith@zte.com.cn handle_reply(404) # ç½‘ç«™æŒ‚äº†ã€‚ã€‚ã€‚ 7. ç»„ç»‡æ¨¡å¼(Group) ä½¿ç”¨oræ¨¡å¼å®ç° def demo(code): match code: case 200: print(\"200æˆåŠŸäº†\") case 400 | 404: print(\"å‡ºé—®é¢˜äº†\") case (1002 | 1006, 200): # æŠŠä¸¤ä¸ªå€¼ç»„ç»‡èµ·æ¥ï¼ˆç»„ç»‡æ¨¡å¼ï¼‰ print(\"æ¥å£è¯·æ±‚æˆåŠŸ\") case _: print(\"åŒ¹é…ä¸åˆ°\") demo((1006, 200)) # æ¥å£è¯·æ±‚æˆåŠŸ 8. åºåˆ—æ¨¡å¼(Sequence) def is_closed(sequence): match sequence: case [_]: # åªæœ‰ä¸€ä¸ªå…ƒç´ çš„åºåˆ— return True case [start, *_, end]: # è‡³å°‘å«æœ‰ä¸¤ä¸ªå…ƒç´ çš„åºåˆ— return start == end case _: # åŒ¹é…ä»»æ„ç±»å‹ return False print(is_closed(1)) # False ==\u003e _ ==\u003e False print(is_closed([1])) # True ==\u003e [_] ==\u003e True print(is_closed([1, 2, 3])) #","date":"2021å¹´11æœˆ10æ—¥","objectID":"/2021/11/python3.10%E6%96%B0%E7%89%B9%E6%80%A7%E5%88%9D%E4%BD%93%E9%AA%8C/:1:2","tags":["Python"],"title":"Python3.10æ–°ç‰¹æ€§åˆä½“éªŒ","uri":"/2021/11/python3.10%E6%96%B0%E7%89%B9%E6%80%A7%E5%88%9D%E4%BD%93%E9%AA%8C/"},{"categories":["Python"],"content":"3ã€åŒ¹é…è¦æ³¨æ„çš„é¡ºåº å½“ match çš„å¯¹è±¡æ˜¯ä¸€ä¸ª list æˆ–è€… tuple çš„æ—¶å€™ï¼Œéœ€è¦é•¿åº¦å’Œå…ƒç´ å€¼éƒ½èƒ½åŒ¹é…ï¼Œæ‰èƒ½å‘½ä¸­ï¼Œåœ¨ æ•è·æ¨¡å¼ä¸­ä½“ç°çš„æœ‰ã€‚ å½“ match çš„å¯¹è±¡æ˜¯ä¸€ä¸ª dict çš„æ—¶å€™ï¼Œè§„åˆ™å´æœ‰æ‰€ä¸åŒï¼Œåªè¦ case è¡¨è¾¾å¼ä¸­çš„ key åœ¨æ‰€ match çš„å¯¹è±¡ä¸­æœ‰å­˜åœ¨ï¼Œå³å¯å‘½ä¸­ï¼Œåœ¨ æ˜ å°„æ¨¡å¼ä¸­ä½“ç°çš„æœ‰ã€‚ è€Œå½“ match çš„å¯¹è±¡æ˜¯ç±»å¯¹è±¡æ—¶ï¼ŒåŒ¹é…çš„è§„åˆ™æ˜¯ï¼Œè·Ÿ dict æœ‰ç‚¹ç±»ä¼¼ï¼Œåªè¦å¯¹è±¡ç±»å‹å’Œå¯¹è±¡çš„å±æ€§æœ‰æ»¡è¶³ case çš„æ¡ä»¶ï¼Œå°±èƒ½å‘½ä¸­ï¼Œåœ¨ ç±»æ¨¡å¼ä¸­ä½“ç°çš„æœ‰ã€‚ ","date":"2021å¹´11æœˆ10æ—¥","objectID":"/2021/11/python3.10%E6%96%B0%E7%89%B9%E6%80%A7%E5%88%9D%E4%BD%93%E9%AA%8C/:1:3","tags":["Python"],"title":"Python3.10æ–°ç‰¹æ€§åˆä½“éªŒ","uri":"/2021/11/python3.10%E6%96%B0%E7%89%B9%E6%80%A7%E5%88%9D%E4%BD%93%E9%AA%8C/"},{"categories":["Python"],"content":"äºŒã€unionç±»å‹å…è®¸X | Y ï¼ˆPEP 604ï¼‰ æ–°çš„è¯­æ³•unionæ¥å—å‡½æ•°,å˜é‡å’Œå‚æ•°æ³¨é‡Šã€‚ ","date":"2021å¹´11æœˆ10æ—¥","objectID":"/2021/11/python3.10%E6%96%B0%E7%89%B9%E6%80%A7%E5%88%9D%E4%BD%93%E9%AA%8C/:2:0","tags":["Python"],"title":"Python3.10æ–°ç‰¹æ€§åˆä½“éªŒ","uri":"/2021/11/python3.10%E6%96%B0%E7%89%B9%E6%80%A7%E5%88%9D%E4%BD%93%E9%AA%8C/"},{"categories":["Python"],"content":"1ã€ç®€å•çš„è¯­æ³• # before from typing import List, Union, Optional def f(list: List[Union[int, str]], param: Optional[int]) -\u003e Union[float, str]: pass # now æ›´åŠ ç®€æ´äº† from typing import List def f(list: List[int | str], param: int | None) -\u003e float | str: pass ","date":"2021å¹´11æœˆ10æ—¥","objectID":"/2021/11/python3.10%E6%96%B0%E7%89%B9%E6%80%A7%E5%88%9D%E4%BD%93%E9%AA%8C/:2:1","tags":["Python"],"title":"Python3.10æ–°ç‰¹æ€§åˆä½“éªŒ","uri":"/2021/11/python3.10%E6%96%B0%E7%89%B9%E6%80%A7%E5%88%9D%E4%BD%93%E9%AA%8C/"},{"categories":["Python"],"content":"2ã€typing.Union å’Œ | æ˜¯ç­‰ä»·çš„ int | str == typing.Union[int, str] # True ","date":"2021å¹´11æœˆ10æ—¥","objectID":"/2021/11/python3.10%E6%96%B0%E7%89%B9%E6%80%A7%E5%88%9D%E4%BD%93%E9%AA%8C/:2:2","tags":["Python"],"title":"Python3.10æ–°ç‰¹æ€§åˆä½“éªŒ","uri":"/2021/11/python3.10%E6%96%B0%E7%89%B9%E6%80%A7%E5%88%9D%E4%BD%93%E9%AA%8C/"},{"categories":["Python"],"content":"3ã€é¡ºåºæ˜¯æ²¡æœ‰è¦æ±‚çš„ (int | str) == (str | int) # True (int | str | float) == typing.Union[str, float, int] # True ","date":"2021å¹´11æœˆ10æ—¥","objectID":"/2021/11/python3.10%E6%96%B0%E7%89%B9%E6%80%A7%E5%88%9D%E4%BD%93%E9%AA%8C/:2:3","tags":["Python"],"title":"Python3.10æ–°ç‰¹æ€§åˆä½“éªŒ","uri":"/2021/11/python3.10%E6%96%B0%E7%89%B9%E6%80%A7%E5%88%9D%E4%BD%93%E9%AA%8C/"},{"categories":["Python"],"content":"4ã€isinstanceå’Œissubclassæ”¯æŒ isinstance(5, int | str) # True isinstance(\"aaa\", int | str) # True isinstance(1.22, int | str) # False issubclass(bool, int | float) # True isinstance(None, int | None) # True isinstance(42, None | int) # True ","date":"2021å¹´11æœˆ10æ—¥","objectID":"/2021/11/python3.10%E6%96%B0%E7%89%B9%E6%80%A7%E5%88%9D%E4%BD%93%E9%AA%8C/:2:4","tags":["Python"],"title":"Python3.10æ–°ç‰¹æ€§åˆä½“éªŒ","uri":"/2021/11/python3.10%E6%96%B0%E7%89%B9%E6%80%A7%E5%88%9D%E4%BD%93%E9%AA%8C/"},{"categories":["Python"],"content":"ä¸‰ã€å¸¦åœ†æ‹¬å·çš„ä¸Šä¸‹æ–‡ç®¡ç†å™¨ å·²æ”¯æŒä½¿ç”¨å¤–å±‚åœ†æ‹¬å·æ¥ä½¿å¤šä¸ªä¸Šä¸‹æ–‡ç®¡ç†å™¨å¯ä»¥è¿ç»­å¤šè¡Œåœ°ä¹¦å†™ã€‚ è¿™å…è®¸å°†è¿‡é•¿çš„ä¸Šä¸‹æ–‡ç®¡ç†å™¨é›†èƒ½å¤Ÿä»¥ä¸ä¹‹å‰ import è¯­å¥ç±»ä¼¼çš„æ–¹å¼æ ¼å¼åŒ–ä¸ºå¤šè¡Œçš„å½¢å¼ã€‚ ä¸€ä¸‹å››ç§æ ¼å¼éƒ½æ˜¯æ”¯æŒçš„ # ä¹‹å‰çš„æ ¼å¼ä¸å½±å“ä½¿ç”¨ with open(\"readme.md\", 'r') as f: pass with (open(\"readme.md\", 'r') as f): pass with (open(\"readme.md\", 'r') as f1, open(\"readme.md\", 'r') as f2): pass with (open(\"readme.md\", 'r'), open(\"readme.md\", 'r') as f2): pass with (open(\"readme.md\", 'r'), open(\"readme.md\", 'r'), ): pass ","date":"2021å¹´11æœˆ10æ—¥","objectID":"/2021/11/python3.10%E6%96%B0%E7%89%B9%E6%80%A7%E5%88%9D%E4%BD%93%E9%AA%8C/:3:0","tags":["Python"],"title":"Python3.10æ–°ç‰¹æ€§åˆä½“éªŒ","uri":"/2021/11/python3.10%E6%96%B0%E7%89%B9%E6%80%A7%E5%88%9D%E4%BD%93%E9%AA%8C/"},{"categories":["Python"],"content":"ä¸€ã€getattrè§£æ ","date":"2021å¹´07æœˆ25æ—¥","objectID":"/2021/07/getattr%E5%92%8Cmethodcaller%E5%89%96%E6%9E%90/:0:0","tags":["Python"],"title":"Getattrå’Œmethodcallerå‰–æ","uri":"/2021/07/getattr%E5%92%8Cmethodcaller%E5%89%96%E6%9E%90/"},{"categories":["Python"],"content":"1.1 getattræ˜¯ä»€ä¹ˆï¼Ÿ getattr() å‡½æ•°è·å–æŸä¸ªç±»å®ä¾‹å¯¹è±¡ä¸­æŒ‡å®šå±æ€§çš„å€¼ ","date":"2021å¹´07æœˆ25æ—¥","objectID":"/2021/07/getattr%E5%92%8Cmethodcaller%E5%89%96%E6%9E%90/:1:0","tags":["Python"],"title":"Getattrå’Œmethodcallerå‰–æ","uri":"/2021/07/getattr%E5%92%8Cmethodcaller%E5%89%96%E6%9E%90/"},{"categories":["Python"],"content":"1.2 è¯­æ³•æ ¼å¼ getattr(obj, name[, default]) obj è¡¨ç¤ºæŒ‡å®šçš„ç±»å®ä¾‹å¯¹è±¡ name è¡¨ç¤ºæŒ‡å®šçš„å±æ€§å default æ˜¯å¯é€‰å‚æ•°ï¼Œç”¨äºè®¾å®šè¯¥å‡½æ•°çš„é»˜è®¤è¿”å›å€¼ å³å½“å‡½æ•°æŸ¥æ‰¾å¤±è´¥æ—¶ï¼Œå¦‚æœä¸æŒ‡å®š default å‚æ•°ï¼Œåˆ™ç¨‹åºå°†ç›´æ¥æŠ¥ AttributeError é”™è¯¯ åä¹‹è¯¥å‡½æ•°å°†è¿”å› default æŒ‡å®šçš„å€¼ã€‚ ","date":"2021å¹´07æœˆ25æ—¥","objectID":"/2021/07/getattr%E5%92%8Cmethodcaller%E5%89%96%E6%9E%90/:2:0","tags":["Python"],"title":"Getattrå’Œmethodcallerå‰–æ","uri":"/2021/07/getattr%E5%92%8Cmethodcaller%E5%89%96%E6%9E%90/"},{"categories":["Python"],"content":"1.3 ä½¿ç”¨ ","date":"2021å¹´07æœˆ25æ—¥","objectID":"/2021/07/getattr%E5%92%8Cmethodcaller%E5%89%96%E6%9E%90/:3:0","tags":["Python"],"title":"Getattrå’Œmethodcallerå‰–æ","uri":"/2021/07/getattr%E5%92%8Cmethodcaller%E5%89%96%E6%9E%90/"},{"categories":["Python"],"content":"1.3.1 æ„é€ ä¸€ä¸ªç±»æ–¹æ³• class KeyWord(object): driver = \"chromeé©±åŠ¨\" def openBrowser(self, browser): print(f\"openBrowser is running {browser}\") ","date":"2021å¹´07æœˆ25æ—¥","objectID":"/2021/07/getattr%E5%92%8Cmethodcaller%E5%89%96%E6%9E%90/:3:1","tags":["Python"],"title":"Getattrå’Œmethodcallerå‰–æ","uri":"/2021/07/getattr%E5%92%8Cmethodcaller%E5%89%96%E6%9E%90/"},{"categories":["Python"],"content":"1.3.2 è°ƒç”¨å­˜åœ¨çš„ç±»å±æ€§ kw = Keywork() driver = getattr(kw, \"driver\") print(driver) # ---------------------- chromeé©±åŠ¨ ","date":"2021å¹´07æœˆ25æ—¥","objectID":"/2021/07/getattr%E5%92%8Cmethodcaller%E5%89%96%E6%9E%90/:3:2","tags":["Python"],"title":"Getattrå’Œmethodcallerå‰–æ","uri":"/2021/07/getattr%E5%92%8Cmethodcaller%E5%89%96%E6%9E%90/"},{"categories":["Python"],"content":"1.3.3 è°ƒç”¨ä¸å­˜åœ¨çš„ç±»å±æ€§(ä¼šæŠ¥é”™) name = getattr(kw, \"name\") print(name) # ------------------- AttributeError: 'Keywork' object has no attribute 'name' ","date":"2021å¹´07æœˆ25æ—¥","objectID":"/2021/07/getattr%E5%92%8Cmethodcaller%E5%89%96%E6%9E%90/:3:3","tags":["Python"],"title":"Getattrå’Œmethodcallerå‰–æ","uri":"/2021/07/getattr%E5%92%8Cmethodcaller%E5%89%96%E6%9E%90/"},{"categories":["Python"],"content":"1.3.4 è°ƒç”¨ä¸å­˜åœ¨çš„ç±»å±æ€§(è®¾ç½®é»˜è®¤å€¼) name = getattr(kw, \"name\",\"Desire\") print(name) # ------------------- Desire ","date":"2021å¹´07æœˆ25æ—¥","objectID":"/2021/07/getattr%E5%92%8Cmethodcaller%E5%89%96%E6%9E%90/:3:4","tags":["Python"],"title":"Getattrå’Œmethodcallerå‰–æ","uri":"/2021/07/getattr%E5%92%8Cmethodcaller%E5%89%96%E6%9E%90/"},{"categories":["Python"],"content":"1.3.5 è°ƒç”¨ç±»æ–¹æ³• openBrowser = getattr(kw, \"openBrowser\") # è·å–ç±»æ–¹æ³• openBrowser(browser=\"Chrome\") # è°ƒç”¨ç±»æ–¹æ³• äºŒã€methodcallerè§£åˆ¨ ","date":"2021å¹´07æœˆ25æ—¥","objectID":"/2021/07/getattr%E5%92%8Cmethodcaller%E5%89%96%E6%9E%90/:3:5","tags":["Python"],"title":"Getattrå’Œmethodcallerå‰–æ","uri":"/2021/07/getattr%E5%92%8Cmethodcaller%E5%89%96%E6%9E%90/"},{"categories":["Python"],"content":"2.1 methodcaller æ˜¯ä»€ä¹ˆï¼Ÿ Pythonå†…éƒ¨æä¾›çš„ä¸€ä¸ªå¯ä»¥é€šè¿‡å­—ç¬¦ä¸²è°ƒç”¨ç±»æ–¹æ³•çš„ä¸€ä¸ªåŒ…ï¼Œåœ¨operatoråº“ä¸­ã€‚ ","date":"2021å¹´07æœˆ25æ—¥","objectID":"/2021/07/getattr%E5%92%8Cmethodcaller%E5%89%96%E6%9E%90/:4:0","tags":["Python"],"title":"Getattrå’Œmethodcallerå‰–æ","uri":"/2021/07/getattr%E5%92%8Cmethodcaller%E5%89%96%E6%9E%90/"},{"categories":["Python"],"content":"2.2 ä½¿ç”¨ ","date":"2021å¹´07æœˆ25æ—¥","objectID":"/2021/07/getattr%E5%92%8Cmethodcaller%E5%89%96%E6%9E%90/:5:0","tags":["Python"],"title":"Getattrå’Œmethodcallerå‰–æ","uri":"/2021/07/getattr%E5%92%8Cmethodcaller%E5%89%96%E6%9E%90/"},{"categories":["Python"],"content":"2.2.1 å¯¼åŒ… from operator import methodcaller ","date":"2021å¹´07æœˆ25æ—¥","objectID":"/2021/07/getattr%E5%92%8Cmethodcaller%E5%89%96%E6%9E%90/:5:1","tags":["Python"],"title":"Getattrå’Œmethodcallerå‰–æ","uri":"/2021/07/getattr%E5%92%8Cmethodcaller%E5%89%96%E6%9E%90/"},{"categories":["Python"],"content":"2.2.2 ä½¿ç”¨å­—ç¬¦ä¸²\"openBrowser\"æ‰§è¡Œå¯¹åº”çš„openBrowserç±»æ–¹æ³• method = methodcaller(\"openBrowser\", browser=\"Chrome\") keyword = KeyWord() method(keyword) ","date":"2021å¹´07æœˆ25æ—¥","objectID":"/2021/07/getattr%E5%92%8Cmethodcaller%E5%89%96%E6%9E%90/:5:2","tags":["Python"],"title":"Getattrå’Œmethodcallerå‰–æ","uri":"/2021/07/getattr%E5%92%8Cmethodcaller%E5%89%96%E6%9E%90/"},{"categories":["Python"],"content":"2.2.3 æ‰§è¡Œç»“æœ # -------------------------------- openBrowser is running Chrome ","date":"2021å¹´07æœˆ25æ—¥","objectID":"/2021/07/getattr%E5%92%8Cmethodcaller%E5%89%96%E6%9E%90/:5:3","tags":["Python"],"title":"Getattrå’Œmethodcallerå‰–æ","uri":"/2021/07/getattr%E5%92%8Cmethodcaller%E5%89%96%E6%9E%90/"},{"categories":["Python"],"content":"2.3 è§£åˆ¨ ","date":"2021å¹´07æœˆ25æ—¥","objectID":"/2021/07/getattr%E5%92%8Cmethodcaller%E5%89%96%E6%9E%90/:6:0","tags":["Python"],"title":"Getattrå’Œmethodcallerå‰–æ","uri":"/2021/07/getattr%E5%92%8Cmethodcaller%E5%89%96%E6%9E%90/"},{"categories":["Python"],"content":"2.3.1 æºç  def methodcaller(name, /, *args, **kwargs): def caller(obj): return getattr(obj, name)(*args, **kwargs) return caller ","date":"2021å¹´07æœˆ25æ—¥","objectID":"/2021/07/getattr%E5%92%8Cmethodcaller%E5%89%96%E6%9E%90/:6:1","tags":["Python"],"title":"Getattrå’Œmethodcallerå‰–æ","uri":"/2021/07/getattr%E5%92%8Cmethodcaller%E5%89%96%E6%9E%90/"},{"categories":["Python"],"content":"2.3.2 è§£è¯» é‡‡ç”¨äº†é—­åŒ…çš„å½¢å¼ è°ƒç”¨methodcallerå‡½æ•°æ—¶ï¼Œè¿”å›çš„æ˜¯methodcallerå†…éƒ¨çš„å‡½æ•° ä¹Ÿå°±æ˜¯è¯´è°ƒç”¨åè¿”å›çš„è¿˜æ˜¯ä¸€ä¸ªå‡½æ•° è°ƒç”¨methodcallerå‡½æ•°çš„è¿”å›å€¼ï¼ˆmethodï¼‰ï¼Œå…¶å®å°±æ˜¯caller(obj) method == callerï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡method(obj)æ‰§è¡Œmethodcallerå†…éƒ¨æ–¹æ³•callerä¸­çš„å‡½æ•°ä½“äº† callerå‡½æ•°æ“ä½œï¼šé€šè¿‡getattr() å‡½æ•°ä»æŒ‡å®šçš„å¯¹è±¡è¿”å›æŒ‡å®šå±æ€§çš„å€¼ï¼Œä»è€Œå®ç°äº†é€šè¿‡å­—ç¬¦ä¸²è°ƒç”¨ç±»æ–¹æ³• ä¸‰ã€æ¯”å¯¹æ€»ç»“ ä»ä¸Šé¢çš„methodcalleræºç å’Œè§£è¯»ä¸­å¯ä»¥çœ‹åˆ°ï¼Œmethodcalleråº•å±‚è¿˜æ˜¯ä½¿ç”¨çš„getattrï¼Œå¯¹äºå­—ç¬¦ä¸²è°ƒç”¨ç±»æ–¹æ³•ï¼Œè¿™ä¸¤ç§æ–¹å¼éƒ½æ˜¯å¯è¡Œçš„ï¼Œè‡ªè¡Œé€‰æ‹©ä½¿ç”¨ã€‚ ","date":"2021å¹´07æœˆ25æ—¥","objectID":"/2021/07/getattr%E5%92%8Cmethodcaller%E5%89%96%E6%9E%90/:6:2","tags":["Python"],"title":"Getattrå’Œmethodcallerå‰–æ","uri":"/2021/07/getattr%E5%92%8Cmethodcaller%E5%89%96%E6%9E%90/"},{"categories":["æµ‹è¯•","Python"],"content":"AllureæŠ¥å‘Šè¶‹åŠ¿å›¾æœ¬åœ°æ˜¾ç¤º","date":"2021å¹´05æœˆ12æ—¥","objectID":"/2021/05/allure%E6%8A%A5%E5%91%8A%E8%B6%8B%E5%8A%BF%E5%9B%BE%E6%9C%AC%E5%9C%B0%E6%98%BE%E7%A4%BA/","tags":["Allure","Python"],"title":"AllureæŠ¥å‘Šè¶‹åŠ¿å›¾æœ¬åœ°æ˜¾ç¤º","uri":"/2021/05/allure%E6%8A%A5%E5%91%8A%E8%B6%8B%E5%8A%BF%E5%9B%BE%E6%9C%AC%E5%9C%B0%E6%98%BE%E7%A4%BA/"},{"categories":["æµ‹è¯•","Python"],"content":"ä¼—æ‰€å‘¨çŸ¥ï¼Œallureè¶‹åŠ¿å›¾åœ¨æœ¬åœ°è¿è¡Œçš„æ—¶å€™ï¼Œæ€»æ˜¯æ˜¾ç¤ºçš„ç©ºç™½ï¼Œä½†ä¸Jenkinsé›†æˆåï¼Œç”Ÿæˆçš„æŠ¥å‘Šå´æ˜¾ç¤ºäº†æ•´ä¸ªè¶‹åŠ¿ã€‚ å¦‚æœä¸ä¸Jenkinsé›†æˆå°±çœŸçš„æ²¡åŠæ³•å±•ç¤ºè¶‹åŠ¿å›¾å—ï¼Ÿ ç­”æ¡ˆæ˜¯NOï¼Œæ²¡æœ‰è¶‹åŠ¿å›¾æˆ‘ä»¬å°±è‡ªå·±å†™ğŸ‘€ ","date":"2021å¹´05æœˆ12æ—¥","objectID":"/2021/05/allure%E6%8A%A5%E5%91%8A%E8%B6%8B%E5%8A%BF%E5%9B%BE%E6%9C%AC%E5%9C%B0%E6%98%BE%E7%A4%BA/:0:0","tags":["Allure","Python"],"title":"AllureæŠ¥å‘Šè¶‹åŠ¿å›¾æœ¬åœ°æ˜¾ç¤º","uri":"/2021/05/allure%E6%8A%A5%E5%91%8A%E8%B6%8B%E5%8A%BF%E5%9B%BE%E6%9C%AC%E5%9C%B0%E6%98%BE%E7%A4%BA/"},{"categories":["æµ‹è¯•","Python"],"content":"ä¸€ã€é¦–å…ˆçœ‹ä¸‹Jenkinsé›†æˆallureå±•ç¤ºçš„è¶‹åŠ¿å›¾æ˜¯ä»€ä¹ˆæ ·å­çš„ å±•ç¤ºäº†æ¯æ¬¡è¿è¡Œçš„ç»“æœ å¯¹åº”æ„å»ºçš„æ¬¡æ•° ç‚¹å‡»å¯ä»¥è·³è½¬åˆ°å¯¹åº”çš„æ„å»ºç»“æœæŠ¥å‘Š æ•´ä½“è¶‹åŠ¿ä¸€ç›®äº†ç„¶ ","date":"2021å¹´05æœˆ12æ—¥","objectID":"/2021/05/allure%E6%8A%A5%E5%91%8A%E8%B6%8B%E5%8A%BF%E5%9B%BE%E6%9C%AC%E5%9C%B0%E6%98%BE%E7%A4%BA/:0:1","tags":["Allure","Python"],"title":"AllureæŠ¥å‘Šè¶‹åŠ¿å›¾æœ¬åœ°æ˜¾ç¤º","uri":"/2021/05/allure%E6%8A%A5%E5%91%8A%E8%B6%8B%E5%8A%BF%E5%9B%BE%E6%9C%AC%E5%9C%B0%E6%98%BE%E7%A4%BA/"},{"categories":["æµ‹è¯•","Python"],"content":"äºŒã€ç ”ç©¶Jenkinsç”Ÿæˆçš„allureæŠ¥å‘Šæœ‰ä»€ä¹ˆè§„å¾‹ 1ã€æ‰“å¼€å®¶ç›®å½•ä¸­çš„ .jenkins/jobs/test (testæ˜¯Jenkinsä¸Šçš„ä»»åŠ¡åç§°) 2ã€buildsæ„å»ºå†å²éƒ½åœ¨æ­¤æ–‡ä»¶å¤¹ä¸­ 3ã€è¿›å»æ¯æ¬¡æ„å»ºçš„æ–‡ä»¶å¤¹å³å¯çœ‹åˆ°æ¯æ¬¡çš„æ„å»ºç»“æœ 4ã€archiveæ–‡ä»¶å¤¹å­˜æ”¾çš„å°±æ˜¯æ¯æ¬¡ç”Ÿæˆçš„allureæŠ¥å‘Šå‹ç¼©åŒ… 5ã€è§£å‹åï¼Œæ‰¾åˆ° history-trend.jsonè¿™ä¸ªjsoné‡Œé¢å­˜æ”¾çš„å°±æ˜¯æ¯æ¬¡çš„æ„å»ºç»“æœï¼Œçœ‹åå­—å°±èƒ½å¾—çŸ¥ å†å²è¶‹åŠ¿ 6ã€åˆ†æ history-trend.jsonæ–‡ä»¶çš„è§„å¾‹ æ•´ä½“çš„æ–‡ä»¶é‡Œé¢æœ€å¤–å±‚æ˜¯ä¸€ä¸ª\"åˆ—è¡¨\" â€œåˆ—è¡¨\"é‡Œé¢åµŒå¥—çš„æ˜¯æ¯æ¬¡æ„å»ºçš„å†å²ï¼Œæ˜¯ä¸€ä¸ª\"å­—å…¸â€ æ¯ä¸€ä¸ª\"å­—å…¸\"é‡Œé¢åˆåŒ…å« buildOrderï¼šæ„å»ºæ¬¡æ•° reportUrlï¼šæŠ¥å‘Šçš„url reportNameï¼šæŠ¥å‘Šåç§° dataï¼šæŠ¥å‘Šæ‰§è¡Œç»“æœ 7ã€å†å›è¿‡å¤´çœ‹ä¸‹æˆ‘ä»¬è‡ªå·±ç”Ÿæˆçš„æŠ¥å‘Šä¸­çš„ history-trend.json 1ï¼‰ä½¿ç”¨å‘½ä»¤ allure generate test_allure_reports -o allure-reports --cleanå°†æŠ¥å‘Šè½¬æˆä¸€ä¸ªé™æ€å·¥ç¨‹ 2ï¼‰æ‰¾åˆ° history-trend.json 3ï¼‰history-trend.jsonæ–‡ä»¶é‡Œé¢æ•°æ®åªæœ‰ dataï¼Œå¹¶æ²¡æœ‰æ„å»ºæ¬¡æ•°ã€æŠ¥å‘Šurlå’ŒæŠ¥å‘Šåç§° 8ã€æ€»ç»“ æ¯æ¬¡ç”ŸæˆæŠ¥å‘Šçš„æ—¶å€™éœ€è¦åœ¨ history-trend.jsonæ–‡ä»¶æ›´æ–°ä¹‹å‰è¿è¡Œçš„ç»“æœ å¹¶ä¸”è¦åœ¨ history-trend.jsonæ–‡ä»¶ä¸­çš„æ¯æ¬¡ç”ŸæˆæŠ¥å‘Šçš„æ—¶å€™æ·»åŠ  æ„å»ºæ¬¡æ•°å’Œ æŠ¥å‘Šurl æ·»åŠ æ„å»ºæ¬¡æ•°æ˜¯ä¸ºäº†ä½¿å¾—è¶‹åŠ¿å›¾èƒ½å¤ŸæŒ‰ç…§é¡ºåºå±•ç¤º æ·»åŠ æŠ¥å‘Šurlæ˜¯ä¸ºäº†ä½¿å¾—ç‚¹å‡»è¶‹åŠ¿å›¾å¯ä»¥è¿›è¡Œè·³è½¬ï¼ŒæŸ¥çœ‹å†å²æŠ¥å‘Š ","date":"2021å¹´05æœˆ12æ—¥","objectID":"/2021/05/allure%E6%8A%A5%E5%91%8A%E8%B6%8B%E5%8A%BF%E5%9B%BE%E6%9C%AC%E5%9C%B0%E6%98%BE%E7%A4%BA/:0:2","tags":["Allure","Python"],"title":"AllureæŠ¥å‘Šè¶‹åŠ¿å›¾æœ¬åœ°æ˜¾ç¤º","uri":"/2021/05/allure%E6%8A%A5%E5%91%8A%E8%B6%8B%E5%8A%BF%E5%9B%BE%E6%9C%AC%E5%9C%B0%E6%98%BE%E7%A4%BA/"},{"categories":["æµ‹è¯•","Python"],"content":"ä¸‰ã€æ­£å¼å¼€å§‹æ”¹é€ æŠ¥å‘Š ç›®æ ‡ï¼š æ¯æ¬¡çš„æŠ¥å‘Šéƒ½è¦è¿›è¡Œå‚¨å­˜ history-trend.jsoné‡Œé¢çš„æ•°æ®æ¯æ¬¡éƒ½è¦æŠŠå†å²çš„æ•°æ®æ›´æ–°è¿›å» history-trend.jsonæ•°æ®é‡Œé¢çš„\"å­—å…¸\"éœ€è¦æ·»åŠ è‡³å°‘ä¸¤ä¸ª\"key\"ï¼šbuildOrderã€reportUrlã€reportNameï¼ˆè¿™ä¸ªå¯è¦å¯ä¸è¦ï¼‰ æ¯æ¬¡è¿è¡Œ buildOrderè¦å¢1ï¼ŒreportUrlæ˜¯æŠ¥å‘Šè¦è®¿é—®çš„url history-trend.jsonæ•°æ®è¦æ ¹æ®æ¯ä¸ª\"å­—å…¸\"ä¸­çš„ buildOrderä»å¤§åˆ°å°è¿›è¡Œæ’åº history-trend.jsonå†å²æ•°æ®éœ€è¦è¿›è¡Œå¤‡ä»½ï¼Œæ–¹ä¾¿æ–°ç”Ÿæˆçš„æŠ¥å‘Šè¿›è¡Œå†å²æ•°æ®å†™å…¥ ç¬¬ä¸€æ­¥ï¼šå¯¹æ¯æ¬¡ç”Ÿæˆçš„æŠ¥å‘Šè¿›è¡Œå‚¨å­˜ # ç”ŸæˆAllureæŠ¥å‘Š # BASEDIR æ˜¯é¡¹ç›®ä½ç½® # ALLURE_DIRæ˜¯allureæŠ¥å‘Šå­˜æ”¾ä½ç½® # ALLURE_PATH æ˜¯æ ¹æ®å½“å‰æ—¶é—´æˆ³ç”ŸæˆallureæŠ¥å‘Š ALLURE_PATH = os.path.join(ALLURE_DIR, str(int(time()))) command = f'pytest {BASEDIR} -s --alluredir={ALLURE_PATH}' os.system(command) # å¯¹ç”Ÿæˆçš„AllureæŠ¥å‘Šè¿›è¡Œè¿›ä¸€æ­¥æ¼”è¿›ï¼ˆç”Ÿæˆä¸€ä¸ªç›¸å¯¹ç‹¬ç«‹çš„æŠ¥å‘Šé™æ€å·¥ç¨‹ï¼‰ # ALLURE_PLUS_DIR æ˜¯å­˜æ”¾è¦ç”Ÿæˆçš„æŠ¥å‘Š # buildOrder æ˜¯è¡¨ç¤ºä»¥æ„å»ºæ¬¡æ•°ä¸ºæ–‡ä»¶å¤¹åç§° command = f\"allure generate {ALLURE_PATH} -o {os.path.join(ALLURE_PLUS_DIR,str(buildOrder))} --clean\" os.system(command) ç¬¬äºŒæ­¥ï¼šè·å–å†å²æ•°æ®å’Œæ„å»ºæ¬¡æ•° def get_dirname(): hostory_file = os.path.join(ALLURE_PLUS_DIR, \"history.json\") if os.path.exists(hostory_file): with open(hostory_file) as f: li = eval(f.read()) # æ ¹æ®æ„å»ºæ¬¡æ•°è¿›è¡Œæ’åºï¼Œä»å¤§åˆ°å° li.sort(key=lambda x: x['buildOrder'], reverse=True) # è¿”å›ä¸‹ä¸€æ¬¡çš„æ„å»ºæ¬¡æ•°ï¼Œæ‰€ä»¥è¦åœ¨æ’åºåçš„å†å²æ•°æ®ä¸­çš„buildOrder+1 return li[0][\"buildOrder\"]+1, li else: # é¦–æ¬¡è¿›è¡Œç”ŸæˆæŠ¥å‘Šï¼Œè‚¯å®šä¼šè¿›åˆ°è¿™ä¸€æ­¥ï¼Œå…ˆåˆ›å»ºhistory.json,ç„¶åè¿”å›æ„å»ºæ¬¡æ•°1ï¼ˆä»£è¡¨é¦–æ¬¡ï¼‰ with open(hostory_file, \"w\") as f: pass return 1, None ç¬¬äºŒæ­¥ï¼šæ›´æ–°å¤‡ä»½å†å²æ•°æ® history.jsonå’Œæ¯ä¸ªæŠ¥å‘Šä¸­çš„ history-trend.json def update_trend_data(dirname, old_data: list): \"\"\" dirnameï¼šæ„å»ºæ¬¡æ•° old_dataï¼šå¤‡ä»½çš„æ•°æ® update_trend_data(get_dirname()) \"\"\" WIDGETS_DIR = os.path.join(ALLURE_PLUS_DIR, f\"{str(dirname)}/widgets\") # è¯»å–æœ€æ–°ç”Ÿæˆçš„history-trend.jsonæ•°æ® with open(os.path.join(WIDGETS_DIR, \"history-trend.json\")) as f: data = f.read() new_data = eval(data) if old_data is not None: new_data[0][\"buildOrder\"] = old_data[0][\"buildOrder\"]+1 else: old_data = [] new_data[0][\"buildOrder\"] = 1 # ç»™æœ€æ–°ç”Ÿæˆçš„æ•°æ®æ·»åŠ reportUrl keyï¼ŒreportUrlè¦æ ¹æ®è‡ªå·±çš„å®é™…æƒ…å†µæ›´æ”¹ new_data[0][\"reportUrl\"] = f\"{allure_url}/{dirname}/index.html\" # æŠŠæœ€æ–°çš„æ•°æ®ï¼Œæ’å…¥åˆ°å¤‡ä»½æ•°æ®åˆ—è¡¨é¦–ä½ old_data.insert(0, new_data[0]) # æŠŠæ‰€æœ‰ç”Ÿæˆçš„æŠ¥å‘Šä¸­çš„history-trend.jsonéƒ½æ›´æ–°æˆæ–°å¤‡ä»½çš„æ•°æ®old_dataï¼Œè¿™æ ·çš„è¯ï¼Œç‚¹å‡»å†å²è¶‹åŠ¿å›¾å°±å¯ä»¥å®ç°æ–°è€æŠ¥å‘Šåˆ‡æ¢ for i in range(1, dirname+1): with open(os.path.join(ALLURE_PLUS_DIR, f\"{str(i)}/widgets/history-trend.json\"), \"w+\") as f: f.write(json.dumps(old_data)) # æŠŠæ•°æ®å¤‡ä»½åˆ°history.json hostory_file = os.path.join(ALLURE_PLUS_DIR, \"history.json\") with open(hostory_file, \"w+\") as f: f.write(json.dumps(old_data)) return old_data, new_data[0][\"reportUrl\"] ç¬¬ä¸‰æ­¥ï¼šè°ƒç”¨é¡ºåºï¼ˆéœ€è¦ä½¿ç”¨ os.systemè¿›è¡Œæ‰§è¡Œå‘½ä»¤è¡Œï¼‰ ALLURE_PATH = os.path.join(ALLURE_DIR, str(int(time()))) command = f'pytest {BASEDIR} -s --alluredir={ALLURE_PATH}' os.system(command) # å…ˆè°ƒç”¨get_dirname()ï¼Œè·å–åˆ°è¿™æ¬¡éœ€è¦æ„å»ºçš„æ¬¡æ•° buildOrder, old_data = get_dirname() # å†æ‰§è¡Œå‘½ä»¤è¡Œ command = f\"allure generate {ALLURE_PATH} -o {os.path.join(ALLURE_PLUS_DIR,str(buildOrder))} --clean\" os.system(command) # æ‰§è¡Œå®Œæ¯•åå†è°ƒç”¨update_trend_data() all_data,reportUrl = update_trend_data(buildOrder, old_data) ","date":"2021å¹´05æœˆ12æ—¥","objectID":"/2021/05/allure%E6%8A%A5%E5%91%8A%E8%B6%8B%E5%8A%BF%E5%9B%BE%E6%9C%AC%E5%9C%B0%E6%98%BE%E7%A4%BA/:0:3","tags":["Allure","Python"],"title":"AllureæŠ¥å‘Šè¶‹åŠ¿å›¾æœ¬åœ°æ˜¾ç¤º","uri":"/2021/05/allure%E6%8A%A5%E5%91%8A%E8%B6%8B%E5%8A%BF%E5%9B%BE%E6%9C%AC%E5%9C%B0%E6%98%BE%E7%A4%BA/"},{"categories":["æµ‹è¯•","Python"],"content":"å››ã€çœ‹ä¸‹å®ç°åçš„æ•ˆæœ è¶‹åŠ¿å›¾ æŠ¥å‘Šæˆªå›¾ ","date":"2021å¹´05æœˆ12æ—¥","objectID":"/2021/05/allure%E6%8A%A5%E5%91%8A%E8%B6%8B%E5%8A%BF%E5%9B%BE%E6%9C%AC%E5%9C%B0%E6%98%BE%E7%A4%BA/:0:4","tags":["Allure","Python"],"title":"AllureæŠ¥å‘Šè¶‹åŠ¿å›¾æœ¬åœ°æ˜¾ç¤º","uri":"/2021/05/allure%E6%8A%A5%E5%91%8A%E8%B6%8B%E5%8A%BF%E5%9B%BE%E6%9C%AC%E5%9C%B0%E6%98%BE%E7%A4%BA/"},{"categories":["æµ‹è¯•","Python"],"content":"äº”ã€è·ŸJenkinsè¿›è¡Œå¯¹æ¯”ï¼ˆä¸€æ¯›ä¸€æ ·ï¼‰ğŸ˜Š ","date":"2021å¹´05æœˆ12æ—¥","objectID":"/2021/05/allure%E6%8A%A5%E5%91%8A%E8%B6%8B%E5%8A%BF%E5%9B%BE%E6%9C%AC%E5%9C%B0%E6%98%BE%E7%A4%BA/:0:5","tags":["Allure","Python"],"title":"AllureæŠ¥å‘Šè¶‹åŠ¿å›¾æœ¬åœ°æ˜¾ç¤º","uri":"/2021/05/allure%E6%8A%A5%E5%91%8A%E8%B6%8B%E5%8A%BF%E5%9B%BE%E6%9C%AC%E5%9C%B0%E6%98%BE%E7%A4%BA/"},{"categories":null,"content":"å…³äºæˆ‘ ","date":"2022å¹´06æœˆ13æ—¥","objectID":"/about/:0:0","tags":null,"title":"About","uri":"/about/"}]